{"version":3,"sources":["webpack:///./resources/ts/libraries/snackbar.ts","webpack:///./resources/ts/libraries/http-client.ts","webpack:///./resources/ts/libraries/event-emitter.ts","webpack:///./resources/ts/libraries/state.ts","webpack:///./resources/ts/bootstrap.ts","webpack:///./resources/ts/filters/abbreviate.ts","webpack:///./resources/ts/libraries/media.ts","webpack:///(webpack)/buildin/global.js","webpack:///./resources/ts/filters/currency.ts","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./resources/ts/pages/dashboard/ns-media.vue?9f4e","webpack:///./resources/ts/pages/dashboard/ns-media.vue?eb1d","webpack:///resources/ts/pages/dashboard/ns-media.vue","webpack:///./resources/ts/pages/dashboard/ns-media.vue","webpack:///./node_modules/vue-upload-component/dist/vue-upload-component.js","webpack:///./resources/ts/libraries/popup-resolver.ts","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./node_modules/timers-browserify/main.js","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-shipping-popup.vue?a7c9","webpack:///resources/ts/pages/dashboard/pos/popups/ns-pos-shipping-popup.vue","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-shipping-popup.vue?155c","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-shipping-popup.vue","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-order-type-popup.vue?793b","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-order-type-popup.vue?fde5","webpack:///resources/ts/pages/dashboard/pos/popups/ns-pos-order-type-popup.vue","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-order-type-popup.vue","webpack:///./resources/ts/pages/dashboard/pos/queues/products/product-quantity.ts","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-quantity-popup.vue?68d0","webpack:///resources/ts/pages/dashboard/pos/popups/ns-pos-quantity-popup.vue","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-quantity-popup.vue?872e","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-quantity-popup.vue","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-pending-orders-popup.vue?d628","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-pending-orders-popup.vue?2afc","webpack:///resources/ts/pages/dashboard/pos/popups/ns-pos-pending-orders-popup.vue","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-pending-orders-popup.vue","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-customers-button.vue?185d","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-customers-button.vue?45f7","webpack:///resources/ts/pages/dashboard/pos/header-buttons/ns-pos-customers-button.vue","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-customers-button.vue","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-order-type-button.vue?a0c2","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-order-type-button.vue?19b9","webpack:///resources/ts/pages/dashboard/pos/header-buttons/ns-pos-order-type-button.vue","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-order-type-button.vue","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-pending-orders-button.vue?9003","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-pending-orders-button.vue?37de","webpack:///resources/ts/pages/dashboard/pos/header-buttons/ns-pos-pending-orders-button.vue","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-pending-orders-button.vue","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-dashboard-button.vue?2640","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-dashboard-button.vue?9494","webpack:///resources/ts/pages/dashboard/pos/header-buttons/ns-pos-dashboard-button.vue","webpack:///./resources/ts/pages/dashboard/pos/header-buttons/ns-pos-dashboard-button.vue","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-units.vue?3e8d","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-units.vue?6cae","webpack:///resources/ts/pages/dashboard/pos/popups/ns-pos-units.vue","webpack:///./resources/ts/pages/dashboard/pos/popups/ns-pos-units.vue","webpack:///./resources/ts/pages/dashboard/pos/queues/products/product-unit.ts","webpack:///./resources/ts/libraries/responsive.ts","webpack:///./resources/ts/pos-init.ts","webpack:///./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./resources/ts/libraries/popup.ts","webpack:///./resources/ts/libraries/form-validation.ts"],"names":["undefined","window","snackbarQueue","this","queue","show","message","label","options","duration","type","create","observer","__createSnack","buttonNode","sampleSnack","addEventListener","event","onNext","onCompleted","remove","__startTimer","error","success","info","wrapper","timeout","__startTimeOut","setTimeout","clearTimeout","snackWrapper","document","getElementById","createElement","textNode","buttonsWrapper","buttonThemeClass","snackThemeClass","textContent","setAttribute","appendChild","body","_subject","defineClient","client","_client","post","url","data","config","_request","get","delete","put","_lastRequestData","next","identifier","defaults","then","result","complete","catch","response","subject","emit","value","state","behaviorState","BehaviorSubject","subscribe","setState","object","use","_","CharJS","Chart","Vue","moment","Axios","VueRouter","SnackBar","headers","common","withCredentials","nsEvent","nsHttpClient","nsSnackBar","nsScreen","breakpoint","detectScreenSizes","fromEvent","v","outerWidth","nsState","sidebar","includes","nsCurrency","nsAbbreviate","ChartJS","EventEmitter","Popup","RxJS","Media","FormValidation","filter","newValue","shortValue","suffixNum","Math","floor","length","precision","parseFloat","pow","toPrecision","replace","toFixed","MediaComponent","default","field","primarySelector","open","popup","popupClass","g","Function","e","module","exports","Intl","NumberFormat","ns","currency","ns_currency_position","ns_currency_iso","minimumFractionDigits","ns_currency_precision","style","signDisplay","formatToParts","map","ns_currency_decimal_separator","ns_currency_thousand_separator","join","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","call","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","Array","arguments","i","push","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","global","setImmediate","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","Object","getPrototypeOf","toString","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","documentElement","script","onreadystatechange","removeChild","random","source","indexOf","slice","attachEvent","callback","task","clearImmediate","self","component","_vm","_h","$createElement","_c","_self","staticClass","_v","_l","page","index","key","class","selected","$event","select","_s","currentPage","ref","attrs","csrf","inputFile","inputFilter","model","$$v","files","expression","file","progress","_e","close","resource","selectResource","sizes","thumb","bulkSelect","hasOneSelected","selectedResource","created_at","user","username","cancelBulkSelect","deleteSelected","current_page","loadGallery","last_page","useSelectedEntries","createRequest","xhr","XMLHttpRequest","method","responseType","keys","forEach","setRequestHeader","request","Promise","resolve","reject","onload","status","JSON","parse","err","onerror","send","stringify","sendRequest","template","script$$1","scope","functional","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","ChunkUploadHandler","instance","TypeError","_classCallCheck","chunks","start","end","chunkSize","fileSize","blob","startOffset","active","retries","maxRetries","stopChunks","chunksUploading","chunk","abort","startChunking","_this","promise","_this2","assign","action","startBody","phase","mime_type","fileType","size","fileName","res","sessionId","session_id","end_offset","createChunks","maxActiveChunks","uploadNextChunk","hasChunksToUpload","uploadChunk","chunksToUpload","finish","_this3","updateFileProgress","upload","evt","lengthComputable","round","loaded","total","FormData","append","sendFormRequest","uploadBody","start_offset","uploaded","_this4","finishBody","parseInt","maxActive","_this5","completedProgress","chunksUploaded","uploadingProgress","reduce","min","InputFile","render","$parent","inputId","accept","capture","disabled","directory","features","multiple","html5","change","staticRenderFns","methods","addInputFile","test","navigator","userAgent","$destroy","constructor","parent","el","$el","_compiled","_scopeId","_extends","hasOwnProperty","_typeof","Symbol","iterator","obj","_toConsumableArray","arr","isArray","arr2","from","CHUNK_DEFAULT_OPTIONS","minSize","handler","script$1","components","String","Boolean","maximum","Number","addIndex","postAction","putAction","customAction","drop","dropDirectory","extensions","thread","chunkEnabled","drag","dropActive","uploading","destroy","mounted","input","webkitdirectory","ondrop","maps","id","$nextTick","$forceUpdate","watchDrop","beforeDestroy","computed","fileObject","chunkOptions","className","watch","_active","watchActive","oldMaps","newFile","oldFile","emitFile","_key","clear","emitInput","add","_files","addFiles","Blob","webkitRelativePath","relativePath","Element","speed","substr","emitFilter","newFiles","_newFiles","splice","_i","_file2","_i2","names","split","__vuex__","addDataTransfer","dataTransfer","items","item","getAsEntry","getAsFile","webkitGetAsEntry","getEntry","results","_i3","entry","path","isFile","isDirectory","dirReader","createReader","readEntries","entries","id1","id2","file1","file2","index1","index2","console","update","isPrevent","$emit","code","RegExp","trim","search","shouldUseChunkUpload","uploadPut","uploadHtml5","uploadHtml4","HandlerClass","querys","encodeURIComponent","queryString","uploadXhr","form","File","filename","_file","speedTime","speedLoaded","onprogress","speedTime2","Date","now","interval","setInterval","clearInterval","fn","responseText","contentType","getResponseHeader","onabort","ontimeout","onKeydown","keyCode","preventDefault","iframe","src","removeEventListener","contentWindow","contentDocument","innerHTML","getResponseData","submit","parentNode","_el","dropElement","onDragenter","onDragleave","onDocumentDrop","onDragover","onDrop","querySelector","$root","dt","types","contains","nodeName","explicitOriginalTarget","fromElement","clientX","clientY","innerWidth","innerHeight","FileUpload","moduleIdentifier","createInjector","createInjectorSSR","hook","context","originalRender","h","existing","beforeCreate","__vue_normalize__$1","_t","inject","media","__vue_create_injector__$1","head","getElementsByTagName","styles","isOldIE","toLowerCase","css","group","ids","parts","element","sources","btoa","unescape","getAttribute","styleSheet","cssText","createTextNode","nodes","childNodes","insertBefore","FileUpload$1","freeze","factory","$popupParams","$popup","webpackPolyfill","deprecate","paths","children","l","webpackContext","req","webpackContextResolve","__webpack_require__","o","Timeout","clearFn","_id","_clearFn","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","closePopup","staticStyle","tab","toggle","formValidation","checkField","submitInformations","_m","icon","nsPosQuantityPopup","product","finalValue","inputValue","openPendingOrdersPopup","goToDashboard","units","unit","selectUnit","preview_url","nsProductUnitPopup","detect","screenIs","is","NsPosDashboardButton","NsPosPendingOrderButton","NsPosOrderTypeButton","NsPosCustomersButton","_responsive","Responsive","_isSubmitting","defaultOrder","discount_type","discount","discount_percentage","subtotal","paid","customer_id","total_products","shipping","tax_value","shipping_rate","shipping_type","customer","products","payments","addresses","billing","header","buttons","addToCartQueue","initialize","_screen","_visibleSection","_paymentsType","_order","_types","_products","_customers","_breadcrumbs","reset","defineCurrentScreen","paymentsType","getValue","payment","order","_settings","refreshCart","changeVisibleSection","section","addPayment","amount","computePaid","removePayment","submitOrder","p","b","a","setPaymentActive","definedPaymentsType","definedCustomer","updateCart","current","set","productTotal","total_price","totalTaxes","getStockUsage","product_id","unit_id","stocks","quantity","addToCart","productData","cartProduct","tax_group_id","sale_price","mode","$original","unshift","refreshProducts","defineTypes","removeProduct","updateProduct","computeProduct","tax_type","incl_tax_sale_price","excl_tax_sale_price","sale_tax_value","incl_tax_wholesale_price","excl_tax_wholesale_price","wholesale_tax_value","defineSettings","settings","unsubscribe","POS","normalizeComponent","scriptExports","functionalTemplate","injectStyles","scopeId","shadowMode","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$options","shadowRoot","_injectStyles","extendStatics","d","setPrototypeOf","__proto__","__extends","__","container","popupBody","querySelectorAll","parentWrapper","params","stopPropagation","stopImmediatePropagation","background","componentClass","extend","propsData","$mount","classList","validateFields","fields","errors","f","validateFieldsErrors","flat","validateForm","main","validateField","globalErrors","tabs","tabsInvalidity","validErrors","initializeTabs","createFields","createForm","enableFields","disableFields","disableForm","enableForm","validation","detectValidationRules","rule","fieldPassCheck","extractForm","formValue","extractFields","option","execRule","exec","r","triggerError","exp","errorMessage","invalid","triggerFielsErrors","log"],"mappings":"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","file":"/js/pos-init.js","sourcesContent":["import { sample } from \"lodash\";\nimport * as rx from 'rx';\n\ndeclare const window:any;\n\nexport interface SnackBarOptions { duration: number, type?: string };\n\nexport class SnackBar {\n    // window.snackbarQueue will be used to stack the snackbars\n    queue;\n\n    constructor() {\n        if ( window.snackbarQueue === undefined ) {\n            window.snackbarQueue    =   [];\n            this.queue              =   window.snackbarQueue;\n        }\n    }\n\n    show( message, label, options: SnackBarOptions = { duration: 3000, type : 'info' }) {\n        return rx.Observable.create( observer => {\n            const { buttonNode, textNode, snackWrapper, sampleSnack }        =   this.__createSnack({ message, label, type : options.type });\n\n            buttonNode.addEventListener( 'click', ( event ) => {\n                observer.onNext( buttonNode );\n                observer.onCompleted();\n                sampleSnack.remove();\n            });\n\n            this.__startTimer( options.duration, sampleSnack );\n        });\n    }\n\n    error( message, label = null, options: SnackBarOptions = { duration: 3000, type : 'error' }) {\n        return this.show( message, label, {...options, ...{ type : 'error' } } );\n    }\n\n    success( message, label = null, options: SnackBarOptions = { duration: 3000, type : 'success' }) {\n        return this.show( message, label, {...options, ...{ type : 'success' } } );\n    }\n\n    info( message, label = null, options: SnackBarOptions = { duration: 3000, type : 'info' }) {\n        return this.show( message, label, {...options, ...{ type : 'info' } } );\n    }\n\n    /**\n     * \n     * @param {number} duration \n     * @param {HTMLDivElement} wrapper \n     */\n    __startTimer( duration, wrapper ) {\n        let timeout;\n        const __startTimeOut    =   () => {\n            if ( duration > 0 && duration !== false ) {\n                timeout    =   setTimeout( () => {\n                    wrapper.remove();\n                }, duration );\n            }\n        };\n\n        wrapper.addEventListener( 'mouseenter', () => {\n            clearTimeout( timeout );\n        });\n\n        wrapper.addEventListener( 'mouseleave', () => {\n            __startTimeOut();\n        });\n\n        __startTimeOut();\n    }\n\n    __createSnack({ message, label, type = 'info' }) {\n        const snackWrapper          =   document.getElementById( 'snack-wrapper' ) || document.createElement( 'div' );\n        const sampleSnack           =   document.createElement( 'div' );\n        const textNode              =   document.createElement( 'p' );\n        const buttonsWrapper        =   document.createElement( 'div' );\n        const buttonNode            =   document.createElement( 'button' );\n        \n        let buttonThemeClass        =   '';\n        let snackThemeClass         =   '';\n\n        switch( type ) {\n            case 'info': \n                buttonThemeClass    =   'text-white hover:bg-blue-400 bg-blue-500';\n                snackThemeClass     =   'bg-gray-900 text-white';\n            break;\n            case 'error': \n                buttonThemeClass    =   'text-red-700 hover:bg-white bg-white';\n                snackThemeClass     =   'bg-red-500 text-white';\n            break;\n            case 'success': \n                buttonThemeClass    =   'text-green-700 hover:bg-white bg-white';\n                snackThemeClass     =   'bg-green-500 text-white';\n            break;\n        }\n        \n        textNode.textContent        =   message;\n\n        /**\n         * if there is not label\n         * on the button, it's useless to add it\n         */\n        if ( label ) {\n            buttonNode.textContent      =   label;\n            buttonNode.setAttribute( 'class', `px-3 py-2 shadow rounded-lg font-bold ${buttonThemeClass}` );\n            buttonsWrapper.appendChild( buttonNode );\n        }\n\n        sampleSnack.appendChild( textNode );\n        sampleSnack.appendChild( buttonsWrapper );\n        sampleSnack.setAttribute( 'class', `md:rounded-lg py-2 px-3 md:w-2/5 w-full z-10 md:my-2 shadow-lg flex justify-between items-center ${snackThemeClass}` );\n\n        snackWrapper.setAttribute( 'id', 'snack-wrapper' );\n        snackWrapper.setAttribute( 'class', 'absolute bottom-0 w-full flex justify-between items-center flex-col')\n        snackWrapper.appendChild( sampleSnack );\n\n        document.body.appendChild( snackWrapper );\n\n        return { snackWrapper, sampleSnack, buttonsWrapper, buttonNode, textNode };\n    }\n}","import * as rx from \"rx\";\nimport * as rxjs from 'rxjs';\n\nexport class HttpClient {\n    _subject: rxjs.Subject<{}>;\n    _client;\n    private _lastRequestData;\n\n    constructor() {\n        this._subject    =   new rxjs.Subject; \n    }\n\n    defineClient( client ) {\n        this._client    =   client;\n    }\n\n    post( url, data, config = {} ) { \n        return this._request( 'post', url, data, config );\n    }\n\n    get( url, config = {} ) {\n        return this._request( 'get', url, undefined, config );\n    }\n\n    delete( url, config = {} ) {\n        return this._request( 'delete', url, undefined, config );\n    }\n\n    put( url, data , config = {} ) {\n        return this._request( 'put', url, data, config );\n    }\n\n    get response() {\n        return this._lastRequestData;\n    }\n\n    _request( type, url, data = {}, config = {} ) {\n        this._subject.next({ identifier: 'async.start', url, data });\n        return new rxjs.Observable( observer => {\n            this._client[ type ]( url, data, { \n                ...this._client.defaults[ type ],\n                ...config\n            }).then( result => {\n                this._lastRequestData   =   result;\n                observer.next( result.data );\n                observer.complete();\n                this._subject.next({ identifier: 'async.stop' });\n            }).catch( error => {\n                observer.error( error.response.data );\n                this._subject.next({ identifier: 'async.stop' });\n            });\n        })\n    }\n\n    subject() {\n        return this._subject;\n    }\n\n    emit({ identifier, value }) {\n        this._subject.next({ identifier, value });\n    }\n}","import * as rx from 'rx';\n\nexport class EventEmitter {\n    _subject;\n    \n    constructor() {\n        this._subject    =   new rx.Subject;        \n    }\n\n    subject() {\n        return this._subject;\n    }\n\n    emit({ identifier, value }) {\n        this._subject.onNext({ identifier, value });\n    }\n}","import { BehaviorSubject } from \"rxjs\";\n\nexport class State {\n    /**\n     * \n     * @param {BehaviorSubject} behaviorState \n     */\n    behaviorState: BehaviorSubject<{}>;\n\n    state: {}   =   {};\n\n    constructor( state ) {\n        this.behaviorState   =  new BehaviorSubject({});\n        this.behaviorState.subscribe( state => {\n            this.state  =   state;\n        });\n\n        this.setState( state );\n    }\n\n    setState(object) {\n        this.behaviorState.next({ ...this.state, object });\n    }\n}","import * as Lodash from \"lodash\";\nimport * as Axios from \"axios\";\nimport * as ChartJS from \"chart.js\";\nimport VueRouter from \"vue-router\";\nimport { EventEmitter, HttpClient, SnackBar, State } from \"./libraries/libraries\";\nimport { fromEvent } from \"rxjs\";\nimport * as RxJS from 'rxjs';\nimport * as moment from 'moment';\nimport { Popup } from \"./libraries/popup\";\nimport { Media } from \"./libraries/media\";\nimport Vue from \"vue\";\nimport FormValidation from \"./libraries/form-validation\";\nimport { nsCurrency, nsAbbreviate } from \"./filters/declarations\";\n\nVue.use( VueRouter );\n\ndeclare const window;\ndeclare const ns;\n\nwindow._                =   Lodash;\nwindow.CharJS           =   ChartJS;\nwindow.Vue              =   Vue;\nwindow.moment           =   moment;\nwindow.Axios            =   Axios;\nwindow.VueRouter        =   VueRouter;\nwindow.SnackBar         =   SnackBar;\nwindow.Axios.defaults.headers.common['X-Requested-With']    =   'XMLHttpRequest';\nwindow.Axios.defaults.withCredentials                       =   true;\n\nconst nsEvent           =   new EventEmitter;\nconst nsHttpClient      =   new HttpClient;\nconst nsSnackBar        =   new SnackBar;\n\n/**\n * create a screen class\n * that controls the device sizes\n */\nconst nsScreen          =   new class {\n    breakpoint: string;\n    \n    constructor() {\n        this.breakpoint     =   '';\n        \n        this.detectScreenSizes();\n\n        fromEvent( window, 'resize' )\n            .subscribe( v => this.detectScreenSizes() );\n    }\n\n    detectScreenSizes() {\n        switch( true ) {\n            case ( window.outerWidth > 0 ) && ( window.outerWidth <= 480 ) :\n                this.breakpoint     =   'xs';\n            break;\n            case ( window.outerWidth > 480 ) && ( window.outerWidth <= 640 ) :\n                this.breakpoint     =   'sm';\n            break;\n            case ( window.outerWidth > 640 ) && ( window.outerWidth <= 1024 ) :\n                this.breakpoint     =   'md';\n            break;\n            case ( window.outerWidth > 1024 ) && ( window.outerWidth <= 1280 ):\n                this.breakpoint     =   'lg';\n            break;\n            case ( window.outerWidth > 1280 ) :\n                this.breakpoint     =   'xl';\n            break;\n        }\n    }\n}\n\nconst nsState           =   new State({\n    sidebar: [ 'xs', 'sm', 'md' ].includes( nsScreen.breakpoint ) ? 'hidden' : 'visible'\n});\n\nnsHttpClient.defineClient( Axios );\n\nwindow.nsEvent          =   nsEvent;\nwindow.nsHttpClient     =   nsHttpClient;\nwindow.nsSnackBar       =   nsSnackBar;\nwindow.nsCurrency       =   nsCurrency;\nwindow.nsAbbreviate     =   nsAbbreviate;\nwindow.nsState          =   nsState;\nwindow.nsScreen         =   nsScreen;\nwindow.ChartJS          =   ChartJS;\nwindow.EventEmitter     =   EventEmitter;\nwindow.Popup            =   Popup;\nwindow.RxJS             =   RxJS;\nwindow.Media            =   Media;\nwindow.FormValidation   =   FormValidation;\n\nexport { nsHttpClient, nsSnackBar, nsEvent, nsState, nsScreen };","import Vue from 'vue';\n\nconst nsAbbreviate  =   Vue.filter( 'abbreviate', ( value ) => {\n    var newValue = value;\n    if (value >= 1000) {\n        var suffixes = [\"\", \"k\", \"m\", \"b\",\"t\"];\n        var suffixNum = Math.floor( (\"\"+value).length/3 );\n        var shortValue;\n        for (var precision = 2; precision >= 1; precision--) {\n            shortValue = parseFloat( (suffixNum != 0 ? (value / Math.pow(1000,suffixNum) ) : value).toPrecision(precision));\n            var dotLessShortValue = (shortValue + '').replace(/[^a-zA-Z 0-9]+/g,'');\n            if (dotLessShortValue.length <= 2) { break; }\n        }\n        if (shortValue % 1 != 0)  shortValue = shortValue.toFixed(1);\n        newValue = shortValue+suffixes[suffixNum];\n    }\n    return newValue;\n});\n\nexport { nsAbbreviate };","import { Popup } from './popup';\nconst MediaComponent     =   require( './../pages/dashboard/ns-media' ).default;\n\nexport class Media {\n    private popup;\n\n    constructor(\n        private field?: string,\n        private primarySelector?: string\n    ) {}\n\n    open() {\n        this.popup      =   new Popup({\n            popupClass: 'w-4/5 h-4/5-screen shadow-lg bg-white'\n        });\n\n        this.popup.open( MediaComponent );\n    }\n}","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import Vue from 'vue';\n\ndeclare const ns;\ndeclare const window;\n\nconst nsCurrency    =   Vue.filter( 'currency', ( value ) => {\n    \n    const currency  =   new Intl.NumberFormat( ns.currency.ns_currency_position === 'before' ? 'en-US' : 'fr-FR', {\n        currency: ns.currency.ns_currency_iso || 'USD',\n        minimumFractionDigits: ns.currency.ns_currency_precision,\n        style: 'currency',\n        // @ts-ignore\n        signDisplay: 'auto'\n    });\n\n    return currency.formatToParts( value ).map(({ type, value }) => {\n         switch( type ) {\n            case 'minusSign': return '-'; break;\n            case 'decimal': return ( ns.currency.ns_currency_decimal_separator || '.' );break;\n            case 'group': return ( ns.currency.ns_currency_thousand_separator || ',' ) ; break;\n            default: return value;\n        }\n    }).join('');\n});\n\nexport { nsCurrency };","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex bg-white shadow-xl w-4/5-screen h-4/5-screen overflow-hidden\"},[_c('div',{staticClass:\"sidebar w-48 bg-gray-200 h-full flex-shrink-0\"},[_c('h3',{staticClass:\"text-xl font-bold text-gray-800 my-4 text-center\"},[_vm._v(\"Medias Manager\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.pages),function(page,index){return _c('li',{key:index,staticClass:\"hover:bg-white py-2 px-3 text-gray-700 border-l-8 cursor-pointer\",class:page.selected ? 'bg-white border-blue-400' : 'border-transparent',on:{\"click\":function($event){return _vm.select( page )}}},[_vm._v(_vm._s(page.label))])}),0)]),_vm._v(\" \"),(_vm.currentPage.name === 'upload')?_c('div',{staticClass:\"content w-full overflow-hidden\"},[_c('vue-upload',{ref:\"upload\",staticClass:\"w-full h-full flex bg-white shadow\",attrs:{\"drop\":true,\"multiple\":true,\"headers\":{ 'X-Requested-With': 'XMLHttpRequest', 'X-CSRF-TOKEN' : _vm.csrf },\"accept\":\"image/*\",\"post-action\":\"/api/nexopos/v4/medias\"},on:{\"input-file\":_vm.inputFile,\"input-filter\":_vm.inputFilter},model:{value:(_vm.files),callback:function ($$v) {_vm.files=$$v},expression:\"files\"}},[_c('div',{staticClass:\"border-dashed border-2 flex flex-auto m-2 p-2 flex-col border-blue-400 items-center justify-center\"},[_c('h3',{staticClass:\"text-3xl font-bold text-gray-600 mb-4\"},[_vm._v(\"Click Here Or Drop Your File To Upload\")]),_vm._v(\" \"),_c('div',{staticClass:\"rounded w-full md:w-2/3 text-gray-700 bg-gray-500 h-56 overflow-y-auto p-2\"},[_c('ul',_vm._l((_vm.files),function(file,index){return _c('li',{key:index,staticClass:\"p-2 mb-2 shadow bg-white flex items-center justify-between rounded\"},[_c('span',[_vm._v(_vm._s(file.name))]),_vm._v(\" \"),_c('span',{staticClass:\"rounded bg-blue-400 flex items-center justify-center text-xs p-2\"},[_vm._v(_vm._s(file.progress)+\"%\")])])}),0)])])])],1):_vm._e(),_vm._v(\" \"),(_vm.currentPage.name === 'gallery')?_c('div',{staticClass:\"content flex-col w-full overflow-hidden flex\"},[(_vm.popup)?_c('div',{staticClass:\"p-2 flex flex-shrink-0 justify-between bg-gray-200\"},[_c('div'),_vm._v(\" \"),_c('div',[_c('button',{staticClass:\"rounded-full flex items-center justify-center h-10 w-10 bg-white shadow text-red-400 hover:shadow-md hover:bg-red-400 hover:text-white\",on:{\"click\":function($event){return _vm.popup.close()}}},[_c('i',{staticClass:\"las la-times-circle text-3xl\"})])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"flex flex-auto overflow-hidden\"},[_c('div',{staticClass:\"content flex flex-auto flex-col overflow-y-auto\",attrs:{\"id\":\"grid\"}},[_c('div',{staticClass:\"flex-auto bg-white shadow\"},[_c('div',{staticClass:\"p-2 flex overflow-x-auto flex-wrap\"},_vm._l((_vm.response.data),function(resource,index){return _c('div',{key:index,staticClass:\"flex -m-2 flex-wrap\"},[_c('div',{staticClass:\"p-2\"},[_c('div',{staticClass:\"rounded-lg w-32 h-32 bg-gray-500 m-2 overflow-hidden flex items-center justify-center\",class:resource.selected ? 'shadow-outline' : '',on:{\"click\":function($event){return _vm.selectResource( resource )}}},[_c('img',{staticClass:\"object-cover h-full\",attrs:{\"src\":resource.sizes.thumb,\"alt\":resource.name}})])])])}),0),_vm._v(\" \"),(_vm.response.data.length === 0)?_c('div',{staticClass:\"h-full flex w-full items-center justify-center\"},[_c('h3',{staticClass:\"text-3xl text-gray-700 font-bold\"},[_vm._v(\"Nothing has already been uploaded\")])]):_vm._e()])]),_vm._v(\" \"),(! _vm.bulkSelect && _vm.hasOneSelected)?_c('div',{staticClass:\"w-64 flex-shrink-0 bg-gray-200\",attrs:{\"id\":\"preview\"}},[_c('div',{staticClass:\"h-64 bg-gray-600 flex items-center justify-center\"},[_c('img',{attrs:{\"src\":_vm.selectedResource.sizes.thumb,\"alt\":_vm.selectedResource.name}})]),_vm._v(\" \"),_c('div',{staticClass:\"p-4 text-gray-700 text-sm\",attrs:{\"id\":\"details\"}},[_c('p',{staticClass:\"flex flex-col mb-2\"},[_c('strong',{staticClass:\"font-bold block\"},[_vm._v(\"File Name: \")]),_c('span',[_vm._v(_vm._s(_vm.selectedResource.name))])]),_vm._v(\" \"),_c('p',{staticClass:\"flex flex-col mb-2\"},[_c('strong',{staticClass:\"font-bold block\"},[_vm._v(\"Uploaded At:\")]),_c('span',[_vm._v(_vm._s(_vm.selectedResource.created_at))])]),_vm._v(\" \"),_c('p',{staticClass:\"flex flex-col mb-2\"},[_c('strong',{staticClass:\"font-bold block\"},[_vm._v(\"By :\")]),_c('span',[_vm._v(_vm._s(_vm.selectedResource.user.username))])])])]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"p-2 flex flex-shrink-0 justify-between bg-gray-200\"},[_c('div',{staticClass:\"flex -mx-2 flex-shrink-0\"},[_c('div',{staticClass:\"px-2 flex-shrink-0 flex\"},[_c('div',{staticClass:\"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700\"},[(_vm.bulkSelect)?_c('button',{staticClass:\"bg-white hover:bg-blue-400 hover:text-white py-2 px-3\",on:{\"click\":function($event){return _vm.cancelBulkSelect()}}},[_c('i',{staticClass:\"las la-times\"})]):_vm._e(),_vm._v(\" \"),(_vm.hasOneSelected && ! _vm.bulkSelect)?_c('button',{staticClass:\"bg-white hover:bg-blue-400 hover:text-white py-2 px-3\",on:{\"click\":function($event){_vm.bulkSelect = true}}},[_c('i',{staticClass:\"las la-check-circle\"})]):_vm._e(),_vm._v(\" \"),(_vm.hasOneSelected)?_c('button',{staticClass:\"bg-red-400 text-white hover:bg-red-500 hover:text-white py-2 px-3\",on:{\"click\":function($event){return _vm.deleteSelected()}}},[_c('i',{staticClass:\"las la-trash\"})]):_vm._e()])])]),_vm._v(\" \"),_c('div',{staticClass:\"flex-shrink-0 -mx-2 flex\"},[_c('div',{staticClass:\"px-2\"},[_c('div',{staticClass:\"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700\"},[_c('button',{staticClass:\"p-2\",class:_vm.response.current_page === 1 ? 'bg-gray-100 text-gray-600 cursor-not-allowed' : 'bg-white hover:bg-blue-400 hover:text-white',attrs:{\"disabled\":_vm.response.current_page === 1},on:{\"click\":function($event){return _vm.loadGallery( _vm.response.current_page - 1 )}}},[_vm._v(\"Previous\")]),_vm._v(\" \"),_c('hr',{staticClass:\"border-r border-gray-700\"}),_vm._v(\" \"),_c('button',{staticClass:\"p-2\",class:_vm.response.current_page === _vm.response.last_page ? 'bg-gray-100 text-gray-600 cursor-not-allowed' : 'bg-white hover:bg-blue-400 hover:text-white',attrs:{\"disabled\":_vm.response.current_page === _vm.response.last_page},on:{\"click\":function($event){return _vm.loadGallery( _vm.response.current_page + 1 )}}},[_vm._v(\"Next\")])])]),_vm._v(\" \"),(_vm.popup && _vm.hasOneSelected)?_c('div',{staticClass:\"px-2\"},[_c('button',{staticClass:\"rounded shadow p-2 bg-blue-400 text-white text-sm\",on:{\"click\":function($event){return _vm.useSelectedEntries()}}},[_vm._v(\"Use Selected\")])]):_vm._e()])])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-media.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-media.vue?vue&type=script&lang=js&\"","<script>\nimport { nsHttpClient, nsSnackBar } from '../../bootstrap';\n\nconst VueUpload     =   require( 'vue-upload-component' );\n\nexport default {\n    name: 'ns-media',\n    props: [ 'popup' ],\n    components: {\n        VueUpload\n    },\n    data() {\n        return {\n            pages: [{\n                label: 'Upload',\n                name: 'upload',\n                selected: false,\n            }, {\n                label: 'Gallery',\n                name : 'gallery',\n                selected: true,\n            }],\n            /**\n             * done for demo purposes\n             */\n            resources: [],\n\n            response: {\n                data: [],\n                current_page: 0,\n                from: 0,\n                to: 0,\n                next_page_url: '',\n                prev_page_url: '',\n                path: '',\n                per_page: 0,\n                total: 0,\n                last_page: 0,\n                first_page: 0\n            },\n\n            queryPage: 1,\n\n            /**\n             * determine wether the bulk\n             * selector is enabled or not.\n             */\n            bulkSelect: false,\n            files: [],\n        }\n    },\n    mounted() {\n        /**\n         * when the media is being opened\n         * from a popup\n         */\n        if ( this.popup ) {\n            this.popup.event.subscribe( action => {\n                if ( action.event === 'click-overlay' ) {\n                    this.popup.close();\n                }\n\n                if ( action.event === 'press-esc' ) {\n                    this.popup.close();\n                }\n            });\n        }\n\n        const gallery   =   this.pages.filter( p => p.name === 'gallery' )[0];\n\n        this.select( gallery );\n    },\n    watch: {\n        files() {\n            /**\n             * as long as there are file that aren't \n             * yet uploaded. We'll trigger the \"active\" status.\n             */\n            if ( this.files.filter( f => f.progress === '0.00' ).length > 0 ) {\n                this.$refs.upload.active = true;\n            }\n        }\n    },\n    computed: {\n        currentPage() {\n            return this.pages.filter( page => page.selected )[0];\n        },\n        hasOneSelected() {\n            return this.response.data.filter( r => r.selected ).length > 0;\n        },\n        selectedResource() {\n            return this.response.data.filter( r => r.selected )[0];\n        },\n        csrf() {\n            return ns.authentication.csrf;\n        }\n    },\n    methods: {\n        cancelBulkSelect() {\n            this.bulkSelect     =   false;\n            this.response.data.forEach( v => v.selected = false );\n        },\n\n        /**\n         * That trigger a deletion\n         * request to the server\n         * @param {void}\n         * @return {void}\n         */\n        deleteSelected() {\n            if ( confirm( 'Delete selected resources ?' ) ) {\n                return nsHttpClient.post( '/api/nexopos/v4/medias/bulk-delete', {\n                        ids: this.response.data\n                            .filter( v => v.selected )\n                            .map( v => v.id )\n                    })\n                    .subscribe( result => {\n                        nsSnackBar.success( result.message ).subscribe();\n                        this.loadGallery();\n                    }, error => {\n                        nsSnackBar.error( error.message ).subscribe();\n                    })\n            }\n        },\n\n        /**\n         * This make sure to select\n         * what is the active page on the media.\n         * By default we have gallery and upload\n         * @param page\n         * @return void\n         */\n        select( page ) {\n            this.pages.forEach( page => page.selected = false );\n            page.selected   =   true;\n\n            if ( page.name === 'gallery' ) {\n                this.loadGallery();\n            }\n        },\n\n        /**\n         * This make sure to load the \n         * gallery. That means loading images\n         * with a pagination system\n         * @param {interger} page\n         * @return void\n         */\n        loadGallery( page = null ) {\n            page = page === null ? this.queryPage : page;\n            this.queryPage  =   page;\n            nsHttpClient.get( `/api/nexopos/v4/medias?page=${page}` )\n                .subscribe( result => {\n                    // define default selection status\n                    result.data.forEach( resource => resource.selected = false );\n                    this.response  =   result;\n                })\n        },\n\n        /**\n         * Will event an event with\n         * all the selected resources\n         * @return void\n         */\n        useSelectedEntries() {\n            this.popup.event.next({\n                event: 'use-selected',\n                value: this.response.data.filter( entry => entry.selected )\n            });\n        },\n\n        /** \n         * this makes sure resources\n         * are correctly select when the bulk selection\n         * is enabled or not\n         * @param {object} resource\n         * @return {void}\n        */\n        selectResource( resource ) {\n            if ( ! this.bulkSelect ) {\n                this.response.data.forEach( (r, index) => {\n                    if ( index !== this.response.data.indexOf( resource ) ) {\n                        r.selected = false;\n                    }\n                });\n            }\n\n            resource.selected   =   ! resource.selected;\n        },\n    }\n}\n</script>\n<template>\n    <div class=\"flex bg-white shadow-xl w-4/5-screen h-4/5-screen overflow-hidden\">\n        <div class=\"sidebar w-48 bg-gray-200 h-full flex-shrink-0\">\n            <h3 class=\"text-xl font-bold text-gray-800 my-4 text-center\">Medias Manager</h3>\n            <ul>\n                <li @click=\"select( page )\" v-for=\"(page,index) of pages\" class=\"hover:bg-white py-2 px-3 text-gray-700 border-l-8 cursor-pointer\" :class=\"page.selected ? 'bg-white border-blue-400' : 'border-transparent'\" :key=\"index\">{{ page.label }}</li>\n            </ul>\n        </div>\n        <div class=\"content w-full overflow-hidden\" v-if=\"currentPage.name === 'upload'\">\n            <vue-upload\n                ref=\"upload\"\n                :drop=\"true\"\n                class=\"w-full h-full flex bg-white shadow\"\n                v-model=\"files\"\n                :multiple=\"true\"\n                :headers=\"{ 'X-Requested-With': 'XMLHttpRequest', 'X-CSRF-TOKEN' : csrf }\"\n                accept=\"image/*\"\n                post-action=\"/api/nexopos/v4/medias\"\n                @input-file=\"inputFile\"\n                @input-filter=\"inputFilter\">\n                <div class=\"border-dashed border-2 flex flex-auto m-2 p-2 flex-col border-blue-400 items-center justify-center\">\n                    <h3 class=\"text-3xl font-bold text-gray-600 mb-4\">Click Here Or Drop Your File To Upload</h3>\n                    <div class=\"rounded w-full md:w-2/3 text-gray-700 bg-gray-500 h-56 overflow-y-auto p-2\">\n                        <ul>\n                            <li v-for=\"(file, index) of files\" :key=\"index\" class=\"p-2 mb-2 shadow bg-white flex items-center justify-between rounded\">\n                                <span>{{ file.name }}</span>\n                                <span class=\"rounded bg-blue-400 flex items-center justify-center text-xs p-2\">{{ file.progress }}%</span>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </vue-upload>\n        </div>\n        <div class=\"content flex-col w-full overflow-hidden flex\" v-if=\"currentPage.name === 'gallery'\">\n            <div class=\"p-2 flex flex-shrink-0 justify-between bg-gray-200\" v-if=\"popup\">\n                <div></div>\n                <div>\n                    <button @click=\"popup.close()\" class=\"rounded-full flex items-center justify-center h-10 w-10 bg-white shadow text-red-400 hover:shadow-md hover:bg-red-400 hover:text-white\">\n                        <i class=\"las la-times-circle text-3xl\"></i>\n                    </button>\n                </div>\n            </div>\n            <div class=\"flex flex-auto overflow-hidden\">\n                <div id=\"grid\" class=\"content flex flex-auto flex-col overflow-y-auto\">\n                    <div class=\"flex-auto bg-white shadow\">\n                        <div class=\"p-2 flex overflow-x-auto flex-wrap\">\n                            <div v-for=\"(resource, index) of response.data\" :key=\"index\" class=\"flex -m-2 flex-wrap\">\n                                <div class=\"p-2\">\n                                    <div @click=\"selectResource( resource )\" :class=\"resource.selected ? 'shadow-outline' : ''\" class=\"rounded-lg w-32 h-32 bg-gray-500 m-2 overflow-hidden flex items-center justify-center\">\n                                        <img class=\"object-cover h-full\" :src=\"resource.sizes.thumb\" :alt=\"resource.name\">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div v-if=\"response.data.length === 0\" class=\"h-full flex w-full items-center justify-center\">\n                            <h3 class=\"text-3xl text-gray-700 font-bold\">Nothing has already been uploaded</h3>\n                        </div>\n                    </div>\n                </div>\n                <div id=\"preview\" class=\"w-64 flex-shrink-0 bg-gray-200\" v-if=\"! bulkSelect && hasOneSelected\">\n                    <div class=\"h-64 bg-gray-600 flex items-center justify-center\">\n                        <img :src=\"selectedResource.sizes.thumb\" :alt=\"selectedResource.name\">\n                    </div>\n                    <div id=\"details\" class=\"p-4 text-gray-700 text-sm\">\n                        <p class=\"flex flex-col mb-2\">\n                            <strong class=\"font-bold block\">File Name: </strong><span>{{ selectedResource.name }}</span>\n                        </p>\n                        <p class=\"flex flex-col mb-2\">\n                            <strong class=\"font-bold block\">Uploaded At:</strong><span>{{ selectedResource.created_at }}</span>\n                        </p>\n                        <p class=\"flex flex-col mb-2\">\n                            <strong class=\"font-bold block\">By :</strong><span>{{ selectedResource.user.username }}</span>\n                        </p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"p-2 flex flex-shrink-0 justify-between bg-gray-200\">\n                <div class=\"flex -mx-2 flex-shrink-0\">\n                    <div class=\"px-2 flex-shrink-0 flex\">\n                        <div class=\"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700\">\n                            <button \n                                v-if=\"bulkSelect\" \n                                @click=\"cancelBulkSelect()\" \n                                class=\"bg-white hover:bg-blue-400 hover:text-white py-2 px-3\">\n                                <i class=\"las la-times\"></i>\n                            </button>\n                            <button \n                                v-if=\"hasOneSelected && ! bulkSelect\"\n                                @click=\"bulkSelect = true\"\n                                class=\"bg-white hover:bg-blue-400 hover:text-white py-2 px-3\">\n                                <i class=\"las la-check-circle\"></i>                            \n                            </button>\n                            <button \n                                v-if=\"hasOneSelected\"\n                                @click=\"deleteSelected()\"\n                                class=\"bg-red-400 text-white hover:bg-red-500 hover:text-white py-2 px-3\">\n                                <i class=\"las la-trash\"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"flex-shrink-0 -mx-2 flex\">\n                    <div class=\"px-2\">\n                        <div class=\"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700\">\n                            <button :disabled=\"response.current_page === 1\" @click=\"loadGallery( response.current_page - 1 )\" :class=\"response.current_page === 1 ? 'bg-gray-100 text-gray-600 cursor-not-allowed' : 'bg-white hover:bg-blue-400 hover:text-white'\" class=\"p-2\">Previous</button>\n                            <hr class=\"border-r border-gray-700\">\n                            <button :disabled=\"response.current_page === response.last_page\" @click=\"loadGallery( response.current_page + 1 )\" :class=\"response.current_page === response.last_page ? 'bg-gray-100 text-gray-600 cursor-not-allowed' : 'bg-white hover:bg-blue-400 hover:text-white'\" class=\"p-2\">Next</button>\n                        </div>\n                    </div>\n                    <div class=\"px-2\" v-if=\"popup && hasOneSelected\">\n                        <button class=\"rounded shadow p-2 bg-blue-400 text-white text-sm\" @click=\"useSelectedEntries()\">Use Selected</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>","import { render, staticRenderFns } from \"./ns-media.vue?vue&type=template&id=f3437abc&\"\nimport script from \"./ns-media.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-media.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/*!\n * Name: vue-upload-component\n * Version: 2.8.20\n * Author: LianYue\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.VueUploadComponent = factory());\n}(this, (function () { 'use strict';\n\n  /**\n   * Creates a XHR request\n   *\n   * @param {Object} options\n   */\n  var createRequest = function createRequest(options) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(options.method || 'GET', options.url);\n    xhr.responseType = 'json';\n    if (options.headers) {\n      Object.keys(options.headers).forEach(function (key) {\n        xhr.setRequestHeader(key, options.headers[key]);\n      });\n    }\n\n    return xhr;\n  };\n\n  /**\n   * Sends a XHR request with certain body\n   *\n   * @param {XMLHttpRequest} xhr\n   * @param {Object} body\n   */\n  var sendRequest = function sendRequest(xhr, body) {\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n          try {\n            response = JSON.parse(xhr.response);\n          } catch (err) {\n            response = xhr.response;\n          }\n          resolve(response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n      xhr.onerror = function () {\n        return reject(xhr.response);\n      };\n      xhr.send(JSON.stringify(body));\n    });\n  };\n\n  /**\n   * Sends a XHR request with certain form data\n   *\n   * @param {XMLHttpRequest} xhr\n   * @param {Object} data\n   */\n  var sendFormRequest = function sendFormRequest(xhr, data) {\n    var body = new FormData();\n    for (var name in data) {\n      body.append(name, data[name]);\n    }\n\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n          try {\n            response = JSON.parse(xhr.response);\n          } catch (err) {\n            response = xhr.response;\n          }\n          resolve(response);\n        } else {\n          reject(xhr.response);\n        }\n      };\n      xhr.onerror = function () {\n        return reject(xhr.response);\n      };\n      xhr.send(body);\n    });\n  };\n\n  /**\n   * Creates and sends XHR request\n   *\n   * @param {Object} options\n   *\n   * @returns Promise\n   */\n  function request (options) {\n    var xhr = createRequest(options);\n\n    return sendRequest(xhr, options.body);\n  }\n\n  var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  var ChunkUploadHandler = function () {\n    /**\n     * Constructor\n     *\n     * @param {File} file\n     * @param {Object} options\n     */\n    function ChunkUploadHandler(file, options) {\n      _classCallCheck(this, ChunkUploadHandler);\n\n      this.file = file;\n      this.options = options;\n    }\n\n    /**\n     * Gets the max retries from options\n     */\n\n\n    _createClass(ChunkUploadHandler, [{\n      key: 'createChunks',\n\n\n      /**\n       * Creates all the chunks in the initial state\n       */\n      value: function createChunks() {\n        this.chunks = [];\n\n        var start = 0;\n        var end = this.chunkSize;\n        while (start < this.fileSize) {\n          this.chunks.push({\n            blob: this.file.file.slice(start, end),\n            startOffset: start,\n            active: false,\n            retries: this.maxRetries\n          });\n          start = end;\n          end = start + this.chunkSize;\n        }\n      }\n\n      /**\n       * Updates the progress of the file with the handler's progress\n       */\n\n    }, {\n      key: 'updateFileProgress',\n      value: function updateFileProgress() {\n        this.file.progress = this.progress;\n      }\n\n      /**\n       * Paues the upload process\n       * - Stops all active requests\n       * - Sets the file not active\n       */\n\n    }, {\n      key: 'pause',\n      value: function pause() {\n        this.file.active = false;\n        this.stopChunks();\n      }\n\n      /**\n       * Stops all the current chunks\n       */\n\n    }, {\n      key: 'stopChunks',\n      value: function stopChunks() {\n        this.chunksUploading.forEach(function (chunk) {\n          chunk.xhr.abort();\n          chunk.active = false;\n        });\n      }\n\n      /**\n       * Resumes the file upload\n       * - Sets the file active\n       * - Starts the following chunks\n       */\n\n    }, {\n      key: 'resume',\n      value: function resume() {\n        this.file.active = true;\n        this.startChunking();\n      }\n\n      /**\n       * Starts the file upload\n       *\n       * @returns Promise\n       * - resolve  The file was uploaded\n       * - reject   The file upload failed\n       */\n\n    }, {\n      key: 'upload',\n      value: function upload() {\n        var _this = this;\n\n        this.promise = new Promise(function (resolve, reject) {\n          _this.resolve = resolve;\n          _this.reject = reject;\n        });\n        this.start();\n\n        return this.promise;\n      }\n\n      /**\n       * Start phase\n       * Sends a request to the backend to initialise the chunks\n       */\n\n    }, {\n      key: 'start',\n      value: function start() {\n        var _this2 = this;\n\n        request({\n          method: 'POST',\n          headers: Object.assign({}, this.headers, {\n            'Content-Type': 'application/json'\n          }),\n          url: this.action,\n          body: Object.assign(this.startBody, {\n            phase: 'start',\n            mime_type: this.fileType,\n            size: this.fileSize,\n            name: this.fileName\n          })\n        }).then(function (res) {\n          if (res.status !== 'success') {\n            _this2.file.response = res;\n            return _this2.reject('server');\n          }\n\n          _this2.sessionId = res.data.session_id;\n          _this2.chunkSize = res.data.end_offset;\n\n          _this2.createChunks();\n          _this2.startChunking();\n        }).catch(function (res) {\n          _this2.file.response = res;\n          _this2.reject('server');\n        });\n      }\n\n      /**\n       * Starts to upload chunks\n       */\n\n    }, {\n      key: 'startChunking',\n      value: function startChunking() {\n        for (var i = 0; i < this.maxActiveChunks; i++) {\n          this.uploadNextChunk();\n        }\n      }\n\n      /**\n       * Uploads the next chunk\n       * - Won't do anything if the process is paused\n       * - Will start finish phase if there are no more chunks to upload\n       */\n\n    }, {\n      key: 'uploadNextChunk',\n      value: function uploadNextChunk() {\n        if (this.file.active) {\n          if (this.hasChunksToUpload) {\n            return this.uploadChunk(this.chunksToUpload[0]);\n          }\n\n          if (this.chunksUploading.length === 0) {\n            return this.finish();\n          }\n        }\n      }\n\n      /**\n       * Uploads a chunk\n       * - Sends the chunk to the backend\n       * - Sets the chunk as uploaded if everything went well\n       * - Decreases the number of retries if anything went wrong\n       * - Fails if there are no more retries\n       *\n       * @param {Object} chunk\n       */\n\n    }, {\n      key: 'uploadChunk',\n      value: function uploadChunk(chunk) {\n        var _this3 = this;\n\n        chunk.progress = 0;\n        chunk.active = true;\n        this.updateFileProgress();\n        chunk.xhr = createRequest({\n          method: 'POST',\n          headers: this.headers,\n          url: this.action\n        });\n\n        chunk.xhr.upload.addEventListener('progress', function (evt) {\n          if (evt.lengthComputable) {\n            chunk.progress = Math.round(evt.loaded / evt.total * 100);\n          }\n        }, false);\n\n        sendFormRequest(chunk.xhr, Object.assign(this.uploadBody, {\n          phase: 'upload',\n          session_id: this.sessionId,\n          start_offset: chunk.startOffset,\n          chunk: chunk.blob\n        })).then(function (res) {\n          chunk.active = false;\n          if (res.status === 'success') {\n            chunk.uploaded = true;\n          } else {\n            if (chunk.retries-- <= 0) {\n              _this3.stopChunks();\n              return _this3.reject('upload');\n            }\n          }\n\n          _this3.uploadNextChunk();\n        }).catch(function () {\n          chunk.active = false;\n          if (chunk.retries-- <= 0) {\n            _this3.stopChunks();\n            return _this3.reject('upload');\n          }\n\n          _this3.uploadNextChunk();\n        });\n      }\n\n      /**\n       * Finish phase\n       * Sends a request to the backend to finish the process\n       */\n\n    }, {\n      key: 'finish',\n      value: function finish() {\n        var _this4 = this;\n\n        this.updateFileProgress();\n\n        request({\n          method: 'POST',\n          headers: Object.assign({}, this.headers, {\n            'Content-Type': 'application/json'\n          }),\n          url: this.action,\n          body: Object.assign(this.finishBody, {\n            phase: 'finish',\n            session_id: this.sessionId\n          })\n        }).then(function (res) {\n          _this4.file.response = res;\n          if (res.status !== 'success') {\n            return _this4.reject('server');\n          }\n\n          _this4.resolve(res);\n        }).catch(function (res) {\n          _this4.file.response = res;\n          _this4.reject('server');\n        });\n      }\n    }, {\n      key: 'maxRetries',\n      get: function get() {\n        return parseInt(this.options.maxRetries);\n      }\n\n      /**\n       * Gets the max number of active chunks being uploaded at once from options\n       */\n\n    }, {\n      key: 'maxActiveChunks',\n      get: function get() {\n        return parseInt(this.options.maxActive);\n      }\n\n      /**\n       * Gets the file type\n       */\n\n    }, {\n      key: 'fileType',\n      get: function get() {\n        return this.file.type;\n      }\n\n      /**\n       * Gets the file size\n       */\n\n    }, {\n      key: 'fileSize',\n      get: function get() {\n        return this.file.size;\n      }\n\n      /**\n       * Gets the file name\n       */\n\n    }, {\n      key: 'fileName',\n      get: function get() {\n        return this.file.name;\n      }\n\n      /**\n       * Gets action (url) to upload the file\n       */\n\n    }, {\n      key: 'action',\n      get: function get() {\n        return this.options.action || null;\n      }\n\n      /**\n       * Gets the body to be merged when sending the request in start phase\n       */\n\n    }, {\n      key: 'startBody',\n      get: function get() {\n        return this.options.startBody || {};\n      }\n\n      /**\n       * Gets the body to be merged when sending the request in upload phase\n       */\n\n    }, {\n      key: 'uploadBody',\n      get: function get() {\n        return this.options.uploadBody || {};\n      }\n\n      /**\n       * Gets the body to be merged when sending the request in finish phase\n       */\n\n    }, {\n      key: 'finishBody',\n      get: function get() {\n        return this.options.finishBody || {};\n      }\n\n      /**\n       * Gets the headers of the requests from options\n       */\n\n    }, {\n      key: 'headers',\n      get: function get() {\n        return this.options.headers || {};\n      }\n\n      /**\n       * Whether it's ready to upload files or not\n       */\n\n    }, {\n      key: 'readyToUpload',\n      get: function get() {\n        return !!this.chunks;\n      }\n\n      /**\n       * Gets the progress of the chunk upload\n       * - Gets all the completed chunks\n       * - Gets the progress of all the chunks that are being uploaded\n       */\n\n    }, {\n      key: 'progress',\n      get: function get() {\n        var _this5 = this;\n\n        var completedProgress = this.chunksUploaded.length / this.chunks.length * 100;\n        var uploadingProgress = this.chunksUploading.reduce(function (progress, chunk) {\n          return progress + (chunk.progress | 0) / _this5.chunks.length;\n        }, 0);\n\n        return Math.min(completedProgress + uploadingProgress, 100);\n      }\n\n      /**\n       * Gets all the chunks that are pending to be uploaded\n       */\n\n    }, {\n      key: 'chunksToUpload',\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !chunk.active && !chunk.uploaded;\n        });\n      }\n\n      /**\n       * Whether there are chunks to upload or not\n       */\n\n    }, {\n      key: 'hasChunksToUpload',\n      get: function get() {\n        return this.chunksToUpload.length > 0;\n      }\n\n      /**\n       * Gets all the chunks that are uploading\n       */\n\n    }, {\n      key: 'chunksUploading',\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !!chunk.xhr && !!chunk.active;\n        });\n      }\n\n      /**\n       * Gets all the chunks that have finished uploading\n       */\n\n    }, {\n      key: 'chunksUploaded',\n      get: function get() {\n        return this.chunks.filter(function (chunk) {\n          return !!chunk.uploaded;\n        });\n      }\n    }]);\n\n    return ChunkUploadHandler;\n  }();\n\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n  //\n\n  var script = {\n    methods: {\n      change: function change(e) {\n        this.$parent.addInputFile(e.target);\n        if (e.target.files) {\n          e.target.value = '';\n          if (e.target.files.length && !/safari/i.test(navigator.userAgent)) {\n            e.target.type = '';\n            e.target.type = 'file';\n          }\n        } else {\n          // ie9 fix #219\n          this.$destroy();\n          // eslint-disable-next-line\n          new this.constructor({\n            parent: this.$parent,\n            el: this.$el\n          });\n        }\n      }\n    }\n  };\n\n  /* script */\n  var __vue_script__ = script;\n\n  /* template */\n  var __vue_render__ = function __vue_render__() {\n    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c('input', { attrs: { \"type\": \"file\", \"name\": _vm.$parent.name, \"id\": _vm.$parent.inputId || _vm.$parent.name, \"accept\": _vm.$parent.accept, \"capture\": _vm.$parent.capture, \"disabled\": _vm.$parent.disabled, \"webkitdirectory\": _vm.$parent.directory && _vm.$parent.features.directory, \"directory\": _vm.$parent.directory && _vm.$parent.features.directory, \"multiple\": _vm.$parent.multiple && _vm.$parent.features.html5 }, on: { \"change\": _vm.change } });\n  };\n  var __vue_staticRenderFns__ = [];\n\n  /* style */\n  var __vue_inject_styles__ = undefined;\n  /* scoped */\n  var __vue_scope_id__ = undefined;\n  /* module identifier */\n  var __vue_module_identifier__ = undefined;\n  /* functional template */\n  var __vue_is_functional_template__ = false;\n  /* component normalizer */\n  function __vue_normalize__(template, style, script$$1, scope, functional, moduleIdentifier, createInjector, createInjectorSSR) {\n    var component = (typeof script$$1 === 'function' ? script$$1.options : script$$1) || {};\n\n    if (!component.render) {\n      component.render = template.render;\n      component.staticRenderFns = template.staticRenderFns;\n      component._compiled = true;\n\n      if (functional) component.functional = true;\n    }\n\n    component._scopeId = scope;\n\n    return component;\n  }\n  /* style inject */\n  function __vue_create_injector__() {\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {});\n    var isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return; // SSR styles are present.\n\n      var group = isOldIE ? css.media || 'default' : id;\n      var style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined });\n\n      if (!style.ids.includes(id)) {\n        var code = css.source;\n        var index = style.ids.length;\n\n        style.ids.push(id);\n\n        if (css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\n          // http://stackoverflow.com/a/26603875\n          code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']');\n        }\n\n        if (!style.element) {\n          var el = style.element = document.createElement('style');\n          el.type = 'text/css';\n\n          if (css.media) el.setAttribute('media', css.media);\n          if (isOldIE) {\n            el.setAttribute('data-group', group);\n            el.setAttribute('data-next-index', '0');\n          }\n\n          head.appendChild(el);\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'));\n          style.element.setAttribute('data-next-index', index + 1);\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code);\n          style.element.styleSheet.cssText = style.parts.filter(Boolean).join('\\n');\n        } else {\n          var textNode = document.createTextNode(code);\n          var nodes = style.element.childNodes;\n          if (nodes[index]) style.element.removeChild(nodes[index]);\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n        }\n      }\n    };\n  }\n  /* style inject SSR */\n\n  var InputFile = __vue_normalize__({ render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ }, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, __vue_create_injector__, undefined);\n\n  var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n  var CHUNK_DEFAULT_OPTIONS = {\n    headers: {},\n    action: '',\n    minSize: 1048576,\n    maxActive: 3,\n    maxRetries: 5,\n\n    handler: ChunkUploadHandler\n  };\n\n  var script$1 = {\n    components: {\n      InputFile: InputFile\n    },\n    props: {\n      inputId: {\n        type: String\n      },\n\n      name: {\n        type: String,\n        default: 'file'\n      },\n\n      accept: {\n        type: String\n      },\n\n      capture: {},\n\n      disabled: {},\n\n      multiple: {\n        type: Boolean\n      },\n\n      maximum: {\n        type: Number,\n        default: function _default() {\n          return this.multiple ? 0 : 1;\n        }\n      },\n\n      addIndex: {\n        type: [Boolean, Number]\n      },\n\n      directory: {\n        type: Boolean\n      },\n\n      postAction: {\n        type: String\n      },\n\n      putAction: {\n        type: String\n      },\n\n      customAction: {\n        type: Function\n      },\n\n      headers: {\n        type: Object,\n        default: Object\n      },\n\n      data: {\n        type: Object,\n        default: Object\n      },\n\n      timeout: {\n        type: Number,\n        default: 0\n      },\n\n      drop: {\n        default: false\n      },\n\n      dropDirectory: {\n        type: Boolean,\n        default: true\n      },\n\n      size: {\n        type: Number,\n        default: 0\n      },\n\n      extensions: {\n        default: Array\n      },\n\n      value: {\n        type: Array,\n        default: Array\n      },\n\n      thread: {\n        type: Number,\n        default: 1\n      },\n\n      // Chunk upload enabled\n      chunkEnabled: {\n        type: Boolean,\n        default: false\n      },\n\n      // Chunk upload properties\n      chunk: {\n        type: Object,\n        default: function _default() {\n          return CHUNK_DEFAULT_OPTIONS;\n        }\n      }\n    },\n\n    data: function data() {\n      return {\n        files: this.value,\n        features: {\n          html5: true,\n          directory: false,\n          drag: false\n        },\n\n        active: false,\n        dropActive: false,\n\n        uploading: 0,\n\n        destroy: false\n      };\n    },\n\n\n    /**\n     * mounted\n     * @return {[type]} [description]\n     */\n    mounted: function mounted() {\n      var input = document.createElement('input');\n      input.type = 'file';\n      input.multiple = true;\n\n      // html5 \n      if (window.FormData && input.files) {\n        // \n        if (typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean') {\n          this.features.directory = true;\n        }\n\n        // \n        if (this.features.html5 && typeof input.ondrop !== 'undefined') {\n          this.features.drop = true;\n        }\n      } else {\n        this.features.html5 = false;\n      }\n\n      // files \n      this.maps = {};\n      if (this.files) {\n        for (var i = 0; i < this.files.length; i++) {\n          var file = this.files[i];\n          this.maps[file.id] = file;\n        }\n      }\n\n      this.$nextTick(function () {\n\n        // \n        if (this.$parent) {\n          this.$parent.$forceUpdate();\n        }\n\n        // \n        this.watchDrop(this.drop);\n      });\n    },\n\n\n    /**\n     * beforeDestroy\n     * @return {[type]} [description]\n     */\n    beforeDestroy: function beforeDestroy() {\n      // \n      this.destroy = true;\n\n      // \n      this.active = false;\n    },\n\n\n    computed: {\n      /**\n       * uploading \n       * @return {[type]} [description]\n       */\n\n      /**\n       * uploaded \n       * @return {[type]} [description]\n       */\n      uploaded: function uploaded() {\n        var file = void 0;\n        for (var i = 0; i < this.files.length; i++) {\n          file = this.files[i];\n          if (file.fileObject && !file.error && !file.success) {\n            return false;\n          }\n        }\n        return true;\n      },\n      chunkOptions: function chunkOptions() {\n        return Object.assign(CHUNK_DEFAULT_OPTIONS, this.chunk);\n      },\n      className: function className() {\n        return ['file-uploads', this.features.html5 ? 'file-uploads-html5' : 'file-uploads-html4', this.features.directory && this.directory ? 'file-uploads-directory' : undefined, this.features.drop && this.drop ? 'file-uploads-drop' : undefined, this.disabled ? 'file-uploads-disabled' : undefined];\n      }\n    },\n\n    watch: {\n      active: function active(_active) {\n        this.watchActive(_active);\n      },\n      dropActive: function dropActive() {\n        if (this.$parent) {\n          this.$parent.$forceUpdate();\n        }\n      },\n      drop: function drop(value) {\n        this.watchDrop(value);\n      },\n      value: function value(files) {\n        if (this.files === files) {\n          return;\n        }\n        this.files = files;\n\n        var oldMaps = this.maps;\n\n        //  maps \n        this.maps = {};\n        for (var i = 0; i < this.files.length; i++) {\n          var file = this.files[i];\n          this.maps[file.id] = file;\n        }\n\n        // add, update\n        for (var key in this.maps) {\n          var newFile = this.maps[key];\n          var oldFile = oldMaps[key];\n          if (newFile !== oldFile) {\n            this.emitFile(newFile, oldFile);\n          }\n        }\n\n        // delete\n        for (var _key in oldMaps) {\n          if (!this.maps[_key]) {\n            this.emitFile(undefined, oldMaps[_key]);\n          }\n        }\n      }\n    },\n\n    methods: {\n\n      // \n      clear: function clear() {\n        if (this.files.length) {\n          var files = this.files;\n          this.files = [];\n\n          // \n          this.maps = {};\n\n          // \n          this.emitInput();\n          for (var i = 0; i < files.length; i++) {\n            this.emitFile(undefined, files[i]);\n          }\n        }\n        return true;\n      },\n\n\n      // \n      get: function get(id) {\n        if (!id) {\n          return false;\n        }\n\n        if ((typeof id === 'undefined' ? 'undefined' : _typeof(id)) === 'object') {\n          return this.maps[id.id] || false;\n        }\n\n        return this.maps[id] || false;\n      },\n\n\n      // \n      add: function add(_files) {\n        var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.addIndex;\n\n        var files = _files;\n        var isArray = files instanceof Array;\n\n        // \n        if (!isArray) {\n          files = [files];\n        }\n\n        // \n        var addFiles = [];\n        for (var i = 0; i < files.length; i++) {\n          var file = files[i];\n          if (this.features.html5 && file instanceof Blob) {\n            file = {\n              file: file,\n              size: file.size,\n              name: file.webkitRelativePath || file.relativePath || file.name || 'unknown',\n              type: file.type\n            };\n          }\n          var fileObject = false;\n          if (file.fileObject === false) ; else if (file.fileObject) {\n            fileObject = true;\n          } else if (typeof Element !== 'undefined' && file.el instanceof Element) {\n            fileObject = true;\n          } else if (typeof Blob !== 'undefined' && file.file instanceof Blob) {\n            fileObject = true;\n          }\n          if (fileObject) {\n            file = _extends({\n              fileObject: true,\n              size: -1,\n              name: 'Filename',\n              type: '',\n              active: false,\n              error: '',\n              success: false,\n              putAction: this.putAction,\n              postAction: this.postAction,\n              timeout: this.timeout\n            }, file, {\n              response: {},\n\n              progress: '0.00', // \n              speed: 0 // \n              // xhr: false,                // \n              // iframe: false,             // \n            });\n\n            file.data = _extends({}, this.data, file.data ? file.data : {});\n\n            file.headers = _extends({}, this.headers, file.headers ? file.headers : {});\n          }\n\n          //  id\n          if (!file.id) {\n            file.id = Math.random().toString(36).substr(2);\n          }\n\n          if (this.emitFilter(file, undefined)) {\n            continue;\n          }\n\n          // \n          if (this.maximum > 1 && addFiles.length + this.files.length >= this.maximum) {\n            break;\n          }\n\n          addFiles.push(file);\n\n          // \n          if (this.maximum === 1) {\n            break;\n          }\n        }\n\n        // \n        if (!addFiles.length) {\n          return false;\n        }\n\n        //  1 \n        if (this.maximum === 1) {\n          this.clear();\n        }\n\n        //  files\n        var newFiles = void 0;\n        if (index === true || index === 0) {\n          newFiles = addFiles.concat(this.files);\n        } else if (index) {\n          var _newFiles;\n\n          newFiles = this.files.concat([]);\n          (_newFiles = newFiles).splice.apply(_newFiles, [index, 0].concat(addFiles));\n        } else {\n          newFiles = this.files.concat(addFiles);\n        }\n\n        this.files = newFiles;\n\n        // \n        for (var _i = 0; _i < addFiles.length; _i++) {\n          var _file2 = addFiles[_i];\n          this.maps[_file2.id] = _file2;\n        }\n\n        // \n        this.emitInput();\n        for (var _i2 = 0; _i2 < addFiles.length; _i2++) {\n          this.emitFile(addFiles[_i2], undefined);\n        }\n\n        return isArray ? addFiles : addFiles[0];\n      },\n\n\n      // \n      addInputFile: function addInputFile(el) {\n        var files = [];\n        if (el.files) {\n          for (var i = 0; i < el.files.length; i++) {\n            var file = el.files[i];\n            files.push({\n              size: file.size,\n              name: file.webkitRelativePath || file.relativePath || file.name,\n              type: file.type,\n              file: file\n            });\n          }\n        } else {\n          var names = el.value.replace(/\\\\/g, '/').split('/');\n          delete el.__vuex__;\n          files.push({\n            name: names[names.length - 1],\n            el: el\n          });\n        }\n        return this.add(files);\n      },\n\n\n      //  DataTransfer\n      addDataTransfer: function addDataTransfer(dataTransfer) {\n        var _this = this;\n\n        var files = [];\n        if (dataTransfer.items && dataTransfer.items.length) {\n          var items = [];\n          for (var i = 0; i < dataTransfer.items.length; i++) {\n            var item = dataTransfer.items[i];\n            if (item.getAsEntry) {\n              item = item.getAsEntry() || item.getAsFile();\n            } else if (item.webkitGetAsEntry) {\n              item = item.webkitGetAsEntry() || item.getAsFile();\n            } else {\n              item = item.getAsFile();\n            }\n            if (item) {\n              items.push(item);\n            }\n          }\n\n          return new Promise(function (resolve, reject) {\n            var forEach = function forEach(i) {\n              var item = items[i];\n              //   \n              if (!item || _this.maximum > 0 && files.length >= _this.maximum) {\n                return resolve(_this.add(files));\n              }\n              _this.getEntry(item).then(function (results) {\n                files.push.apply(files, _toConsumableArray(results));\n                forEach(i + 1);\n              });\n            };\n            forEach(0);\n          });\n        }\n\n        if (dataTransfer.files.length) {\n          for (var _i3 = 0; _i3 < dataTransfer.files.length; _i3++) {\n            files.push(dataTransfer.files[_i3]);\n            if (this.maximum > 0 && files.length >= this.maximum) {\n              break;\n            }\n          }\n          return Promise.resolve(this.add(files));\n        }\n\n        return Promise.resolve([]);\n      },\n\n\n      //  entry\n      getEntry: function getEntry(entry) {\n        var _this2 = this;\n\n        var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n        return new Promise(function (resolve, reject) {\n          if (entry.isFile) {\n            entry.file(function (file) {\n              resolve([{\n                size: file.size,\n                name: path + file.name,\n                type: file.type,\n                file: file\n              }]);\n            });\n          } else if (entry.isDirectory && _this2.dropDirectory) {\n            var files = [];\n            var dirReader = entry.createReader();\n            var readEntries = function readEntries() {\n              dirReader.readEntries(function (entries) {\n                var forEach = function forEach(i) {\n                  if (!entries[i] && i === 0 || _this2.maximum > 0 && files.length >= _this2.maximum) {\n                    return resolve(files);\n                  }\n                  if (!entries[i]) {\n                    return readEntries();\n                  }\n                  _this2.getEntry(entries[i], path + entry.name + '/').then(function (results) {\n                    files.push.apply(files, _toConsumableArray(results));\n                    forEach(i + 1);\n                  });\n                };\n                forEach(0);\n              });\n            };\n            readEntries();\n          } else {\n            resolve([]);\n          }\n        });\n      },\n      replace: function replace(id1, id2) {\n        var file1 = this.get(id1);\n        var file2 = this.get(id2);\n        if (!file1 || !file2 || file1 === file2) {\n          return false;\n        }\n        var files = this.files.concat([]);\n        var index1 = files.indexOf(file1);\n        var index2 = files.indexOf(file2);\n        if (index1 === -1 || index2 === -1) {\n          return false;\n        }\n        files[index1] = file2;\n        files[index2] = file1;\n        this.files = files;\n        this.emitInput();\n        return true;\n      },\n\n\n      // \n      remove: function remove(id) {\n        var file = this.get(id);\n        if (file) {\n          if (this.emitFilter(undefined, file)) {\n            return false;\n          }\n          var files = this.files.concat([]);\n          var index = files.indexOf(file);\n          if (index === -1) {\n            console.error('remove', file);\n            return false;\n          }\n          files.splice(index, 1);\n          this.files = files;\n\n          // \n          delete this.maps[file.id];\n\n          // \n          this.emitInput();\n          this.emitFile(undefined, file);\n        }\n        return file;\n      },\n\n\n      // \n      update: function update(id, data) {\n        var file = this.get(id);\n        if (file) {\n          var newFile = _extends({}, file, data);\n          // \n          if (file.fileObject && file.active && !newFile.active && !newFile.error && !newFile.success) {\n            newFile.error = 'abort';\n          }\n\n          if (this.emitFilter(newFile, file)) {\n            return false;\n          }\n\n          var files = this.files.concat([]);\n          var index = files.indexOf(file);\n          if (index === -1) {\n            console.error('update', file);\n            return false;\n          }\n          files.splice(index, 1, newFile);\n          this.files = files;\n\n          //      id)\n          delete this.maps[file.id];\n          this.maps[newFile.id] = newFile;\n\n          // \n          this.emitInput();\n          this.emitFile(newFile, file);\n          return newFile;\n        }\n        return false;\n      },\n\n\n      //   \n      emitFilter: function emitFilter(newFile, oldFile) {\n        var isPrevent = false;\n        this.$emit('input-filter', newFile, oldFile, function () {\n          isPrevent = true;\n          return isPrevent;\n        });\n        return isPrevent;\n      },\n\n\n      //   \n      emitFile: function emitFile(newFile, oldFile) {\n        this.$emit('input-file', newFile, oldFile);\n        if (newFile && newFile.fileObject && newFile.active && (!oldFile || !oldFile.active)) {\n          this.uploading++;\n          // \n          this.$nextTick(function () {\n            var _this3 = this;\n\n            setTimeout(function () {\n              _this3.upload(newFile).then(function () {\n                // eslint-disable-next-line\n                newFile = _this3.get(newFile);\n                if (newFile && newFile.fileObject) {\n                  _this3.update(newFile, {\n                    active: false,\n                    success: !newFile.error\n                  });\n                }\n              }).catch(function (e) {\n                _this3.update(newFile, {\n                  active: false,\n                  success: false,\n                  error: e.code || e.error || e.message || e\n                });\n              });\n            }, parseInt(Math.random() * 50 + 50, 10));\n          });\n        } else if ((!newFile || !newFile.fileObject || !newFile.active) && oldFile && oldFile.fileObject && oldFile.active) {\n          // \n          this.uploading--;\n        }\n\n        // \n        if (this.active && (Boolean(newFile) !== Boolean(oldFile) || newFile.active !== oldFile.active)) {\n          this.watchActive(true);\n        }\n      },\n      emitInput: function emitInput() {\n        this.$emit('input', this.files);\n      },\n\n\n      // \n      upload: function upload(id) {\n        var file = this.get(id);\n\n        // \n        if (!file) {\n          return Promise.reject('not_exists');\n        }\n\n        // \n        if (!file.fileObject) {\n          return Promise.reject('file_object');\n        }\n\n        // \n        if (file.error) {\n          return Promise.reject(file.error);\n        }\n\n        // \n        if (file.success) {\n          return Promise.resolve(file);\n        }\n\n        // \n        var extensions = this.extensions;\n        if (extensions && (extensions.length || typeof extensions.length === 'undefined')) {\n          if ((typeof extensions === 'undefined' ? 'undefined' : _typeof(extensions)) !== 'object' || !(extensions instanceof RegExp)) {\n            if (typeof extensions === 'string') {\n              extensions = extensions.split(',').map(function (value) {\n                return value.trim();\n              }).filter(function (value) {\n                return value;\n              });\n            }\n            extensions = new RegExp('\\\\.(' + extensions.join('|').replace(/\\./g, '\\\\.') + ')$', 'i');\n          }\n          if (file.name.search(extensions) === -1) {\n            return Promise.reject('extension');\n          }\n        }\n\n        // \n        if (this.size > 0 && file.size >= 0 && file.size > this.size) {\n          return Promise.reject('size');\n        }\n\n        if (this.customAction) {\n          return this.customAction(file, this);\n        }\n\n        if (this.features.html5) {\n          if (this.shouldUseChunkUpload(file)) {\n            return this.uploadChunk(file);\n          }\n          if (file.putAction) {\n            return this.uploadPut(file);\n          }\n          if (file.postAction) {\n            return this.uploadHtml5(file);\n          }\n        }\n        if (file.postAction) {\n          return this.uploadHtml4(file);\n        }\n        return Promise.reject('No action configured');\n      },\n\n\n      /**\n       * Whether this file should be uploaded using chunk upload or not\n       *\n       * @param Object file\n       */\n      shouldUseChunkUpload: function shouldUseChunkUpload(file) {\n        return this.chunkEnabled && !!this.chunkOptions.handler && file.size > this.chunkOptions.minSize;\n      },\n\n\n      /**\n       * Upload a file using Chunk method\n       *\n       * @param File file\n       */\n      uploadChunk: function uploadChunk(file) {\n        var HandlerClass = this.chunkOptions.handler;\n        file.chunk = new HandlerClass(file, this.chunkOptions);\n\n        return file.chunk.upload();\n      },\n      uploadPut: function uploadPut(file) {\n        var querys = [];\n        var value = void 0;\n        for (var key in file.data) {\n          value = file.data[key];\n          if (value !== null && value !== undefined) {\n            querys.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n          }\n        }\n        var queryString = querys.length ? (file.putAction.indexOf('?') === -1 ? '?' : '&') + querys.join('&') : '';\n        var xhr = new XMLHttpRequest();\n        xhr.open('PUT', file.putAction + queryString);\n        return this.uploadXhr(xhr, file, file.file);\n      },\n      uploadHtml5: function uploadHtml5(file) {\n        var form = new window.FormData();\n        var value = void 0;\n        for (var key in file.data) {\n          value = file.data[key];\n          if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && typeof value.toString !== 'function') {\n            if (value instanceof File) {\n              form.append(key, value, value.name);\n            } else {\n              form.append(key, JSON.stringify(value));\n            }\n          } else if (value !== null && value !== undefined) {\n            form.append(key, value);\n          }\n        }\n        form.append(this.name, file.file, file.file.filename || file.name);\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', file.postAction);\n        return this.uploadXhr(xhr, file, form);\n      },\n      uploadXhr: function uploadXhr(xhr, _file, body) {\n        var _this4 = this;\n\n        var file = _file;\n        var speedTime = 0;\n        var speedLoaded = 0;\n\n        // \n        xhr.upload.onprogress = function (e) {\n          //   \n          file = _this4.get(file);\n          if (!e.lengthComputable || !file || !file.fileObject || !file.active) {\n            return;\n          }\n\n          //   \n          var speedTime2 = Math.round(Date.now() / 1000);\n          if (speedTime2 === speedTime) {\n            return;\n          }\n          speedTime = speedTime2;\n\n          file = _this4.update(file, {\n            progress: (e.loaded / e.total * 100).toFixed(2),\n            speed: e.loaded - speedLoaded\n          });\n          speedLoaded = e.loaded;\n        };\n\n        // \n        var interval = setInterval(function () {\n          file = _this4.get(file);\n          if (file && file.fileObject && !file.success && !file.error && file.active) {\n            return;\n          }\n\n          if (interval) {\n            clearInterval(interval);\n            interval = false;\n          }\n\n          try {\n            xhr.abort();\n            xhr.timeout = 1;\n          } catch (e) {}\n        }, 100);\n\n        return new Promise(function (resolve, reject) {\n          var complete = void 0;\n          var fn = function fn(e) {\n            // \n            if (complete) {\n              return;\n            }\n            complete = true;\n            if (interval) {\n              clearInterval(interval);\n              interval = false;\n            }\n\n            file = _this4.get(file);\n\n            // \n            if (!file) {\n              return reject('not_exists');\n            }\n\n            // \n            if (!file.fileObject) {\n              return reject('file_object');\n            }\n\n            // \n            if (file.error) {\n              return reject(file.error);\n            }\n\n            // \n            if (!file.active) {\n              return reject('abort');\n            }\n\n            //  \n            if (file.success) {\n              return resolve(file);\n            }\n\n            var data = {};\n\n            switch (e.type) {\n              case 'timeout':\n              case 'abort':\n                data.error = e.type;\n                break;\n              case 'error':\n                if (!xhr.status) {\n                  data.error = 'network';\n                } else if (xhr.status >= 500) {\n                  data.error = 'server';\n                } else if (xhr.status >= 400) {\n                  data.error = 'denied';\n                }\n                break;\n              default:\n                if (xhr.status >= 500) {\n                  data.error = 'server';\n                } else if (xhr.status >= 400) {\n                  data.error = 'denied';\n                } else {\n                  data.progress = '100.00';\n                }\n            }\n\n            if (xhr.responseText) {\n              var contentType = xhr.getResponseHeader('Content-Type');\n              if (contentType && contentType.indexOf('/json') !== -1) {\n                data.response = JSON.parse(xhr.responseText);\n              } else {\n                data.response = xhr.responseText;\n              }\n            }\n\n            // \n            file = _this4.update(file, data);\n\n            // \n            if (file.error) {\n              return reject(file.error);\n            }\n\n            // \n            return resolve(file);\n          };\n\n          // \n          xhr.onload = fn;\n          xhr.onerror = fn;\n          xhr.onabort = fn;\n          xhr.ontimeout = fn;\n\n          // \n          if (file.timeout) {\n            xhr.timeout = file.timeout;\n          }\n\n          // headers\n          for (var key in file.headers) {\n            xhr.setRequestHeader(key, file.headers[key]);\n          }\n\n          //  xhr\n          file = _this4.update(file, { xhr: xhr });\n\n          // \n          xhr.send(body);\n        });\n      },\n      uploadHtml4: function uploadHtml4(_file) {\n        var _this5 = this;\n\n        var file = _file;\n        var onKeydown = function onKeydown(e) {\n          if (e.keyCode === 27) {\n            e.preventDefault();\n          }\n        };\n\n        var iframe = document.createElement('iframe');\n        iframe.id = 'upload-iframe-' + file.id;\n        iframe.name = 'upload-iframe-' + file.id;\n        iframe.src = 'about:blank';\n        iframe.setAttribute('style', 'width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;');\n\n        var form = document.createElement('form');\n\n        form.action = file.postAction;\n\n        form.name = 'upload-form-' + file.id;\n\n        form.setAttribute('method', 'POST');\n        form.setAttribute('target', 'upload-iframe-' + file.id);\n        form.setAttribute('enctype', 'multipart/form-data');\n\n        var value = void 0;\n        var input = void 0;\n        for (var key in file.data) {\n          value = file.data[key];\n          if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && typeof value.toString !== 'function') {\n            value = JSON.stringify(value);\n          }\n          if (value !== null && value !== undefined) {\n            input = document.createElement('input');\n            input.type = 'hidden';\n            input.name = key;\n            input.value = value;\n            form.appendChild(input);\n          }\n        }\n        form.appendChild(file.el);\n\n        document.body.appendChild(iframe).appendChild(form);\n\n        var getResponseData = function getResponseData() {\n          var doc = void 0;\n          try {\n            if (iframe.contentWindow) {\n              doc = iframe.contentWindow.document;\n            }\n          } catch (err) {}\n          if (!doc) {\n            try {\n              doc = iframe.contentDocument ? iframe.contentDocument : iframe.document;\n            } catch (err) {\n              doc = iframe.document;\n            }\n          }\n          if (doc && doc.body) {\n            return doc.body.innerHTML;\n          }\n          return null;\n        };\n\n        return new Promise(function (resolve, reject) {\n          setTimeout(function () {\n            file = _this5.update(file, { iframe: iframe });\n\n            // \n            if (!file) {\n              return reject('not_exists');\n            }\n\n            // \n            var interval = setInterval(function () {\n              file = _this5.get(file);\n              if (file && file.fileObject && !file.success && !file.error && file.active) {\n                return;\n              }\n\n              if (interval) {\n                clearInterval(interval);\n                interval = false;\n              }\n\n              iframe.onabort({ type: file ? 'abort' : 'not_exists' });\n            }, 100);\n\n            var complete = void 0;\n            var fn = function fn(e) {\n              // \n              if (complete) {\n                return;\n              }\n              complete = true;\n\n              if (interval) {\n                clearInterval(interval);\n                interval = false;\n              }\n\n              //  esc \n              document.body.removeEventListener('keydown', onKeydown);\n\n              file = _this5.get(file);\n\n              // \n              if (!file) {\n                return reject('not_exists');\n              }\n\n              // \n              if (!file.fileObject) {\n                return reject('file_object');\n              }\n\n              // \n              if (file.error) {\n                return reject(file.error);\n              }\n\n              // \n              if (!file.active) {\n                return reject('abort');\n              }\n\n              //  \n              if (file.success) {\n                return resolve(file);\n              }\n\n              var response = getResponseData();\n              var data = {};\n              switch (e.type) {\n                case 'abort':\n                  data.error = 'abort';\n                  break;\n                case 'error':\n                  if (file.error) {\n                    data.error = file.error;\n                  } else if (response === null) {\n                    data.error = 'network';\n                  } else {\n                    data.error = 'denied';\n                  }\n                  break;\n                default:\n                  if (file.error) {\n                    data.error = file.error;\n                  } else if (data === null) {\n                    data.error = 'network';\n                  } else {\n                    data.progress = '100.00';\n                  }\n              }\n\n              if (response !== null) {\n                if (response && response.substr(0, 1) === '{' && response.substr(response.length - 1, 1) === '}') {\n                  try {\n                    response = JSON.parse(response);\n                  } catch (err) {}\n                }\n                data.response = response;\n              }\n\n              // \n              file = _this5.update(file, data);\n\n              if (file.error) {\n                return reject(file.error);\n              }\n\n              // \n              return resolve(file);\n            };\n\n            // \n            iframe.onload = fn;\n            iframe.onerror = fn;\n            iframe.onabort = fn;\n\n            //  esc \n            document.body.addEventListener('keydown', onKeydown);\n\n            // \n            form.submit();\n          }, 50);\n        }).then(function (res) {\n          iframe.parentNode && iframe.parentNode.removeChild(iframe);\n          return res;\n        }).catch(function (res) {\n          iframe.parentNode && iframe.parentNode.removeChild(iframe);\n          return res;\n        });\n      },\n      watchActive: function watchActive(active) {\n        var file = void 0;\n        var index = 0;\n        while (file = this.files[index]) {\n          index++;\n          if (!file.fileObject) ; else if (active && !this.destroy) {\n            if (this.uploading >= this.thread || this.uploading && !this.features.html5) {\n              break;\n            }\n            if (!file.active && !file.error && !file.success) {\n              this.update(file, { active: true });\n            }\n          } else {\n            if (file.active) {\n              this.update(file, { active: false });\n            }\n          }\n        }\n        if (this.uploading === 0) {\n          this.active = false;\n        }\n      },\n      watchDrop: function watchDrop(_el) {\n        var el = _el;\n        if (!this.features.drop) {\n          return;\n        }\n\n        // \n        if (this.dropElement) {\n          try {\n            document.removeEventListener('dragenter', this.onDragenter, false);\n            document.removeEventListener('dragleave', this.onDragleave, false);\n            document.removeEventListener('drop', this.onDocumentDrop, false);\n            this.dropElement.removeEventListener('dragover', this.onDragover, false);\n            this.dropElement.removeEventListener('drop', this.onDrop, false);\n          } catch (e) {}\n        }\n\n        if (!el) {\n          el = false;\n        } else if (typeof el === 'string') {\n          el = document.querySelector(el) || this.$root.$el.querySelector(el);\n        } else if (el === true) {\n          el = this.$parent.$el;\n        }\n\n        this.dropElement = el;\n\n        if (this.dropElement) {\n          document.addEventListener('dragenter', this.onDragenter, false);\n          document.addEventListener('dragleave', this.onDragleave, false);\n          document.addEventListener('drop', this.onDocumentDrop, false);\n          this.dropElement.addEventListener('dragover', this.onDragover, false);\n          this.dropElement.addEventListener('drop', this.onDrop, false);\n        }\n      },\n      onDragenter: function onDragenter(e) {\n        e.preventDefault();\n        if (this.dropActive) {\n          return;\n        }\n        if (!e.dataTransfer) {\n          return;\n        }\n        var dt = e.dataTransfer;\n        if (dt.files && dt.files.length) {\n          this.dropActive = true;\n        } else if (!dt.types) {\n          this.dropActive = true;\n        } else if (dt.types.indexOf && dt.types.indexOf('Files') !== -1) {\n          this.dropActive = true;\n        } else if (dt.types.contains && dt.types.contains('Files')) {\n          this.dropActive = true;\n        }\n      },\n      onDragleave: function onDragleave(e) {\n        e.preventDefault();\n        if (!this.dropActive) {\n          return;\n        }\n        if (e.target.nodeName === 'HTML' || e.target === e.explicitOriginalTarget || !e.fromElement && (e.clientX <= 0 || e.clientY <= 0 || e.clientX >= window.innerWidth || e.clientY >= window.innerHeight)) {\n          this.dropActive = false;\n        }\n      },\n      onDragover: function onDragover(e) {\n        e.preventDefault();\n      },\n      onDocumentDrop: function onDocumentDrop() {\n        this.dropActive = false;\n      },\n      onDrop: function onDrop(e) {\n        e.preventDefault();\n        this.addDataTransfer(e.dataTransfer);\n      }\n    }\n  };\n\n  /* script */\n  var __vue_script__$1 = script$1;\n\n  /* template */\n  var __vue_render__$1 = function __vue_render__() {\n    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c('span', { class: _vm.className }, [_vm._t(\"default\"), _vm._v(\" \"), _c('label', { attrs: { \"for\": _vm.inputId || _vm.name } }), _vm._v(\" \"), _c('input-file')], 2);\n  };\n  var __vue_staticRenderFns__$1 = [];\n\n  /* style */\n  var __vue_inject_styles__$1 = function (inject) {\n    if (!inject) return;\n    inject(\"data-v-595958af_0\", { source: \"\\n.file-uploads{overflow:hidden;position:relative;text-align:center;display:inline-block\\n}\\n.file-uploads.file-uploads-html4 input,.file-uploads.file-uploads-html5 label{background:#fff;opacity:0;font-size:20em;z-index:1;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%\\n}\\n.file-uploads.file-uploads-html4 label,.file-uploads.file-uploads-html5 input{background:rgba(255,255,255,0);overflow:hidden;position:fixed;width:1px;height:1px;z-index:-1;opacity:0\\n}\", map: undefined, media: undefined });\n  };\n  /* scoped */\n  var __vue_scope_id__$1 = undefined;\n  /* module identifier */\n  var __vue_module_identifier__$1 = undefined;\n  /* functional template */\n  var __vue_is_functional_template__$1 = false;\n  /* component normalizer */\n  function __vue_normalize__$1(template, style, script, scope, functional, moduleIdentifier, createInjector, createInjectorSSR) {\n    var component = (typeof script === 'function' ? script.options : script) || {};\n\n    if (!component.render) {\n      component.render = template.render;\n      component.staticRenderFns = template.staticRenderFns;\n      component._compiled = true;\n\n      if (functional) component.functional = true;\n    }\n\n    component._scopeId = scope;\n\n    {\n      var hook = void 0;\n      if (style) {\n        hook = function hook(context) {\n          style.call(this, createInjector(context));\n        };\n      }\n\n      if (hook !== undefined) {\n        if (component.functional) {\n          // register for functional component in vue file\n          var originalRender = component.render;\n          component.render = function renderWithStyleInjection(h, context) {\n            hook.call(context);\n            return originalRender(h, context);\n          };\n        } else {\n          // inject component registration as beforeCreate hook\n          var existing = component.beforeCreate;\n          component.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n        }\n      }\n    }\n\n    return component;\n  }\n  /* style inject */\n  function __vue_create_injector__$1() {\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var styles = __vue_create_injector__$1.styles || (__vue_create_injector__$1.styles = {});\n    var isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\n\n    return function addStyle(id, css) {\n      if (document.querySelector('style[data-vue-ssr-id~=\"' + id + '\"]')) return; // SSR styles are present.\n\n      var group = isOldIE ? css.media || 'default' : id;\n      var style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined });\n\n      if (!style.ids.includes(id)) {\n        var code = css.source;\n        var index = style.ids.length;\n\n        style.ids.push(id);\n\n        if (css.map) {\n          // https://developer.chrome.com/devtools/docs/javascript-debugging\n          // this makes source maps inside style tags work properly in Chrome\n          code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\n          // http://stackoverflow.com/a/26603875\n          code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n        }\n\n        if (isOldIE) {\n          style.element = style.element || document.querySelector('style[data-group=' + group + ']');\n        }\n\n        if (!style.element) {\n          var el = style.element = document.createElement('style');\n          el.type = 'text/css';\n\n          if (css.media) el.setAttribute('media', css.media);\n          if (isOldIE) {\n            el.setAttribute('data-group', group);\n            el.setAttribute('data-next-index', '0');\n          }\n\n          head.appendChild(el);\n        }\n\n        if (isOldIE) {\n          index = parseInt(style.element.getAttribute('data-next-index'));\n          style.element.setAttribute('data-next-index', index + 1);\n        }\n\n        if (style.element.styleSheet) {\n          style.parts.push(code);\n          style.element.styleSheet.cssText = style.parts.filter(Boolean).join('\\n');\n        } else {\n          var textNode = document.createTextNode(code);\n          var nodes = style.element.childNodes;\n          if (nodes[index]) style.element.removeChild(nodes[index]);\n          if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n        }\n      }\n    };\n  }\n  /* style inject SSR */\n\n  var FileUpload = __vue_normalize__$1({ render: __vue_render__$1, staticRenderFns: __vue_staticRenderFns__$1 }, __vue_inject_styles__$1, __vue_script__$1, __vue_scope_id__$1, __vue_is_functional_template__$1, __vue_module_identifier__$1, __vue_create_injector__$1, undefined);\n\n  var FileUpload$1 = /*#__PURE__*/Object.freeze({\n    default: FileUpload\n  });\n\n  var require$$0 = ( FileUpload$1 && FileUpload ) || FileUpload$1;\n\n  var src = require$$0;\n\n  return src;\n\n})));\n//# sourceMappingURL=vue-upload-component.js.map\n","/**\n * if either resolve and reject are defined\n * we need to resolve something when the popup\n * is being closed. Otherwise the popup is only closed\n * @param state\n */\nexport default function( state: any ) {\n    if ( this.$popupParams.resolve !== undefined && this.$popupParams.reject ) {\n        state !== false ? this.$popupParams.resolve( state ) : this.$popupParams.reject( state );\n    }\n    this.$popup.close();\n}","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var map = {\n\t\"./af\": 15,\n\t\"./af.js\": 15,\n\t\"./ar\": 16,\n\t\"./ar-dz\": 17,\n\t\"./ar-dz.js\": 17,\n\t\"./ar-kw\": 18,\n\t\"./ar-kw.js\": 18,\n\t\"./ar-ly\": 19,\n\t\"./ar-ly.js\": 19,\n\t\"./ar-ma\": 20,\n\t\"./ar-ma.js\": 20,\n\t\"./ar-sa\": 21,\n\t\"./ar-sa.js\": 21,\n\t\"./ar-tn\": 22,\n\t\"./ar-tn.js\": 22,\n\t\"./ar.js\": 16,\n\t\"./az\": 23,\n\t\"./az.js\": 23,\n\t\"./be\": 24,\n\t\"./be.js\": 24,\n\t\"./bg\": 25,\n\t\"./bg.js\": 25,\n\t\"./bm\": 26,\n\t\"./bm.js\": 26,\n\t\"./bn\": 27,\n\t\"./bn-bd\": 28,\n\t\"./bn-bd.js\": 28,\n\t\"./bn.js\": 27,\n\t\"./bo\": 29,\n\t\"./bo.js\": 29,\n\t\"./br\": 30,\n\t\"./br.js\": 30,\n\t\"./bs\": 31,\n\t\"./bs.js\": 31,\n\t\"./ca\": 32,\n\t\"./ca.js\": 32,\n\t\"./cs\": 33,\n\t\"./cs.js\": 33,\n\t\"./cv\": 34,\n\t\"./cv.js\": 34,\n\t\"./cy\": 35,\n\t\"./cy.js\": 35,\n\t\"./da\": 36,\n\t\"./da.js\": 36,\n\t\"./de\": 37,\n\t\"./de-at\": 38,\n\t\"./de-at.js\": 38,\n\t\"./de-ch\": 39,\n\t\"./de-ch.js\": 39,\n\t\"./de.js\": 37,\n\t\"./dv\": 40,\n\t\"./dv.js\": 40,\n\t\"./el\": 41,\n\t\"./el.js\": 41,\n\t\"./en-au\": 42,\n\t\"./en-au.js\": 42,\n\t\"./en-ca\": 43,\n\t\"./en-ca.js\": 43,\n\t\"./en-gb\": 44,\n\t\"./en-gb.js\": 44,\n\t\"./en-ie\": 45,\n\t\"./en-ie.js\": 45,\n\t\"./en-il\": 46,\n\t\"./en-il.js\": 46,\n\t\"./en-in\": 47,\n\t\"./en-in.js\": 47,\n\t\"./en-nz\": 48,\n\t\"./en-nz.js\": 48,\n\t\"./en-sg\": 49,\n\t\"./en-sg.js\": 49,\n\t\"./eo\": 50,\n\t\"./eo.js\": 50,\n\t\"./es\": 51,\n\t\"./es-do\": 52,\n\t\"./es-do.js\": 52,\n\t\"./es-mx\": 53,\n\t\"./es-mx.js\": 53,\n\t\"./es-us\": 54,\n\t\"./es-us.js\": 54,\n\t\"./es.js\": 51,\n\t\"./et\": 55,\n\t\"./et.js\": 55,\n\t\"./eu\": 56,\n\t\"./eu.js\": 56,\n\t\"./fa\": 57,\n\t\"./fa.js\": 57,\n\t\"./fi\": 58,\n\t\"./fi.js\": 58,\n\t\"./fil\": 59,\n\t\"./fil.js\": 59,\n\t\"./fo\": 60,\n\t\"./fo.js\": 60,\n\t\"./fr\": 61,\n\t\"./fr-ca\": 62,\n\t\"./fr-ca.js\": 62,\n\t\"./fr-ch\": 63,\n\t\"./fr-ch.js\": 63,\n\t\"./fr.js\": 61,\n\t\"./fy\": 64,\n\t\"./fy.js\": 64,\n\t\"./ga\": 65,\n\t\"./ga.js\": 65,\n\t\"./gd\": 66,\n\t\"./gd.js\": 66,\n\t\"./gl\": 67,\n\t\"./gl.js\": 67,\n\t\"./gom-deva\": 68,\n\t\"./gom-deva.js\": 68,\n\t\"./gom-latn\": 69,\n\t\"./gom-latn.js\": 69,\n\t\"./gu\": 70,\n\t\"./gu.js\": 70,\n\t\"./he\": 71,\n\t\"./he.js\": 71,\n\t\"./hi\": 72,\n\t\"./hi.js\": 72,\n\t\"./hr\": 73,\n\t\"./hr.js\": 73,\n\t\"./hu\": 74,\n\t\"./hu.js\": 74,\n\t\"./hy-am\": 75,\n\t\"./hy-am.js\": 75,\n\t\"./id\": 76,\n\t\"./id.js\": 76,\n\t\"./is\": 77,\n\t\"./is.js\": 77,\n\t\"./it\": 78,\n\t\"./it-ch\": 79,\n\t\"./it-ch.js\": 79,\n\t\"./it.js\": 78,\n\t\"./ja\": 80,\n\t\"./ja.js\": 80,\n\t\"./jv\": 81,\n\t\"./jv.js\": 81,\n\t\"./ka\": 82,\n\t\"./ka.js\": 82,\n\t\"./kk\": 83,\n\t\"./kk.js\": 83,\n\t\"./km\": 84,\n\t\"./km.js\": 84,\n\t\"./kn\": 85,\n\t\"./kn.js\": 85,\n\t\"./ko\": 86,\n\t\"./ko.js\": 86,\n\t\"./ku\": 87,\n\t\"./ku.js\": 87,\n\t\"./ky\": 88,\n\t\"./ky.js\": 88,\n\t\"./lb\": 89,\n\t\"./lb.js\": 89,\n\t\"./lo\": 90,\n\t\"./lo.js\": 90,\n\t\"./lt\": 91,\n\t\"./lt.js\": 91,\n\t\"./lv\": 92,\n\t\"./lv.js\": 92,\n\t\"./me\": 93,\n\t\"./me.js\": 93,\n\t\"./mi\": 94,\n\t\"./mi.js\": 94,\n\t\"./mk\": 95,\n\t\"./mk.js\": 95,\n\t\"./ml\": 96,\n\t\"./ml.js\": 96,\n\t\"./mn\": 97,\n\t\"./mn.js\": 97,\n\t\"./mr\": 98,\n\t\"./mr.js\": 98,\n\t\"./ms\": 99,\n\t\"./ms-my\": 100,\n\t\"./ms-my.js\": 100,\n\t\"./ms.js\": 99,\n\t\"./mt\": 101,\n\t\"./mt.js\": 101,\n\t\"./my\": 102,\n\t\"./my.js\": 102,\n\t\"./nb\": 103,\n\t\"./nb.js\": 103,\n\t\"./ne\": 104,\n\t\"./ne.js\": 104,\n\t\"./nl\": 105,\n\t\"./nl-be\": 106,\n\t\"./nl-be.js\": 106,\n\t\"./nl.js\": 105,\n\t\"./nn\": 107,\n\t\"./nn.js\": 107,\n\t\"./oc-lnc\": 108,\n\t\"./oc-lnc.js\": 108,\n\t\"./pa-in\": 109,\n\t\"./pa-in.js\": 109,\n\t\"./pl\": 110,\n\t\"./pl.js\": 110,\n\t\"./pt\": 111,\n\t\"./pt-br\": 112,\n\t\"./pt-br.js\": 112,\n\t\"./pt.js\": 111,\n\t\"./ro\": 113,\n\t\"./ro.js\": 113,\n\t\"./ru\": 114,\n\t\"./ru.js\": 114,\n\t\"./sd\": 115,\n\t\"./sd.js\": 115,\n\t\"./se\": 116,\n\t\"./se.js\": 116,\n\t\"./si\": 117,\n\t\"./si.js\": 117,\n\t\"./sk\": 118,\n\t\"./sk.js\": 118,\n\t\"./sl\": 119,\n\t\"./sl.js\": 119,\n\t\"./sq\": 120,\n\t\"./sq.js\": 120,\n\t\"./sr\": 121,\n\t\"./sr-cyrl\": 122,\n\t\"./sr-cyrl.js\": 122,\n\t\"./sr.js\": 121,\n\t\"./ss\": 123,\n\t\"./ss.js\": 123,\n\t\"./sv\": 124,\n\t\"./sv.js\": 124,\n\t\"./sw\": 125,\n\t\"./sw.js\": 125,\n\t\"./ta\": 126,\n\t\"./ta.js\": 126,\n\t\"./te\": 127,\n\t\"./te.js\": 127,\n\t\"./tet\": 128,\n\t\"./tet.js\": 128,\n\t\"./tg\": 129,\n\t\"./tg.js\": 129,\n\t\"./th\": 130,\n\t\"./th.js\": 130,\n\t\"./tk\": 131,\n\t\"./tk.js\": 131,\n\t\"./tl-ph\": 132,\n\t\"./tl-ph.js\": 132,\n\t\"./tlh\": 133,\n\t\"./tlh.js\": 133,\n\t\"./tr\": 134,\n\t\"./tr.js\": 134,\n\t\"./tzl\": 135,\n\t\"./tzl.js\": 135,\n\t\"./tzm\": 136,\n\t\"./tzm-latn\": 137,\n\t\"./tzm-latn.js\": 137,\n\t\"./tzm.js\": 136,\n\t\"./ug-cn\": 138,\n\t\"./ug-cn.js\": 138,\n\t\"./uk\": 139,\n\t\"./uk.js\": 139,\n\t\"./ur\": 140,\n\t\"./ur.js\": 140,\n\t\"./uz\": 141,\n\t\"./uz-latn\": 142,\n\t\"./uz-latn.js\": 142,\n\t\"./uz.js\": 141,\n\t\"./vi\": 143,\n\t\"./vi.js\": 143,\n\t\"./x-pseudo\": 144,\n\t\"./x-pseudo.js\": 144,\n\t\"./yo\": 145,\n\t\"./yo.js\": 145,\n\t\"./zh-cn\": 146,\n\t\"./zh-cn.js\": 146,\n\t\"./zh-hk\": 147,\n\t\"./zh-hk.js\": 147,\n\t\"./zh-mo\": 148,\n\t\"./zh-mo.js\": 148,\n\t\"./zh-tw\": 149,\n\t\"./zh-tw.js\": 149\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 172;","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg-white w-6/7-screen md:w-4/5-screen lg:w-3/5-screen h-6/7-screen md:h-4/5-screen shadow-lg flex flex-col overflow-hidden\"},[_c('div',{staticClass:\"p-2 border-b border-gray-200 flex justify-between items-center\"},[_c('h3',{staticClass:\"font-bold text-gray-700\"},[_vm._v(\"Shipping & Billing\")]),_vm._v(\" \"),_c('div',{staticClass:\"tools\"},[_c('button',{staticClass:\"hover:bg-red-400 hover:text-white hover:border-red-600 rounded-full h-8 w-8 border items-center justify-center\",on:{\"click\":function($event){return _vm.closePopup()}}},[_c('i',{staticClass:\"las la-times\"})])])]),_vm._v(\" \"),_c('div',{staticClass:\"flex-auto bg-gray-200 p-4 overflow-y-auto\"},[_c('div',{staticClass:\"my-5\",attrs:{\"id\":\"tabs-container\"}},[_c('div',{staticClass:\"header flex\",staticStyle:{\"margin-bottom\":\"-1px\"}},_vm._l((_vm.tabs),function(tab,identifier){return _c('div',{key:identifier,staticClass:\"tab rounded-tl rounded-tr border border-gray-400  px-3 py-2 text-gray-700 cursor-pointer\",class:tab.active ? 'border-b-0 bg-white' : 'border bg-gray-200',staticStyle:{\"margin-right\":\"-1px\"},on:{\"click\":function($event){return _vm.toggle( identifier )}}},[_vm._v(_vm._s(tab.label))])}),0),_vm._v(\" \"),_c('div',{staticClass:\"border border-gray-400 p-4 bg-white\"},[_c('div',{staticClass:\"-mx-4 flex flex-wrap\"},_vm._l((_vm.activeTabFields),function(field,index){return _c('div',{key:index,class:'px-4 w-full md:w-1/2 lg:w-1/3'},[_c('ns-field',{attrs:{\"field\":field},on:{\"blur\":function($event){return _vm.formValidation.checkField( field )},\"change\":function($event){return _vm.formValidation.checkField( field )}}})],1)}),0)])])]),_vm._v(\" \"),_c('div',{staticClass:\"p-2 flex justify-between border-t border-gray-300\"},[_c('div'),_vm._v(\" \"),_c('div',[_c('ns-button',{attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.submitInformations()}}},[_vm._v(\"Save\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"bg-white w-6/7-screen md:w-4/5-screen lg:w-3/5-screen h-6/7-screen md:h-4/5-screen shadow-lg flex flex-col overflow-hidden\">\n        <div class=\"p-2 border-b border-gray-200 flex justify-between items-center\">\n            <h3 class=\"font-bold text-gray-700\">Shipping & Billing</h3>\n            <div class=\"tools\">\n                <button @click=\"closePopup()\" class=\"hover:bg-red-400 hover:text-white hover:border-red-600 rounded-full h-8 w-8 border items-center justify-center\">\n                    <i class=\"las la-times\"></i>\n                </button>\n            </div>\n        </div>\n        <div class=\"flex-auto bg-gray-200 p-4 overflow-y-auto\">\n            <div id=\"tabs-container\" class=\"my-5\">\n                <div class=\"header flex\" style=\"margin-bottom: -1px;\">\n                    <div :key=\"identifier\" v-for=\"( tab , identifier ) of tabs\" @click=\"toggle( identifier )\" :class=\"tab.active ? 'border-b-0 bg-white' : 'border bg-gray-200'\" class=\"tab rounded-tl rounded-tr border border-gray-400  px-3 py-2 text-gray-700 cursor-pointer\" style=\"margin-right: -1px\">{{ tab.label }}</div>\n                </div>\n                <div class=\"border border-gray-400 p-4 bg-white\">\n                    <div class=\"-mx-4 flex flex-wrap\">\n                        <div :key=\"index\" :class=\"'px-4 w-full md:w-1/2 lg:w-1/3'\" v-for=\"(field,index) of activeTabFields\">\n                            <ns-field @blur=\"formValidation.checkField( field )\" @change=\"formValidation.checkField( field )\" :field=\"field\"/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"p-2 flex justify-between border-t border-gray-300\">\n            <div></div>\n            <div>\n                <ns-button @click=\"submitInformations()\" type=\"info\">Save</ns-button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport { nsHttpClient } from '@/bootstrap';\nimport resolveIfQueued from \"@/libraries/popup-resolver\";\nimport FormValidation from '@/libraries/form-validation';\nexport default {\n    name: 'ns-pos-shipping-popup',\n    computed: {\n        activeTabFields() {\n            if ( this.tabs !== null ) {\n                for( let index in this.tabs ) {\n                    if ( this.tabs[ index ].active ) {\n                        return this.tabs[ index ].fields;\n                    }\n                }\n            }\n            return [];\n        },\n        useBillingInfo() {\n            return this.tabs !== null ? this.tabs.billing.fields[0].value : new Object;\n        },\n        useShippingInfo() {\n            return this.tabs !== null ? this.tabs.shipping.fields[0].value : new Object;\n        }\n    },\n    destroyed() {\n        this.orderSubscription.unsubscribe();\n    },\n    mounted() {\n        this.$popup.event.subscribe( action => {\n            if ( action.event === 'click-overlay' ) {\n                this.resolveIfQueued( false );\n            }\n        });\n\n        this.orderSubscription  =   POS.order.subscribe( order => this.order = order ); \n\n        this.loadForm();\n    },\n    data() {\n        return {\n            tabs : null,\n            orderSubscription: null,\n            order: null,\n            formValidation: new FormValidation\n        }\n    },\n    watch: {\n        useBillingInfo( value ) {\n            if ( value === 1 ) {\n                this.tabs.billing.fields.forEach( field => {\n                    if ( field.name !== '_use_customer_billing' ) {\n                        field.value     =   this.order.customer.billing ? this.order.customer.billing[ field.name ] : field.value;\n                    }\n                });\n            }\n        },\n        useShippingInfo( value ) {\n            if ( value === 1 ) {\n                this.tabs.shipping.fields.forEach( field => {\n                    if ( field.name !== '_use_customer_shipping' ) {\n                        field.value     =   this.order.customer.shipping ? this.order.customer.shipping[ field.name ] : field.value;\n                    }\n                });\n            }\n        }\n    },\n    methods: {\n        resolveIfQueued,\n\n        submitInformations() {\n            const form  =   this.formValidation.extractForm({ tabs : this.tabs });\n\n            /**\n             * That should only update\n             * the shipping type and shipping (fees)\n             */\n            for( let index in form.general ) {\n                if ([ 'shipping', 'shipping_rate' ].includes( index ) ) {\n                    form.general[ index ]   =   parseFloat( form.general[ index ] );\n                }\n            }\n            \n            this.order  =   { ...this.order, ...form.general };\n            \n            /**\n             * delete the information as we don't want \n             * to add it to the addresses\n             */\n            delete form.general;\n            delete form.shipping._use_customer_shipping;\n            delete form.billing._use_customer_billing;\n\n            this.order.addresses    =   form;\n            \n            POS.order.next( this.order );\n            POS.refreshCart();\n            \n            this.resolveIfQueued( true );\n        },\n\n        closePopup() {\n            this.resolveIfQueued( false );\n        },\n\n        toggle( identifier ) {\n            for( let key in this.tabs ) {\n                this.tabs[ key ].active    =   false;\n            }\n            this.tabs[ identifier ].active     =   true;\n        },\n        loadForm() {\n            nsHttpClient.get( '/api/nexopos/v4/forms/ns.pos-addresses' )\n                .subscribe( ({tabs}) => {\n                    /**\n                     * let's populate back the fields\n                     * with what might have been set previously.\n                     */\n                    for( let index in tabs ) {\n                        if ( index === 'general' ) {\n                            tabs[ index ].fields.forEach( field => {\n                                field.value     =   this.order[ field.name ] || '';\n                            });\n                        } else {\n                            tabs[ index ].fields.forEach( field => {\n                                field.value     =   this.order.addresses[ index ] ? this.order.addresses[ index ][ field.name ] : '';\n                            });\n                        }\n                    }\n\n                    this.tabs   =   this.formValidation.initializeTabs( tabs );\n                });\n        }\n    }\n}\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-shipping-popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-shipping-popup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ns-pos-shipping-popup.vue?vue&type=template&id=008cdb32&\"\nimport script from \"./ns-pos-shipping-popup.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-shipping-popup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-full w-4/5-screen md:w-2/5-screen lg:w-2/5-screen xl:w-2/6-screen bg-white shadow-lg\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"grid grid-flow-row grid-cols-2 grid-rows-2\"},_vm._l((_vm.types),function(type){return _c('div',{key:type.identifier,staticClass:\"hover:bg-blue-100 h-56 flex items-center justify-center flex-col cursor-pointer border border-gray-200\",class:type.selected ? 'bg-blue-100' : '',on:{\"click\":function($event){return _vm.select( type )}}},[_c('img',{staticClass:\"w-32 h-32\",attrs:{\"src\":type.icon,\"alt\":\"\"}}),_vm._v(\" \"),_c('h4',{staticClass:\"font-semibold text-xl my-2 text-gray-700\"},[_vm._v(_vm._s(type.label))])])}),0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-16 flex justify-center items-center\",attrs:{\"id\":\"header\"}},[_c('h3',{staticClass:\"font-bold text-gray-700\"},[_vm._v(\"Define The Order Type\")])])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-order-type-popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-order-type-popup.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"h-full w-4/5-screen md:w-2/5-screen lg:w-2/5-screen xl:w-2/6-screen bg-white shadow-lg\">\n        <div id=\"header\" class=\"h-16 flex justify-center items-center\">\n            <h3 class=\"font-bold text-gray-700\">Define The Order Type</h3>\n        </div>\n        <div class=\"grid grid-flow-row grid-cols-2 grid-rows-2\">\n            <div @click=\"select( type )\" :key=\"type.identifier\" v-for=\"type of types\" :class=\"type.selected ? 'bg-blue-100' : ''\" class=\"hover:bg-blue-100 h-56 flex items-center justify-center flex-col cursor-pointer border border-gray-200\">\n                <img :src=\"type.icon\" alt=\"\" class=\"w-32 h-32\">\n                <h4 class=\"font-semibold text-xl my-2 text-gray-700\">{{ type.label }}</h4>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport resolveIfQueued from '@/libraries/popup-resolver';\nimport nsPosShippingPopupVue from './ns-pos-shipping-popup.vue';\n\nexport default {\n    data() {\n        return {\n            types: [],\n            typeSubscription: null,\n        }\n    },\n    mounted() {\n        this.$popup.event.subscribe( action => {\n            if ( action.event === 'click-overlay' ) {\n                this.resolveIfQueued( false );\n            }\n        });\n        \n        this.typeSubscription   =   POS.types.subscribe( types => {\n            this.types  =   types;\n        });\n    },\n    destroyed() {\n        this.typeSubscription.unsubscribe();\n    },\n    methods: {\n        resolveIfQueued,\n\n        select( type ) {\n            const index     =   this.types.indexOf( type );\n            this.types.forEach( type => type.selected = false );\n            this.types[ index ].selected    =   true;\n\n            console.log( this.types );\n\n            /**\n             * that's hardcoded\n             */\n            POS.types.next( this.types );\n\n            if ( type.identifier === 'delivery' ) {\n                this.$popup.close();\n                new Promise( ( resolve, reject ) => {\n                    Popup.show( \n                        nsPosShippingPopupVue, { \n                            resolve : this.$popupParams.resolve, \n                            reject : this.$popupParams.reject \n                        }\n                    );\n                });\n            } else {\n                this.resolveIfQueued( this.types );\n            }\n\n        }\n    }\n}\n</script>","import { render, staticRenderFns } from \"./ns-pos-order-type-popup.vue?vue&type=template&id=5ee88898&\"\nimport script from \"./ns-pos-order-type-popup.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-order-type-popup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Popup } from \"../../../../../libraries/popup\";\n\nconst nsPosQuantityPopup    =   require( '../../popups/ns-pos-quantity-popup' ).default;\n\nexport class ProductQuantityPromise {\n    constructor( \n        protected product \n    ) {}\n\n    run( data ) {\n        return new Promise( ( resolve, reject ) => {\n            const popup     =   new Popup({\n                popupClass: 'shadow-lg h-1/2-screen w-3/4 md:w-1/2 lg:w-2/5 xl:w-1/4 bg-white'\n            });\n            \n            const product   =   this.product;\n            \n            popup.open( nsPosQuantityPopup, { resolve, reject, product, data });\n        });\n    }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg-white shadow min-h-2/5-screen w-3/4-screen md:w-3/5-screen lg:w-2/5-screen xl:w-1/5-screen relative\"},[(_vm.isLoading)?_c('div',{staticClass:\"flex w-full h-full absolute top-O left-0 items-center justify-center\",staticStyle:{\"background\":\"rgb(202 202 202 / 49%)\"},attrs:{\"id\":\"loading-overlay\"}},[_c('ns-spinner')],1):_vm._e(),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"h-16 border-b bg-gray-800 text-white border-gray-200 flex items-center justify-center\",attrs:{\"id\":\"screen\"}},[_c('h1',{staticClass:\"font-bold text-3xl\"},[_vm._v(_vm._s(_vm.finalValue))])]),_vm._v(\" \"),_c('div',{staticClass:\"grid grid-flow-row grid-cols-3 grid-rows-3\",attrs:{\"id\":\"numpad\"}},_vm._l((_vm.keys),function(key,index){return _c('div',{key:index,staticClass:\"hover:bg-blue-400 hover:text-white hover:border-blue-600 text-xl font-bold border border-gray-200 h-24 flex items-center justify-center cursor-pointer\",on:{\"click\":function($event){return _vm.inputValue( key )}}},[(key.value !== undefined)?_c('span',[_vm._v(_vm._s(key.value))]):_vm._e(),_vm._v(\" \"),(key.icon)?_c('i',{staticClass:\"las\",class:key.icon}):_vm._e()])}),0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex-shrink-0 py-2 border-b border-gray-200\"},[_c('h1',{staticClass:\"text-xl font-bold text-gray-700 text-center\"},[_vm._v(\"Define Quantity\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"bg-white shadow min-h-2/5-screen w-3/4-screen md:w-3/5-screen lg:w-2/5-screen xl:w-1/5-screen relative\">\n        <div id=\"loading-overlay\" v-if=\"isLoading\" style=\"background:rgb(202 202 202 / 49%)\" class=\"flex w-full h-full absolute top-O left-0 items-center justify-center\">\n            <ns-spinner></ns-spinner>\n        </div>\n        <div class=\"flex-shrink-0 py-2 border-b border-gray-200\">\n            <h1 class=\"text-xl font-bold text-gray-700 text-center\">Define Quantity</h1>\n        </div>\n        <div id=\"screen\" class=\"h-16 border-b bg-gray-800 text-white border-gray-200 flex items-center justify-center\">\n            <h1 class=\"font-bold text-3xl\">{{ finalValue }}</h1>\n        </div>\n        <div id=\"numpad\" class=\"grid grid-flow-row grid-cols-3 grid-rows-3\">\n            <div \n                @click=\"inputValue( key )\"\n                :key=\"index\" \n                v-for=\"(key,index) of keys\" \n                class=\"hover:bg-blue-400 hover:text-white hover:border-blue-600 text-xl font-bold border border-gray-200 h-24 flex items-center justify-center cursor-pointer\">\n                <span v-if=\"key.value !== undefined\">{{ key.value }}</span>\n                <i v-if=\"key.icon\" class=\"las\" :class=\"key.icon\"></i>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport { nsHttpClient, nsSnackBar } from '../../../../bootstrap';\nexport default {\n    data() {\n        return {\n            finalValue: 1,\n            virtualStock: null,\n            allSelected: true,\n            isLoading: false,\n            keys: [\n                ...([1,2,3].map( key => ({ identifier: key, value: key }))),\n                ...([4,5,6].map( key => ({ identifier: key, value: key }))),\n                ...([7,8,9].map( key => ({ identifier: key, value: key }))),\n                ...[{ identifier: 'backspace', icon : 'la-backspace' },{ identifier: 0, value: 0 }, { identifier: 'next', icon: 'la-share' }],\n            ]\n        }\n    },\n    mounted() {\n        this.$popup.event.subscribe( action => {\n            if ( action.event === 'click-overlay' ) {\n                /**\n                 * as this runs under a Promise\n                 * we need to make sure that\n                 * it resolve false using the \"resolve\" function\n                 * provided as $popupParams.\n                 * Here we resolve \"false\" as the user has broken the Promise\n                 */\n                this.$popupParams.reject( false );\n\n                /**\n                 * we can safely close the popup.\n                 */\n                this.$popup.close();\n            }\n        });\n\n        /**\n         * if the quantity is defined, then probably\n         * we're already trying to edit an existing product\n         */\n        if ( this.$popupParams.product.quantity ) {\n            this.finalValue     =   this.$popupParams.product.quantity;\n        }\n    },\n    methods: {\n        inputValue( key ) {\n            if ( key.identifier === 'next' ) {\n                /**\n                 * resolve is provided only on the addProductQueue\n                 */\n                const { product, data }         =   this.$popupParams;\n                const quantity                  =   parseFloat( this.finalValue );\n\n                if ( quantity === 0 ) {\n                    return nsSnackBar.error( 'Please provide a quantity' )\n                        .subscribe();\n                }\n\n                this.isLoading                  =   true;\n\n                /**\n                 * The stock should be handled differently\n                 * according to wether the stock management\n                 * is enabled or not.\n                 */\n                if ( product.$original().stock_management === 'enabled' ) {\n\n                    /**\n                     * If the stock management is enabled,\n                     * we'll pull updated stock from the server.\n                     * When a product is added product.id has the real product id\n                     * when a product is already on the cart product.id is not set but\n                     * product.product_id is defined\n                     */\n                    nsHttpClient.get( `/api/nexopos/v4/products/${ product.$original().id }/units/${ data.unit_id }/quantity` )\n                        .subscribe( result => {\n                            this.isLoading      =   false;\n                            const holdQuantity  =   POS.getStockUsage( product.$original().id, data.unit_id ) - ( product.quantity || 0 );\n\n                            /**\n                             * This checks if there is enough\n                             * quantity for product that has stock \n                             * management enabled\n                             */\n\n                            if ( \n                                quantity > (\n                                    parseFloat( result.quantity ) -\n                                    /**\n                                     * We'll make sure to ignore the product quantity \n                                     * already added to the cart by substracting the \n                                     * provided quantity.\n                                     */\n                                    ( holdQuantity )\n                                )\n                            ) {\n                                return nsSnackBar.error( 'Unable to add the product, there is not enough stock. Remaining %s'.replace( '%s', ( result.quantity - holdQuantity ) ) )\n                                    .subscribe();\n                            }\n    \n                            this.resolve({ quantity });\n                            \n                        }, ( error ) => {\n                            this.isLoading  =   false;\n                            nsSnackBar.error( error.message )\n                                .subscribe();\n                        });\n                } else {\n                    this.resolve({ quantity });\n                }\n\n            } else if ( key.identifier === 'backspace' ) {\n                if ( this.allSelected ) {\n                    this.finalValue     =   0;\n                    this.allSelected    =   false;\n                } else {\n                    this.finalValue     =   this.finalValue.toString();\n                    this.finalValue     =   this.finalValue.substr(0, this.finalValue.length - 1 ) || 0;\n                }\n            } else {\n                if ( this.allSelected ) {\n                    this.finalValue     =   key.value;\n                    this.finalValue     =   parseFloat( this.finalValue );\n                    this.allSelected    =   false;\n                } else {\n                    this.finalValue     +=  '' + key.value;\n                    this.finalValue     =   parseFloat( this.finalValue );\n                }\n            } \n        },\n\n        resolve( params ) {\n            this.$popupParams.resolve( params );\n            this.$popup.close();\n        }\n    }\n}\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-quantity-popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-quantity-popup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ns-pos-quantity-popup.vue?vue&type=template&id=0cc68d6f&\"\nimport script from \"./ns-pos-quantity-popup.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-quantity-popup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',[_vm._v(\"Hello World\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-pending-orders-popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-pending-orders-popup.vue?vue&type=script&lang=js&\"","<template>\n    <h1>Hello World</h1>\n</template>\n<script>\nexport default {\n    mounted() {\n        this.$popup.event.subscribe( action => {\n            if ( action.event === 'click-overlay' ) {\n                this.$popup.close();\n            }\n        });\n    }\n}\n</script>","import { render, staticRenderFns } from \"./ns-pos-pending-orders-popup.vue?vue&type=template&id=5d4eb79c&\"\nimport script from \"./ns-pos-pending-orders-popup.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-pending-orders-popup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"flex items-center shadow rounded px-2 py-1 text-sm bg-white text-gray-700\",on:{\"click\":function($event){return _vm.openPendingOrdersPopup()}}},[_c('i',{staticClass:\"mr-1 text-xl lar la-user-circle\"}),_vm._v(\" \"),_c('span',[_vm._v(\"Customers\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-customers-button.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-customers-button.vue?vue&type=script&lang=js&\"","<script>\nimport { Popup } from '../../../../libraries/popup';\nimport NsPosPendingOrdersPopup from './../popups/ns-pos-pending-orders-popup';\n\nexport default {\n    name: 'ns-pos-customers-button',\n    methods: {\n        openPendingOrdersPopup() {\n            const popup     =   new Popup;\n            popup.open( NsPosPendingOrdersPopup );\n        }\n    }\n}\n</script>\n<template>\n    <button @click=\"openPendingOrdersPopup()\" class=\"flex items-center shadow rounded px-2 py-1 text-sm bg-white text-gray-700\">\n        <i class=\"mr-1 text-xl lar la-user-circle\"></i>\n        <span>Customers</span>\n    </button>\n</template>","import { render, staticRenderFns } from \"./ns-pos-customers-button.vue?vue&type=template&id=71acc768&\"\nimport script from \"./ns-pos-customers-button.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-customers-button.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"flex items-center shadow rounded px-2 py-1 text-sm bg-white text-gray-700\",on:{\"click\":function($event){return _vm.openPendingOrdersPopup()}}},[_c('i',{staticClass:\"mr-1 text-xl las la-truck\"}),_vm._v(\" \"),_c('span',[_vm._v(\"Order Type\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-order-type-button.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-order-type-button.vue?vue&type=script&lang=js&\"","<script>\nimport { Popup } from '../../../../libraries/popup';\nimport nsPosOrderTypePopupVue from '../popups/ns-pos-order-type-popup.vue';\n\nexport default {\n    name: 'ns-pos-delivery-button',\n    methods: {\n        openPendingOrdersPopup() {\n            const popup     =   new Popup({\n                primarySelector: '#pos-app',\n                popupClass : 'shadow-lg bg-white w-3/5 md:w-2/3 lg:w-2/5 xl:w-2/4',\n            });\n            popup.open( nsPosOrderTypePopupVue );\n        }\n    }\n}\n</script>\n<template>\n    <button @click=\"openPendingOrdersPopup()\" class=\"flex items-center shadow rounded px-2 py-1 text-sm bg-white text-gray-700\">\n        <i class=\"mr-1 text-xl las la-truck\"></i>\n        <span>Order Type</span>\n    </button>\n</template>","import { render, staticRenderFns } from \"./ns-pos-order-type-button.vue?vue&type=template&id=f5c5227e&\"\nimport script from \"./ns-pos-order-type-button.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-order-type-button.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"flex items-center shadow rounded px-2 py-1 text-sm bg-white text-gray-700\",on:{\"click\":function($event){return _vm.openPendingOrdersPopup()}}},[_c('i',{staticClass:\"mr-1 text-xl lar la-hand-pointer\"}),_vm._v(\" \"),_c('span',[_vm._v(\"Pending Orders\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-pending-orders-button.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-pending-orders-button.vue?vue&type=script&lang=js&\"","<script>\nimport { Popup } from '../../../../libraries/popup';\nimport NsPosPendingOrdersPopup from './../popups/ns-pos-pending-orders-popup';\n\nexport default {\n    name: 'ns-pos-pending-orders-button',\n    methods: {\n        openPendingOrdersPopup() {\n            const popup     =   new Popup;\n            popup.open( NsPosPendingOrdersPopup );\n        }\n    }\n}\n</script>\n<template>\n    <button @click=\"openPendingOrdersPopup()\" class=\"flex items-center shadow rounded px-2 py-1 text-sm bg-white text-gray-700\">\n        <i class=\"mr-1 text-xl lar la-hand-pointer\"></i>\n        <span>Pending Orders</span>\n    </button>\n</template>","import { render, staticRenderFns } from \"./ns-pos-pending-orders-button.vue?vue&type=template&id=2c8b16f0&\"\nimport script from \"./ns-pos-pending-orders-button.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-pending-orders-button.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"flex items-center shadow rounded px-2 py-1 text-sm bg-white text-gray-700\",on:{\"click\":function($event){return _vm.goToDashboard()}}},[_c('i',{staticClass:\"mr-1 text-xl las la-tachometer-alt\"}),_vm._v(\" \"),_c('span',[_vm._v(\"Dashboard\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-dashboard-button.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-dashboard-button.vue?vue&type=script&lang=js&\"","<script>\nexport default {\n    name: 'ns-pos-dashboard-button',\n    methods: {\n        goToDashboard() {\n            return document.location = `/dashboard`;\n        }\n    }\n}\n</script>\n<template>\n    <button @click=\"goToDashboard()\" class=\"flex items-center shadow rounded px-2 py-1 text-sm bg-white text-gray-700\">\n        <i class=\"mr-1 text-xl las la-tachometer-alt\"></i>\n        <span>Dashboard</span>\n    </button>\n</template>","import { render, staticRenderFns } from \"./ns-pos-dashboard-button.vue?vue&type=template&id=609080f7&\"\nimport script from \"./ns-pos-dashboard-button.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-dashboard-button.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg-white w-2/3-screen lg:w-1/3-screen overflow-hidden flex flex-col\"},[_vm._m(0),_vm._v(\" \"),(_vm.units.length > 0)?_c('div',{staticClass:\"grid grid-flow-row grid-cols-2 overflow-y-auto\"},_vm._l((_vm.units),function(unit){return _c('div',{key:unit.id,staticClass:\"hover:bg-gray-200 cursor-pointer border flex-shrink-0 border-gray-200 flex flex-col items-center justify-center\",on:{\"click\":function($event){return _vm.selectUnit( unit )}}},[_c('div',{staticClass:\"h-40 w-full flex items-center justify-center overflow-hidden\"},[(unit.preview_url)?_c('img',{staticClass:\"object-cover h-full\",attrs:{\"src\":unit.preview_url,\"alt\":unit.name}}):_vm._e(),_vm._v(\" \"),(! unit.preview_url)?_c('div',{staticClass:\"h-40 flex items-center justify-center\"},[_c('i',{staticClass:\"las la-image text-gray-600 text-6xl\"})]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"h-0 w-full\"},[_c('div',{staticClass:\"relative w-full flex items-center justify-center -top-10 h-20 py-2\",staticStyle:{\"background\":\"rgb(255 255 255 / 73%)\"}},[_c('h3',{staticClass:\"text-sm font-bold text-gray-700 py-2 text-center\"},[_vm._v(_vm._s(unit.name))])])])])}),0):_vm._e(),_vm._v(\" \"),(_vm.units.length === 0)?_c('div',{staticClass:\"h-56 flex items-center justify-center\"},[_c('ns-spinner')],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-16 flex justify-center items-center flex-shrink-0\",attrs:{\"id\":\"header\"}},[_c('h3',{staticClass:\"font-bold text-gray-700\"},[_vm._v(\"Choose Selling Unit\")])])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-units.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ns-pos-units.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"bg-white w-2/3-screen lg:w-1/3-screen overflow-hidden flex flex-col\">\n        <div id=\"header\" class=\"h-16 flex justify-center items-center flex-shrink-0\">\n            <h3 class=\"font-bold text-gray-700\">Choose Selling Unit</h3>\n        </div>\n        <div v-if=\"units.length > 0\" class=\"grid grid-flow-row grid-cols-2 overflow-y-auto\">\n            <div @click=\"selectUnit( unit )\" :key=\"unit.id\" v-for=\"unit of units\" class=\"hover:bg-gray-200 cursor-pointer border flex-shrink-0 border-gray-200 flex flex-col items-center justify-center\">\n                <div class=\"h-40 w-full flex items-center justify-center overflow-hidden\">\n                    <img v-if=\"unit.preview_url\" :src=\"unit.preview_url\" class=\"object-cover h-full\" :alt=\"unit.name\">\n                    <div class=\"h-40 flex items-center justify-center\" v-if=\"! unit.preview_url\">\n                        <i class=\"las la-image text-gray-600 text-6xl\"></i>\n                    </div>\n                </div>\n                <div class=\"h-0 w-full\">\n                    <div class=\"relative w-full flex items-center justify-center -top-10 h-20 py-2\" style=\"background:rgb(255 255 255 / 73%)\">\n                        <h3 class=\"text-sm font-bold text-gray-700 py-2 text-center\">{{ unit.name }}</h3>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"h-56 flex items-center justify-center\" v-if=\"units.length === 0\">\n            <ns-spinner></ns-spinner>\n        </div>\n    </div>\n</template>\n<script>\nimport { nsHttpClient, nsSnackBar } from '../../../../bootstrap';\nexport default {\n    data() {\n        return {\n            units: []\n        }\n    },\n    mounted() {\n        this.$popup.event.subscribe( action => {\n            if ( action.event === 'click-overlay' ) {\n                /**\n                 * as this runs under a Promise\n                 * we need to make sure that\n                 * it resolve false using the \"resolve\" function\n                 * provided as $popupParams.\n                 * Here we resolve \"false\" as the user has broken the Promise\n                 */\n                this.$popupParams.reject( false );\n\n                /**\n                 * we can safely close the popup.\n                 */\n                this.$popup.close();\n            }\n        });\n\n        this.loadUnits();\n    },\n    methods: {\n        loadUnits() {\n            nsHttpClient.get( `/api/nexopos/v4/units/pos?ids=${this.$popupParams.product.$original().selling_unit_ids}` )\n                .subscribe( result => {\n                    if ( result.length === 0 ) {\n                        this.$popup.close();\n                        return nsSnackBar.error( 'This product doesn\\'t has any unit defined for selling.' ).subscribe();\n                    }\n\n                    this.units  =   result;\n                })\n        },\n        /**\n         * we'll resolve a value that\n         * will be added to the object\n         * built at the end\n         * @param Unit\n         */\n        selectUnit( unit ) {\n            this.$popupParams.resolve({\n                unit_id     :   unit.id,\n                unit_name   :   unit.name\n            });\n            this.$popup.close();\n            // this.types.forEach( type => type.selected = false );\n            // type.selected   =   true;\n            // POS.order.types.next( this.types );\n        }\n    }\n}\n</script>","import { render, staticRenderFns } from \"./ns-pos-units.vue?vue&type=template&id=7051d3e2&\"\nimport script from \"./ns-pos-units.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-pos-units.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Popup } from \"../../../../../libraries/popup\";\nconst nsProductUnitPopup    =   require( './../../popups/ns-pos-units' ).default;\n\nexport class ProductUnitPromise {\n    constructor( protected product ) {}\n\n    run() {\n        return new Promise( ( resolve, reject ) => {\n            const popup     =   new Popup({\n                popupClass: 'shadow-lg h-1/2-screen w-3/4 xl:w-1/4 bg-white'\n            });\n            const product   =   this.product;\n            popup.open( nsProductUnitPopup, { resolve, reject, product });\n        });\n    }\n}","\nexport class Responsive {\n    private screenIs: string;\n\n    constructor() {\n        this.detect();\n    }\n\n\tdetect(){\n\t\tif ( window.innerWidth < 544 ) {\n\t\t\tthis.screenIs         =   'xs';\n\t\t} else if ( window.innerWidth >= 544 && window.innerWidth < 768 ) {\n\t\t\tthis.screenIs         =   'sm';\n\t\t} else if ( window.innerWidth >= 768 && window.innerWidth < 992 ) {\n\t\t\tthis.screenIs         =   'md';\n\t\t} else if ( window.innerWidth >= 992 && window.innerWidth < 1200 ) {\n\t\t\tthis.screenIs         =   'lg';\n\t\t} else if ( window.innerWidth >= 1200 ) {\n\t\t\tthis.screenIs         =   'xg';\n\t\t}\n\t}\n\n\tis( value?: string | undefined ): boolean | string {\n\t\tif ( value === undefined ) {\n\t\t\treturn this.screenIs;\n\t\t} else {\n\t\t\treturn this.screenIs === value;\n\t\t}\n\t}\n};","import { ProductQuantityPromise } from \"./pages/dashboard/pos/queues/products/product-quantity\";\nimport { ProductUnitPromise } from \"./pages/dashboard/pos/queues/products/product-unit\";\nimport { Subject, BehaviorSubject } from \"rxjs\";\nimport { Product } from \"./interfaces/product\";\nimport { Customer } from \"./interfaces/customer\";\nimport { OrderType } from \"./interfaces/order-type\";\nimport { POSVirtualStock } from \"./interfaces/pos-virual-stock\";\nimport Vue from 'vue';\nimport { Order } from \"./interfaces/order\";\nimport { nsHttpClient, nsSnackBar } from \"./bootstrap\";\nimport { PaymentType } from \"./interfaces/payment-type\";\nimport { Payment } from \"./interfaces/payment\";\nimport { timeStamp } from \"console\";\nimport { Responsive } from \"./libraries/responsive\";\nimport { Popup } from \"./libraries/popup\";\nimport { OrderProduct } from \"./interfaces/order-product\";\n\n/**\n * these are dynamic component\n * that are loaded conditionally\n */\nconst NsPosDashboardButton      =   (<any>window).NsPosDashboardButton         =   require( './pages/dashboard/pos/header-buttons/ns-pos-dashboard-button' ).default;\nconst NsPosPendingOrderButton   =   (<any>window).NsPosPendingOrderButton      =   require( './pages/dashboard/pos/header-buttons/ns-pos-' + 'pending-orders' + '-button' ).default;\nconst NsPosOrderTypeButton      =   (<any>window).NsPosOrderTypeButton         =   require( './pages/dashboard/pos/header-buttons/ns-pos-' + 'order-type' + '-button' ).default;\nconst NsPosCustomersButton      =   (<any>window).NsPosCustomersButton         =   require( './pages/dashboard/pos/header-buttons/ns-pos-' + 'customers' + '-button' ).default;\n\nexport class POS {\n    private _products: BehaviorSubject<Product[]>;\n    private _breadcrumbs: BehaviorSubject<any[]>;\n    private _customers: BehaviorSubject<Customer[]>;\n    private _settings: BehaviorSubject<{ [ key: string] : any}>;\n    private _types: BehaviorSubject<OrderType[]>;\n    private _paymentsType: BehaviorSubject<PaymentType[]>;\n    private _order: BehaviorSubject<Order>;\n    private _screen: BehaviorSubject<string>;\n    private _responsive         =   new Responsive;\n    private _visibleSection: BehaviorSubject<'cart' | 'grid' | 'both'>;\n    private _isSubmitting       =   false;\n    private defaultOrder        =   () => ({\n        discount_type: null,\n        discount: 0,\n        discount_percentage: 0,\n        subtotal: 0,\n        total: 0,\n        paid: 0,\n        customer_id: undefined,\n        change: 0,\n        total_products: 0,\n        shipping: 0,\n        tax_value: 0,\n        shipping_rate: 0,\n        shipping_type: undefined,\n        customer: undefined,\n        type: undefined,\n        products: [],\n        payments: [],\n        addresses: {\n            shipping: undefined,\n            billing: undefined\n        }\n    })\n\n    constructor() {\n        this.initialize();\n    }\n\n    get screen() {\n        return this._screen;\n    }\n\n    get visibleSection() {\n        return this._visibleSection;\n    }\n\n    get paymentsType() {\n        return this._paymentsType;\n    }\n\n    get order() {\n        return this._order;\n    }\n\n    get types() {\n        return this._types;\n    }\n\n    get products() {\n        return this._products;\n    }\n\n    get customers() {\n        return this._customers;\n    }\n\n    get breadcrumbs() {\n        return this._breadcrumbs;\n    }\n\n    reset() {\n        this._isSubmitting  =   false;\n        this._products.next([]);\n        this._customers.next([]);\n        this._breadcrumbs.next([]);\n        this.defineCurrentScreen();\n\n        /**\n         * to cancel selected payment\n         */\n        this._paymentsType.next( this.paymentsType.getValue().map( payment => {\n            payment.selected    =   false;\n            return payment;\n        }) );\n\n        /**\n         * to reset order details\n         */\n        this.order.next( this.defaultOrder() );\n    }\n\n    public initialize()\n    {\n        this._products          =   new BehaviorSubject<Product[]>([]);\n        this._customers         =   new BehaviorSubject<Customer[]>([]);\n        this._types             =   new BehaviorSubject<OrderType[]>([]);\n        this._breadcrumbs       =   new BehaviorSubject<any[]>([]);\n        this._screen            =   new BehaviorSubject<string>('');\n        this._paymentsType      =   new BehaviorSubject<PaymentType[]>([]);   \n        this._visibleSection    =   new BehaviorSubject( 'both' );       \n        this._order             =   new BehaviorSubject<Order>( this.defaultOrder() );\n        this._settings          =   new BehaviorSubject<{ [ key: string ] : any }>({});\n        \n        /**\n         * Whenever there is a change\n         * on the products, we'll update\n         * the cart.\n         */\n        this.products.subscribe( _ => {\n            this.refreshCart();\n        });\n\n        /**\n         * listen to type for updating\n         * the order accordingly\n         */\n        this.types.subscribe( types => {\n            const selected  =   types.filter( type => type.selected );\n\n            if ( selected.length > 0  ) {\n                const order     =   this.order.getValue();\n                order.type      =   selected[0];\n                this.order.next( order );\n            }\n        });\n\n        /**\n         * We're handling here the responsive aspect\n         * of the POS.\n         */\n        window.addEventListener( 'resize', () => {\n            this._responsive.detect();\n            this.defineCurrentScreen();\n        });\n\n        this.defineCurrentScreen();\n    }\n    \n    public header   =   {\n        /**\n         * As POS object is defined on the\n         * header, we can use that to reference the buttons (component)\n         * that needs to be rendered dynamically\n         */\n        buttons: {\n            NsPosDashboardButton,\n            NsPosPendingOrderButton,\n            NsPosOrderTypeButton,\n            NsPosCustomersButton,\n        }\n    }\n\n    defineCurrentScreen() {\n        this._visibleSection.next([ 'xs', 'sm' ].includes( <string>this._responsive.is() ) ? 'grid' : 'both' );\n        this._screen.next( <string>this._responsive.is() );\n    }\n\n    changeVisibleSection( section ) {\n        if ([ 'both', 'cart', 'grid' ].includes( section ) ) {\n            this._visibleSection.next( section );\n        }\n    }\n\n    addPayment( payment: Payment ) {\n        if ( payment.amount > 0 ) {\n            const order  =   this._order.getValue();\n            order.payments.push( payment );\n            this._order.next( order );\n            \n            return this.computePaid();\n        }\n\n        return nsSnackBar.error( 'Invalid amount.' ).subscribe();\n    }\n\n    removePayment( payment: Payment ) {\n        const order     =   this._order.getValue();\n        const index     =   order.payments.indexOf( payment );\n        order.payments.splice( index, 1 );\n        this._order.next( order );\n        \n        this.computePaid();\n    }\n\n    submitOrder() {\n        return new Promise( ( resolve, reject ) => {\n            if ( this.order.getValue().payments.length  === 0 ) {\n                const message   =   'Please provide a payment before proceeding.';\n                return reject({ status: 'failed', message  });\n            }\n\n            if ( ! this._isSubmitting ) {\n                return nsHttpClient.post( '/api/nexopos/v4/orders', this.order.getValue() )\n                    .subscribe( result => {\n                        this._isSubmitting  =   true;\n                        resolve( result );\n\n                        this.reset();\n\n                    }, error => {\n                        this._isSubmitting  =   false;\n                        reject( error );\n                    })\n            }\n\n            return reject({ status: 'failed', message: 'Order ongoing...' });\n        });\n    }\n\n    computePaid() {\n        const order     =   this._order.getValue();   \n        order.paid      =   0;\n\n        if ( order.payments.length > 0 ) {\n            order.paid      =   order.payments.map( p => p.amount ).reduce( ( b, a ) => a + b );\n        }\n\n        order.change    =   order.paid - order.total;\n\n        this._order.next( order );\n    }\n\n    setPaymentActive( payment ) {\n        const payments  =   this._paymentsType.getValue();\n        const index     =   payments.indexOf( payment );\n        payments.forEach( p => p.selected = false );\n        payments[ index ].selected  =   true;\n        this._paymentsType.next( payments );\n    }\n\n    definedPaymentsType( payments ) {\n        this._paymentsType.next( payments );\n    }\n\n    definedCustomer( customer ) {\n        const order         =   this.order.getValue();\n        order.customer      =   customer;\n        order.customer_id   =   customer.id\n        this.order.next( order );\n    }\n\n    updateCart( current, update ) {\n        for( let key in update ) {\n            if ( update[ key ] !== undefined ) {\n                Vue.set( current, key, update[ key ]);\n            }\n        }\n\n        this.order.next( current );\n        \n        /**\n         * explicitely here we do manually refresh the cart\n         * as if we listen to cart update by subscribing,\n         * that will create a loop (huge performance issue).\n         */\n        this.refreshCart();\n    }\n\n    refreshCart() {\n        const products      =   this.products.getValue();\n        const order         =   this.order.getValue();\n        const productTotal  =   products\n            .map( product => product.total_price );\n        \n        if ( productTotal.length > 0 ) {\n            order.subtotal  =   productTotal.reduce( ( b, a ) => b + a );\n        } else {\n            order.subtotal  =   0;\n        }\n\n        if ( order.discount_type === 'percentage' ) {\n            order.discount   =   ( order.discount_percentage * order.subtotal ) / 100;\n        }\n\n        /**\n         * if the discount amount is greather\n         * than the subtotal, the discount amount\n         * will be set to the order.subtotal\n         */\n        if ( order.discount > order.subtotal ) {\n            order.discount = order.subtotal;\n            nsSnackBar.info( 'The discount has been set to the cart subtotal' )\n                .subscribe();\n        }\n\n        const totalTaxes        =   products.map( ( product: OrderProduct ) => product.tax_value );\n\n        /**\n         * tax might be computed above the tax that currently\n         * applie to the items.\n         */\n        order.tax_value         =   0;\n\n        if ( totalTaxes.length > 0 ) {\n            order.tax_value     =   totalTaxes.reduce( ( b, a ) => b + a );\n        }\n\n        order.total             =   ( order.subtotal + order.shipping ) - order.discount;\n        order.products          =   products;\n        order.total_products    =   products.length\n\n        this.order.next( order );\n    }\n\n    /**\n     * Get actual stock used by the product\n     * using the defined unit\n     * @param product_id \n     * @param unit_id \n     */\n    getStockUsage( product_id: number, unit_id: number ) {\n        const stocks    =   this._products.getValue().filter( (product: Product) => {\n            return product.product_id === product_id && product.unit_id === unit_id;\n        }).map( product => product.quantity );\n\n        if ( stocks.length > 0 ) {\n            return stocks.reduce( ( b, a ) => b + a );\n        }\n\n        return 0;\n    }\n\n    /**\n     * this is resolved when a product is being added to the\n     * cart. That will help to mutate the product before \n     * it's added the cart.\n     */\n    private addToCartQueue  =   [\n        ProductUnitPromise,\n        ProductQuantityPromise\n    ];\n\n    /**\n     * Process the item to add it to the cart\n     * @param product \n     */\n    async addToCart( product ) {\n\n        /**\n         * This is where all the mutation made by the  \n         * queue promises are stored.\n         */\n        let productData   =   new Object;\n\n        /**\n         * Let's combien the built product\n         * with the data resolved by the promises\n         */\n        let cartProduct: OrderProduct   =  {\n            product_id          : product.id,\n            name                : product.name,\n            discount_type       : 'percentage',\n            discount            : 0,\n            discount_percentage : 0,\n            quantity            : 0,\n            tax_group_id        : product.tax_group_id,\n            tax_value           : 0, // is computed automatically using $original()\n            sale_price          : product.sale_price,\n            total_price         : 0,\n            mode                : 'normal',\n            $original           : () => product\n        };\n\n        for( let index in this.addToCartQueue ) {\n\n            /**\n             * the popup promise receives the product that\n             * is above to be added. Hopefully as it's passed by reference\n             * updating the product should mutate that once the queue is handled.\n             */\n            try {\n                const promiseInstance   =   new this.addToCartQueue[ index ]( cartProduct );\n                const result            =   <Object>(await promiseInstance.run( productData ));\n\n                /**\n                 * We just mix both to make sure\n                 * the mutated value overwrite previously defined values.\n                 */\n                productData             =   { ...productData, ...result };\n\n            } catch( brokenPromise ) {\n                /**\n                 * if a popup resolve \"false\",\n                 * that means for some reason the Promise has\n                 * been broken, therefore we need to stop the queue.\n                 */\n                if ( brokenPromise === false ) {\n                    return false;\n                }\n            }\n        }\n\n        /**\n         * Let's combien the built product\n         * with the data resolved by the promises\n         */\n        cartProduct   =   { ...cartProduct, ...productData };\n        \n        /**\n         * retreive product that \n         * are currently stored\n         */\n        const products      =   this._products.getValue();\n        \n        /**\n         * push the new product\n         * at the front of the cart\n         */\n        products.unshift( cartProduct );\n\n        /**\n         * Once the product has been added to the cart\n         * it's being computed\n         */\n        this.refreshProducts( products );\n\n        /**\n         * dispatch event that the \n         * product has been added.\n         */\n        this._products.next( products );\n    }\n\n    defineTypes( types ) {\n        this._types.next( types );\n    }\n\n    removeProduct( product ) {\n        const products  =   this._products.getValue();\n        const index     =   products.indexOf( product );\n        products.splice( index, 1 );\n        this._products.next( products );\n    }\n\n    updateProduct( product, data ) {\n        const products                      =   this._products.getValue();\n        const index                         =   products.indexOf( product );\n\n        /**\n         * to ensure Vue updates accordingly.\n         */\n        Vue.set( products, index, { ...product, ...data });\n\n        this.refreshProducts( products );\n        this._products.next( products );\n    }\n\n    refreshProducts( products ) {\n        products.forEach( product => {\n            this.computeProduct( product );\n        });\n    }\n\n    computeProduct( product: OrderProduct ) {\n        /**\n         * determining what is the \n         * real sale price\n         */\n        if ( product.mode === 'normal' ) {\n            product.sale_price          =       product.$original().tax_type === 'inclusive' ? product.$original().incl_tax_sale_price : product.$original().excl_tax_sale_price;\n            product.tax_value           =       product.$original().sale_tax_value * product.quantity;\n        } else {\n            product.sale_price          =       product.$original().tax_type === 'inclusive' ? product.$original().incl_tax_wholesale_price : product.$original().excl_tax_wholesale_price;\n            product.tax_value           =       product.$original().wholesale_tax_value * product.quantity;\n        }\n\n        /**\n         * computing the discount when it's \n         * based on a percentage\n         */\n        if ([ 'flat', 'percentage' ].includes( product.discount_type ) ) {\n            if ( product.discount_type === 'percentage' ) {\n                product.discount  =   ( ( product.sale_price * product.discount_percentage ) / 100 ) * product.quantity;\n            }\n        }\n\n        product.total_price         =   ( product.sale_price * product.quantity ) - product.discount;\n    }\n\n    defineSettings( settings ) {\n        this._settings.next( settings );\n    }\n\n    destroy() {\n        this._products.unsubscribe();\n        this._customers.unsubscribe();\n        this._types.unsubscribe();\n        this._breadcrumbs.unsubscribe();\n        this._paymentsType.unsubscribe();\n        this._screen.unsubscribe();\n        this._order.unsubscribe();\n        this._settings.unsubscribe();\n    }\n}\n\n(<any>window).POS       =   new POS;\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Subject } from \"rxjs\";\n\ndeclare const Vue;\ndeclare const document;\n\nexport class Popup {\n    private config  =   {\n        primarySelector     :   undefined,\n        popupClass  :   'shadow-lg h-half w-1/2 bg-white',\n    }; \n\n    private container   =   document.createElement( 'div' );\n    private popupBody   =   document.createElement( 'div' );\n    private event: Subject<{ event: string, value: any }>;\n    private instance: any;\n    private parentWrapper: HTMLDivElement | HTMLBodyElement;\n\n    constructor( config: {\n        primarySelector?: string,\n        popupClass?: string\n    } = {} ) {\n        this.config             =   Object.assign( this.config, config );\n        \n        if ( \n            this.config.primarySelector === undefined &&\n            document.querySelectorAll( '.is-popup' ).length > 0\n        ) {\n            const items             =   document.querySelectorAll( '.is-popup' ).length;\n            this.parentWrapper      =   <HTMLDivElement>(document.querySelectorAll( '.is-popup' )[ items - 1 ]);\n        } else {\n            this.parentWrapper      =   <HTMLDivElement>document.querySelector( 'body' ).querySelectorAll( 'div' )[0];\n        }\n\n        this.event              =   new Subject;\n    }\n\n    static show( component, params = {}, config = {}) {\n        const popup     =   new Popup( config );\n        popup.open( component, params );\n        return popup;\n    }\n\n    open( component, params = {} ) {\n        this.parentWrapper.style.filter   =   'blur(5px)';\n        \n        this.container.setAttribute( 'class', 'absolute top-0 left-0 w-full h-full flex items-center justify-center is-popup' );\n\n        /**\n         * We need to listen to click even on the container\n         * as it might be used to close the popup\n         */\n        this.container.addEventListener( 'click', ( event ) => {\n            /**\n             * this will emit an even\n             * when the overlay is clicked\n             */\n            this.event.next({\n                event: 'click-overlay',\n                value: true\n            });\n\n            event.stopPropagation();\n        });\n\n        /**\n         * We don't want to propagate to the\n         * overlay, that closes the popup\n         */\n        this.popupBody.addEventListener( 'click', ( event ) => {\n            event.stopImmediatePropagation();\n        });\n\n        this.container.style.background     =   'rgb(51 51 51 / 20%)';\n        this.container.id                   =   'popup-container-' + document.querySelectorAll( '.is-popup' ).length;\n        this.popupBody.setAttribute( 'class', ' zoom-out-entrance' );\n        this.popupBody.innerHTML            =   '<div class=\"popup-body\"></div>';\n        this.container.appendChild( this.popupBody );  \n\n        document.body.appendChild( this.container );\n\n        /**\n         * We'll provide a reference of the\n         * wrapper so that the component\n         * can manipulate that.\n         */\n        const componentClass        =   Vue.extend( component );\n        this.instance               =   new componentClass({\n            propsData:  {\n                popup   :   this, // @deprecated\n            }\n        });\n\n        /**\n         * Let's intanciaate the component\n         * and mount it\n         */\n        this.instance.template          =   component?.options?.template || undefined;\n        this.instance.render            =   component.render || undefined;\n        this.instance.methods           =   component?.options?.methods || component?.methods;\n        this.instance.data              =   component?.options?.data || component?.data;\n        this.instance.$popup            =   this;\n        this.instance.$popupParams      =   params;\n        this.instance.$mount( `#${this.container.id} .popup-body` );\n    }\n\n    close() {\n        /**\n         * Let's start by destorying the\n         * Vue component attached to the popup\n         */\n        this.instance.$destroy();\n        \n        /**\n         * The Subject we've initialized earlier\n         * need to be closed\n         */\n        this.event.unsubscribe();\n\n        /**\n         * For some reason we need to fetch the \n         * primary selector once again.\n         */\n        this.parentWrapper.style.filter   =   'blur(0px)';\n        \n        this.popupBody.classList.remove( 'zoom-out-entrance' );\n        this.popupBody.classList.add( 'zoom-in-exit' );\n\n        setTimeout( () => {\n            this.container.remove();\n        }, 300 ); // as by default the animation is set to 500ms\n    }\n}","export default class FormValidation {\n    validateFields( fields ) {\n        return fields.map( field => {\n            this.checkField( field );\n            return field.errors.length === 0;\n        }).filter( f => f === false ).length === 0;\n    }\n\n    validateFieldsErrors( fields ) {\n        return fields.map( field => {\n            this.checkField( field );\n            return field.errors;\n        }).flat();\n    }\n\n    validateForm( form ) {\n        if ( form.main ) {\n            this.validateField( form.main );\n        }\n\n        const globalErrors          =   [];\n        \n        for( let key in form.tabs ) {\n            const tabsInvalidity    =   [];\n            const validErrors       =   this.validateFieldsErrors( form.tabs[ key ].fields );\n            \n            if ( validErrors.length > 0 ) {\n                tabsInvalidity.push(\n                    validErrors\n                );\n            }\n\n            form.tabs[ key ].errors     =   tabsInvalidity.flat();\n            globalErrors.push( tabsInvalidity.flat() );\n        }\n\n        return globalErrors.flat().filter( error => error !== undefined );\n    }\n\n    initializeTabs( tabs ) {\n        let index           =   0;\n\n        for( let key in tabs ) {\n            if ( index === 0 ) {\n                tabs[ key ].active  =   true;\n            }\n\n            tabs[ key ].active     =   tabs[ key ].active === undefined ? false : tabs[ key ].active;\n            tabs[ key ].fields     =   this.createFields( tabs[ key ].fields );\n\n            index++;\n        }\n\n        return tabs;\n    }\n\n    validateField( field ) {\n        return this.checkField( field );\n    }\n\n    createFields( fields ) {\n        return fields.map( field => {\n            field.type      =   field.type      || 'text',\n            field.errors    =   field.errors    || [];\n            field.disabled  =   field.disabled  || false;\n            return field;\n        })\n    }\n\n    createForm( form ) {\n        if ( form.main ) {\n            form.main   =   this.createFields([ form.main ])[0];\n        }\n\n        if ( form.tabs ) {\n            for( let tab in form.tabs ) {\n                form.tabs[ tab ].fields     =   this.createFields( form.tabs[ tab ].fields );\n                form.tabs[ tab ].errors     =   [];\n            }\n        }\n\n        return form;\n    }\n\n    enableFields( fields ) {\n        return fields.map( field => field.disabled = false );\n    }\n\n    disableFields( fields ) {\n        return fields.map( field => field.disabled = true );\n    }\n\n    disableForm( form ) {\n        if ( form.main ) {\n            form.main.disabled  =   true;\n        }\n\n        for( let tab in form.tabs ) {\n            form.tabs[ tab ].fields.forEach( field => field.disabled = true );\n        }\n    }\n\n    enableForm( form ) {\n        if ( form.main ) {\n            form.main.disabled  =   false;\n        }\n\n        for( let tab in form.tabs ) {\n            form.tabs[ tab ].fields.forEach( field => field.disabled = false );\n        }\n    }\n\n    getValue( fields ) {\n        const form  =   {};\n        fields.forEach( field => {\n            form[ field.name ]  =   field.value;\n        });\n\n        return form;\n    }\n\n    checkField( field ) {\n        if ( field.validation !== undefined ) {\n            field.errors    =   [];\n            const rules     =   this.detectValidationRules( field.validation );\n            rules.forEach( rule => {\n                this.fieldPassCheck( field, rule );\n            });\n        }\n        return field;\n    }\n\n    extractForm( form ) {\n        let formValue  =   {};\n\n        if ( form.main ) {\n            formValue[ form.main.name ]     =   form.main.value;\n        }\n\n        if ( form.tabs ) {\n            for( let tab in form.tabs ) {\n                if ( formValue[ tab ] === undefined ) {\n                    formValue[ tab ]    =   {};\n                }\n    \n                formValue[ tab ]   =   this.extractFields( form.tabs[ tab ].fields );\n            }\n        }\n\n        return formValue;\n    }\n\n    extractFields( fields, formValue = {} ) {\n        fields.forEach( field => {\n            if ( [ 'multiselect' ].includes( field.type ) ) {\n                formValue[ field.name ]  =   field.options\n                    .filter( option => option.selected )\n                    .map( option => option.value );\n            } else {\n                formValue[ field.name ]  =   field.value;\n            }\n        });\n\n        return formValue;\n    }\n\n    detectValidationRules( validation ) {\n        const execRule  =   ( rule ) => {\n            let finalRules          =   [];\n            const minRule \t\t\t=\t/(min)\\:([0-9])+/g;\n            const maxRule \t\t\t=\t/(max)\\:([0-9])+/g;\n            const matchRule         =   /(same):(\\w+)/g;\n            let result;\n\n            if ([ 'email', 'required' ].includes( rule ) ) {\n                return {\n                    identifier : rule\n                };\n            } else if( result =   minRule.exec( rule ) ) {\n                return {\n                    identifier : result[1],\n                    value: result[2]\n                }\n            } else if( result =   maxRule.exec( rule ) ) {\n                return {\n                    identifier : result[1],\n                    value: result[2]\n                }\n            }\n            \n            return rule;\n        };\n\n        if ( Array.isArray( validation ) ) {\n            return validation.filter( r => typeof r === 'string' )\n                .map( execRule );\n        } else {\n            return validation.split( '|' ).map( execRule );\n        }\n    }\n\n    /**\n     * Will trigger an error on the form\n     * if the error is a validation object.\n     * @param {Object} Form \n     * @param {Object} data \n     */\n    triggerError( form, data ) {\n        if ( data.errors ) {\n            for( let index in data.errors ) {\n                let path    =   index.split( '.' ).filter( exp => {\n                    return ! /^\\d+$/.test( exp );\n                });\n\n                /**\n                 * if the validation path\n                 * has 2 entries we believe it's a \n                 * an error on a field within a tab\n                 */\n                if ( path.length === 2 ) {\n                    form.tabs[ path[0] ].fields.forEach( field => {\n                        if ( field.name === path[1] ) {\n                            data.errors[ index ].forEach( errorMessage => {\n                                const error     =   {\n                                    identifier: 'invalid',\n                                    invalid: true,\n                                    message: errorMessage,\n                                    name: field.name\n                                };\n\n                                field.errors.push( error );\n                            });\n                        }\n                    });\n                }\n\n                /**\n                 * @todo needs to do the same with the title\n                 */\n                if ( index === form.main.name ) {\n                    data.errors[ index ].forEach( errorMessage => {\n                        form.main.errors.push({\n                            identifier: 'invalid',\n                            invalid: true,\n                            message: errorMessage,\n                            name: form.main.name\n                        });\n                    });\n                }\n            }\n        }\n    }\n\n    triggerFielsErrors( fields, data ) {\n        console.log( data );\n        if ( data.errors ) {\n            for( let index in data.errors ) {\n                let path    =   index.split( '.' ).filter( exp => {\n                    return ! /^\\d+$/.test( exp );\n                });\n\n                /**\n                 * if the validation path\n                 * has 2 entries we believe it's a \n                 * an error on a field within a tab\n                 */\n                fields.forEach( field => {\n                    if ( field.name === path[0] ) {\n                        data.errors[ index ].forEach( errorMessage => {\n                            const error     =   {\n                                identifier: 'invalid',\n                                invalid: true,\n                                message: errorMessage,\n                                name: field.name\n                            };\n\n                            field.errors.push( error );\n                        });\n                    }\n                });\n            }\n        }\n    }\n\n    fieldPassCheck( field, rule ) {\n\n        if ( rule.identifier === 'required' ) {\n            if ( field.value === undefined || field.value === null || field.value.length === 0 ) {\n                // because we would like to stop the validation here\n                return field.errors.push({\n                    identifier: rule.identifier,\n                    invalid: true,\n                    name: field.name\n                })\n            } else {\n                field.errors.forEach( ( error, index ) => {\n                    if ( error.identifier === rule.identifier && error.invalid === true ) {\n                        field.errors.splice( index, 1 );\n                        console.log( field );\n                    }\n                });\n            }\n        }\n\n        if ( rule.identifier === 'email' ) {\n            if ( ! /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test( field.value ) ) {\n                // because we would like to stop the validation here\n                return field.errors.push({\n                    identifier: rule.identifier,\n                    invalid: true,\n                    name: field.name\n                })\n            } else {\n                field.errors.forEach( ( error, index ) => {\n                    if ( error[ rule.identifier ] === true ) {\n                        field.errors.splice( index, 1 );\n                        console.log( field );\n                    }\n                });\n            }\n        }\n\n        return field;\n    }\n}"],"sourceRoot":""}