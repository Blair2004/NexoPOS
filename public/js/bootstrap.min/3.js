"use strict";(self.webpackChunknexopos_4x=self.webpackChunknexopos_4x||[]).push([[3],{9003:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u});var i=r(7266),s=r(9671),o=r(7389);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l={name:"ns-create-coupons",mounted:function(){this.loadForm()},computed:{validTabs:function(){if(this.form){var t=[];for(var e in this.form.tabs)["selected_products","selected_categories"].includes(e)&&t.push(this.form.tabs[e]);return t}return[]},activeValidTab:function(){return this.validTabs.filter((function(t){return t.active}))[0]},generalTab:function(){var t=[];for(var e in this.form.tabs)["general"].includes(e)&&t.push(this.form.tabs[e]);return t}},data:function(){return{formValidation:new i.Z,form:{},nsSnackBar:s.kX,nsHttpClient:s.ih,options:new Array(40).fill("").map((function(t,e){return{label:"Foo"+e,value:"bar"+e}}))}},props:["submit-method","submit-url","return-url","src","rules"],methods:{__:o.__,setTabActive:function(t){this.validTabs.forEach((function(t){return t.active=!1})),t.active=!0},submit:function(){var t=this;if(this.formValidation.validateForm(this.form).length>0)return s.kX.error(this.$slots["error-invalid-form"]?this.$slots["error-invalid-form"][0].text:"No error message provided for having an invalid form.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe();if(void 0===this.submitUrl)return s.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:"No error message provided for not having a valid submit url.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe();this.formValidation.disableForm(this.form);var e=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.formValidation.extractForm(this.form));s.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,e).subscribe((function(e){if("success"===e.status)return document.location=t.returnUrl;t.formValidation.enableForm(t.form)}),(function(e){s.kX.error(e.message||(0,o.__)("An unexpected error occurred."),void 0,{duration:5e3}).subscribe(),e.response&&t.formValidation.triggerError(t.form,e.response.data),t.formValidation.enableForm(t.form)}))},handleGlobalChange:function(t){this.globallyChecked=t,this.rows.forEach((function(e){return e.$checked=t}))},loadForm:function(){var t=this;s.ih.get("".concat(this.src)).subscribe((function(e){t.form=t.parseForm(e.form)}))},parseForm:function(t){t.main.value=void 0===t.main.value?"":t.main.value,t.main=this.formValidation.createFields([t.main])[0];var e=0;for(var r in t.tabs)1===e&&void 0===t.tabs[r].active&&(t.tabs[r].active=!0),t.tabs[r].active=void 0!==t.tabs[r].active&&t.tabs[r].active,t.tabs[r].fields=this.formValidation.createFields(t.tabs[r].fields),e++;return t},addOption:function(t){var e=this.options.indexOf(t);e>=0&&(this.options[e].selected=!this.options[e].selected)},removeOption:function(t){var e=t.option;t.index;e.selected=!1},getRuleForm:function(){return this.form.ruleForm},addRule:function(){this.form.rules.push(this.getRuleForm())},removeRule:function(t){this.form.rules.splice(t,1)}}};const u=(0,r(1900).Z)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form flex-auto flex flex-col",attrs:{id:"crud-form"}},[0===Object.values(t.form).length?r("div",{staticClass:"flex items-center justify-center flex-auto"},[r("ns-spinner")],1):t._e(),t._v(" "),Object.values(t.form).length>0?[r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"flex justify-between items-center"},[r("label",{staticClass:"font-bold my-2 text-primary",attrs:{for:"title"}},[t._t("title",(function(){return[t._v("No title Provided")]}))],2),t._v(" "),r("div",{staticClass:"text-sm my-2",attrs:{for:"title"}},[t.returnUrl?r("a",{staticClass:"rounded-full border ns-inset-button error px-2 py-1",attrs:{href:t.returnUrl}},[t._v(t._s(t.__("Return")))]):t._e()])]),t._v(" "),r("div",{staticClass:"input-group flex border-2 rounded overflow-hidden",class:t.form.main.disabled?"disabled":t.form.main.errors.length>0?"error":"info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.main.value,expression:"form.main.value"}],staticClass:"flex-auto text-primary outline-none h-10 px-2",attrs:{disabled:t.form.main.disabled,type:"text"},domProps:{value:t.form.main.value},on:{blur:function(e){return t.formValidation.checkField(t.form.main)},change:function(e){return t.formValidation.checkField(t.form.main)},input:function(e){e.target.composing||t.$set(t.form.main,"value",e.target.value)}}}),t._v(" "),r("button",{staticClass:"outline-none px-4 h-10 border-l border-tertia",attrs:{disabled:t.form.main.disabled},on:{click:function(e){return t.submit()}}},[t._t("save",(function(){return[t._v(t._s(t.__("Save")))]}))],2)]),t._v(" "),t.form.main.description&&0===t.form.main.errors.length?r("p",{staticClass:"text-xs text-primary py-1"},[t._v(t._s(t.form.main.description))]):t._e(),t._v(" "),t._l(t.form.main.errors,(function(e,i){return r("p",{key:i,staticClass:"text-xs py-1 text-error-tertiary"},[r("span",[t._t("error-required",(function(){return[t._v(t._s(e.identifier))]}))],2)])}))],2),t._v(" "),r("div",{staticClass:"-mx-4 flex flex-wrap mt-4",attrs:{id:"form-container"}},[r("div",{staticClass:"px-4 w-full md:w-1/2"},t._l(t.generalTab,(function(e,i){return r("div",{key:i,staticClass:"rounded ns-box shadow p-2"},t._l(e.fields,(function(t,e){return r("ns-field",{key:e,attrs:{field:t}})})),1)})),0),t._v(" "),r("div",{staticClass:"px-4 w-full md:w-1/2"},[r("div",{attrs:{id:"tabbed-card"}},[r("div",{staticClass:"flex flex-wrap ns-tab",attrs:{id:"card-header"}},t._l(t.validTabs,(function(e,i){return r("div",{key:i,staticClass:"tab cursor-pointer px-4 py-2 rounded-tl-lg rounded-tr-lg",class:e.active?"active":"inactive",on:{click:function(r){return t.setTabActive(e)}}},[t._v("\n                            "+t._s(e.label)+"\n                        ")])})),0),t._v(" "),r("div",{staticClass:"ns-tab-item rounded-br-lg rounded-bl-lg shadow p-2"},t._l(t.activeValidTab.fields,(function(t,e){return r("div",{key:e,staticClass:"flex flex-col"},[r("ns-field",{attrs:{field:t}})],1)})),0)])])])]:t._e()],2)}),[],!1,null,null,null).exports}}]);