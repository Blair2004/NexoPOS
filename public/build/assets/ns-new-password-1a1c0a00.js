import{_ as r}from"./currency-47ec5b79.js";import{F as w,n,b as f,a}from"./bootstrap-414293d9.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{f as y}from"./npm~rxjs-a7e91008.js";import{ae as l,a6 as e,z as d,A as i,F as x,ac as F,x as h,y as m,c as _,ax as S}from"./npm~@vue~runtime-core_-ff0bdc0c.js";import{U as N}from"./npm~@vue~shared_-82b01912.js";import"./npm~numeral-faf61dd1.js";import"./npm~@ckeditor~ckeditor5-build-classic_-a8abd726.js";import"./npm~currency.js-57f74176.js";import"./npm~lodash-f7a36ac5.js";import"./npm~laravel-echo-7ac8f47a.js";import"./npm~pusher-js-7b18aad5.js";import"./npm~axios-4a70c6fc.js";import"./npm~chart.js-3fed1729.js";import"./npm~moment-fbc5633a.js";import"./npm~vue-6a0d7c4c.js";import"./npm~@vue~runtime-dom_-a668b91e.js";import"./npm~@vue~reactivity_-481192b6.js";import"./npm~@vue~compiler-dom_-04241bb4.js";import"./npm~@vue~compiler-core_-2a2ce8c7.js";import"./npm~rx-1641e2f8.js";import"./npm~@wordpress~hooks_-18172e20.js";import"./npm~mathjs-1dff8408.js";import"./npm~@babel~runtime_-34ca84e8.js";import"./npm~decimal.js-d133ee8e.js";import"./npm~complex.js-15c479db.js";import"./npm~fraction.js-52b397f9.js";import"./npm~typed-function-e88d1f37.js";import"./npm~seedrandom-b246f2f9.js";import"./npm~javascript-natural-sort-11e7fc54.js";import"./npm~escape-latex-404addb9.js";import"./npm~tslib-f3101d7c.js";const T={name:"ns-login",props:["token","user"],data(){return{fields:[],xXsrfToken:null,validation:new w,isSubitting:!1}},mounted(){y([n.get("/api/fields/ns.new-password"),n.get("/sanctum/csrf-cookie")]).subscribe(t=>{this.fields=this.validation.createFields(t[0]),this.xXsrfToken=n.response.config.headers["X-XSRF-TOKEN"],setTimeout(()=>f.doAction("ns-login-mounted",this),100)},t=>{a.error(t.message||r("An unexpected error occurred."),r("OK"),{duration:0}).subscribe()})},methods:{__:r,submitNewPassword(){if(!this.validation.validateFields(this.fields))return a.error(r("Unable to proceed the form is not valid.")).subscribe();this.validation.disableFields(this.fields),f.applyFilters("ns-new-password-submit",!0)&&(this.isSubitting=!0,n.post(`/auth/new-password/${this.user}/${this.token}`,this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe(s=>{a.success(s.message).subscribe(),setTimeout(()=>{document.location=s.data.redirectTo},500)},s=>{this.isSubitting=!1,this.validation.enableFields(this.fields),s.data&&this.validation.triggerFieldsErrors(this.fields,s.data),a.error(s.message).subscribe()}))}}},V={class:"bg-white rounded shadow overflow-hidden transition-all duration-100"},X={class:"p-3 -my-2"},B={key:0,class:"py-2 fade-in-entrance anim-duration-300"},C={key:0,class:"flex items-center justify-center py-10"},E={class:"flex justify-between items-center bg-gray-200 p-3"},P=i("div",null,null,-1);function j(t,s,z,A,o,p){const b=l("ns-field"),c=l("ns-spinner"),g=l("ns-button");return e(),d("div",V,[i("div",X,[o.fields.length>0?(e(),d("div",B,[(e(!0),d(x,null,F(o.fields,(u,v)=>(e(),h(b,{key:v,field:u},null,8,["field"]))),128))])):m("",!0)]),o.fields.length===0?(e(),d("div",C,[_(c,{border:"4",size:"16"})])):m("",!0),i("div",E,[i("div",null,[_(g,{onClick:s[0]||(s[0]=u=>p.submitNewPassword()),class:"justify-between",type:"info"},{default:S(()=>[o.isSubitting?(e(),h(c,{key:0,class:"mr-2",size:"6",border:"2"})):m("",!0),i("span",null,N(p.__("Save Password")),1)]),_:1})]),P])])}const hs=k(T,[["render",j]]);export{hs as default};
