import{n as v,F as U,d as T,b as g,P as w,i as q,T as E,B as N}from"./bootstrap-BlX78a31.js";import{_ as a}from"./lang-BINodpp-.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as S,c as u,o as l,b as r,t as d,F as b,e as y,g as j,f as O,w as R,i as P,a as m,n as k,B as C,A as F}from"./runtime-core.esm-bundler-_WxxsGY5.js";import{n as B}from"./currency-D3_TCvZd.js";import{_ as D}from"./components-YxxUavqw.js";import{N as L,b as I}from"./ns-reorder-popup.vue_vue_type_style_index_0_scoped_9fc0b535_lang-WPihDAWk.js";import{s as K}from"./select-api-entities-D9PB7bgT.js";import{v as V,a as M}from"./runtime-dom.esm-bundler-hZM9novS.js";import"./chart--HL2-LwL.js";import"./ns-avatar--_uWu4oY.js";import"./ns-avatar-image-BZQBDMAS.js";import"./join-array-BIBvzu4q.js";const H={name:"ns-procurement-product-options",props:["popup"],data(){return{validation:new U,fields:[],rawFields:[{label:a("Expiration Date"),name:"expiration_date",description:a("Define when that specific product should expire."),type:"datetimepicker"},{label:a("Barcode"),name:"barcode",description:a("Renders the automatically generated barcode."),type:"text",disabled:!0},{label:a("Tax Type"),name:"tax_type",description:a("Adjust how tax is calculated on the item."),type:"select",options:[{label:a("Inclusive"),value:"inclusive"},{label:a("Exclusive"),value:"exclusive"}]}]}},methods:{__:a,applyChanges(){if(this.validation.validateFields(this.fields)){const e=this.validation.extractFields(this.fields);return this.popup.params.resolve(e),this.popup.close()}return v.error(a("Unable to proceed. The form is not valid."))}},mounted(){const t=this.rawFields.map(e=>(e.name==="expiration_date"&&(e.value=this.popup.params.product.procurement.expiration_date),e.name==="tax_type"&&(e.value=this.popup.params.product.procurement.tax_type),e.name==="barcode"&&(e.value=this.popup.params.product.procurement.barcode),e));this.fields=this.validation.createFields(t)}},G={class:"ns-box shadow-lg w-[85.71vw] md:w-[71.43vw] lg:w-[42.86vw]"},J={class:"p-2 border-b ns-box-header"},z={class:"font-semibold"},W={class:"p-2 border-b ns-box-body"},Y={class:"p-2 flex justify-end ns-box-body"};function Q(t,e,o,n,s,i){const x=S("ns-field"),c=S("ns-button");return l(),u("div",G,[r("div",J,[r("h5",z,d(i.__("Options")),1)]),r("div",W,[(l(!0),u(b,null,y(s.fields,(p,f)=>(l(),j(x,{class:"w-full",field:p,key:f},null,8,["field"]))),128))]),r("div",Y,[O(c,{onClick:e[0]||(e[0]=p=>i.applyChanges()),type:"info"},{default:R(()=>[P(d(i.__("Save")),1)]),_:1})])])}const X=A(H,[["render",Q]]),Z={name:"ns-procurement",mounted(){this.reloadEntities(),this.shouldPreventAccidentalRefreshSubscriber=this.shouldPreventAccidentalRefresh.subscribe({next:t=>{t?window.addEventListener("beforeunload",this.addAccidentalCloseListener):window.removeEventListener("beforeunload",this.addAccidentalCloseListener)}}),nsHooks.addAction("entities-reloaded","internal",()=>{if(!this.hasPreloaded){const e=new URLSearchParams(window.location.search).get("preload");e&&g.get(`/api/procurements/preload/${e}`).subscribe({next:o=>{o.items!==void 0&&o.items.forEach(n=>{this.addProductList(n)})},error:o=>{v.error(o.message||a("An error occured while preloading the procurement."))}}),this.checkLowStockProducts(),this.hasPreloaded=!0}})},computed:{activeTab(){return this.validTabs.find(t=>t.active)||!1}},data(){return{hasPreloaded:!1,totalTaxValues:0,totalPurchasePrice:0,formValidation:new U,form:{},searchResult:[],searchValue:"",debounceSearch:null,taxes:[],validTabs:[{label:a("Details"),identifier:"details",active:!0},{label:a("Products"),identifier:"products",active:!1}],reloading:!1,shouldPreventAccidentalRefresh:new N(!1),shouldPreventAccidentalRefreshSubscriber:null,showInfo:!1,lowStockProducts:[]}},watch:{form:{handler(){this.formValidation.isFormUntouched(this.form)?this.shouldPreventAccidentalRefresh.next(!1):this.shouldPreventAccidentalRefresh.next(!0)},deep:!0},searchValue(t){t&&(clearTimeout(this.debounceSearch),this.debounceSearch=setTimeout(()=>{this.doSearch(t)},500))}},components:{},props:["submitMethod","submitUrl","returnUrl","src","rules"],methods:{__:a,nsCurrency:B,addAccidentalCloseListener(t){return t.preventDefault(),!0},async defineConversionOption(t){try{const e=this.form.products[t];if(e.procurement.unit_id===void 0)return T.error(a("An error has occured"),a("Select the procured unit first before selecting the conversion unit."),{actions:{learnMore:{label:a("Learn More"),onClick:n=>{console.log(n)}},close:{label:a("Close"),onClick:n=>{n.close()}}},duration:5e3});const o=await K(`/api/units/${e.procurement.unit_id}/siblings`,a("Convert to unit"),e.procurement.convert_unit_id||null,"select");e.procurement.convert_unit_id=o.values[0],e.procurement.convert_unit_label=o.labels[0]}catch(e){if(e!==!1)return v.error(e.message||a("An unexpected error has occured"))}},computeTotal(){this.totalTaxValues=this.form.products.length>0?this.form.products.reduce((t,e)=>t+e.procurement.tax_value,0):0,this.totalPurchasePrice=this.form.products.length>0?this.form.products.reduce((t,e)=>t+parseFloat(e.procurement.total_purchase_price),0):0},updateLine(t){const e=this.form.products[t],o=this.taxes.find(n=>n.id===e.procurement.tax_group_id);if(parseFloat(e.procurement.purchase_price_edit)>0&&parseFloat(e.procurement.quantity)>0){if(o){const n=o.taxes.map(s=>E.getTaxValue(e.procurement.tax_type,e.procurement.purchase_price_edit,parseFloat(s.rate)));e.procurement.tax_value=n.reduce((s,i)=>s+i),e.procurement.tax_type==="inclusive"?(e.procurement.net_purchase_price=parseFloat(e.procurement.purchase_price_edit)-e.procurement.tax_value,e.procurement.gross_purchase_price=parseFloat(e.procurement.purchase_price_edit),e.procurement.purchase_price=parseFloat(e.procurement.gross_purchase_price)):(e.procurement.gross_purchase_price=parseFloat(e.procurement.purchase_price_edit)+e.procurement.tax_value,e.procurement.net_purchase_price=parseFloat(e.procurement.purchase_price_edit),e.procurement.purchase_price=parseFloat(e.procurement.gross_purchase_price))}else e.procurement.gross_purchase_price=parseFloat(e.procurement.purchase_price_edit),e.procurement.purchase_price=parseFloat(e.procurement.purchase_price_edit),e.procurement.net_purchase_price=parseFloat(e.procurement.purchase_price_edit),e.procurement.tax_value=0;e.procurement.tax_value=e.procurement.tax_value*parseFloat(e.procurement.quantity),e.procurement.total_purchase_price=e.procurement.purchase_price*parseFloat(e.procurement.quantity)}this.computeTotal()},fetchLastPurchasePrice(t){const e=this.form.products[t],o=e.unit_quantities.find(n=>e.procurement.unit_id===n.unit_id);o&&e.procurement.purchase_price_edit===0&&(e.procurement.purchase_price_edit=o.last_purchase_price||0),this.updateLine(t)},switchTaxType(t,e){t.procurement.tax_type=t.procurement.tax_type==="inclusive"?"exclusive":"inclusive",this.updateLine(e)},doSearch(t){g.post("/api/procurements/products/search-product",{search:t}).subscribe(e=>{e.length===1?this.addProductList(e[0]):e.length>1?this.searchResult=e:v.error(a("No result match your query."))})},reloadEntities(){this.reloading=!0,q([g.get("/api/categories"),g.get(this.src),g.get("/api/taxes/groups")]).subscribe(t=>{this.reloading=!1,this.taxes=t[2],this.form.general&&t[2].tabs.general.fields.forEach((e,o)=>{e.value=this.form.tabs.general.fields[o].value||""}),this.form=Object.assign(JSON.parse(JSON.stringify(t[1])),this.form),this.form=this.formValidation.createForm(this.form),this.form.tabs&&this.form.tabs.general.fields.forEach((e,o)=>{e.options&&(e.options=t[1].tabs.general.fields[o].options)}),this.form.products.length===0&&(this.form.products=this.form.products.map(e=>(["gross_purchase_price","purchase_price_edit","tax_value","net_purchase_price","purchase_price","total_price","total_purchase_price","quantity","tax_group_id"].forEach(o=>{e[o]===void 0&&(e[o]=e[o]===void 0?0:e[o])}),e.$invalid=e.$invalid||!1,e.purchase_price_edit=e.purchase_price,{name:e.name,purchase_units:e.purchase_units,procurement:e,unit_quantities:e.unit_quantities||[]}))),nsHooks.doAction("entities-reloaded")})},setTabActive(t){this.validTabs.forEach(e=>e.active=!1),t.active=!0},addProductList(t){if(t.unit_quantities===void 0)return v.error(a("Unable to add product which doesn't unit quantities defined."));t.procurement===void 0&&(t.procurement={});const e={gross_purchase_price:0,purchase_price_edit:0,tax_value:0,net_purchase_price:0,purchase_price:0,total_price:0,total_purchase_price:0,quantity:1,expiration_date:null,tax_group_id:t.tax_group_id,tax_type:t.tax_type||"inclusive",unit_id:t.unit_quantities[0].unit_id,product_id:t.id,convert_unit_id:t.unit_quantities[0].convert_unit_id,procurement_id:null,$invalid:!1};console.log({product:t}),t.procurement=Object.assign(e,t.procurement),this.searchResult=[],this.searchValue="",this.form.products.push(t);const o=this.form.products.length-1;this.fetchLastPurchasePrice(o)},submit(){if(this.form.products.length===0)return v.error(a("Unable to proceed, no product were provided."),a("OK"));if(this.form.products.forEach(n=>{parseFloat(n.procurement.quantity)>=1?n.procurement.unit_id===0?n.procurement.$invalid=!0:n.procurement.$invalid=!1:n.procurement.$invalid=!0}),this.form.products.filter(n=>n.procurement.$invalid).length>0)return v.error(a("Unable to proceed, one or more product has incorrect values."),a("OK"));if(this.formValidation.validateForm(this.form).length>0)return this.setTabActive(this.activeTab),v.error(a("Unable to proceed, the procurement form is not valid."),a("OK"));if(this.submitUrl===void 0)return v.error(a("Unable to submit, no valid submit URL were provided."),a("OK"));this.formValidation.disableForm(this.form);const e={...this.formValidation.extractForm(this.form),products:this.form.products.map(n=>n.procurement)},o=w.show(I);g[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,e).subscribe({next:n=>{if(n.status==="success")return this.shouldPreventAccidentalRefresh.next(!1),document.location=this.returnUrl;o.close(),this.formValidation.enableForm(this.form)},error:n=>{o.close(),v.error(n.message,void 0,{duration:5e3}),this.formValidation.enableForm(this.form),n.errors&&this.formValidation.triggerError(this.form,n.errors)}})},deleteProduct(t){this.form.products.splice(t,1),this.computeTotal()},setProductOptions(t){new Promise((o,n)=>{w.show(X,{product:this.form.products[t],resolve:o,reject:n})}).then(o=>{for(let n in o)this.form.products[t].procurement[n]=o[n];this.updateLine(t)})},async selectUnitForProduct(t){try{const e=this.form.products[t],o=await new Promise((s,i)=>{w.show(L,{label:a("{product}: Purchase Unit").replace("{product}",e.name),description:a("The product will be procured on that unit."),value:e.unit_id,resolve:s,reject:i,options:e.unit_quantities.map(x=>({label:x.unit.name,value:x.unit.id}))})});e.procurement.unit_id=o;const n=e.unit_quantities.find(s=>parseInt(s.unit_id)===+o);e.procurement.convert_unit_id=n?.convert_unit_id||void 0,e.procurement.convert_unit_label=await new Promise((s,i)=>{e.procurement.convert_unit_id!==void 0?g.get(`/api/units/${e.procurement.convert_unit_id}`).subscribe({next:x=>{s(x.name)},error:x=>{s(a("Unkown Unit"))}}):s(a("N/A"))}),this.fetchLastPurchasePrice(t)}catch(e){console.log(e)}},async selectTax(t){try{const e=this.form.products[t],o=await new Promise((n,s)=>{w.show(L,{label:a("Choose Tax"),description:a("The tax will be assigned to the procured product."),resolve:n,reject:s,options:this.taxes.map(i=>({label:i.name,value:i.id}))})});e.procurement.tax_group_id=o,this.updateLine(t)}catch{}},async triggerKeyboard(t,e,o){try{const n=await new Promise((s,i)=>{w.show(D,{value:t[e],resolve:s,reject:i})});t[e]=n,this.updateLine(o)}catch(n){console.log({exception:n})}},getSelectedTax(t){const e=this.form.products[t],o=this.taxes.find(n=>e.procurement.tax_group_id&&e.procurement.tax_group_id===n.id);return o?o.name:a("N/A")},getSelectedUnit(t){const e=this.form.products[t],n=e.unit_quantities.map(s=>s.unit).find(s=>e.procurement.unit_id!==void 0&&s.id===e.procurement.unit_id);return n?n.name:a("N/A")},handleSavedEvent(t,e){t.data&&(e.options.push({label:t.data.entry.first_name,value:t.data.entry.id}),e.value=t.data.entry.id)},checkLowStockProducts(){g.get("/api/procurements/low-stock-suggestions").subscribe({next:t=>{t.status==="success"&&t.count>0&&(this.lowStockProducts=t.data,this.showLowStockNotification(t.count))},error:t=>{console.log("Low stock check failed:",t)}})},showLowStockNotification(t){const e=t===1?a("We've detected 1 product that is running low on stock. You can load it into the procurement."):a("We've detected {count} products that are running low on stock. You can load them into the procurement.").replace("{count}",t);T.info(a("Products Suggestion"),e,{duration:!1,actions:{loadProducts:{label:a("Load Products"),onClick:o=>{this.loadLowStockProducts(),o.close()}},dismiss:{label:a("Dismiss"),onClick:o=>{o.close()}}}})},loadLowStockProducts(){let t=0;this.lowStockProducts.forEach(o=>{this.form.products.find(s=>s.product_id===o.id||s.id===o.id)||(this.addProductList({...o,procurement:{unit_id:o.recent_procured_unit_id,quantity:o.recent_procured_quantity,convert_unit_id:o.recent_procured_convert_unit_id,convert_unit_label:o.recent_procured_convert_unit_label,purchase_price_edit:o.recent_procured_purchase_price}}),t++)}),this.setTabActive(this.validTabs.find(o=>o.identifier==="products"));const e=t===1?a("1 product has been added to the procurement."):a("{count} products have been added to the procurement.").replace("{count}",t);v.success(e)}}},$={class:"form flex-auto flex flex-col",id:"crud-form"},ee={class:"flex flex-col"},te={class:"flex justify-between items-center"},re={for:"title",class:"font-bold my-2 text-primary"},se={for:"title",class:"text-sm my-2 -mx-1 flex text-primary"},oe={key:0,class:"cursor-pointer rounded-full ns-inset-button border px-2 py-1"},ie={key:1,class:"cursor-pointer rounded-full ns-inset-button border px-2 py-1"},ne={class:"px-1"},ae=["href"],ce=["disabled"],le=["disabled"],ue={key:0,class:"text-xs text-fontcolor-soft py-1"},de={key:0,class:"rounded border-2 bg-info-primary border-info-tertiary flex"},pe={class:"text flex-auto py-4"},me={class:"font-bold text-lg"},he={id:"form-container",class:"-mx-4 flex flex-wrap mt-4"},_e={class:"px-4 w-full"},fe={id:"tabbed-card",class:"ns-tab"},ve={id:"card-header",class:"flex flex-wrap"},be=["onClick"],xe={key:0,class:"ml-2 rounded-full bg-info-tertiary text-primary h-6 min-w-6 flex items-center justify-center"},ye={key:0,class:"ns-tab-item"},ge={class:"card-body rounded-br-lg rounded-bl-lg shadow p-2"},we={key:0,class:"-mx-4 flex flex-wrap"},ke={key:1,class:"ns-tab-item"},Pe={class:"card-body rounded-br-lg rounded-bl-lg shadow p-2"},Ce={class:"mb-2"},Se={class:"input-group info flex border-2 rounded overflow-hidden"},Te=["placeholder"],Fe={class:"h-0"},Le={class:"shadow bg-floating-menu relative z-10"},Ve=["onClick"],Ue={class:"block font-bold text-primary"},Ae={class:"block text-sm text-priamry"},Oe={class:"block text-sm text-primary"},qe={class:"overflow-x-auto"},Ee={class:"w-full ns-table"},Ne={class:""},je={class:"flex"},Re={class:"flex md:flex-row flex-col md:-mx-1"},Be={class:"md:px-1"},De=["onClick"],Ie={class:"md:px-1"},Ke=["onClick"],Me={class:"md:px-1"},He=["onClick"],Ge={class:"md:px-1"},Je=["onClick"],ze={class:"md:px-1"},We=["onClick"],Ye=["onClick"],Qe={class:"flex justify-center"},Xe={key:0,class:"outline-none border-dashed py-1 border-b border-primary text-sm"},Ze={key:1,class:"outline-none border-dashed py-1 border-b border-primary text-sm"},$e={class:"flex items-start"},et={class:"input-group rounded border-2"},tt=["onChange","onUpdate:modelValue"],rt=["value"],st={class:"flex items-start flex-col justify-end"},ot={class:"text-sm text-primary"},it={class:"text-primary"},nt=["colspan"],at={class:"p-2 border"},ct=["colspan"],lt={class:"p-2 border"};function ut(t,e,o,n,s,i){const x=S("ns-field");return l(),u("div",$,[s.form.main?(l(),u(b,{key:0},[r("div",ee,[r("div",te,[r("label",re,d(s.form.main.label||i.__("No title is provided")),1),r("div",se,[r("div",{class:"px-1",onClick:e[0]||(e[0]=c=>s.showInfo=!s.showInfo)},[s.showInfo?m("",!0):(l(),u("span",oe,d(i.__("Show Details")),1)),s.showInfo?(l(),u("span",ie,d(i.__("Hide Details")),1)):m("",!0)]),r("div",ne,[o.returnUrl?(l(),u("a",{key:0,href:o.returnUrl,class:"rounded-full ns-inset-button border px-2 py-1"},d(i.__("Go Back")),9,ae)):m("",!0)])])]),r("div",{class:k([s.form.main.disabled?"disabled":s.form.main.errors.length>0?"error":"","flex border-2 rounded input-group info overflow-hidden"])},[C(r("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>s.form.main.value=c),onKeypress:e[2]||(e[2]=c=>s.formValidation.checkField(s.form.main)),onBlur:e[3]||(e[3]=c=>s.formValidation.checkField(s.form.main)),onChange:e[4]||(e[4]=c=>s.formValidation.checkField(s.form.main)),disabled:s.form.main.disabled,type:"text",class:k([(s.form.main.disabled,""),"flex-auto outline-none h-10 px-2"])},null,42,ce),[[V,s.form.main.value]]),r("button",{disabled:s.form.main.disabled,onClick:e[5]||(e[5]=c=>i.submit()),class:"outline-none px-4 h-10 border-l"},[F(t.$slots,"save",{},()=>[P(d(i.__("Save")),1)])],8,le),r("button",{onClick:e[6]||(e[6]=c=>i.reloadEntities()),class:"outline-none px-4 h-10"},[r("i",{class:k([s.reloading?"animate animate-spin":"","las la-sync"])},null,2)])],2),s.form.main.description&&s.form.main.errors.length===0?(l(),u("p",ue,d(s.form.main.description),1)):m("",!0),(l(!0),u(b,null,y(s.form.main.errors,(c,p)=>(l(),u("p",{class:"text-xs py-1 text-error-primary",key:p},[r("span",null,[F(t.$slots,"error-required",{},()=>[P(d(c.identifier),1)])])]))),128))]),s.showInfo?(l(),u("div",de,[e[10]||(e[10]=r("div",{class:"icon w-16 flex py-4 justify-center"},[r("i",{class:"las la-info-circle text-4xl"})],-1)),r("div",pe,[r("h3",me,d(i.__("Important Notes")),1),r("ul",null,[r("li",null,[e[8]||(e[8]=r("i",{class:"las la-hand-point-right"}," ",-1)),r("span",null,d(i.__("Stock Management Products.")),1)]),r("li",null,[e[9]||(e[9]=r("i",{class:"las la-hand-point-right"}," ",-1)),r("span",null,d(i.__("Doesn't work with Grouped Product.")),1)])])])])):m("",!0),r("div",he,[r("div",_e,[r("div",fe,[r("div",ve,[(l(!0),u(b,null,y(s.validTabs,(c,p)=>(l(),u("div",{onClick:f=>i.setTabActive(c),class:k([c.active?"active":"inactive","tab cursor-pointer px-4 py-2 rounded-tl-lg flex rounded-tr-lg text-primary"]),key:p},[P(d(c.label)+" ",1),c.identifier==="products"?(l(),u("div",xe,d(s.form.products.length),1)):m("",!0)],10,be))),128))]),i.activeTab.identifier==="details"?(l(),u("div",ye,[r("div",ge,[s.form.tabs?(l(),u("div",we,[(l(!0),u(b,null,y(s.form.tabs.general.fields,(c,p)=>(l(),u("div",{class:"flex px-4 w-full md:w-1/2 lg:w-1/3",key:p},[O(x,{onSaved:f=>i.handleSavedEvent(f,c),field:c},null,8,["onSaved","field"])]))),128))])):m("",!0)])])):m("",!0),i.activeTab.identifier==="products"?(l(),u("div",ke,[r("div",Pe,[r("div",Ce,[r("div",Se,[C(r("input",{"onUpdate:modelValue":e[7]||(e[7]=c=>s.searchValue=c),type:"text",placeholder:i.__("SKU, Barcode, Name"),class:"flex-auto text-primary outline-none h-10 px-2"},null,8,Te),[[V,s.searchValue]])]),r("div",Fe,[r("div",Le,[(l(!0),u(b,null,y(s.searchResult,(c,p)=>(l(),u("div",{onClick:f=>i.addProductList(c),key:p,class:"cursor-pointer border border-b hover:bg-floating-menu-hover border-floating-menu-edge p-2 text-primary"},[r("span",Ue,d(c.name),1),r("span",Ae,d(i.__("SKU"))+" : "+d(c.sku),1),r("span",Oe,d(i.__("Barcode"))+" : "+d(c.barcode),1)],8,Ve))),128))])])]),r("div",qe,[r("table",Ee,[r("thead",null,[r("tr",null,[(l(!0),u(b,null,y(s.form.columns,(c,p)=>(l(),u("td",{width:"200",key:p,class:"text-primary p-2 border"},d(c.label),1))),128))])]),r("tbody",null,[(l(!0),u(b,null,y(s.form.products,(c,p)=>(l(),u("tr",{key:p,class:k(c.procurement.$invalid?"error border-2 border-error-primary":"")},[(l(!0),u(b,null,y(s.form.columns,(f,h)=>(l(),u(b,null,[f.type==="name"?(l(),u("td",{key:h,width:"500",class:"p-2 text-primary border"},[r("span",Ne,d(c.name),1),r("div",je,[r("div",Re,[r("div",Be,[r("span",{class:"text-xs text-primary cursor-pointer underline",onClick:_=>i.deleteProduct(p)},d(i.__("Delete")),9,De)]),r("div",Ie,[r("span",{class:"text-xs text-primary cursor-pointer underline",onClick:_=>i.setProductOptions(p)},d(i.__("Options")),9,Ke)]),r("div",Me,[r("span",{class:"text-xs text-primary cursor-pointer underline",onClick:_=>i.selectUnitForProduct(p)},d(i.__("Unit"))+": "+d(i.getSelectedUnit(p)),9,He)]),r("div",Ge,[r("span",{class:"text-xs text-primary cursor-pointer underline",onClick:_=>i.selectTax(p)},d(i.__("Tax"))+": "+d(i.getSelectedTax(p)),9,Je)]),r("div",ze,[r("span",{class:"text-xs text-primary cursor-pointer underline",onClick:_=>i.defineConversionOption(p)},d(i.__("Convert"))+": "+d(c.procurement.convert_unit_id?c.procurement.convert_unit_label:i.__("N/A")),9,We)])])])])):m("",!0),f.type==="text"?(l(),u("td",{key:h,onClick:_=>i.triggerKeyboard(c.procurement,h,p),class:"text-primary border cursor-pointer"},[r("div",Qe,[["purchase_price_edit"].includes(h)?(l(),u("span",Xe,d(i.nsCurrency(c.procurement[h])),1)):m("",!0),["purchase_price_edit"].includes(h)?m("",!0):(l(),u("span",Ze,d(c.procurement[h]),1))])],8,Ye)):m("",!0),f.type==="custom_select"?(l(),u("td",{key:h,class:"p-2 text-primary border"},[r("div",$e,[r("div",et,[C(r("select",{onChange:_=>i.updateLine(p),"onUpdate:modelValue":_=>c.procurement[h]=_,class:"p-2"},[(l(!0),u(b,null,y(f.options,_=>(l(),u("option",{key:_.value,value:_.value},d(_.label),9,rt))),128))],40,tt),[[M,c.procurement[h]]])])])])):m("",!0),f.type==="currency"?(l(),u("td",{key:h,class:"p-2 text-primary border"},[r("div",st,[r("span",ot,d(i.nsCurrency(c.procurement[h])),1)])])):m("",!0)],64))),256))],2))),128)),r("tr",it,[r("td",{class:"p-2 border",colspan:Object.keys(s.form.columns).indexOf("tax_value")},null,8,nt),r("td",at,d(i.nsCurrency(s.totalTaxValues)),1),r("td",{class:"p-2 border",colspan:Object.keys(s.form.columns).indexOf("total_purchase_price")-(Object.keys(s.form.columns).indexOf("tax_value")+1)},null,8,ct),r("td",lt,d(i.nsCurrency(s.totalPurchasePrice)),1)])])])])])])):m("",!0)])])])],64)):m("",!0)])}const Pt=A(Z,[["render",ut]]);export{Pt as default};
