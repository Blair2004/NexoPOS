import{b as y,n as f,h as p}from"./bootstrap-CTGbPB8U.js";import{e as g,c as v}from"./components-Wv7K25xh.js";import{_ as w}from"./lang-BINodpp-.js";import{n as D}from"./currency-DQAAGb0G.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as C,c as n,o as l,b as e,f as b,t,F as c,e as h,i as F}from"./runtime-core.esm-bundler-lHXuXxGr.js";import"./chart-ka-CGrsc.js";import"./runtime-dom.esm-bundler-BhgnMY0Q.js";import"./ns-prompt-popup-Clv0LWBA.js";import"./ns-avatar-yPNTyn6S.js";import"./ns-avatar-image-DuMgcjn0.js";const Y={name:"ns-cash-flow",props:["storeLogo","storeName"],mounted(){this.loadReport()},components:{nsDatepicker:v,nsDateTimePicker:g},data(){return{startDateField:{value:p(ns.date.current).startOf("month").format("YYYY-MM-DD HH:mm:ss"),type:"datetimepicker"},endDateField:{value:p(ns.date.current).endOf("month").format("YYYY-MM-DD HH:mm:ss"),type:"datetimepicker"},report:new Object,ns:window.ns}},computed:{},methods:{__:w,nsCurrency:D,printSaleReport(){this.$htmlToPaper("report")},loadReport(){y.post("/api/reports/transactions",{startDate:this.startDateField.value,endDate:this.endDateField.value}).subscribe({next:a=>{this.report=a},error:a=>{f.error(a.message)}})}}},R={id:"report-section",class:"px-4"},B={class:"flex -mx-2"},H={class:"px-2"},N={class:"px-2"},S={class:"px-2"},j={class:"ns-button"},L={class:"pl-2"},M={class:"px-2"},P={class:"ns-button"},T={class:"pl-2"},O={id:"report",class:"anim-duration-500 fade-in-entrance"},V={class:"flex w-full"},A={class:"my-4 flex justify-between w-full"},E={class:"text-fontcolor"},q={class:"pb-1 border-b border-dashed"},z={class:"pb-1 border-b border-dashed"},G={class:"pb-1 border-b border-dashed"},I=["src","alt"],J={class:"shadow rounded my-4"},K={class:"ns-box"},Q={class:"ns-box-body"},U={class:"ns-table table w-full"},W={class:""},X={class:"border p-2 text-left"},Z={width:"150",class:"border border-error-secondary bg-error-primary p-2 text-right"},$={width:"150",class:"text-right border-success-secondary bg-success-primary border p-2"},ee={class:""},se={class:"p-2 bg-box-elevation-background border"},te={class:"p-2 border text-white border-error-secondary bg-error-primary text-right"},re={class:"p-2 border text-white text-right border-success-secondary bg-success-primary"},oe={class:"p-2 border"},de={class:"ml-4"},ne={class:"p-2 border text-white border-error-secondary bg-error-primary text-right"},le={class:"p-2 border text-white text-right border-success-secondary bg-success-primary"},ae={class:"p-2 border bg-box-elevation-background"},ie={class:"p-2 border text-right border-error-secondary bg-error-primary"},ce={class:"p-2 border text-right border-success-secondary bg-success-primary"};function _e(a,r,_,ue,o,s){const u=C("ns-field");return l(),n("div",R,[e("div",B,[e("div",H,[b(u,{field:o.startDateField},null,8,["field"])]),e("div",N,[b(u,{field:o.endDateField},null,8,["field"])]),e("div",S,[e("div",j,[e("button",{onClick:r[0]||(r[0]=d=>s.loadReport()),class:"rounded flex justify-between text-fontcolor shadow py-1 items-center px-2"},[r[2]||(r[2]=e("i",{class:"las la-sync-alt text-xl"},null,-1)),e("span",L,t(s.__("Load")),1)])])]),e("div",M,[e("div",P,[e("button",{onClick:r[1]||(r[1]=d=>s.printSaleReport()),class:"rounded flex justify-between text-fontcolor shadow py-1 items-center px-2"},[r[3]||(r[3]=e("i",{class:"las la-print text-xl"},null,-1)),e("span",T,t(s.__("Print")),1)])])])]),e("div",O,[e("div",V,[e("div",A,[e("div",E,[e("ul",null,[e("li",q,t(s.__("Range : {date1} â€” {date2}").replace("{date1}",o.startDateField.value).replace("{date2}",o.endDateField.value)),1),e("li",z,t(s.__("Document : Sale By Payment")),1),e("li",G,t(s.__("By : {user}").replace("{user}",o.ns.user.username)),1)])]),e("div",null,[e("img",{class:"w-24",src:_.storeLogo,alt:_.storeName},null,8,I)])])]),e("div",J,[e("div",K,[e("div",Q,[e("table",U,[e("thead",W,[e("tr",null,[e("th",X,t(s.__("Account")),1),e("th",Z,t(s.__("Debit")),1),e("th",$,t(s.__("Credit")),1)])]),e("tbody",ee,[(l(!0),n(c,null,h(o.report.accounts,(d,m)=>(l(),n(c,{key:m},[e("tr",null,[e("td",se,[r[4]||(r[4]=e("i",{class:"las la-arrow-right"},null,-1)),r[5]||(r[5]=F()),e("strong",null,t(d.name),1)]),e("td",te,t(s.nsCurrency(d.debits)),1),e("td",re,t(s.nsCurrency(d.credits)),1)]),(l(!0),n(c,null,h(d.transactions,(i,x)=>(l(),n("tr",{key:x},[e("td",oe,[e("span",de,t(i.name),1)]),e("td",ne,t(s.nsCurrency(i.debits)),1),e("td",le,t(s.nsCurrency(i.credits)),1)]))),128))],64))),128))]),e("tbody",null,[e("tr",null,[e("td",ae,[e("strong",null,t(s.__("Total")),1)]),e("td",ie,[e("strong",null,t(s.nsCurrency(o.report.debits)),1)]),e("td",ce,[e("strong",null,t(s.nsCurrency(o.report.credits)),1)])])])])])])])])])}const ke=k(Y,[["render",_e]]);export{ke as default};
