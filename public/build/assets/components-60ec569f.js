import q from"./ns-alert-popup-9b1871ce.js";import{_ as b}from"./currency-f8bd78d1.js";import{n as be}from"./ns-avatar-image-304d39fb.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{o as l,c as a,a as i,t as c,f as T,r as k,A as y,e as u,n as m,F as _,b as D,B as F,i as p,w as M,g as $,d as _e,j as Y,C as pe,D as W,E as G,G as ye,H as B,I,s as z,K as ve}from"./runtime-core.esm-bundler-ed35d834.js";import{h as x,b as S,v as R,F as K,g as Q,p as J,P as j,w as U,i as E,a as P,n as X,j as ke,k as Z,e as L,S as we}from"./bootstrap-85a9f35f.js";import{n as V,g as xe,e as A,f as De,b as Ce,h as ee,i as Me,j as Te,a as Se,k as $e,c as Fe,l as Oe,d as Re}from"./ns-prompt-popup-116db3d0.js";import"./index.es-25aa42ee.js";const Ee={methods:{__:b},components:{nsAvatarImage:be},name:"ns-avatar",data(){return{svg:""}},computed:{avatarUrl(){return this.url.length===0?"":this.url}},props:["url","display-name"]},Pe={class:"flex justify-between items-center flex-shrink-0"},je={class:"hidden md:inline-block px-2"},He={class:"md:hidden px-2"},Ue={class:"px-2"},Ae={class:"overflow-hidden rounded-full bg-gray-600"};function Le(e,t,s,h,d,n){const r=k("ns-avatar-image");return l(),a("div",Pe,[i("span",je,c(n.__("Howdy, {name}").replace("{name}",this.displayName)),1),i("span",He,c(e.displayName),1),i("div",Ue,[i("div",Ae,[T(r,{url:n.avatarUrl,name:e.displayName},null,8,["url","name"])])])])}const Ye=C(Ee,[["render",Le]]),Ve={data:()=>({clicked:!1,_save:0}),props:["type","disabled","link","href","routerLink","to","target"],mounted(){},computed:{isDisabled(){return this.disabled&&(this.disabled.length===0||this.disabled==="disabled"||this.disabled)}}},Ne=["disabled"],Be=["target","href"];function Ie(e,t,s,h,d,n){return l(),a("div",{class:m(["flex ns-button",s.type?s.type:"default"])},[!s.link&&!s.href?(l(),a("button",{key:0,disabled:n.isDisabled,class:"flex rounded items-center py-2 px-3 font-semibold"},[y(e.$slots,"default")],8,Ne)):u("",!0),s.href?(l(),a("a",{key:1,target:s.target,href:s.href,class:"flex rounded items-center py-2 px-3 font-semibold"},[y(e.$slots,"default")],8,Be)):u("",!0)],2)}const ze=C(Ve,[["render",Ie]]),qe={name:"ns-calendar",props:["date","field","visible","range","selected-range","side"],data(){return{calendar:[[]],currentDay:x(),daysOfWeek:new Array(7).fill("").map((e,t)=>t),hours:0,minutes:0,currentView:"days",clickedOnCalendar:!1,moment:x,months:new Array(12).fill("").map((e,t)=>t)}},computed:{momentCopy(){return x()}},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},mounted(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null,""].includes(this.date)?x():x(this.date),this.hours=this.currentDay.hours(),this.minutes=this.currentDay.minutes(),this.build(),this.toggleView("days")},methods:{__:b,handleCalendarClick(){this.clickedOnCalendar=!0},getDayClass({day:e,_dayIndex:t,dayOfWeek:s,_index:h,currentDay:d}){const n=[];return(x(this.date).isSame(e.date,"day")||this.isRangeEdge(e))&&!this.isInvalidRange()?n.push("bg-info-secondary text-primary border-info-secondary text-white"):n.push("hover:bg-numpad-hover"),this.isInvalidRange()&&this.isRangeEdge(e)&&n.push("bg-error-secondary text-white"),h===0&&n.push("border-t border-tab-table-th"),this.isInRange(e)&&!this.isRangeEdge(e)?n.push("bg-info-primary"):e.isDifferentMonth&&!this.isRangeEdge(e)&&n.push("bg-tab-table-th"),n.join(" ")},erase(){this.selectDate({date:x(ns.date.current)})},isInRange(e){return this.range&&this.range.length===2&&this.range[0]&&this.range[1]?x(e.date).isSameOrAfter(this.range[0])&&x(e.date).isSameOrBefore(this.range[1]):!1},isInvalidRange(){return this.selectedRange&&this.selectedRange.endDate?x(this.selectedRange.startDate).isAfter(x(this.selectedRange.endDate))||x(this.selectedRange.endDate).isBefore(x(this.selectedRange.startDate)):!1},isRangeEdge(e){return this.range&&this.range.length===2&&this.range[0]&&this.range[1]?x(e.date).isSame(this.range[0],"day")||x(e.date).isSame(this.range[1],"day"):!1},setYear(e){parseInt(e.srcElement.value)>0&&parseInt(e.srcElement.value)<9999&&(this.currentDay.year(e.srcElement.value),this.selectDate({date:this.currentDay.clone()}))},subYear(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.selectDate({date:this.currentDay.clone()}))},addYear(){this.currentDay.add(1,"year"),this.selectDate({date:this.currentDay.clone()})},toggleView(e){this.currentView=e,this.currentView==="years"&&setTimeout(()=>{this.$refs.year.select()},100),this.currentView==="days"&&setTimeout(()=>{this.$refs.hours.addEventListener("focus",function(t){this.select()}),this.$refs.minutes.addEventListener("focus",function(t){this.select()})},100)},setMonth(e){this.currentDay.month(e),this.selectDate({date:this.currentDay.clone()})},detectHoursChange(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.selectDate({date:this.currentDay.clone()})},detectMinuteChange(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.selectDate({date:this.currentDay.clone()})},checkClickedItem(e){this.$parent.$el.getAttribute("class").split(" ").includes("picker")&&(!this.$parent.$el.contains(e.srcElement)&&!this.clickedOnCalendar&&this.visible&&this.$emit("onClickOut",!0),setTimeout(()=>{this.clickedOnCalendar=!1},100))},selectDate(e){if([void 0].includes(e))this.$emit("set",null);else{if(this.side==="left"&&x(this.selectedRange.endDate).isValid()&&e.date.isAfter(this.selectedRange.endDate))return S.error(b("The left range will be invalid.")).subscribe(),!1;if(this.side==="right"&&x(this.selectedRange.startDate).isValid()&&e.date.isBefore(this.selectedRange.startDate))return S.error(b("The right range will be invalid.")).subscribe(),!1;this.currentDay=e.date,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.$emit("set",this.currentDay.format("YYYY-MM-DD HH:mm:ss"))}this.build()},subMonth(){this.currentDay.subtract(1,"month"),this.build()},addMonth(){this.currentDay.add(1,"month"),this.build()},resetCalendar(){this.calendar=[[]]},build(){this.resetCalendar(),this.currentDay.clone().startOf("month");const e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");for(;;){e.day()===0&&this.calendar[0].length>0&&this.calendar.push([]);let s=this.calendar.length-1;if(this.calendar[s].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(x.now(),"day"),isDifferentMonth:!1,isNextMonth:!1,isPreviousMonth:!1}),e.isSame(t,"day"))break;e.add(1,"day")}if(this.calendar[0].length<7){const s=7-this.calendar[0].length,h=this.calendar[0][0].date.clone(),d=[];for(let n=0;n<s;n++)h.subtract(1,"day"),d.unshift({date:h.clone(),dayOfWeek:h.day(),isToday:h.isSame(x.now(),"day"),isDifferentMonth:!0,isNextMonth:!1,isPreviousMonth:!0});this.calendar[0].unshift(...d)}if(this.calendar[this.calendar.length-1].length<7){const s=this.calendar.length-1,h=7-this.calendar[s].length,d=this.calendar[s][this.calendar[s].length-1].date.clone(),n=[];for(let r=0;r<h;r++)d.add(1,"day"),n.push({date:d.clone(),dayOfWeek:d.day(),isToday:d.isSame(x.now(),"day"),isDifferentMonth:!0,isNextMonth:!0,isPreviousMonth:!1});this.calendar[s].push(...n)}}}},We={key:0,class:"flex-auto"},Ge={class:"p-2 flex items-center"},Ke=i("i",{class:"las la-angle-left"},null,-1),Qe=[Ke],Je={class:"flex flex-auto font-semibold text-primary justify-center"},Xe=i("i",{class:"las la-angle-right"},null,-1),Ze=[Xe],et={class:"h-32 flex grow-0 items-center justify-center text-primary p-4"},tt={class:"rounded input-group info border-2 flex overflow-hidden"},st=i("i",{class:"las la-minus"},null,-1),nt=[st],it={class:"w-24 flex grow-0"},lt=["value"],at=i("i",{class:"las la-plus"},null,-1),rt=[at],dt={class:"p-2"},ot={key:1,class:"flex-auto border-b border-box-background"},ut={class:"p-2 flex items-center"},ct=i("i",{class:"las la-angle-left"},null,-1),ht=[ct],ft={class:"flex flex-auto font-semibold text-primary justify-center"},mt={class:"mr-2 border-b border-info-secondary border-dashed"},gt=i("i",{class:"las la-angle-right"},null,-1),bt=[gt],_t={class:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-primary divide-x divide-y border-b border-box-background"},pt={class:"w-full h-full"},yt=["onClick"],vt={class:"p-2"},kt={key:2},wt={class:"p-2 flex items-center"},xt=i("i",{class:"las la-angle-left"},null,-1),Dt=[xt],Ct={class:"flex flex-auto font-semibold text-primary justify-center"},Mt=i("i",{class:"las la-angle-right"},null,-1),Tt=[Mt],St={class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary divide-x divide-y"},$t={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Ft={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Ot={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Rt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Et={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Pt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},jt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Ht=["onClick"],Ut={key:0},At={key:1,class:"text-secondary"},Lt={class:"border-t border-tab-table-th w-full p-2"},Yt={class:"-mx-1 flex justify-between"},Vt={class:"px-1"},Nt={class:"-mx-1 flex"},Bt={class:"px-1"},It=i("i",{class:"las la-trash text-lg"},null,-1),zt=[It],qt={class:"px-2"},Wt={key:0,class:"rounded border-tab-table-th-edge flex items-center justify-center p-1 border"},Gt=i("span",{class:"pr-2 pl-1 text-primary"},[i("i",{class:"las la-clock"})],-1),Kt=i("span",{class:"mx-1"},":",-1);function Qt(e,t,s,h,d,n){return l(),a("div",{onClick:t[21]||(t[21]=r=>n.handleCalendarClick()),class:"flex bg-box-background flex-col rounded-lg overflow-hidden"},[d.currentView==="years"?(l(),a("div",We,[i("div",Ge,[i("div",null,[i("button",{onClick:t[0]||(t[0]=r=>n.subMonth()),class:"w-8 h-8 ns-inset-button border outline-none text-numpad-text rounded"},Qe)]),i("div",Je,[i("span",{class:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",onClick:t[1]||(t[1]=r=>n.toggleView("months"))},c(d.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[2]||(t[2]=r=>n.toggleView("years"))},c(d.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:t[3]||(t[3]=r=>n.addMonth()),class:"w-8 h-8 ns-inset-button border outline-none text-numpad-text rounded"},Ze)])]),i("div",et,[i("div",tt,[i("button",{onClick:t[4]||(t[4]=r=>n.subYear()),class:"px-2 py-2"},nt),i("div",it,[i("input",{type:"text",ref:"year",class:"p-2 flex-auto w-full text-center outline-none",onChange:t[5]||(t[5]=r=>n.setYear(r)),value:d.currentDay.format("YYYY")},null,40,lt)]),i("button",{onClick:t[6]||(t[6]=r=>n.addYear()),class:"px-2 py-2"},rt)])]),i("div",dt,[i("button",{onClick:t[7]||(t[7]=r=>n.toggleView("days")),class:"p-2 w-full ns-inset-button border text-sm error hover:text-white rounded flex items-center justify-center"},c(n.__("Return To Calendar")),1)])])):u("",!0),d.currentView==="months"?(l(),a("div",ot,[i("div",ut,[i("div",null,[i("button",{onClick:t[8]||(t[8]=r=>n.subYear()),class:"w-8 h-8 ns-inset-button outline-none border rounded"},ht)]),i("div",ft,[i("span",mt,c(d.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[9]||(t[9]=r=>n.toggleView("years"))},c(d.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:t[10]||(t[10]=r=>n.addYear()),class:"w-8 h-8 ns-inset-button outline-none border rounded"},bt)])]),i("div",_t,[(l(!0),a(_,null,D(d.months,(r,o)=>(l(),a("div",{key:o,class:"h-8 flex justify-center items-center text-sm border-box-background"},[i("div",pt,[i("div",{class:m([n.momentCopy.month(r).format("MM")===d.currentDay.format("MM")?"bg-info-secondary text-white":"hover:bg-numpad-hover","h-full w-full border-box-background flex items-center justify-center cursor-pointer"]),onClick:f=>n.setMonth(r)},c(n.momentCopy.format("MMM")),11,yt)])]))),128))]),i("div",vt,[i("button",{onClick:t[11]||(t[11]=r=>n.toggleView("days")),class:"p-2 w-full ns-inset-button border text-sm error rounded flex items-center justify-center"},c(n.__("Return To Calendar")),1)])])):u("",!0),d.currentView==="days"?(l(),a("div",kt,[i("div",wt,[i("div",null,[i("button",{onClick:t[12]||(t[12]=r=>n.subMonth()),class:"w-8 h-8 ns-inset-button border rounded"},Dt)]),i("div",Ct,[i("span",{class:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",onClick:t[13]||(t[13]=r=>n.toggleView("months"))},c(d.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[14]||(t[14]=r=>n.toggleView("years"))},c(d.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:t[15]||(t[15]=r=>n.addMonth()),class:"w-8 h-8 ns-inset-button border rounded"},Tt)])]),i("div",St,[i("div",$t,c(n.__("Sun")),1),i("div",Ft,c(n.__("Mon")),1),i("div",Ot,c(n.__("Tue")),1),i("div",Rt,c(n.__("Wed")),1),i("div",Et,c(n.__("Thr")),1),i("div",Pt,c(n.__("Fri")),1),i("div",jt,c(n.__("Sat")),1)]),(l(!0),a(_,null,D(d.calendar,(r,o)=>(l(),a("div",{key:o,class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary divide-x divide-y"},[(l(!0),a(_,null,D(d.daysOfWeek,(f,g)=>(l(),a("div",{key:g,class:"md:h-10 h-8 flex justify-center items-center text-sm border-tab-table-th"},[(l(!0),a(_,null,D(r,(v,O)=>(l(),a(_,null,[v.dayOfWeek===f?(l(),a("div",{key:O,class:m([n.getDayClass({day:v,_dayIndex:O,dayOfWeek:f,_index:g,currentDay:d.currentDay}),"h-full w-full flex items-center justify-center cursor-pointer"]),onClick:H=>n.selectDate(v)},[v.isDifferentMonth?u("",!0):(l(),a("span",Ut,c(v.date.format("DD")),1)),v.isDifferentMonth?(l(),a("span",At,c(v.date.format("DD")),1)):u("",!0)],10,Ht)):u("",!0)],64))),256))]))),128))]))),128))])):u("",!0),i("div",Lt,[i("div",Yt,[i("div",Vt,[i("div",Nt,[i("div",Bt,[i("button",{onClick:t[16]||(t[16]=r=>n.erase()),class:"border ns-inset-button text-sm error rounded md:w-10 w-8 md:h-10 h-8 flex items-center justify-center"},zt)])])]),i("div",qt,[d.currentView==="days"?(l(),a("div",Wt,[Gt,F(i("input",{placeholder:"HH",ref:"hours",onChange:t[17]||(t[17]=r=>n.detectHoursChange(r)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-background outline-none text-sm active:border-numpad-edge","onUpdate:modelValue":t[18]||(t[18]=r=>d.hours=r),type:"number"},null,544),[[R,d.hours]]),Kt,F(i("input",{placeholder:"mm",ref:"minutes",onChange:t[19]||(t[19]=r=>n.detectMinuteChange(r)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-background outline-none text-sm active:border-numpad-edge","onUpdate:modelValue":t[20]||(t[20]=r=>d.minutes=r),type:"number"},null,544),[[R,d.minutes]])])):u("",!0)])])])])}const te=C(qe,[["render",Qt]]),Jt={data:()=>({}),props:["checked","field","label"],computed:{isChecked(){return this.field?this.field.value:this.checked},hasError(){return this.field.errors!==void 0&&this.field.errors.length>0}},methods:{toggleIt(){this.field!==void 0&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}},Xt={class:"w-6 h-6 flex bg-input-background border-input-edge border-2 items-center justify-center cursor-pointer"},Zt={key:0,class:"las la-check"};function es(e,t,s,h,d,n){return l(),a("div",{class:"flex ns-checkbox items-center justify-center cursor-pointer",onClick:t[0]||(t[0]=r=>n.toggleIt())},[i("div",Xt,[n.isChecked?(l(),a("i",Zt)):u("",!0)]),s.label?(l(),a("label",{key:0,class:m([n.hasError?"has-error":"is-pristine","mx-2"])},c(s.label),3)):u("",!0),s.field?(l(),a("label",{key:1,class:m([n.hasError?"has-error":"is-pristine","mx-2"])},c(s.field.label),3)):u("",!0)])}const ts=C(Jt,[["render",es]]),ss={name:"ns-close-button",methods:{}},is={class:"outline-none ns-close-button hover:border-transparent border rounded-full h-8 min-w-[2rem] items-center justify-center"},ls=i("i",{class:"las la-times"},null,-1);function as(e,t,s,h,d,n){return l(),a("button",is,[ls,p(),y(e.$slots,"default")])}const rs=C(ss,[["render",as]]),ds={data(){return{fields:[],validation:new K}},props:["popup"],methods:{__:b,popupCloser:Q,popupResolver:J,closePopup(){this.popupResolver(!1)},useFilters(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters(){this.fields.forEach(e=>e.value=""),this.popupResolver(null)}},mounted(){this.fields=this.validation.createFields(this.popup.params.queryFilters),this.popupCloser()}},os={class:"ns-box shadow-lg w-95vw h-95vh md:w-3/5-screen md:h-5/6-screen flex flex-col"},us={class:"p-2 border-b ns-box-header flex justify-between items-center"},cs={class:"p-2 ns-box-body flex-auto"},hs={class:"p-2 flex justify-between ns-box-footer border-t"};function fs(e,t,s,h,d,n){const r=k("ns-close-button"),o=k("ns-field"),f=k("ns-button");return l(),a("div",os,[i("div",us,[i("h3",null,c(n.__("Search Filters")),1),i("div",null,[T(r,{onClick:t[0]||(t[0]=g=>n.closePopup())})])]),i("div",cs,[(l(!0),a(_,null,D(d.fields,(g,v)=>(l(),$(o,{field:g,key:v},null,8,["field"]))),128))]),i("div",hs,[i("div",null,[T(f,{onClick:t[1]||(t[1]=g=>n.clearFilters()),type:"error"},{default:M(()=>[p(c(n.__("Clear Filters")),1)]),_:1})]),i("div",null,[T(f,{onClick:t[2]||(t[2]=g=>n.useFilters()),type:"info"},{default:M(()=>[p(c(n.__("Use Filters")),1)]),_:1})])])])}const ms=C(ds,[["render",fs]]),gs={data:()=>({prependOptions:!1,showOptions:!0,isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],headerButtons:[],withFilters:!1,columns:[],selectedEntries:[],globallyChecked:!1,result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}),name:"ns-crud",mounted(){this.identifier!==void 0&&nsCrudHandler.defineInstance(this.identifier,this),this.loadConfig()},props:["src","createUrl","mode","identifier","queryParams","popup"],computed:{getParsedSrc(){return`${this.src}?${this.sortColumn}${this.searchQuery}${this.queryFiltersString}${this.queryPage}${this.getQueryParams()?"&"+this.getQueryParams():""}`},showQueryFilters(){return this.queryFilters.length>0},getSelectedAction(){const e=this.bulkActions.filter(t=>t.identifier===this.bulkAction);return e.length>0?e[0]:!1},pagination(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage(){return this.result?`&page=${this.page}`:""},resultInfo(){return b("displaying {perPage} on {items} items").replace("{perPage}",this.result.per_page||0).replace("{items}",this.result.total||0)},headerButtonsComponents(){return this.headerButtons.map(e=>_e(()=>new Promise(t=>{t(nsExtraComponents[e])})))}},methods:{__:b,getQueryParams(){return this.queryParams?Object.keys(this.queryParams).map(e=>`${e}=${this.queryParams[e]}`).join("&"):""},pageNumbers(e,t){var s=[];t-3>1&&s.push(1,"...");for(let h=1;h<=e;h++)t+3>h&&t-3<h&&s.push(h);return t+3<e&&s.push("...",e),s.filter(h=>h>0||typeof h=="string")},downloadContent(){nsHttpClient.post(`${this.src}/export?${this.getParsedSrc}`,{entries:this.selectedEntries.map(e=>e.$id)}).subscribe(e=>{setTimeout(()=>document.location=e.url,300),S.success(b("The document has been generated.")).subscribe()},e=>{S.error(e.message||b("Unexpected error occurred.")).subscribe()})},clearSelectedEntries(){j.show(V,{title:b("Clear Selected Entries ?"),message:b("Would you like to clear all selected entries ?"),onAction:e=>{e&&(this.selectedEntries=[],this.handleGlobalChange(!1))}})},refreshRow(e){if(console.log({row:e}),e.$checked===!0)this.selectedEntries.filter(s=>s.$id===e.$id).length===0&&this.selectedEntries.push(e);else{const t=this.selectedEntries.filter(s=>s.$id===e.$id);if(t.length>0){const s=this.selectedEntries.indexOf(t[0]);this.selectedEntries.splice(s,1)}}},handleShowOptions(e){this.result.data.forEach(t=>{t.$id!==e.$id&&(t.$toggled=!1)})},handleGlobalChange(e){this.globallyChecked=e,this.result.data.forEach(t=>{t.$checked=e,this.refreshRow(t)})},loadConfig(){nsHttpClient.get(`${this.src}/config?${this.getQueryParams()}`).subscribe(t=>{this.columns=t.columns,this.bulkActions=t.bulkActions,this.queryFilters=t.queryFilters,this.prependOptions=t.prependOptions,this.showOptions=t.showOptions,this.headerButtons=t.headerButtons||[],this.refresh()},t=>{S.error(t.message,"OK",{duration:!1}).subscribe()})},cancelSearch(){this.searchInput="",this.search()},search(){this.searchInput?this.searchQuery=`&search=${this.searchInput}`:this.searchQuery="",this.page=1,this.refresh()},sort(e){if(this.columns[e].$sort===!1)return S.error(b("Sorting is explicitely disabled on this column")).subscribe();for(let t in this.columns)t!==e&&(this.columns[t].$sorted=!1,this.columns[t].$direction="");switch(this.columns[e].$sorted=!0,this.columns[e].$direction){case"asc":this.columns[e].$direction="desc";break;case"desc":this.columns[e].$direction="";break;case"":default:this.columns[e].$direction="asc";break}["asc","desc"].includes(this.columns[e].$direction)?this.sortColumn=`active=${e}&direction=${this.columns[e].$direction}`:this.sortColumn="",this.$emit("sort",this.columns[e]),this.refresh()},bulkDo(){if(this.bulkAction)if(this.selectedEntries.length>0){if(confirm(this.getSelectedAction.confirm||b("Would you like to perform the selected bulk action on the selected entries ?")))return nsHttpClient.post(`${this.src}/bulk-actions`,{action:this.bulkAction,entries:this.selectedEntries.map(e=>e.$id)}).subscribe({next:e=>{S.info(e.message).subscribe(),this.selectedEntries=[],this.refresh()},error:e=>{S.error(e.message).subscribe()}})}else return S.error(b("No selection has been made.")).subscribe();else return S.error(b("No action has been selected.")).subscribe()},async openQueryFilter(){try{const e=await new Promise((t,s)=>{j.show(ms,{resolve:t,reject:s,queryFilters:this.queryFilters})});this.withFilters=!1,this.queryFiltersString="",e!==null&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(e))),this.refresh()}catch{}},refresh(){this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get(`${this.getParsedSrc}`).subscribe(t=>{t.data=t.data.map(s=>(this.selectedEntries.filter(d=>d.$id===s.$id).length>0&&(s.$checked=!0),s)),this.isRefreshing=!1,this.result=t,this.page=t.current_page},t=>{this.isRefreshing=!1,S.error(t.message).subscribe()})}}},bs={key:0,id:"crud-table-header",class:"p-2 border-b flex flex-col md:flex-row justify-between flex-wrap"},_s={id:"crud-search-box",class:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex"},ps={key:0,class:"px-2 flex items-center justify-center"},ys=["href"],vs=i("i",{class:"las la-plus"},null,-1),ks=[vs],ws={class:"px-2"},xs={class:"rounded-full p-1 ns-crud-input flex"},Ds=i("i",{class:"las la-search"},null,-1),Cs=[Ds],Ms=i("i",{class:"las la-times text-white"},null,-1),Ts=[Ms],Ss={class:"px-2 flex items-center justify-center"},$s={key:1,class:"px-2 flex items-center"},Fs={key:0,class:"las la-filter"},Os={key:1,class:"las la-check"},Rs={key:2,class:"ml-1"},Es={key:3,class:"ml-1"},Ps={key:2,id:"custom-buttons"},js={id:"crud-buttons",class:"-mx-1 flex flex-wrap w-full md:w-auto"},Hs={key:0,class:"px-1 flex items-center"},Us=i("i",{class:"lar la-check-square"},null,-1),As={class:"px-1 flex items-center"},Ls=i("i",{class:"las la-download"},null,-1),Ys={class:"flex p-2"},Vs={class:"overflow-x-auto flex-auto"},Ns={key:0,class:"table ns-table w-full"},Bs={class:"text-center px-2 border w-16 py-2"},Is={key:0,class:"text-left px-2 py-2 w-16 border"},zs=["onClick"],qs={class:"w-full flex justify-between items-center"},Ws={class:"flex"},Gs={class:"h-6 w-6 flex justify-center items-center"},Ks={key:0,class:"las la-sort-amount-up"},Qs={key:1,class:"las la-sort-amount-down"},Js={key:1,class:"text-left px-2 py-2 w-16 border"},Xs={key:1},Zs=["colspan"],en={class:"p-2 flex border-t flex-col md:flex-row justify-between footer"},tn={key:0,id:"grouped-actions",class:"mb-2 md:mb-0 flex justify-between rounded-full ns-crud-input p-1"},sn={class:"bg-input-disabled",selected:"",value:""},nn=["value"],ln={class:"flex"},an={class:"items-center flex text-primary mx-4"},rn={id:"pagination",class:"flex items-center -mx-1"},dn=i("i",{class:"las la-angle-double-left"},null,-1),on=[dn],un=["onClick"],cn=i("i",{class:"las la-angle-double-right"},null,-1),hn=[cn];function fn(e,t,s,h,d,n){const r=k("ns-checkbox"),o=k("ns-table-row");return l(),a("div",{id:"crud-table",class:m(["w-full rounded-lg",s.mode!=="light"?"shadow mb-8":""])},[s.mode!=="light"?(l(),a("div",bs,[i("div",_s,[s.createUrl?(l(),a("div",ps,[i("a",{href:s.createUrl||"#",class:"rounded-full ns-crud-button text-sm h-10 flex items-center justify-center cursor-pointer px-3 outline-none border"},ks,8,ys)])):u("",!0),i("div",ws,[i("div",xs,[F(i("input",{onKeypress:t[0]||(t[0]=U(f=>n.search(),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=f=>e.searchInput=f),type:"text",class:"w-36 md:w-auto bg-transparent outline-none px-2"},null,544),[[R,e.searchInput]]),i("button",{onClick:t[2]||(t[2]=f=>n.search()),class:"rounded-full w-8 h-8 outline-none ns-crud-input-button"},Cs),e.searchQuery?(l(),a("button",{key:0,onClick:t[3]||(t[3]=f=>n.cancelSearch()),class:"ml-1 rounded-full w-8 h-8 bg-error-secondary outline-none hover:bg-error-tertiary"},Ts)):u("",!0)])]),i("div",Ss,[i("button",{onClick:t[4]||(t[4]=f=>n.refresh()),class:"rounded-full text-sm h-10 px-3 outline-none border ns-crud-button"},[i("i",{class:m([e.isRefreshing?"animate-spin":"","las la-sync"])},null,2)])]),n.showQueryFilters?(l(),a("div",$s,[i("button",{onClick:t[5]||(t[5]=f=>n.openQueryFilter()),class:m([e.withFilters?"table-filters-enabled":"table-filters-disabled","ns-crud-button border rounded-full text-sm h-10 px-3 outline-none"])},[e.withFilters?u("",!0):(l(),a("i",Fs)),e.withFilters?(l(),a("i",Os)):u("",!0),e.withFilters?u("",!0):(l(),a("span",Rs,c(n.__("Filters")),1)),e.withFilters?(l(),a("span",Es,c(n.__("Has Filters")),1)):u("",!0)],2)])):u("",!0),n.headerButtonsComponents.length>0?(l(),a("div",Ps,[(l(!0),a(_,null,D(n.headerButtonsComponents,(f,g)=>(l(),$(Y(f),{onRefresh:t[6]||(t[6]=v=>n.refresh()),result:e.result,key:g},null,40,["result"]))),128))])):u("",!0)]),i("div",js,[e.selectedEntries.length>0?(l(),a("div",Hs,[i("button",{onClick:t[7]||(t[7]=f=>n.clearSelectedEntries()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 outline-none ns-crud-button border"},[Us,p(" "+c(n.__("{entries} entries selected").replace("{entries}",e.selectedEntries.length)),1)])])):u("",!0),i("div",As,[i("button",{onClick:t[8]||(t[8]=f=>n.downloadContent()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 ns-crud-button border outline-none"},[Ls,p(" "+c(n.__("Download")),1)])])])])):u("",!0),i("div",Ys,[i("div",Vs,[Object.values(e.columns).length>0?(l(),a("table",Ns,[i("thead",null,[i("tr",null,[i("th",Bs,[T(r,{checked:e.globallyChecked,onChange:t[9]||(t[9]=f=>n.handleGlobalChange(f))},null,8,["checked"])]),e.prependOptions&&e.showOptions?(l(),a("th",Is)):u("",!0),(l(!0),a(_,null,D(e.columns,(f,g)=>(l(),a("th",{key:g,onClick:v=>n.sort(g),style:pe({"min-width":f.width||"auto"}),class:"cursor-pointer justify-betweenw-40 border text-left px-2 py-2"},[i("div",qs,[i("span",Ws,c(f.label),1),i("span",Gs,[f.$direction==="desc"?(l(),a("i",Ks)):u("",!0),f.$direction==="asc"?(l(),a("i",Qs)):u("",!0)])])],12,zs))),128)),!e.prependOptions&&e.showOptions?(l(),a("th",Js)):u("",!0)])]),i("tbody",null,[e.result.data!==void 0&&e.result.data.length>0?(l(!0),a(_,{key:0},D(e.result.data,(f,g)=>(l(),$(o,{key:g,onUpdated:t[10]||(t[10]=v=>n.refreshRow(v)),columns:e.columns,prependOptions:e.prependOptions,showOptions:e.showOptions,row:f,onReload:t[11]||(t[11]=v=>n.refresh()),onToggled:t[12]||(t[12]=v=>n.handleShowOptions(v))},null,8,["columns","prependOptions","showOptions","row"]))),128)):u("",!0),!e.result||e.result.data.length===0?(l(),a("tr",Xs,[i("td",{colspan:Object.values(e.columns).length+2,class:"text-center border py-3"},c(n.__("There is nothing to display...")),9,Zs)])):u("",!0)])])):u("",!0)])]),i("div",en,[e.bulkActions.length>0?(l(),a("div",tn,[F(i("select",{class:"outline-none bg-transparent","onUpdate:modelValue":t[13]||(t[13]=f=>e.bulkAction=f),id:"grouped-actions"},[i("option",sn,[y(e.$slots,"bulk-label",{},()=>[p(c(n.__("Bulk Actions")),1)])]),(l(!0),a(_,null,D(e.bulkActions,(f,g)=>(l(),a("option",{class:"bg-input-disabled",key:g,value:f.identifier},c(f.label),9,nn))),128))],512),[[E,e.bulkAction]]),i("button",{onClick:t[14]||(t[14]=f=>n.bulkDo()),class:"ns-crud-input-button h-8 px-3 outline-none rounded-full flex items-center justify-center"},[y(e.$slots,"bulk-go",{},()=>[p(c(n.__("Apply")),1)])])])):u("",!0),i("div",ln,[i("div",an,c(n.resultInfo),1),i("div",rn,[e.result.current_page?(l(),a(_,{key:0},[i("a",{href:"javascript:void(0)",onClick:t[15]||(t[15]=f=>{e.page=e.result.first_page,n.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},on),(l(!0),a(_,null,D(n.pagination,(f,g)=>(l(),a(_,null,[e.page!=="..."?(l(),a("a",{key:g,class:m([e.page==f?"bg-info-tertiary border-transparent text-white":"","mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"]),onClick:v=>{e.page=f,n.refresh()},href:"javascript:void(0)"},c(f),11,un)):u("",!0),e.page==="..."?(l(),a("a",{key:g,href:"javascript:void(0)",class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"},"...")):u("",!0)],64))),256)),i("a",{href:"javascript:void(0)",onClick:t[16]||(t[16]=f=>{e.page=e.result.last_page,n.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},hn)],64)):u("",!0)])])])],2)}const mn=C(gs,[["render",fn]]),gn={data:()=>({form:{},globallyChecked:!1,formValidation:new K,rows:[]}),emits:["updated","saved"],mounted(){this.loadForm()},props:["src","createUrl","fieldClass","returnUrl","submitUrl","submitMethod","disableTabs","queryParams","popup"],computed:{activeTabFields(){for(let e in this.form.tabs)if(this.form.tabs[e].active)return this.form.tabs[e].fields;return[]},activeTabIdentifier(){for(let e in this.form.tabs)if(this.form.tabs[e].active)return e;return{}}},methods:{__:b,popupResolver:J,toggle(e){for(let t in this.form.tabs)this.form.tabs[t].active=!1;this.form.tabs[e].active=!0},async handleSaved(e,t,s){(await this.loadForm()).form.tabs[t].fields.filter(d=>{d.name===s.name&&e.data.entry&&(d.value=e.data.entry.id)})},handleClose(){this.popup&&this.popupResolver(!1)},submit(){if(this.formValidation.validateForm(this.form).length>0)return S.error(b("Unable to proceed the form is not valid"),b("Close")).subscribe();if(this.formValidation.disableForm(this.form),this.submitUrl===void 0)return S.error(b("No submit URL was provided"),b("Okay")).subscribe();P[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.appendQueryParamas(this.submitUrl),this.formValidation.extractForm(this.form)).subscribe(e=>{if(e.status==="success")if(this.popup)this.popupResolver(e);else{if(this.submitMethod&&this.submitMethod.toLowerCase()==="post"&&this.returnUrl!==!1)return document.location=e.data.editUrl||this.returnUrl;S.info(e.message,b("Okay"),{duration:3e3}).subscribe(),this.$emit("saved",e)}this.formValidation.enableForm(this.form)},e=>{S.error(e.message,void 0,{duration:5e3}).subscribe(),e.data!==void 0&&this.formValidation.triggerError(this.form,e.data),this.formValidation.enableForm(this.form)})},handleGlobalChange(e){this.globallyChecked=e,this.rows.forEach(t=>t.$checked=e)},loadForm(){return new Promise((e,t)=>{P.get(`${this.appendQueryParamas(this.src)}`).subscribe({next:h=>{e(h),this.form=this.parseForm(h.form),X.doAction("ns-crud-form-loaded",this),this.$emit("updated",this.form)},error:h=>{t(h),S.error(h.message,b("Okay"),{duration:0}).subscribe()}})})},appendQueryParamas(e){if(this.queryParams===void 0)return e;const t=Object.keys(this.queryParams).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(this.queryParams[s])}`).join("&");return e.includes("?")?`${e}&${t}`:`${e}?${t}`},parseForm(e){e.main.value=e.main.value===void 0?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0];let t=0;for(let s in e.tabs)t===0&&(e.tabs[s].active=!0),e.tabs[s].active=e.tabs[s].active===void 0?!1:e.tabs[s].active,e.tabs[s].fields=this.formValidation.createFields(e.tabs[s].fields),t++;return e}}},bn={key:0,class:"flex items-center justify-center h-full"},_n={key:0,class:"box-header border-b box-border p-2 flex justify-between items-center"},pn={class:"text-primary font-bold text-lg"},yn={class:"flex flex-col"},vn={key:0,class:"flex justify-between items-center"},kn={for:"title",class:"font-bold my-2 text-primary"},wn={key:0},xn={for:"title",class:"text-sm my-2"},Dn=["href"],Cn=["disabled"],Mn=["disabled"],Tn={key:0,class:"text-xs text-primary py-1"},Sn={key:0},$n={key:1},Fn={class:"header flex ml-4",style:{"margin-bottom":"-1px"}},On=["onClick"],Rn={class:"ns-tab-item"},En={class:"border p-4 rounded"},Pn={class:"-mx-4 flex flex-wrap"},jn={key:0,class:"flex justify-end"},Hn=["disabled"];function Un(e,t,s,h,d,n){const r=k("ns-spinner"),o=k("ns-close-button"),f=k("ns-field");return l(),a(_,null,[Object.values(e.form).length===0?(l(),a("div",bn,[T(r)])):u("",!0),Object.values(e.form).length>0?(l(),a("div",{key:1,class:m(["form flex-auto",s.popup?"bg-box-background w-95vw md:w-2/3-screen":""]),id:"crud-form"},[s.popup?(l(),a("div",_n,[i("h2",pn,c(s.popup.params.title),1),i("div",null,[T(o,{onClick:t[0]||(t[0]=g=>n.handleClose())})])])):u("",!0),Object.values(e.form).length>0?(l(),a("div",{key:1,class:m(s.popup?"p-2":"")},[i("div",yn,[e.form.main?(l(),a("div",vn,[i("label",kn,[e.form.main.name?(l(),a("span",wn,c(e.form.main.label),1)):u("",!0)]),i("div",xn,[s.returnUrl&&!s.popup?(l(),a("a",{key:0,href:s.returnUrl,class:"rounded-full border px-2 py-1 ns-inset-button error"},c(n.__("Go Back")),9,Dn)):u("",!0)])])):u("",!0),e.form.main.name?(l(),a(_,{key:1},[i("div",{class:m([e.form.main.disabled?"disabled":e.form.main.errors.length>0?"error":"info","input-group flex border-2 rounded overflow-hidden"])},[F(i("input",{"onUpdate:modelValue":t[1]||(t[1]=g=>e.form.main.value=g),onKeydown:t[2]||(t[2]=U(g=>n.submit(),["enter"])),onKeypress:t[3]||(t[3]=g=>e.formValidation.checkField(e.form.main)),onBlur:t[4]||(t[4]=g=>e.formValidation.checkField(e.form.main)),onChange:t[5]||(t[5]=g=>e.formValidation.checkField(e.form.main)),disabled:e.form.main.disabled,type:"text",class:"flex-auto outline-none h-10 px-2"},null,40,Cn),[[R,e.form.main.value]]),i("button",{disabled:e.form.main.disabled,class:m([e.form.main.disabled?"disabled":e.form.main.errors.length>0?"error":"","outline-none px-4 h-10 text-white"]),onClick:t[6]||(t[6]=g=>n.submit())},c(n.__("Save")),11,Mn)],2),e.form.main.description&&e.form.main.errors.length===0?(l(),a("p",Tn,c(e.form.main.description),1)):u("",!0),(l(!0),a(_,null,D(e.form.main.errors,(g,v)=>(l(),a("p",{key:v,class:"text-xs py-1 text-error-tertiary"},[g.identifier==="required"?(l(),a("span",Sn,[y(e.$slots,"error-required",{},()=>[p(c(g.identifier),1)])])):u("",!0),g.identifier==="invalid"?(l(),a("span",$n,[y(e.$slots,"error-invalid",{},()=>[p(c(g.message),1)])])):u("",!0)]))),128))],64)):u("",!0)]),s.disableTabs!=="true"?(l(),a("div",{key:0,id:"tabs-container",class:m([s.popup?"mt-5":"my-5","ns-tab"])},[i("div",Fn,[(l(!0),a(_,null,D(e.form.tabs,(g,v)=>(l(),a("div",{key:v,onClick:O=>n.toggle(v),class:m([g.active?"active border border-b-transparent":"inactive border","tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer"]),style:{"margin-right":"-1px"}},c(g.label),11,On))),128))]),i("div",Rn,[i("div",En,[i("div",Pn,[(l(!0),a(_,null,D(n.activeTabFields,(g,v)=>(l(),a("div",{key:`${n.activeTabIdentifier}-${v}`,class:m(s.fieldClass||"px-4 w-full md:w-1/2 lg:w-1/3")},[T(f,{onSaved:O=>n.handleSaved(O,n.activeTabIdentifier,g),onBlur:O=>e.formValidation.checkField(g),onChange:O=>e.formValidation.checkField(g),field:g},null,8,["onSaved","onBlur","onChange","field"])],2))),128))]),e.form.main.name?u("",!0):(l(),a("div",jn,[i("div",{class:m(["ns-button",e.form.main.disabled?"default":e.form.main.errors.length>0?"error":"info"])},[i("button",{disabled:e.form.main.disabled,onClick:t[7]||(t[7]=g=>n.submit()),class:"outline-none px-4 h-10 border-l"},c(n.__("Save")),9,Hn)],2)]))])])],2)):u("",!0)],2)):u("",!0)],2)):u("",!0)],64)}const An=C(gn,[["render",Un]]),Ln={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-input-edge cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Yn={class:"flex flex-auto flex-col mb-2"},Vn=["for"],Nn={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Bn={class:"sm:text-sm sm:leading-5"},In=["disabled","id","placeholder"];function zn(e,t,s,h,d,n){const r=k("ns-field-description");return l(),a("div",Yn,[i("label",{for:s.field.name,class:m([n.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[y(e.$slots,"default")],10,Vn),i("div",{class:m([n.hasError?"border-error-primary":"border-input-edge","bg-input-background text-secondary mt-1 relative border-2 rounded-md focus:shadow-sm"])},[s.leading?(l(),a("div",Nn,[i("span",Bn,c(s.leading),1)])):u("",!0),F(i("input",{disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=o=>s.field.value=o),onBlur:t[1]||(t[1]=o=>e.$emit("blur",this)),onChange:t[2]||(t[2]=o=>e.$emit("change",this)),id:s.field.name,type:"date",class:m([n.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,In),[[R,s.field.value]])],2),T(r,{field:s.field},null,8,["field"])])}const qn=C(Ln,[["render",zn]]),se={isSame:(e,t,s)=>{let h=new Date(e),d=new Date(t);return s==="date"&&(h.setHours(0,0,0,0),d.setHours(0,0,0,0)),h.getTime()===d.getTime()},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),weekNumber:e=>xe(e),format:(e,t)=>A(e,t),nextMonth:e=>{let t=new Date(e.getTime());return t.setDate(1),t.setMonth(t.getMonth()+1),t},prevMonth:e=>{let t=new Date(e.getTime());return t.setDate(1),t.setMonth(t.getMonth()-1),t},validateDateRange:(e,t,s)=>{let h=new Date(s),d=new Date(t);return s&&e.getTime()>h.getTime()?h:t&&e.getTime()<d.getTime()?d:e},localeData:e=>({...{direction:"ltr",format:"mm/dd/yyyy",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:A.i18n.dayNames.slice(0,7).map(s=>s.substring(0,2)),monthNames:A.i18n.monthNames.slice(0,12),firstDay:0},...e}),yearMonth:e=>{let t=e.getMonth()+1;return e.getFullYear()+(t<10?"0":"")+t},isValidDate:e=>e instanceof Date&&!isNaN(e)},N={props:{dateUtil:{type:[Object,String],default:"native"}},created(){this.$dateUtil=se}},Wn={mixins:[N],name:"calendar",props:{monthDate:Date,localeData:Object,start:Date,end:Date,minDate:Date,maxDate:Date,showDropdowns:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},dateFormat:{type:Function,default:null}},data(){let e=this.monthDate||this.start||new Date;return{currentMonthDate:e,year_text:e.getFullYear()}},methods:{prevMonthClick(){this.changeMonthDate(this.$dateUtil.prevMonth(this.currentMonthDate))},nextMonthClick(){this.changeMonthDate(this.$dateUtil.nextMonth(this.currentMonthDate))},changeMonthDate(e,t=!0){let s=this.$dateUtil.yearMonth(this.currentMonthDate);this.currentMonthDate=this.$dateUtil.validateDateRange(e,this.minDate,this.maxDate),t&&s!==this.$dateUtil.yearMonth(this.currentMonthDate)&&this.$emit("change-month",{month:this.currentMonthDate.getMonth()+1,year:this.currentMonthDate.getFullYear()}),this.checkYear()},dayClass(e){let t=new Date(e);t.setHours(0,0,0,0);let s=new Date(this.start);s.setHours(0,0,0,0);let h=new Date(this.end);h.setHours(0,0,0,0);let d={off:e.getMonth()+1!==this.month,weekend:e.getDay()===6||e.getDay()===0,today:t.setHours(0,0,0,0)==new Date().setHours(0,0,0,0),active:t.setHours(0,0,0,0)==new Date(this.start).setHours(0,0,0,0)||t.setHours(0,0,0,0)==new Date(this.end).setHours(0,0,0,0),"in-range":t>=s&&t<=h,"start-date":t.getTime()===s.getTime(),"end-date":t.getTime()===h.getTime(),disabled:this.minDate&&t.getTime()<this.minDate.getTime()||this.maxDate&&t.getTime()>this.maxDate.getTime()};return this.dateFormat?this.dateFormat(d,e):d},checkYear(){this.$refs.yearSelect!==document.activeElement&&this.$nextTick(()=>{this.year_text=this.monthDate.getFullYear()})}},computed:{monthName(){return this.locale.monthNames[this.currentMonthDate.getMonth()]},year:{get(){return this.year_text},set(e){this.year_text=e;let t=this.$dateUtil.validateDateRange(new Date(e,this.month,1),this.minDate,this.maxDate);this.$dateUtil.isValidDate(t)&&this.$emit("change-month",{month:t.getMonth(),year:t.getFullYear()})}},month:{get(){return this.currentMonthDate.getMonth()+1},set(e){let t=this.$dateUtil.validateDateRange(new Date(this.year,e-1,1),this.minDate,this.maxDate);this.$emit("change-month",{month:t.getMonth()+1,year:t.getFullYear()})}},calendar(){let e=this.month,t=this.currentMonthDate.getFullYear(),s=new Date(t,e-1,1),h=this.$dateUtil.prevMonth(s).getMonth()+1,d=this.$dateUtil.prevMonth(s).getFullYear(),n=new Date(d,e-1,0).getDate(),r=s.getDay(),o=[];for(let v=0;v<6;v++)o[v]=[];let f=n-r+this.locale.firstDay+1;f>n&&(f-=7),r===this.locale.firstDay&&(f=n-6);let g=new Date(d,h-1,f,12,0,0);for(let v=0,O=0,H=0;v<6*7;v++,O++,g.setDate(g.getDate()+1))v>0&&O%7===0&&(O=0,H++),o[H][O]=new Date(g.getTime());return o},months(){let e=this.locale.monthNames.map((t,s)=>({label:t,value:s}));if(this.maxDate&&this.minDate){let t=this.maxDate.getFullYear()-this.minDate.getFullYear();if(t<2){let s=[];if(t<1)for(let h=this.minDate.getMonth();h<=this.maxDate.getMonth();h++)s.push(h);else{for(let h=0;h<=this.maxDate.getMonth();h++)s.push(h);for(let h=this.minDate.getMonth();h<12;h++)s.push(h)}if(s.length>0)return e.filter(h=>s.find(d=>h.value===d)>-1)}}return e},locale(){return this.$dateUtil.localeData(this.localeData)}},watch:{monthDate(e){this.currentMonthDate.getTime()!==e.getTime()&&this.changeMonthDate(e,!1)}}},ne=e=>(W("data-v-66e2a2e7"),e=e(),G(),e),Gn={class:"table-condensed"},Kn=ne(()=>i("span",null,null,-1)),Qn=[Kn],Jn=["colspan"],Xn={class:"row mx-1"},Zn=["value"],ei=["colspan"],ti=ne(()=>i("span",null,null,-1)),si=[ti],ni={key:0,class:"week"},ii={key:0,class:"week"},li=["onClick","onMouseover"];function ai(e,t,s,h,d,n){return l(),a("table",Gn,[i("thead",null,[i("tr",null,[i("th",{class:"prev available",onClick:t[0]||(t[0]=(...r)=>n.prevMonthClick&&n.prevMonthClick(...r)),tabindex:"0"},Qn),s.showDropdowns?(l(),a("th",{key:0,colspan:s.showWeekNumbers?6:5,class:"month"},[i("div",Xn,[F(i("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>n.month=r),class:"monthselect col"},[(l(!0),a(_,null,D(n.months,r=>(l(),a("option",{key:r.value,value:r.value+1},c(r.label),9,Zn))),128))],512),[[E,n.month]]),F(i("input",{ref:"yearSelect",type:"number","onUpdate:modelValue":t[2]||(t[2]=r=>n.year=r),onBlur:t[3]||(t[3]=(...r)=>n.checkYear&&n.checkYear(...r)),class:"yearselect col"},null,544),[[R,n.year]])])],8,Jn)):(l(),a("th",{key:1,colspan:s.showWeekNumbers?6:5,class:"month"},c(n.monthName)+" "+c(n.year),9,ei)),i("th",{class:"next available",onClick:t[4]||(t[4]=(...r)=>n.nextMonthClick&&n.nextMonthClick(...r)),tabindex:"0"},si)])]),i("tbody",null,[i("tr",null,[s.showWeekNumbers?(l(),a("th",ni,c(n.locale.weekLabel),1)):u("",!0),(l(!0),a(_,null,D(n.locale.daysOfWeek,r=>(l(),a("th",{key:r},c(r),1))),128))]),(l(!0),a(_,null,D(n.calendar,(r,o)=>(l(),a("tr",{key:o},[s.showWeekNumbers&&(o%7||o===0)?(l(),a("td",ii,c(e.$dateUtil.weekNumber(r[0])),1)):u("",!0),(l(!0),a(_,null,D(r,(f,g)=>(l(),a("td",{class:m(n.dayClass(f)),onClick:v=>e.$emit("dateClick",f),onMouseover:v=>e.$emit("hoverDate",f),key:g},[y(e.$slots,"date-slot",{date:f},()=>[p(c(f.getDate()),1)],!0)],42,li))),128))]))),128))])])}const ri=C(Wn,[["render",ai],["__scopeId","data-v-66e2a2e7"]]),di={props:{miniuteIncrement:{type:Number,default:5},hour24:{type:Boolean,default:!0},secondPicker:{type:Boolean,default:!1},currentTime:{default(){return new Date}},readonly:{type:Boolean,default:!1}},data(){let e=this.currentTime?this.currentTime:new Date,t=e.getHours();return{hour:this.hour24?t:t%12||12,minute:e.getMinutes()-e.getMinutes()%this.miniuteIncrement,second:e.getSeconds(),ampm:t<12?"AM":"PM"}},computed:{hours(){let e=[],t=this.hour24?24:12;for(let s=0;s<t;s++)e.push(this.hour24?s:s+1);return e},minutes(){let e=[],t=60;for(let s=0;s<t;s=s+this.miniuteIncrement)e.push(s);return e}},watch:{hour(){this.onChange()},minute(){this.onChange()},second(){this.onChange()},ampm(){this.onChange()}},methods:{formatNumber:e=>e<10?"0"+e.toString():e.toString(),getHour(){return this.hour24?this.hour:this.hour===12?this.ampm==="AM"?0:12:this.hour+(this.ampm==="PM"?12:0)},onChange(){this.$emit("update",{hours:this.getHour(),minutes:this.minute,seconds:this.second})}}},oi={class:"calendar-time"},ui=["disabled"],ci=["value"],hi=["disabled"],fi=["value"],mi=["disabled"],gi=["value"],bi=["disabled"],_i=i("option",{value:"AM"},"AM",-1),pi=i("option",{value:"PM"},"PM",-1),yi=[_i,pi];function vi(e,t,s,h,d,n){return l(),a("div",oi,[F(i("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>d.hour=r),class:"hourselect form-control mr-1",disabled:s.readonly},[(l(!0),a(_,null,D(n.hours,r=>(l(),a("option",{key:r,value:r},c(n.formatNumber(r)),9,ci))),128))],8,ui),[[E,d.hour]]),p(" :"),F(i("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>d.minute=r),class:"minuteselect form-control ml-1",disabled:s.readonly},[(l(!0),a(_,null,D(n.minutes,r=>(l(),a("option",{key:r,value:r},c(n.formatNumber(r)),9,fi))),128))],8,hi),[[E,d.minute]]),s.secondPicker?(l(),a(_,{key:0},[p(" :"),F(i("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>d.second=r),class:"secondselect form-control ml-1",disabled:s.readonly},[(l(),a(_,null,D(60,r=>i("option",{key:r-1,value:r-1},c(n.formatNumber(r-1)),9,gi)),64))],8,mi),[[E,d.second]])],64)):u("",!0),s.hour24?u("",!0):F((l(),a("select",{key:1,"onUpdate:modelValue":t[3]||(t[3]=r=>d.ampm=r),class:"ampmselect",disabled:s.readonly},yi,8,bi)),[[E,d.ampm]])])}const ki=C(di,[["render",vi]]),wi={mixins:[N],props:{ranges:Object,selected:Object,localeData:Object,alwaysShowCalendars:Boolean},data(){return{customRangeActive:!1}},methods:{clickRange(e){this.customRangeActive=!1,this.$emit("clickRange",e)},clickCustomRange(){this.customRangeActive=!0,this.$emit("showCustomRange")},range_class(e){return{active:e.selected===!0}}},computed:{listedRanges(){return this.ranges?Object.keys(this.ranges).map(e=>({label:e,value:this.ranges[e],selected:this.$dateUtil.isSame(this.selected.startDate,this.ranges[e][0])&&this.$dateUtil.isSame(this.selected.endDate,this.ranges[e][1])})):!1},selectedRange(){return this.listedRanges.find(e=>e.selected===!0)},showCustomRangeLabel(){return!this.alwaysShowCalendars}}},xi={class:"ranges"},Di={key:0},Ci=["onClick","data-range-key"];function Mi(e,t,s,h,d,n){return l(),a("div",xi,[s.ranges?(l(),a("ul",Di,[(l(!0),a(_,null,D(n.listedRanges,r=>(l(),a("li",{onClick:o=>n.clickRange(r.value),"data-range-key":r.label,key:r.label,class:m(n.range_class(r)),tabindex:"0"},c(r.label),11,Ci))),128)),n.showCustomRangeLabel?(l(),a("li",{key:0,class:m({active:d.customRangeActive||!n.selectedRange}),onClick:t[0]||(t[0]=(...r)=>n.clickCustomRange&&n.clickCustomRange(...r)),tabindex:"0"},c(s.localeData.customRangeLabel),3)):u("",!0)])):u("",!0)])}const Ti=C(wi,[["render",Mi]]),Si={mounted(e,{instance:t}){if(t.appendToBody){const{height:s,top:h,left:d,width:n,right:r}=t.$refs.toggle.getBoundingClientRect();e.unbindPosition=t.calculatePosition(e,t,{width:n,top:window.scrollY+h+s,left:window.scrollX+d,right:r}),document.body.appendChild(e)}else t.$el.appendChild(e)},unmounted(e,{instance:t}){t.appendToBody&&(e.unbindPosition&&typeof e.unbindPosition=="function"&&e.unbindPosition(),e.parentNode&&e.parentNode.removeChild(e))}},$i={inheritAttrs:!1,components:{Calendar:ri,CalendarTime:ki,CalendarRanges:Ti},mixins:[N],directives:{appendToBody:Si},emits:["update:modelValue","toggle","hoverDate","startSelection","select","change-month","finishSelection"],props:{modelValue:{type:Object},minDate:{type:[String,Date],default(){return null}},maxDate:{type:[String,Date],default(){return null}},showWeekNumbers:{type:Boolean,default:!1},linkedCalendars:{type:Boolean,default:!0},singleDatePicker:{type:[Boolean,String],default:!1},showDropdowns:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},timePickerIncrement:{type:Number,default:5},timePicker24Hour:{type:Boolean,default:!0},timePickerSeconds:{type:Boolean,default:!1},autoApply:{type:Boolean,default:!1},localeData:{type:Object,default(){return{}}},dateRange:{type:[Object],default:null,required:!0},ranges:{type:[Object,Boolean],default(){let e=new Date;e.setHours(0,0,0,0);let t=new Date;t.setHours(11,59,59,999);let s=new Date;s.setDate(e.getDate()-1),s.setHours(0,0,0,0);let h=new Date;h.setDate(e.getDate()-1),h.setHours(11,59,59,999);let d=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0,11,59,59,999);return{Today:[e,t],Yesterday:[s,h],"This month":[d,n],"This year":[new Date(e.getFullYear(),0,1),new Date(e.getFullYear(),11,31,11,59,59,999)],"Last month":[new Date(e.getFullYear(),e.getMonth()-1,1),new Date(e.getFullYear(),e.getMonth(),0,11,59,59,999)]}}},opens:{type:String,default:"center"},dateFormat:Function,alwaysShowCalendars:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},controlContainerClass:{type:[Object,String],default:"form-control reportrange-text"},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(e,t,{width:s,top:h,left:d,right:n}){t.opens==="center"?e.style.left=d+s/2+"px":t.opens==="left"?e.style.right=window.innerWidth-n+"px":t.opens==="right"&&(e.style.left=d+"px"),e.style.top=h+"px"}},closeOnEsc:{type:Boolean,default:!0},readonly:{type:Boolean}},data(){const e=se;let t={locale:e.localeData({...this.localeData})},s=this.dateRange.startDate||null,h=this.dateRange.endDate||null;if(t.monthDate=s?new Date(s):new Date,t.nextMonthDate=e.nextMonth(t.monthDate),t.start=s?new Date(s):null,this.singleDatePicker&&this.singleDatePicker!=="range"?t.end=t.start:t.end=h?new Date(h):null,t.in_selection=!1,t.open=!1,t.showCustomRangeCalendars=!1,t.locale.firstDay!==0){let d=t.locale.firstDay,n=[...t.locale.daysOfWeek];for(;d>0;)n.push(n.shift()),d--;t.locale.daysOfWeek=n}return t},methods:{dateFormatFn(e,t){let s=new Date(t);s.setHours(0,0,0,0);let h=new Date(this.start);h.setHours(0,0,0,0);let d=new Date(this.end);return d.setHours(0,0,0,0),e["in-range"]=s>=h&&s<=d,this.dateFormat?this.dateFormat(e,t):e},changeLeftMonth(e){let t=new Date(e.year,e.month-1,1);this.monthDate=t,(this.linkedCalendars||this.$dateUtil.yearMonth(this.monthDate)>=this.$dateUtil.yearMonth(this.nextMonthDate))&&(this.nextMonthDate=this.$dateUtil.validateDateRange(this.$dateUtil.nextMonth(t),this.minDate,this.maxDate),(!this.singleDatePicker||this.singleDatePicker==="range")&&this.$dateUtil.yearMonth(this.monthDate)===this.$dateUtil.yearMonth(this.nextMonthDate)&&(this.monthDate=this.$dateUtil.validateDateRange(this.$dateUtil.prevMonth(this.monthDate),this.minDate,this.maxDate))),this.$emit("change-month",this.monthDate,0)},changeRightMonth(e){let t=new Date(e.year,e.month-1,1);this.nextMonthDate=t,(this.linkedCalendars||this.$dateUtil.yearMonth(this.nextMonthDate)<=this.$dateUtil.yearMonth(this.monthDate))&&(this.monthDate=this.$dateUtil.validateDateRange(this.$dateUtil.prevMonth(t),this.minDate,this.maxDate),this.$dateUtil.yearMonth(this.monthDate)===this.$dateUtil.yearMonth(this.nextMonthDate)&&(this.nextMonthDate=this.$dateUtil.validateDateRange(this.$dateUtil.nextMonth(this.nextMonthDate),this.minDate,this.maxDate))),this.$emit("change-month",this.monthDate,1)},normalizeDatetime(e,t){let s=new Date(e);return this.timePicker&&t&&(s.setHours(t.getHours()),s.setMinutes(t.getMinutes()),s.setSeconds(t.getSeconds()),s.setMilliseconds(t.getMilliseconds())),s},dateClick(e){if(this.readonly)return!1;this.in_selection?(this.in_selection=!1,this.end=this.normalizeDatetime(e,this.end),this.end<this.start&&(this.in_selection=!0,this.start=this.normalizeDatetime(e,this.start),this.$emit("startSelection",this.start)),this.in_selection||(this.$emit("finishSelection",this.end),this.onSelect(),this.autoApply&&this.clickedApply())):(this.start=this.normalizeDatetime(e,this.start),this.end=this.normalizeDatetime(e,this.end),!this.singleDatePicker||this.singleDatePicker==="range"?(this.in_selection=!0,this.$emit("startSelection",this.start)):(this.onSelect(),this.autoApply&&this.clickedApply()))},hoverDate(e){if(this.readonly)return!1;let t=this.normalizeDatetime(e,this.end);this.in_selection&&t>=this.start&&(this.end=t),this.$emit("hoverDate",e)},onClickPicker(){this.disabled||this.togglePicker(null,!0)},togglePicker(e,t){typeof e=="boolean"?this.open=e:this.open=!this.open,t===!0&&this.$emit("toggle",this.open,this.togglePicker)},clickedApply(){this.togglePicker(!1,!0),this.$emit("update:modelValue",{startDate:this.start,endDate:this.singleDatePicker&&this.singleDatePicker!=="range"?this.start:this.end})},clickCancel(){if(this.open){let e=this.dateRange.startDate,t=this.dateRange.endDate;this.start=e?new Date(e):null,this.end=t?new Date(t):null,this.in_selection=!1,this.togglePicker(!1,!0)}},onSelect(){this.$emit("select",{startDate:this.start,endDate:this.end})},clickAway(e){e&&e.target&&!this.$el.contains(e.target)&&this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&this.clickCancel()},clickRange(e){this.in_selection=!1,this.$dateUtil.isValidDate(e[0])&&this.$dateUtil.isValidDate(e[1])?(this.start=this.$dateUtil.validateDateRange(new Date(e[0]),this.minDate,this.maxDate),this.end=this.$dateUtil.validateDateRange(new Date(e[1]),this.minDate,this.maxDate),this.changeLeftMonth({month:this.start.getMonth()+1,year:this.start.getFullYear()}),this.linkedCalendars===!1&&this.changeRightMonth({month:this.end.getMonth()+1,year:this.end.getFullYear()})):(this.start=null,this.end=null),this.onSelect(),this.autoApply&&this.clickedApply()},onUpdateStartTime(e){let t=new Date(this.start);t.setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds),this.start=this.$dateUtil.validateDateRange(t,this.minDate,this.maxDate),this.autoApply&&this.$emit("update:modelValue",{startDate:this.start,endDate:this.singleDatePicker&&this.singleDatePicker!=="range"?this.start:this.end})},onUpdateEndTime(e){let t=new Date(this.end);t.setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds),this.end=this.$dateUtil.validateDateRange(t,this.minDate,this.maxDate),this.autoApply&&this.$emit("update:modelValue",{startDate:this.start,endDate:this.end})},handleEscape(e){this.open&&e.keyCode===27&&this.closeOnEsc&&this.clickCancel()}},computed:{showRanges(){return this.ranges!==!1&&!this.readonly},showCalendars(){return this.alwaysShowCalendars||this.showCustomRangeCalendars},startText(){return this.start===null?"":this.$dateUtil.format(this.start,this.locale.format)},endText(){return this.end===null?"":this.$dateUtil.format(this.end,this.locale.format)},rangeText(){let e=this.startText;return(!this.singleDatePicker||this.singleDatePicker==="range")&&(e+=this.locale.separator+this.endText),e},min(){return this.minDate?new Date(this.minDate):null},max(){return this.maxDate?new Date(this.maxDate):null},pickerStyles(){return{"show-calendar":this.open||this.opens==="inline","show-ranges":this.showRanges,"show-weeknumbers":this.showWeekNumbers,single:this.singleDatePicker,["opens"+this.opens]:!0,linked:this.linkedCalendars,"hide-calendars":!this.showCalendars}},isClear(){return!this.dateRange.startDate||!this.dateRange.endDate},isDirty(){let e=new Date(this.dateRange.startDate),t=new Date(this.dateRange.endDate);return!this.isClear&&(this.start.getTime()!==e.getTime()||this.end.getTime()!==t.getTime())}},watch:{minDate(){let e=this.$dateUtil.validateDateRange(this.monthDate,this.minDate||new Date,this.maxDate);this.changeLeftMonth({year:e.getFullYear(),month:e.getMonth()+1})},maxDate(){let e=this.$dateUtil.validateDateRange(this.nextMonthDate,this.minDate,this.maxDate||new Date);this.changeRightMonth({year:e.getFullYear(),month:e.getMonth()+1})},"dateRange.startDate"(e){this.$dateUtil.isValidDate(new Date(e))&&(this.start=e&&!this.isClear&&this.$dateUtil.isValidDate(new Date(e))?new Date(e):null,this.isClear?(this.start=null,this.end=null):(this.start=new Date(this.dateRange.startDate),this.end=new Date(this.dateRange.endDate)))},"dateRange.endDate"(e){this.$dateUtil.isValidDate(new Date(e))&&(this.end=e&&!this.isClear?new Date(e):null,this.isClear?(this.start=null,this.end=null):(this.start=new Date(this.dateRange.startDate),this.end=new Date(this.dateRange.endDate)))},open:{handler(e){typeof document=="object"&&this.$nextTick(()=>{e?document.body.addEventListener("click",this.clickAway):document.body.removeEventListener("click",this.clickAway),e?document.addEventListener("keydown",this.handleEscape):document.removeEventListener("keydown",this.handleEscape),!this.alwaysShowCalendars&&this.ranges&&(this.showCustomRangeCalendars=!Object.keys(this.ranges).find(t=>this.$dateUtil.isSame(this.start,this.ranges[t][0],"date")&&this.$dateUtil.isSame(this.end,this.ranges[t][1],"date")))})},immediate:!0}}},ie=e=>(W("data-v-577c3804"),e=e(),G(),e),Fi=ie(()=>i("i",{class:"glyphicon glyphicon-calendar fa fa-calendar"},null,-1)),Oi=ie(()=>i("b",{class:"caret"},null,-1)),Ri={class:"calendars"},Ei={key:1,class:"calendars-container"};const Pi={class:"calendar-table"},ji={key:0,class:"drp-calendar col right"};const Hi={class:"calendar-table"},Ui={key:0,class:"drp-buttons"},Ai={key:0,class:"drp-selected"},Li=["disabled"];function Yi(e,t,s,h,d,n){const r=k("calendar-ranges"),o=k("calendar"),f=k("calendar-time"),g=ye("append-to-body");return l(),a("div",{class:m(["vue-daterange-picker",{inline:s.opens==="inline"}])},[i("div",{class:m(s.controlContainerClass),onClick:t[0]||(t[0]=(...v)=>n.onClickPicker&&n.onClickPicker(...v)),ref:"toggle"},[y(e.$slots,"input",{startDate:e.start,endDate:e.end,ranges:s.ranges,rangeText:n.rangeText},()=>[Fi,p(" "),i("span",null,c(n.rangeText),1),Oi],!0)],2),T(ke,{name:"slide-fade",mode:"out-in"},{default:M(()=>[e.open||s.opens==="inline"?F((l(),a("div",{key:0,class:m(["daterangepicker ltr",n.pickerStyles]),ref:"dropdown"},[y(e.$slots,"header",{rangeText:n.rangeText,locale:e.locale,clickCancel:n.clickCancel,clickApply:n.clickedApply,in_selection:e.in_selection,autoApply:s.autoApply},void 0,!0),i("div",Ri,[n.showRanges?y(e.$slots,"ranges",{key:0,startDate:e.start,endDate:e.end,ranges:s.ranges,clickRange:n.clickRange},()=>[T(r,{onClickRange:n.clickRange,onShowCustomRange:t[1]||(t[1]=v=>e.showCustomRangeCalendars=!0),"always-show-calendars":s.alwaysShowCalendars,"locale-data":e.locale,ranges:s.ranges,selected:{startDate:e.start,endDate:e.end}},null,8,["onClickRange","always-show-calendars","locale-data","ranges","selected"])],!0):u("",!0),n.showCalendars?(l(),a("div",Ei,[i("div",{class:m(["drp-calendar col left",{single:s.singleDatePicker}])},[u("",!0),i("div",Pi,[T(o,{monthDate:e.monthDate,"locale-data":e.locale,start:e.start,end:e.end,minDate:n.min,maxDate:n.max,"show-dropdowns":s.showDropdowns,onChangeMonth:n.changeLeftMonth,"date-format":n.dateFormatFn,onDateClick:n.dateClick,onHoverDate:n.hoverDate,showWeekNumbers:s.showWeekNumbers},{default:M(()=>[y(e.$slots,"date",B(I(e.data)),void 0,!0)]),_:3},8,["monthDate","locale-data","start","end","minDate","maxDate","show-dropdowns","onChangeMonth","date-format","onDateClick","onHoverDate","showWeekNumbers"])]),s.timePicker&&e.start?(l(),$(f,{key:1,onUpdate:n.onUpdateStartTime,"miniute-increment":s.timePickerIncrement,hour24:s.timePicker24Hour,"second-picker":s.timePickerSeconds,"current-time":e.start,readonly:s.readonly},null,8,["onUpdate","miniute-increment","hour24","second-picker","current-time","readonly"])):u("",!0)],2),s.singleDatePicker?u("",!0):(l(),a("div",ji,[u("",!0),i("div",Hi,[T(o,{monthDate:e.nextMonthDate,"locale-data":e.locale,start:e.start,end:e.end,minDate:n.min,maxDate:n.max,"show-dropdowns":s.showDropdowns,onChangeMonth:n.changeRightMonth,"date-format":n.dateFormatFn,onDateClick:n.dateClick,onHoverDate:n.hoverDate,showWeekNumbers:s.showWeekNumbers},{default:M(()=>[y(e.$slots,"date",B(I(e.data)),void 0,!0)]),_:3},8,["monthDate","locale-data","start","end","minDate","maxDate","show-dropdowns","onChangeMonth","date-format","onDateClick","onHoverDate","showWeekNumbers"])]),s.timePicker&&e.end?(l(),$(f,{key:1,onUpdate:n.onUpdateEndTime,"miniute-increment":s.timePickerIncrement,hour24:s.timePicker24Hour,"second-picker":s.timePickerSeconds,"current-time":e.end,readonly:s.readonly},null,8,["onUpdate","miniute-increment","hour24","second-picker","current-time","readonly"])):u("",!0)]))])):u("",!0)]),y(e.$slots,"footer",{rangeText:n.rangeText,locale:e.locale,clickCancel:n.clickCancel,clickApply:n.clickedApply,in_selection:e.in_selection,autoApply:s.autoApply},()=>[s.autoApply?u("",!0):(l(),a("div",Ui,[n.showCalendars?(l(),a("span",Ai,c(n.rangeText),1)):u("",!0),s.readonly?u("",!0):(l(),a("button",{key:1,class:"cancelBtn btn btn-sm btn-secondary",type:"button",onClick:t[2]||(t[2]=(...v)=>n.clickCancel&&n.clickCancel(...v))},c(e.locale.cancelLabel),1)),s.readonly?u("",!0):(l(),a("button",{key:2,class:"applyBtn btn btn-sm btn-success",disabled:e.in_selection,type:"button",onClick:t[3]||(t[3]=(...v)=>n.clickedApply&&n.clickedApply(...v))},c(e.locale.applyLabel),9,Li))]))],!0)],2)),[[g]]):u("",!0)]),_:3})],2)}const Vi=C($i,[["render",Yi],["__scopeId","data-v-577c3804"]]),Ni={name:"ns-date-range-picker",data(){return{dateRange:{startDate:null,endDate:null}}},components:{DateRangePicker:Vi},mounted(){this.field.value!==void 0&&(this.dateRange=this.field.value)},watch:{dateRange(){const e={startDate:x(this.dateRange.startDate).format("YYYY-MM-DD HH:mm"),endDate:x(this.dateRange.endDate).format("YYYY-MM-DD HH:mm")};this.field.value=e,this.$emit("change",this)}},methods:{__:b,getFormattedDate(e){return e!==null?x(e).format("YYYY-MM-DD HH:mm"):b("N/D")},clearDate(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Bi={class:"flex flex-auto flex-col mb-2 ns-date-range-picker"},Ii=["for"],zi={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},qi={class:"text-primary sm:text-sm sm:leading-5"},Wi=i("i",{class:"las la-times"},null,-1),Gi=[Wi],Ki={class:"flex justify-between items-center w-full py-2"},Qi={class:"text-xs"},Ji={class:"text-xs"};function Xi(e,t,s,h,d,n){const r=k("date-range-picker"),o=k("ns-field-description");return l(),a("div",Bi,[i("label",{for:s.field.name,class:m([n.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[y(e.$slots,"default")],10,Ii),i("div",{class:m([n.hasError?"error":"","mt-1 relative flex input-group border-2 rounded-md overflow-hidden focus:shadow-sm"])},[s.leading?(l(),a("div",zi,[i("span",qi,c(s.leading),1)])):u("",!0),i("button",{class:"px-3 outline-none bg-error-secondary font-semibold text-white",onClick:t[0]||(t[0]=f=>n.clearDate())},Gi),T(r,{class:"w-full flex items-center bg-input-background",ref:"picker","locale-data":{firstDay:1,format:"yyyy-mm-dd HH:mm:ss"},timePicker:!0,timePicker24Hour:!0,showWeekNumbers:!0,showDropdowns:!0,autoApply:!1,appendToBody:!0,modelValue:d.dateRange,"onUpdate:modelValue":t[1]||(t[1]=f=>d.dateRange=f),disabled:s.field.disabled,linkedCalendars:!0},{input:M(f=>[i("div",Ki,[i("span",Qi,c(n.__("Range Starts"))+" : "+c(n.getFormattedDate(f.startDate)),1),i("span",Ji,c(n.__("Range Ends"))+" : "+c(n.getFormattedDate(f.endDate)),1)])]),_:1},8,["modelValue","disabled"])],2),T(o,{field:s.field},null,8,["field"])])}const le=C(Ni,[["render",Xi]]),Zi={name:"ns-date-time-picker",props:["field","date"],data(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:x}},computed:{fieldDate(){return this.field?x(this.field.value).isValid()?x(this.field.value):x():this.date?x(this.date):x()}},mounted(){let e=x(this.field.value);e.isValid()?this.setDate(e.format("YYYY-MM-DD HH:mm:ss")):this.setDate(x(ns.date.current).format("YYYY-MM-DD HH:mm:ss"))},methods:{__:b,setDate(e){this.field.value=e}}},el={class:"picker mb-2"},tl={key:0,class:"block leading-5 font-medium text-primary"},sl={class:"ns-button"},nl=i("i",{class:"las la-clock text-xl"},null,-1),il={key:0,class:"mx-1 text-sm"},ll={key:0},al={key:1},rl={key:1,class:"mx-1 text-sm"},dl={key:0},ol={key:1},ul={key:1,class:"text-sm text-secondary py-1"},cl={key:2,class:"relative z-10 h-0 w-0"};function hl(e,t,s,h,d,n){const r=k("ns-calendar");return l(),a("div",el,[s.field&&s.field.label&&s.field.label.length>0?(l(),a("label",tl,c(s.field.label),1)):u("",!0),i("div",sl,[i("button",{onClick:t[0]||(t[0]=o=>d.visible=!d.visible),class:m([s.field&&s.field.label&&s.field.label.length>0?"mt-1 border border-input-edge":"","shadow rounded cursor-pointer w-full p-1 flex items-center text-primary"])},[nl,s.field?(l(),a("span",il,[[null,"",void 0].includes(s.field.value)?u("",!0):(l(),a("span",ll,c(n.fieldDate.format("YYYY-MM-DD HH:mm")),1)),[null,"",void 0].includes(s.field.value)?(l(),a("span",al,"N/A")):u("",!0)])):u("",!0),s.date?(l(),a("span",rl,[[null,"",void 0].includes(s.date)?u("",!0):(l(),a("span",dl,c(n.fieldDate.format("YYYY-MM-DD HH:mm")),1)),[null,"",void 0].includes(s.date)?(l(),a("span",ol,"N/A")):u("",!0)])):u("",!0)],2)]),s.field?(l(),a("p",ul,c(s.field.description),1)):u("",!0),d.visible?(l(),a("div",cl,[i("div",{class:m([s.field&&s.field.label&&s.field.label.length>0?"-mt-4":"mt-2","absolute w-72 shadow-xl rounded ns-box anim-duration-300 zoom-in-entrance flex flex-col"])},[s.field?(l(),$(r,{key:0,onOnClickOut:t[1]||(t[1]=o=>d.visible=!1),onSet:t[2]||(t[2]=o=>n.setDate(o)),visible:d.visible,date:s.field.value},null,8,["visible","date"])):u("",!0),s.date?(l(),$(r,{key:1,onOnClickOut:t[3]||(t[3]=o=>d.visible=!1),onSet:t[4]||(t[4]=o=>n.setDate(o)),visible:d.visible,date:s.date},null,8,["visible","date"])):u("",!0)],2)])):u("",!0)])}const ae=C(Zi,[["render",hl]]),fl={name:"ns-datepicker",components:{nsCalendar:te},props:["label","date","format"],computed:{formattedDate(){return x(this.date).format(this.format||"YYYY-MM-DD HH:mm:ss")}},data(){return{visible:!1}},mounted(){},methods:{__:b,setDate(e){this.$emit("set",e)}}},ml={class:"picker"},gl={class:"ns-button"},bl=i("i",{class:"las la-clock text-2xl"},null,-1),_l={class:"mx-1 text-sm"},pl={key:0},yl={key:1},vl={key:0,class:"relative h-0 w-0 -mb-2"},kl={class:"w-72 mt-2 shadow-lg anim-duration-300 zoom-in-entrance flex flex-col ns-floating-panel"};function wl(e,t,s,h,d,n){const r=k("ns-calendar");return l(),a("div",ml,[i("div",gl,[i("button",{onClick:t[0]||(t[0]=o=>d.visible=!d.visible),class:"rounded cursor-pointer border border-input-edge shadow w-full px-1 py-1 flex items-center text-primary"},[bl,i("span",_l,[i("span",null,c(s.label||n.__("Date"))+" : ",1),s.date?(l(),a("span",pl,c(n.formattedDate),1)):(l(),a("span",yl,c(n.__("N/A")),1))])])]),d.visible?(l(),a("div",vl,[i("div",kl,[T(r,{visible:d.visible,onOnClickOut:t[1]||(t[1]=o=>d.visible=!1),date:s.date,onSet:t[2]||(t[2]=o=>n.setDate(o))},null,8,["visible","date"])])])):u("",!0)])}const xl=C(fl,[["render",wl]]),Dl={name:"ns-daterange-picker",data(){return{leftCalendar:x(),rightCalendar:x().add(1,"months"),rangeViewToggled:!1,clickedOnCalendar:!1}},mounted(){this.field.value||this.clearDate(),document.addEventListener("click",this.checkClickedItem)},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},watch:{leftCalendar(){this.leftCalendar.isSame(this.rightCalendar,"month")&&this.rightCalendar.add(1,"months")},rightCalendar(){this.rightCalendar.isSame(this.leftCalendar,"month")&&this.leftCalendar.sub(1,"months")}},methods:{__:b,setDateRange(e,t){this.field.value[e]=t,x(this.field.value.startDate).isBefore(x(this.field.value.endDate))&&this.$emit("change",this.field)},getFormattedDate(e){return e!==null?x(e).format("YYYY-MM-DD HH:mm"):b("N/D")},clearDate(){this.field.value={startDate:null,endDate:null}},toggleRangeView(){this.rangeViewToggled=!this.rangeViewToggled},handleDateRangeClick(){this.clickedOnCalendar=!0},checkClickedItem(e){this.$el.getAttribute("class").split(" ").includes("ns-daterange-picker")&&(!this.$el.contains(e.srcElement)&&!this.clickedOnCalendar&&this.rangeViewToggled&&(this.$emit("blur",this.field),this.toggleRangeView()),setTimeout(()=>{this.clickedOnCalendar=!1},100))}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"},startDateFormatted(){return this.field.value!==void 0&&x(this.field.value.startDate).isValid()?x(this.field.value.startDate).format("YYYY-MM-DD HH:mm"):!1},endDateFormatted(){return this.field.value!==void 0&&x(this.field.value.endDate).isValid()?x(this.field.value.endDate).format("YYYY-MM-DD HH:mm"):!1}},props:["placeholder","leading","type","field"]},Cl=["for"],Ml={class:"border border-input-edge rounded-tl rounded-bl flex-auto flex"},Tl={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Sl={class:"text-primary sm:text-sm sm:leading-5"},$l=i("span",{class:"mr-1"},[i("i",{class:"las la-clock text-2xl"})],-1),Fl={class:""},Ol=i("span",{class:"mx-2"},"",-1),Rl=i("span",{class:"mr-1"},[i("i",{class:"las la-clock text-2xl"})],-1),El={class:""},Pl=i("i",{class:"las la-times"},null,-1),jl=[Pl],Hl={key:0,class:"relative h-0 w-0"},Ul={class:"z-10 absolute md:w-[550px] w-[225px] mt-2 shadow-lg anim-duration-300 zoom-in-entrance flex flex-col"},Al={class:"flex flex-col md:flex-row bg-box-background rounded-lg"},Ll=i("div",{class:"flex-auto border-l border-r"},null,-1);function Yl(e,t,s,h,d,n){const r=k("ns-calendar"),o=k("ns-field-description");return l(),a("div",{onClick:t[4]||(t[4]=f=>n.handleDateRangeClick()),class:"flex flex-auto flex-col mb-2 ns-daterange-picker"},[i("label",{for:s.field.name,class:m([n.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[y(e.$slots,"default")],10,Cl),i("div",{class:m([n.hasError?"error":"","mt-1 relative flex input-group bg-input-background rounded overflow-hidden shadow focus:shadow-sm"])},[i("div",Ml,[s.leading?(l(),a("div",Tl,[i("span",Sl,c(s.leading),1)])):u("",!0),i("div",{class:"flex flex-auto p-1 text-primary text-sm items-center cursor-pointer",onClick:t[0]||(t[0]=f=>n.toggleRangeView())},[$l,i("span",Fl,c(n.startDateFormatted||n.__("N/A")),1),Ol,Rl,i("span",El,c(n.endDateFormatted||n.__("N/A")),1)])]),i("button",{class:"px-3 outline-none font-bold bg-error-tertiary",onClick:t[1]||(t[1]=f=>n.clearDate())},jl)],2),d.rangeViewToggled?(l(),a("div",Hl,[i("div",Ul,[i("div",Al,[T(r,{class:"md:w-1/2 w-full",range:[n.startDateFormatted,n.endDateFormatted],side:"left",date:s.field.value.startDate,"selected-range":s.field.value,onSet:t[2]||(t[2]=f=>n.setDateRange("startDate",f))},null,8,["range","date","selected-range"]),Ll,T(r,{class:"md:w-1/2 w-full",range:[n.startDateFormatted,n.endDateFormatted],side:"right",date:s.field.value.endDate,"selected-range":s.field.value,onSet:t[3]||(t[3]=f=>n.setDateRange("endDate",f))},null,8,["range","date","selected-range"])])])])):u("",!0),T(o,{field:s.field},null,8,["field"])])}const Vl=C(Dl,[["render",Yl]]),Nl={name:"ns-dragzone",props:["raw-widgets","raw-columns"],components:{draggable:De},data(){return{widgets:[],dragged:null,columns:[]}},mounted(){this.widgets=this.rawWidgets.map(e=>({name:e.name,componentName:e.component,className:e.className,component:z(window[e.component])})),this.columns=this.rawColumns.map(e=>(e.widgets.forEach(t=>{t.component=z(window[t.identifier]),t.componentName=t.identifier,t.className=t.class_name}),e))},methods:{__:b,handleChange(e,t){setTimeout(()=>{nsHttpClient.post("/api/users/widgets",{column:e}).subscribe(s=>{},s=>S.error(s.message||b("An unpexpected error occured while using the widget.")).subscribe())},100)},handleRemoveWidget(e,t){const s=t.widgets.indexOf(e);t.widgets.splice(s,1),this.handleChange(t)},async openWidgetAdded(e){try{const t=this.columns.filter(r=>r.name!==e.name?r.widgets.length>0:!1).map(r=>r.widgets).flat(),s=e.widgets.map(r=>r.componentName),h=this.widgets.filter(r=>!t.map(f=>f.componentName).includes(r.componentName)).map(r=>({value:r,label:r.name})),d=await new Promise((r,o)=>{const f=h.filter(g=>s.includes(g.componentName));Popup.show(Ce,{value:f,resolve:r,reject:o,type:"multiselect",options:h,label:b("Choose Widget"),description:b("Select with widget you want to add to the column.")})}),n=this.columns.indexOf(e);this.columns[n].widgets=d,this.handleChange(this.columns[n])}catch(t){console.log(t)}}}},Bl={class:"-mx-4 mt-4 flex flex-col md:flex-row-reverse flex-wrap"},Il={class:"mb-4"},zl=["onClick"],ql={class:"text-sm text-primary",type:"info"};function Wl(e,t,s,h,d,n){const r=k("draggable");return l(),a("div",Bl,[(l(!0),a(_,null,D(d.columns,o=>(l(),$(r,{key:o.name,onChange:f=>n.handleChange(o,f),"item-key":"componentName",group:o.parent,list:o.widgets,class:"mb-4 px-4 w-full lg:w-1/2 xl:w-1/3"},{item:M(({element:f})=>[i("div",Il,[(l(),$(Y(f.component),{onOnRemove:g=>n.handleRemoveWidget(f,o)},null,40,["onOnRemove"]))])]),footer:M(()=>[i("div",{onClick:f=>n.openWidgetAdded(o),class:"cursor-pointer border-2 border-dashed h-16 flex items-center justify-center"},[i("span",ql,c(n.__("Click here to add widgets")),1)],8,zl)]),_:2},1032,["onChange","group","list"]))),128))])}const Gl=C(Nl,[["render",Wl]]),Kl={emits:["blur","change","saved","keypress"],data:()=>({}),mounted(){},components:{nsDateRangePicker:le,nsDateTimePicker:ae,nsSwitch:ee},computed:{isInputField(){return["text","password","email","number","tel"].includes(this.field.type)},isHiddenField(){return["hidden"].includes(this.field.type)},isDateField(){return["date"].includes(this.field.type)},isSelectField(){return["select"].includes(this.field.type)},isSearchField(){return["search-select"].includes(this.field.type)},isTextarea(){return["textarea"].includes(this.field.type)},isCheckbox(){return["checkbox"].includes(this.field.type)},isMultiselect(){return["multiselect"].includes(this.field.type)},isInlineMultiselect(){return["inline-multiselect"].includes(this.field.type)},isSelectAudio(){return["select-audio"].includes(this.field.type)},isSwitch(){return["switch"].includes(this.field.type)},isMedia(){return["media"].includes(this.field.type)},isCkEditor(){return["ckeditor"].includes(this.field.type)},isDateTimePicker(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker(){return["daterangepicker"].includes(this.field.type)},isCustom(){return["custom"].includes(this.field.type)}},props:["field"],methods:{handleSaved(e,t){this.$emit("saved",t)},addOption(e){this.field.type==="select"&&this.field.options.forEach(s=>s.selected=!1),e.selected=!0;const t=this.field.options.indexOf(e);this.field.options.splice(t,1),this.field.options.unshift(e),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:e})},changeTouchedState(e,t){t.stopPropagation&&(t.stopPropagation(),e.touched=!0,this.$emit("change",e))},refreshMultiselect(){this.field.value=this.field.options.filter(e=>e.selected).map(e=>e.value)},removeOption(e){e.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:e})}}},Ql=["name","value"],Jl={key:1,class:"flex flex-auto mb-2"},Xl=["innerHTML"],Zl=["innerHTML"],ea=["innerHTML"],ta=["innerHTML"],sa=["innerHTML"],na=["innerHTML"],ia=["innerHTML"],la=["innerHTML"],aa=["innerHTML"],ra=["innerHTML"],da=["innerHTML"],oa=["innerHTML"],ua=["innerHTML"],ca=["innerHTML"];function ha(e,t,s,h,d,n){const r=k("ns-input"),o=k("ns-date-time-picker"),f=k("ns-date"),g=k("ns-media-input"),v=k("ns-select"),O=k("ns-search-select"),H=k("ns-daterange-picker"),oe=k("ns-select-audio"),ue=k("ns-textarea"),ce=k("ns-checkbox"),he=k("ns-inline-multiselect"),fe=k("ns-multiselect"),me=k("ns-ckeditor"),ge=k("ns-switch");return l(),a(_,null,[n.isHiddenField?(l(),a("input",{key:0,type:"hidden",name:s.field.name,value:s.field.value},null,8,Ql)):u("",!0),n.isHiddenField?u("",!0):(l(),a("div",Jl,[n.isInputField?(l(),$(r,{key:0,onKeypress:t[0]||(t[0]=w=>n.changeTouchedState(s.field,w)),onChange:t[1]||(t[1]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,Xl)]),_:1},8,["field"])):u("",!0),n.isDateTimePicker?(l(),$(o,{key:1,onBlur:t[2]||(t[2]=w=>e.$emit("blur",s.field)),onChange:t[3]||(t[3]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,Zl)]),_:1},8,["field"])):u("",!0),n.isDateField?(l(),$(f,{key:2,onBlur:t[4]||(t[4]=w=>e.$emit("blur",s.field)),onChange:t[5]||(t[5]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,ea)]),_:1},8,["field"])):u("",!0),n.isMedia?(l(),$(g,{key:3,onBlur:t[6]||(t[6]=w=>e.$emit("blur",s.field)),onChange:t[7]||(t[7]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,ta)]),_:1},8,["field"])):u("",!0),n.isSelectField?(l(),$(v,{key:4,onChange:t[8]||(t[8]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,sa)]),_:1},8,["field"])):u("",!0),n.isSearchField?(l(),$(O,{key:5,field:s.field,onSaved:t[9]||(t[9]=w=>n.handleSaved(s.field,w)),onChange:t[10]||(t[10]=w=>n.changeTouchedState(s.field,w))},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,na)]),_:1},8,["field"])):u("",!0),n.isDateRangePicker?(l(),$(H,{key:6,onBlur:t[11]||(t[11]=w=>e.$emit("blur",s.field)),onChange:t[12]||(t[12]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,ia)]),_:1},8,["field"])):u("",!0),n.isSelectAudio?(l(),$(oe,{key:7,onBlur:t[13]||(t[13]=w=>e.$emit("blur",s.field)),onChange:t[14]||(t[14]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,la)]),_:1},8,["field"])):u("",!0),n.isTextarea?(l(),$(ue,{key:8,onBlur:t[15]||(t[15]=w=>e.$emit("blur",s.field)),onChange:t[16]||(t[16]=w=>n.changeTouchedState(s.field,w)),field:s.field},{description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,aa)]),default:M(()=>[i("template",null,[p(c(s.field.label),1)])]),_:1},8,["field"])):u("",!0),n.isCheckbox?(l(),$(ce,{key:9,onBlur:t[17]||(t[17]=w=>e.$emit("blur",s.field)),onChange:t[18]||(t[18]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,ra)]),_:1},8,["field"])):u("",!0),n.isInlineMultiselect?(l(),$(he,{key:10,onBlur:t[19]||(t[19]=w=>e.$emit("blur",s.field)),onUpdate:t[20]||(t[20]=w=>n.changeTouchedState(s.field,w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,da)]),_:1},8,["field"])):u("",!0),n.isMultiselect?(l(),$(fe,{key:11,onAddOption:t[21]||(t[21]=w=>n.addOption(w)),onRemoveOption:t[22]||(t[22]=w=>n.removeOption(w)),field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,oa)]),_:1},8,["field"])):u("",!0),n.isCkEditor?(l(),$(me,{key:12,field:s.field},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,ua)]),_:1},8,["field"])):u("",!0),n.isSwitch?(l(),$(ge,{key:13,field:s.field,onChange:t[23]||(t[23]=w=>n.changeTouchedState(s.field,w))},{default:M(()=>[p(c(s.field.label),1)]),description:M(()=>[i("span",{innerHTML:s.field.description||""},null,8,ca)]),_:1},8,["field"])):u("",!0),n.isCustom?(l(),$(ve,{key:14},[(l(),$(Y(s.field.component),{field:s.field,onBlur:t[24]||(t[24]=w=>e.$emit("blur",s.field)),onChange:t[25]||(t[25]=w=>n.changeTouchedState(s.field,w))},null,40,["field"]))],1024)):u("",!0)]))],64)}const fa=C(Kl,[["render",ha]]),ma={name:"ns-field-detail",props:["field"],methods:{__:b}},ga={key:0,class:"text-xs ns-description"};function ba(e,t,s,h,d,n){return l(),a(_,null,[!s.field.errors||s.field.errors.length===0?(l(),a("p",ga,c(s.field.description),1)):u("",!0),(l(!0),a(_,null,D(s.field.errors,(r,o)=>(l(),a("p",{key:o,class:"text-xs ns-error"},[r.identifier==="required"?y(e.$slots,r.identifier,{key:0},()=>[p(c(n.__("This field is required.")),1)]):u("",!0),r.identifier==="email"?y(e.$slots,r.identifier,{key:1},()=>[p(c(n.__("This field must contain a valid email address.")),1)]):u("",!0),r.identifier==="invalid"?y(e.$slots,r.identifier,{key:2},()=>[p(c(r.message),1)]):u("",!0),r.identifier==="same"?y(e.$slots,r.identifier,{key:3},()=>[p(c(n.__('This field must be similar to "{other}""').replace("{other}",r.fields.filter(f=>f.name===r.rule.value)[0].label)),1)]):u("",!0),r.identifier==="min"?y(e.$slots,r.identifier,{key:4},()=>[p(c(n.__('This field must have at least "{length}" characters"').replace("{length}",r.rule.value)),1)]):u("",!0),r.identifier==="max"?y(e.$slots,r.identifier,{key:5},()=>[p(c(n.__('This field must have at most "{length}" characters"').replace("{length}",r.rule.value)),1)]):u("",!0),r.identifier==="different"?y(e.$slots,r.identifier,{key:6},()=>[p(c(n.__('This field must be different from "{other}""').replace("{other}",r.fields.filter(f=>f.name===r.rule.value)[0].label)),1)]):u("",!0)]))),128))],64)}const _a=C(ma,[["render",ba]]),pa={props:["className","buttonClass","type"]};function ya(e,t,s,h,d,n){return l(),a("button",{class:m([s.type?s.type:s.buttonClass,"ns-inset-button rounded-full h-8 w-8 border items-center justify-center"])},[i("i",{class:m([s.className,"las"])},null,2)],2)}const va=C(pa,[["render",ya]]),ka={name:"ns-input-label",props:["field"],data(){return{tags:[],searchField:"",focused:!1,optionsToKeyValue:{}}},methods:{addOption(e){let t;this.optionSuggestions.length===1&&e===void 0?t=this.optionSuggestions[0]:e!==void 0&&(t=e),t!==void 0&&(this.field.value.filter(h=>h===t.value).length>0||(this.searchField="",this.field.value.push(t.value),this.$emit("change",this.field)))},removeOption(e){const t=this.field.value.filter(s=>s!==e);this.field.value=t}},mounted(){if(this.$refs.searchField.addEventListener("focus",e=>{this.focused=!0}),this.$refs.searchField.addEventListener("blur",e=>{setTimeout(()=>{this.focused=!1},200)}),this.field.value.length===void 0)try{this.field.value=JSON.parse(this.field.value)}catch{this.field.value=[]}this.field.options.forEach(e=>{this.optionsToKeyValue[e.value]=e.label})},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},optionSuggestions(){if(typeof this.field.value.map=="function"){const e=this.field.value.map(t=>t.value);return this.field.options.filter(t=>!e.includes(t.value)&&this.focused>0&&(t.label.search(this.searchField)>-1||t.value.search(this.searchField)>-1))}return[]},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":""}},props:["placeholder","leading","type","field"]},wa={class:"flex flex-col mb-2 flex-auto ns-input"},xa=["for"],Da={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ca={class:"leading sm:text-sm sm:leading-5"},Ma=["disabled","id","type","placeholder"],Ta={class:"rounded shadow bg-box-elevation-hover flex mr-1 mb-1"},Sa={class:"p-2 flex items-center text-primary"},$a={class:"flex items-center justify-center px-2"},Fa=["onClick"],Oa=i("i",{class:"las la-times-circle"},null,-1),Ra=[Oa],Ea={class:"relative"},Pa=["placeholder"],ja={class:"h-0 absolute w-full z-10"},Ha={class:"shadow bg-box-background absoluve bottom-0 w-full max-h-80 overflow-y-auto"},Ua=["onClick"];function Aa(e,t,s,h,d,n){const r=k("ns-field-description");return l(),a("div",wa,[s.field.label&&s.field.label.length>0?(l(),a("label",{key:0,for:s.field.name,class:m([n.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[y(e.$slots,"default")],10,xa)):u("",!0),i("div",{class:m([(n.hasError?"has-error":"is-pristine")+" "+(s.field.description||s.field.errors>0?"mb-2":""),"mt-1 relative border-2 rounded-md focus:shadow-sm"])},[s.leading?(l(),a("div",Da,[i("span",Ca,c(s.leading),1)])):u("",!0),i("div",{disabled:s.field.disabled,id:s.field.name,type:s.field.type,class:m([n.inputClass,"flex sm:text-sm sm:leading-5 p-1 flex-wrap"]),placeholder:s.field.placeholder||""},[(l(!0),a(_,null,D(s.field.value,o=>(l(),a("div",Ta,[i("div",Sa,c(d.optionsToKeyValue[o]),1),i("div",$a,[i("div",{onClick:f=>n.removeOption(o),class:"cursor-pointer rounded-full bg-error-tertiary h-5 w-5 flex items-center justify-center"},Ra,8,Fa)])]))),256)),i("div",Ea,[F(i("input",{onChange:t[0]||(t[0]=o=>o.stopPropagation()),onKeydown:t[1]||(t[1]=U(o=>n.addOption(),["enter"])),ref:"searchField","onUpdate:modelValue":t[2]||(t[2]=o=>d.searchField=o),type:"text",class:"w-auto p-2 border-b border-dashed bg-transparent",placeholder:s.field.placeholder||"Start searching here..."},null,40,Pa),[[R,d.searchField]]),i("div",ja,[i("div",Ha,[i("ul",null,[(l(!0),a(_,null,D(n.optionSuggestions,o=>(l(),a("li",{onClick:f=>n.addOption(o),class:"p-2 hover:bg-box-elevation-hover text-primary cursor-pointer"},c(o.label),9,Ua))),256))])])])])],10,Ma)],2),T(r,{field:s.field},null,8,["field"])])}const La=C(ka,[["render",Aa]]),Ya={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Va={class:"flex flex-col mb-2 flex-auto ns-input"},Na=["for"],Ba={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ia={class:"leading sm:text-sm sm:leading-5"},za=["disabled","id","type","placeholder"];function qa(e,t,s,h,d,n){const r=k("ns-field-description");return l(),a("div",Va,[s.field.label&&s.field.label.length>0?(l(),a("label",{key:0,for:s.field.name,class:m([n.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[y(e.$slots,"default")],10,Na)):u("",!0),i("div",{class:m([(n.hasError?"has-error":"is-pristine")+" "+(s.field.description||s.field.errors>0?"mb-2":""),"mt-1 relative overflow-hidden border-2 rounded-md focus:shadow-sm"])},[s.leading?(l(),a("div",Ba,[i("span",Ia,c(s.leading),1)])):u("",!0),F(i("input",{disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=o=>s.field.value=o),id:s.field.name,type:s.type||s.field.type||"text",class:m([n.inputClass,"block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.field.placeholder||""},null,10,za),[[Z,s.field.value]])],2),T(r,{field:s.field},null,8,["field"])])}const Wa=C(Ya,[["render",qa]]),Ga={data:()=>({clicked:!1,_save:0}),props:["type","to","href","target"],computed:{buttonclass(){switch(this.type){case"info":return"shadow bg-blue-400 text-white";case"success":return"shadow bg-green-400 text-white";case"error":return"shadow bg-red-400 text-white";case"warning":return"shadow bg-orange-400 text-white";default:return"shadow bg-white text-gray-800"}}}},Ka={class:"flex"},Qa=["target","href"];function Ja(e,t,s,h,d,n){return l(),a("div",Ka,[s.href?(l(),a("a",{key:0,target:s.target,href:s.href,class:m([n.buttonclass,"rounded cursor-pointer py-2 px-3 font-semibold"])},[y(e.$slots,"default")],10,Qa)):u("",!0)])}const Xa=C(Ga,[["render",Ja]]),re={zip:"la-file-archive",tar:"la-file-archive",bz:"la-file-archive","7z":"la-file-archive",css:"la-file-code",js:"la-file-code",json:"la-file-code",docx:"la-file-word",doc:"la-file-word",mp3:"la-file-audio",aac:"la-file-audio",ods:"la-file-audio",pdf:"la-file-pdf",csv:"la-file-csv",avi:"la-file-video",mpeg:"la-file-video",mpkg:"la-file-video",unknown:"la-file"},Za={name:"ns-media",props:["popup"],data(){return{searchFieldDebounce:null,searchField:"",pages:[{label:b("Upload"),name:"upload",selected:!1},{label:b("Gallery"),name:"gallery",selected:!0}],resources:[],isDragging:!1,response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},fileIcons:re,queryPage:1,bulkSelect:!1,files:[]}},mounted(){this.popupCloser();const e=this.pages.filter(t=>t.name==="gallery")[0];this.select(e)},watch:{searchField(){clearTimeout(this.searchFieldDebounce),this.searchFieldDebounce=setTimeout(()=>{this.loadGallery(1)},500)},files:{handler(){this.uploadFiles()},deep:!0}},computed:{postMedia(){return X.applyFilters("http-client-url","/api/medias")},currentPage(){return this.pages.filter(e=>e.selected)[0]},hasOneSelected(){return this.response.data.filter(e=>e.selected).length>0},selectedResource(){return this.response.data.filter(e=>e.selected)[0]},csrf(){return ns.authentication.csrf},isPopup(){return typeof this.popup<"u"},user_id(){return this.isPopup&&this.popup.params.user_id||0},panelOpened(){return!this.bulkSelect&&this.hasOneSelected},popupInstance(){return this.popup}},methods:{popupCloser:Q,__:b,cancelBulkSelect(){this.bulkSelect=!1,this.response.data.forEach(e=>e.selected=!1)},openError(e){j.show(q,{title:b("An error occured"),message:e.error.message||b("An unexpected error occured.")})},deleteSelected(){j.show(V,{title:b("Confirm Your Action"),message:b("You're about to delete selected resources. Would you like to proceed?"),onAction:e=>{e&&P.post("/api/medias/bulk-delete",{ids:this.response.data.filter(t=>t.selected).map(t=>t.id)}).subscribe({next:t=>{S.success(t.message).subscribe(),this.loadGallery()},error:t=>{S.error(t.message).subscribe()}})}})},loadUploadScreen(){setTimeout(()=>{this.setDropZone()},1e3)},setDropZone(){const e=document.getElementById("dropping-zone");e.addEventListener("dragenter",s=>this.preventDefaults(s),!1),e.addEventListener("dragleave",s=>this.preventDefaults(s),!1),e.addEventListener("dragover",s=>this.preventDefaults(s),!1),e.addEventListener("drop",s=>this.preventDefaults(s),!1),["dragenter","dragover"].forEach(s=>{e.addEventListener(s,()=>{this.isDragging=!0})}),["dragleave","drop"].forEach(s=>{e.addEventListener(s,()=>{this.isDragging=!1})}),e.addEventListener("drop",s=>this.handleDrop(s),!1),this.$refs.files.addEventListener("change",s=>this.processFiles(s.currentTarget.files))},async uploadFiles(){const e=this.files.filter(t=>t.uploaded===!1&&t.progress===0&&t.failed===!1);for(let t=0;t<e.length;t++){const s=e[t];try{s.progress=1;const h=await new Promise((d,n)=>{const r=new FormData;r.append("file",s.file),P.post("/api/medias",r,{headers:{"Content-Type":"multipart/form-data"}}).subscribe({next:o=>{s.uploaded=!0,s.progress=100,d(o)},error:o=>{e[t].failed=!0,e[t].error=o}})})}catch{s.failed=!0}}},handleDrop(e){this.processFiles(e.dataTransfer.files),e.preventDefault(),e.stopPropagation()},preventDefaults(e){e.preventDefault(),e.stopPropagation()},getAllParents(e){let t=[];for(;e.parentNode&&e.parentNode.nodeName.toLowerCase()!="body";)e=e.parentNode,t.push(e);return t},triggerManualUpload(e){const t=e.target;if(t!==null){const h=this.getAllParents(t).map(d=>{const n=d.getAttribute("class");if(n)return n.split(" ")});if(t.getAttribute("class")){const d=t.getAttribute("class").split(" ");h.push(d)}h.flat().includes("ns-scrollbar")||this.$refs.files.click()}},processFiles(e){Array.from(e).filter(h=>(console.log(this),Object.values(window.ns.medias.mimes).includes(h.type))).forEach(h=>{this.files.unshift({file:h,uploaded:!1,failed:!1,progress:0})})},select(e){this.pages.forEach(t=>t.selected=!1),e.selected=!0,e.name==="gallery"?this.loadGallery():e.name==="upload"&&this.loadUploadScreen()},loadGallery(e=null){e=e===null?this.queryPage:e,this.queryPage=e,P.get(`/api/medias?page=${e}&user_id=${this.user_id}${this.searchField.length>0?`&search=${this.searchField}`:""}`).subscribe(t=>{t.data.forEach(s=>s.selected=!1),this.response=t})},submitChange(e,t){P.put(`/api/medias/${t.id}`,{name:e.srcElement.textContent}).subscribe({next:s=>{t.fileEdit=!1,S.success(s.message,"OK").subscribe()},error:s=>{t.fileEdit=!1,S.success(s.message||b("An unexpected error occured."),"OK").subscribe()}})},useSelectedEntries(){this.popup.params.resolve({event:"use-selected",value:this.response.data.filter(e=>e.selected)}),this.popup.close()},selectResource(e){this.bulkSelect||this.response.data.forEach((t,s)=>{s!==this.response.data.indexOf(e)&&(t.selected=!1)}),e.fileEdit=!1,e.selected=!e.selected},isImage(e){return Object.keys(ns.medias.imageMimes).includes(e.extension)}}},er={class:"sidebar w-48 md:h-full flex-shrink-0"},tr={class:"text-xl font-bold my-4 text-center"},sr={class:"sidebar-menus flex md:block mt-8"},nr=["onClick"],ir={key:0,class:"content flex-auto w-full flex-col overflow-hidden flex"},lr={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},ar=i("div",null,null,-1),rr={class:"cursor-pointer text-lg md:text-xl font-bold text-center text-primary mb-4"},dr={style:{display:"none"},type:"file",name:"",multiple:"",ref:"files",id:""},or={class:"rounded bg-box-background shadow w-full md:w-2/3 text-primary h-56 overflow-y-auto ns-scrollbar p-2"},ur={key:0},cr={key:0,class:"rounded bg-info-primary flex items-center justify-center text-xs p-2"},hr=["onClick"],fr=i("i",{class:"las la-eye"},null,-1),mr={class:"ml-2"},gr={key:1,class:"h-full w-full items-center justify-center flex text-center text-soft-tertiary"},br={key:1,class:"content flex-auto flex-col w-full overflow-hidden flex"},_r={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},pr=i("div",null,null,-1),yr={class:"flex flex-auto overflow-hidden"},vr={class:"shadow ns-grid flex flex-auto flex-col overflow-y-auto ns-scrollbar"},kr={class:"p-2 border-b border-box-background"},wr={class:"ns-input border-2 rounded border-input-edge bg-input-background flex"},xr=["placeholder"],Dr={key:0,class:"flex items-center justify-center w-20 p-1"},Cr={class:"flex flex-auto"},Mr={class:"p-2 overflow-x-auto"},Tr={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},Sr={class:"p-2"},$r=["onClick"],Fr=["src","alt"],Or={key:1,class:"object-cover h-full flex items-center justify-center"},Rr={key:0,class:"flex flex-auto items-center justify-center"},Er={class:"text-2xl font-bold"},Pr={id:"preview",class:"ns-media-preview-panel hidden lg:block w-64 flex-shrink-0"},jr={key:0,class:"h-64 bg-gray-800 flex items-center justify-center"},Hr=["src","alt"],Ur={key:1,class:"object-cover h-full flex items-center justify-center"},Ar={key:1,id:"details",class:"p-4 text-gray-700 text-sm"},Lr={class:"flex flex-col mb-2"},Yr={class:"font-bold block"},Vr=["contenteditable"],Nr={class:"flex flex-col mb-2"},Br={class:"font-bold block"},Ir={class:"flex flex-col mb-2"},zr={class:"font-bold block"},qr={class:"py-2 pr-2 flex ns-media-footer flex-shrink-0 justify-between"},Wr={class:"flex -mx-2 flex-shrink-0"},Gr={key:0,class:"px-2"},Kr={class:"ns-button shadow rounded overflow-hidden info"},Qr=i("i",{class:"las la-times"},null,-1),Jr={key:1,class:"px-2"},Xr={class:"ns-button shadow rounded overflow-hidden info"},Zr=i("i",{class:"las la-check-circle"},null,-1),ed={key:2,class:"px-2"},td={class:"ns-button shadow rounded overflow-hidden warning"},sd=i("i",{class:"las la-trash"},null,-1),nd={class:"flex-shrink-0 -mx-2 flex"},id={class:"px-2"},ld={class:"rounded shadow overflow-hidden flex text-sm"},ad=["disabled"],rd=i("hr",{class:"border-r border-gray-700"},null,-1),dd=["disabled"],od={key:0,class:"px-2"},ud={class:"ns-button info"};function cd(e,t,s,h,d,n){const r=k("ns-close-button");return l(),a("div",{class:m(["flex md:flex-row flex-col ns-box shadow-xl overflow-hidden",n.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full"]),id:"ns-media"},[i("div",er,[i("h3",tr,c(n.__("Medias Manager")),1),i("ul",sr,[(l(!0),a(_,null,D(d.pages,(o,f)=>(l(),a("li",{onClick:g=>n.select(o),class:m(["py-2 px-3 cursor-pointer border-l-8",o.selected?"active":""]),key:f},c(o.label),11,nr))),128))])]),n.currentPage.name==="upload"?(l(),a("div",ir,[n.isPopup?(l(),a("div",lr,[ar,i("div",null,[T(r,{onClick:t[0]||(t[0]=o=>n.popupInstance.close())})])])):u("",!0),i("div",{id:"dropping-zone",onClick:t[1]||(t[1]=o=>n.triggerManualUpload(o)),class:m([d.isDragging?"border-dashed border-2":"","flex flex-auto m-2 p-2 flex-col border-info-primary items-center justify-center"])},[i("h3",rr,c(n.__("Click Here Or Drop Your File To Upload")),1),i("input",dr,null,512),i("div",or,[d.files.length>0?(l(),a("ul",ur,[(l(!0),a(_,null,D(d.files,(o,f)=>(l(),a("li",{class:m([o.failed===!1?"border-info-secondary":"border-error-secondary","p-2 mb-2 border-b-2 flex items-center justify-between"]),key:f},[i("span",null,c(o.file.name),1),o.failed===!1?(l(),a("span",cr,c(o.progress)+"%",1)):u("",!0),o.failed===!0?(l(),a("div",{key:1,onClick:g=>n.openError(o),class:"rounded bg-error-primary hover:bg-error-secondary hover:text-white flex items-center justify-center text-xs p-2 cursor-pointer"},[fr,p(),i("span",mr,c(n.__("See Error")),1)],8,hr)):u("",!0)],2))),128))])):u("",!0),d.files.length===0?(l(),a("div",gr,c(n.__("Your uploaded files will displays here.")),1)):u("",!0)])],2)])):u("",!0),n.currentPage.name==="gallery"?(l(),a("div",br,[n.isPopup?(l(),a("div",_r,[pr,i("div",null,[T(r,{onClick:t[2]||(t[2]=o=>n.popupInstance.close())})])])):u("",!0),i("div",yr,[i("div",vr,[i("div",kr,[i("div",wr,[F(i("input",{id:"search",type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>d.searchField=o),placeholder:n.__("Search Medias"),class:"px-4 block w-full sm:text-sm sm:leading-5 h-10"},null,8,xr),[[R,d.searchField]]),d.searchField.length>0?(l(),a("div",Dr,[i("button",{onClick:t[4]||(t[4]=o=>d.searchField=""),class:"h-full w-full rounded-tr rounded-br overflow-hidden"},c(n.__("Cancel")),1)])):u("",!0)])]),i("div",Cr,[i("div",Mr,[i("div",Tr,[(l(!0),a(_,null,D(d.response.data,(o,f)=>(l(),a("div",{key:f,class:""},[i("div",Sr,[i("div",{onClick:g=>n.selectResource(o),class:m([o.selected?"ns-media-image-selected ring-4":"","rounded-lg aspect-square bg-gray-500 m-2 overflow-hidden flex items-center justify-center"])},[n.isImage(o)?(l(),a("img",{key:0,class:"object-cover h-full",src:o.sizes.thumb,alt:o.name},null,8,Fr)):u("",!0),n.isImage(o)?u("",!0):(l(),a("div",Or,[i("i",{class:m([d.fileIcons[o.extension]||d.fileIcons.unknown,"las text-8xl text-white"])},null,2)]))],10,$r)])]))),128))])]),d.response.data.length===0?(l(),a("div",Rr,[i("h3",Er,c(n.__("Nothing has already been uploaded")),1)])):u("",!0)])]),i("div",Pr,[n.panelOpened?(l(),a("div",jr,[n.isImage(n.selectedResource)?(l(),a("img",{key:0,class:"object-cover h-full",src:n.selectedResource.sizes.thumb,alt:n.selectedResource.name},null,8,Hr)):u("",!0),n.isImage(n.selectedResource)?u("",!0):(l(),a("div",Ur,[i("i",{class:m([d.fileIcons[n.selectedResource.extension]||d.fileIcons.unknown,"las text-8xl text-white"])},null,2)]))])):u("",!0),n.panelOpened?(l(),a("div",Ar,[i("p",Lr,[i("strong",Yr,c(n.__("File Name"))+": ",1),i("span",{class:m(["p-2",n.selectedResource.fileEdit?"border-b border-input-edge bg-input-background":""]),onBlur:t[5]||(t[5]=o=>n.submitChange(o,n.selectedResource)),contenteditable:n.selectedResource.fileEdit?"true":"false",onClick:t[6]||(t[6]=o=>n.selectedResource.fileEdit=!0)},c(n.selectedResource.name),43,Vr)]),i("p",Nr,[i("strong",Br,c(n.__("Uploaded At"))+":",1),i("span",null,c(n.selectedResource.created_at),1)]),i("p",Ir,[i("strong",zr,c(n.__("By"))+" :",1),i("span",null,c(n.selectedResource.user.username),1)])])):u("",!0)])]),i("div",qr,[i("div",Wr,[d.bulkSelect?(l(),a("div",Gr,[i("div",Kr,[i("button",{onClick:t[7]||(t[7]=o=>n.cancelBulkSelect()),class:"py-2 px-3"},[Qr,p(" "+c(n.__("Cancel")),1)])])])):u("",!0),n.hasOneSelected&&!d.bulkSelect?(l(),a("div",Jr,[i("div",Xr,[i("button",{onClick:t[8]||(t[8]=o=>d.bulkSelect=!0),class:"py-2 px-3"},[Zr,p(" "+c(n.__("Bulk Select")),1)])])])):u("",!0),n.hasOneSelected?(l(),a("div",ed,[i("div",td,[i("button",{onClick:t[9]||(t[9]=o=>n.deleteSelected()),class:"py-2 px-3"},[sd,p(" "+c(n.__("Delete")),1)])])])):u("",!0)]),i("div",nd,[i("div",id,[i("div",ld,[i("div",{class:m(["ns-button",d.response.current_page===1?"disabled cursor-not-allowed":"info"])},[i("button",{disabled:d.response.current_page===1,onClick:t[10]||(t[10]=o=>n.loadGallery(d.response.current_page-1)),class:"p-2"},c(n.__("Previous")),9,ad)],2),rd,i("div",{class:m(["ns-button",d.response.current_page===d.response.last_page?"disabled cursor-not-allowed":"info"])},[i("button",{disabled:d.response.current_page===d.response.last_page,onClick:t[11]||(t[11]=o=>n.loadGallery(d.response.current_page+1)),class:"p-2"},c(n.__("Next")),9,dd)],2)])]),n.isPopup&&n.hasOneSelected?(l(),a("div",od,[i("div",ud,[i("button",{class:"rounded shadow p-2 text-sm",onClick:t[12]||(t[12]=o=>n.useSelectedEntries())},c(n.__("Use Selected")),1)])])):u("",!0)])])])):u("",!0)],2)}const de=C(Za,[["render",cd]]),lc=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),hd={computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":"ns-enabled"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},data(){return{fileIcons:re}},props:["placeholder","leading","type","field"],mounted(){},methods:{isImage(e){return Object.keys(ns.medias.imageMimes).includes(e.extension)},toggleMedia(){new Promise((t,s)=>{j.show(de,{resolve:t,reject:s,...this.field.data||{}})}).then(t=>{t.event==="use-selected"&&(!this.field.data||this.field.data.type==="url"?this.field.value=t.value[0].sizes.original:!this.field.data||this.field.data.type==="model"?(this.field.value=t.value[0].id,this.field.data.model=t.value[0]):this.field.value=t.value[0].sizes.original,this.$forceUpdate())})}}},fd={class:"flex flex-col mb-2 flex-auto ns-media"},md=["for"],gd={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},bd={class:"text-primary sm:text-sm sm:leading-5"},_d={class:"rounded overflow-hidden flex"},pd={key:0,class:"form-input flex w-full sm:text-sm items-center sm:leading-5 h-10"},yd=["src","alt"],vd={key:1,class:"object-cover flex items-center justify-center"},kd={class:"text-xs text-secondary"},wd=["disabled","id","type","placeholder"],xd=i("i",{class:"las la-photo-video"},null,-1),Dd=[xd];function Cd(e,t,s,h,d,n){const r=k("ns-field-description");return l(),a("div",fd,[i("label",{for:s.field.name,class:m([n.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[y(e.$slots,"default")],10,md),i("div",{class:m([n.hasError?"has-error":"is-pristine","mt-1 relative border-2 rounded-md focus:shadow-sm"])},[s.leading?(l(),a("div",gd,[i("span",bd,c(s.leading),1)])):u("",!0),i("div",_d,[s.field.data&&s.field.data.type==="model"?(l(),a("div",pd,[s.field.value&&s.field.data.model.name?(l(),a(_,{key:0},[n.isImage(s.field.data.model)?(l(),a("img",{key:0,class:"w-8 h-8 m-1",src:s.field.data.model.sizes.thumb,alt:s.field.data.model.name},null,8,yd)):u("",!0),n.isImage(s.field.data.model)?u("",!0):(l(),a("div",vd,[i("i",{class:m([d.fileIcons[s.field.data.model.extension]||d.fileIcons.unknown,"las text-3xl"])},null,2)])),i("span",kd,c(s.field.data.model.name),1)],64)):u("",!0)])):u("",!0),!s.field.data||s.field.data.type==="undefined"||s.field.data.type==="url"?F((l(),a("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=o=>s.field.value=o),disabled:s.field.disabled,onBlur:t[1]||(t[1]=o=>e.$emit("blur",this)),onChange:t[2]||(t[2]=o=>e.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([n.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,wd)),[[Z,s.field.value]]):u("",!0),i("button",{onClick:t[3]||(t[3]=o=>n.toggleMedia(s.field)),class:"w-10 h-10 flex items-center justify-center border-l-2 outline-none"},Dd)])],2),T(r,{field:s.field},null,8,["field"])])}const Md=C(hd,[["render",Cd]]),Td={data:()=>({defaultToggledState:!1,_save:0,hasChildren:!1}),props:["href","to","label","icon","notification","toggled","identifier"],mounted(){this.hasChildren=this.$el.querySelectorAll(".submenu").length>0,this.defaultToggledState=this.toggled!==void 0?this.toggled:this.defaultToggledState,L.subject().subscribe(e=>{e.value!==this.identifier&&(this.defaultToggledState=!1)})},methods:{toggleEmit(){this.toggle().then(e=>{e&&L.emit({identifier:"side-menu.open",value:this.identifier})})},goTo(e,t){return this.$router.push(e),t.preventDefault(),!1},toggle(){return new Promise((e,t)=>{(!this.href||this.href.length===0)&&(this.defaultToggledState=!this.defaultToggledState,e(this.defaultToggledState))})}}},Sd=["href"],$d={class:"flex items-center"},Fd={key:0,class:"rounded-full notification-label font-bold w-6 h-6 text-xs justify-center items-center flex"},Od=["href"],Rd={class:"flex items-center"},Ed={key:0,class:"rounded-full notification-label font-bold w-6 h-6 text-xs justify-center items-center flex"};function Pd(e,t,s,h,d,n){var r,o;return l(),a("div",null,[s.to&&!e.hasChildren?(l(),a("a",{key:0,onClick:t[0]||(t[0]=f=>n.goTo(s.to,f)),href:s.to,class:m([e.defaultToggledState?"toggled":"normal","flex justify-between py-2 border-l-8 px-3 font-bold ns-aside-menu"])},[i("span",$d,[i("i",{class:m(["las text-lg mr-2",((r=s.icon)==null?void 0:r.length)>0?s.icon:"la-star"])},null,2),p(" "+c(s.label),1)]),s.notification>0?(l(),a("span",Fd,c(s.notification),1)):u("",!0)],10,Sd)):(l(),a("a",{key:1,onClick:t[1]||(t[1]=f=>n.toggleEmit()),href:s.href||"javascript:void(0)",class:m([e.defaultToggledState?"toggled":"normal","flex justify-between py-2 border-l-8 px-3 font-bold ns-aside-menu"])},[i("span",Rd,[i("i",{class:m(["las text-lg mr-2",((o=s.icon)==null?void 0:o.length)>0?s.icon:"la-star"])},null,2),p(" "+c(s.label),1)]),s.notification>0?(l(),a("span",Ed,c(s.notification),1)):u("",!0)],10,Od)),i("ul",{class:m([e.defaultToggledState?"":"hidden","submenu-wrapper"])},[y(e.$slots,"default")],2)])}const jd=C(Td,[["render",Pd]]),Hd={data(){return{showPanel:!1,search:"",eventListener:null}},emits:["change","blur"],props:["field"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},_filtredOptions(){let e=this._options;return this.search.length>0&&(e=this._options.filter(t=>t.label.toLowerCase().search(this.search.toLowerCase())!==-1)),e.filter(t=>t.selected===!1)},_options(){return this.field.options.map(e=>(e.selected=e.selected===void 0?!1:e.selected,this.field.value&&this.field.value.includes(e.value)&&(e.selected=!0),e))}},methods:{__:b,togglePanel(){this.showPanel=!this.showPanel},selectAvailableOptionIfPossible(){this._filtredOptions.length>0&&this.addOption(this._filtredOptions[0])},addOption(e){this.field.disabled||(this.$emit("addOption",e),this.$forceUpdate(),setTimeout(()=>{this.search=""},100))},removeOption(e,t){if(!this.field.disabled)return t.preventDefault(),t.stopPropagation(),this.$emit("removeOption",e),this.$forceUpdate(),setTimeout(()=>{this.search=""},100),!1}},mounted(){this.field.value&&this.field.value.reverse().forEach(t=>{const s=this.field.options.filter(h=>h.value===t);s.length>0&&this.addOption(s[0])}),this.eventListener=document.addEventListener("click",e=>{let s=e.target.parentElement,h=!1;if(this.showPanel){for(;s;){if(s&&s.classList.contains("ns-multiselect")&&!s.classList.contains("arrows")){h=!0;break}s=s.parentElement}h===!1&&this.togglePanel()}})}},Ud={class:"flex flex-col ns-multiselect"},Ad=["for"],Ld={class:"flex flex-col"},Yd={class:"flex -mx-1 -my-1 flex-wrap"},Vd={class:"rounded bg-info-secondary text-white flex justify-between p-1 items-center"},Nd={class:"pr-8"},Bd=["onClick"],Id=i("i",{class:"las la-times"},null,-1),zd=[Id],qd={class:"arrows ml-1"},Wd={class:"ns-dropdown shadow"},Gd={class:"search border-b border-input-option-hover"},Kd={class:"h-40 overflow-y-auto"},Qd=["onClick"],Jd={key:0,class:"las la-check"},Xd={key:0,class:"p-2 text-center text-primary"},Zd={class:"my-2"};function eo(e,t,s,h,d,n){const r=k("ns-field-description");return l(),a("div",Ud,[i("label",{for:s.field.name,class:m([n.hasError?"text-error-secondary":"text-primary","block mb-1 leading-5 font-medium"])},[y(e.$slots,"default")],10,Ad),i("div",Ld,[i("div",{onClick:t[0]||(t[0]=o=>n.togglePanel()),class:m([(d.showPanel,""),"overflow-y-auto flex select-preview justify-between rounded border-2 border-input-option-hover p-2 items-start"]),style:{"max-height":"150px"}},[i("div",Yd,[(l(!0),a(_,null,D(n._options.filter(o=>o.selected),(o,f)=>(l(),a("div",{key:f,class:"px-1 my-1"},[i("div",Vd,[i("span",Nd,c(o.label),1),i("button",{onClick:g=>n.removeOption(o,g),class:"rounded outline-none hover:bg-info-tertiary h-6 w-6 flex items-center justify-center"},zd,8,Bd)])]))),128))]),i("div",qd,[i("i",{class:m(["las la-angle-down",d.showPanel?"hidden":""])},null,2),i("i",{class:m(["las la-angle-up",d.showPanel?"":"hidden"])},null,2)])],2),d.showPanel?(l(),a("div",{key:0,class:m(["h-0 z-10",d.showPanel?"shadow":""])},[i("div",Wd,[i("div",Gd,[F(i("input",{onKeypress:t[1]||(t[1]=U(o=>n.selectAvailableOptionIfPossible(),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=o=>d.search=o),class:"p-2 w-full bg-transparent text-primary outline-none",placeholder:"Search"},null,544),[[R,d.search]])]),i("div",Kd,[(l(!0),a(_,null,D(n._filtredOptions,(o,f)=>(l(),a("div",{onClick:g=>n.addOption(o),key:f,class:m([o.selected?"bg-info-secondary text-white":"text-primary","option p-2 flex justify-between cursor-pointer hover:bg-info-secondary hover:text-white"])},[i("span",null,c(o.label),1),i("span",null,[o.checked?(l(),a("i",Jd)):u("",!0)])],10,Qd))),128))]),n._options.length===0?(l(),a("div",Xd,c(n.__("Nothing to display")),1)):u("",!0)])],2)):u("",!0)]),i("div",Zd,[T(r,{field:s.field},null,8,["field"])])])}const to=C(Hd,[["render",eo]]),so={},no={class:"my-4"},io={class:"font-bold text-2xl"},lo={class:"text-primary"};function ao(e,t){return l(),a("div",no,[i("h2",io,[y(e.$slots,"title")]),i("span",lo,[y(e.$slots,"description")])])}const ro=C(so,[["render",ao]]),oo={name:"ns-search",props:["url","placeholder","value","label","method","searchArgument"],data(){return{searchText:"",searchTimeout:null,results:[]}},methods:{__:b,selectOption(e){this.$emit("select",e),this.searchText="",this.results=[]},renderLabel(e,t){return typeof t=="object"?t.map(s=>e[s]).join(" "):e[t]}},watch:{searchText(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchText.length>0&&P[this.method||"post"](this.url,{[this.searchArgument||"search"]:this.searchText}).subscribe({next:e=>{this.results=e},error:e=>{S.error(e.message||b("An unexpected error occurred.")).subscribe()}})},1e3)}},mounted(){}},uo={class:"ns-search"},co={class:"input-group info border-2"},ho=["placeholder"],fo={class:"relative"},mo={class:"w-full absolute shadow-lg"},go={key:0,class:"ns-vertical-menu"},bo=["onClick"];function _o(e,t,s,h,d,n){return l(),a("div",uo,[i("div",co,[F(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>d.searchText=r),class:"p-2 w-full outline-none",placeholder:s.placeholder||n.__("Search..."),id:""},null,8,ho),[[R,d.searchText]])]),i("div",fo,[i("div",mo,[d.results.length>0&&d.searchText.length>0?(l(),a("ul",go,[(l(!0),a(_,null,D(d.results,(r,o)=>(l(),a("li",{class:"border-b p-2 cursor-pointer",onClick:f=>n.selectOption(r),key:o},c(n.renderLabel(r,s.label)),9,bo))),128))])):u("",!0)])])])}const po=C(oo,[["render",_o]]),yo={data:()=>({searchField:"",showResults:!1}),name:"ns-search-select",emits:["saved","change"],props:["name","placeholder","field","leading"],computed:{selectedOptionLabel(){if(this.field.value===null||this.field.value===void 0)return b("Choose...");const e=this.field.options.filter(t=>t.value===this.field.value);return e.length>0?e[0].label:b("Choose...")},filtredOptions(){return this.searchField.length>0?this.field.options.filter(e=>new RegExp(this.searchField,"i").test(e.label)).splice(0,10):this.field.options},hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},watch:{showResults(){this.showResults===!0&&setTimeout(()=>{this.$refs.searchInputField.select()},50)}},mounted(){const e=this.field.options.filter(t=>t.value===this.field.value);e.length>0&&[null,void 0].includes(this.field.value)&&this.selectOption(e[0]),document.addEventListener("click",t=>{this.$el.contains(t.target)===!1&&(this.showResults=!1)})},methods:{__:b,selectFirstOption(){this.filtredOptions.length>0&&this.selectOption(this.filtredOptions[0])},selectOption(e){this.field.value=e.value,this.$emit("change",e.value),this.searchField="",this.showResults=!1},async triggerDynamicComponent(e){try{this.showResults=!1;const t=nsExtraComponents[e.component]||nsComponents[e.component];t===void 0&&S.error(b(`The component ${e.component} cannot be loaded. Make sure it's injected on nsExtraComponents object.`)).subscribe();const s=await new Promise((h,d)=>{const n=j.show(t,{...e.props||{},field:this.field,resolve:h,reject:d})});this.$emit("saved",s)}catch{}}}},vo={class:"flex flex-col flex-auto ns-select"},ko=["for"],wo={class:"text-primary text-sm"},xo=i("i",{class:"las la-plus"},null,-1),Do=[xo],Co={key:0,class:"relative"},Mo={class:"w-full overflow-hidden -top-[8px] border-r-2 border-l-2 border-t rounded-b-md border-b-2 border-input-edge bg-input-background shadow z-10 absolute"},To={class:"border-b border-input-edge border-dashed p-2"},So=["placeholder"],$o={class:"h-60 overflow-y-auto"},Fo=["onClick"];function Oo(e,t,s,h,d,n){const r=k("ns-field-description");return l(),a("div",vo,[i("label",{for:s.field.name,class:m([n.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[y(e.$slots,"default")],10,ko),i("div",{class:m([n.hasError?"has-error":"is-pristine","border-2 mt-1 relative rounded-md shadow-sm mb-1 flex overflow-hidden"])},[i("div",{onClick:t[0]||(t[0]=o=>e.showResults=!e.showResults),class:"flex-auto h-10 sm:leading-5 py-2 px-4 flex items-center bg-input-background cursor-default"},[i("span",wo,c(n.selectedOptionLabel),1)]),s.field.component?(l(),a("div",{key:0,onClick:t[1]||(t[1]=o=>n.triggerDynamicComponent(s.field)),class:"flex items-center justify-center w-10 hover:cursor-pointer hover:bg-input-button-hover border-l-2 border-input-edge"},Do)):u("",!0)],2),e.showResults?(l(),a("div",Co,[i("div",Mo,[i("div",To,[F(i("input",{onKeypress:t[2]||(t[2]=U(o=>n.selectFirstOption(),["enter"])),ref:"searchInputField","onUpdate:modelValue":t[3]||(t[3]=o=>e.searchField=o),type:"text",placeholder:n.__("Search result")},null,40,So),[[R,e.searchField]])]),i("div",$o,[i("ul",null,[(l(!0),a(_,null,D(n.filtredOptions,o=>(l(),a("li",{onClick:f=>n.selectOption(o),class:"py-1 px-2 hover:bg-info-primary cursor-pointer text-primary"},c(o.label),9,Fo))),256))])])])])):u("",!0),T(r,{field:s.field},null,8,["field"])])}const Ro=C(yo,[["render",Oo]]),Eo={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},mounted(){},methods:{__:b}},Po={class:"flex flex-col flex-auto ns-select"},jo=["for"],Ho=["disabled","name"],Uo={value:null},Ao=["value"];function Lo(e,t,s,h,d,n){const r=k("ns-field-description");return l(),a("div",Po,[i("label",{for:s.field.name,class:m([n.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[y(e.$slots,"default")],10,jo),i("div",{class:m([n.hasError?"has-error":"is-pristine","border-2 mt-1 relative rounded-md shadow-sm mb-1 overflow-hidden"])},[F(i("select",{disabled:s.field.disabled?s.field.disabled:!1,name:s.field.name,"onUpdate:modelValue":t[0]||(t[0]=o=>s.field.value=o),class:m([n.inputClass,"form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 appearance-none"])},[i("option",Uo,c(n.__("Choose an option")),1),(l(!0),a(_,null,D(s.field.options,(o,f)=>(l(),a("option",{key:f,value:o.value,class:"py-2"},c(o.label),9,Ao))),128))],10,Ho),[[E,s.field.value]])],2),T(r,{field:s.field},null,8,["field"])])}const Yo=C(Eo,[["render",Lo]]),Vo={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},methods:{__:b,playSelectedSound(){this.field.value!==null&&this.field.value.length>0&&new Audio(this.field.value).play()}}},No={class:"flex flex-col flex-auto"},Bo=["for"],Io=i("button",{class:"w-10 flex item-center justify-center"},[i("i",{class:"las la-play text-2xl"})],-1),zo=[Io],qo=["disabled","name"],Wo=["value"];function Go(e,t,s,h,d,n){const r=k("ns-field-description");return l(),a("div",No,[i("label",{for:s.field.name,class:m([n.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[y(e.$slots,"default")],10,Bo),i("div",{class:m([n.hasError?"border-error-primary":"border-input-edge","border-2 mt-1 flex relative overflow-hidden rounded-md shadow-sm mb-1 form-input"])},[i("div",{onClick:t[0]||(t[0]=o=>n.playSelectedSound()),class:"border-r-2 border-input-edge flex-auto flex items-center justify-center hover:bg-info-tertiary hover:text-white"},zo),F(i("select",{disabled:s.field.disabled?s.field.disabled:!1,onChange:t[1]||(t[1]=o=>e.$emit("change",o)),name:s.field.name,"onUpdate:modelValue":t[2]||(t[2]=o=>s.field.value=o),class:m([n.inputClass,"text-primary block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 outline-none"])},[(l(!0),a(_,null,D(s.field.options,(o,f)=>(l(),a("option",{key:f,value:o.value,class:"py-2"},c(o.label),9,Wo))),128))],42,qo),[[E,s.field.value]])],2),T(r,{field:s.field},null,8,["field"])])}const Ko=C(Vo,[["render",Go]]),Qo={data:()=>({}),mounted(){},computed:{validatedSize(){return this.size||24},validatedBorder(){return this.border||8},validatedAnimation(){return this.animation||"fast"}},props:["color","size","border","animation"]},Jo={class:"flex items-center justify-center"};function Xo(e,t,s,h,d,n){return l(),a("div",Jo,[i("div",{class:m(["loader ease-linear rounded-full border-gray-200",n.validatedAnimation+" border-4 border-t-4 w-"+n.validatedSize+" h-"+n.validatedSize])},null,2)])}const Zo=C(Qo,[["render",Xo]]),eu={data:()=>({}),props:["href","label","active","to"],mounted(){},methods:{goTo(e,t){return this.$router.push(e),t.preventDefault(),!1}}},tu={class:"submenu"},su=["href"],nu=["href"];function iu(e,t,s,h,d,n){return l(),a("div",null,[i("li",tu,[s.href?(l(),a("a",{key:0,class:m([s.active?"font-bold active":"normal","py-2 border-l-8 px-3 block ns-aside-submenu"]),href:s.href},[y(e.$slots,"default")],10,su)):s.to?(l(),a("a",{key:1,class:m([s.active?"font-bold active":"normal","py-2 border-l-8 px-3 block ns-aside-submenu"]),onClick:t[0]||(t[0]=r=>n.goTo(s.to,r)),href:s.to},[y(e.$slots,"default")],10,nu)):u("",!0)])])}const lu=C(eu,[["render",iu]]),au={props:["options","row","columns","prependOptions","showOptions"],data:()=>({optionsToggled:!1}),mounted(){},methods:{__:b,sanitizeHTML(e){var t=document.createElement("div");t.innerHTML=e;for(var s=t.getElementsByTagName("script"),h=s.length;h--;)s[h].parentNode.removeChild(s[h]);return t.innerHTML},getElementOffset(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},toggleMenu(e){if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout(()=>{const t=this.$el.querySelectorAll(".relative > .absolute")[0],s=this.$el.querySelectorAll(".relative")[0],h=this.getElementOffset(s);t.style.top=h.top+"px",t.style.left=h.left+"px",s!==void 0&&(s.classList.remove("relative"),s.classList.add("dropdown-holder"))},100);else{const t=this.$el.querySelectorAll(".dropdown-holder")[0];t.classList.remove("dropdown-holder"),t.classList.add("relative")}},handleChanged(e){this.row.$checked=e,this.$emit("updated",this.row)},triggerAsync(e){e.confirm!==null?confirm(e.confirm.message)&&P[e.type.toLowerCase()](e.url).subscribe(t=>{S.success(t.message).subscribe(),this.$emit("reload",this.row)},t=>{this.toggleMenu(),S.error(t.message).subscribe()}):(L.emit({identifier:"ns-table-row-action",value:{action:e,row:this.row,component:this}}),this.toggleMenu())},triggerPopup(e,t){const s=window.nsExtraComponents[e.component];if(console.log({action:e}),e.component)return s?new Promise((h,d)=>{Popup.show(s,{resolve:h,reject:d,row:t,action:e})}):S.error(b(`Unable to load the component "${e.component}". Make sure the component is registered to "nsExtraComponents".`)).subscribe();this.triggerAsync(e)}}},ru={class:"font-sans p-2"},du={key:0,class:"font-sans p-2"},ou={class:""},uu=i("i",{class:"las la-ellipsis-h"},null,-1),cu={class:"relative"},hu={key:0,class:"zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper"},fu={class:"rounded-md shadow-xs"},mu={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},gu=["href","innerHTML"],bu=["onClick","innerHTML"],_u=["href","innerHTML"],pu=["innerHTML"],yu={key:2},vu={key:1,class:"font-sans p-2 flex flex-col items-center justify-center"},ku={class:""},wu=i("i",{class:"las la-ellipsis-h"},null,-1),xu={class:"relative"},Du={key:0,class:"zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right -ml-28 w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper"},Cu={class:"rounded-md shadow-xs"},Mu={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},Tu=["href","innerHTML"],Su=["onClick","innerHTML"];function $u(e,t,s,h,d,n){const r=k("ns-checkbox");return l(),a("tr",{class:m(["ns-table-row",s.row.$cssClass?s.row.$cssClass:"border text-sm"])},[i("td",ru,[T(r,{onChange:t[0]||(t[0]=o=>n.handleChanged(o)),checked:s.row.$checked},null,8,["checked"])]),s.prependOptions&&s.showOptions?(l(),a("td",du,[i("div",ou,[i("button",{onClick:t[1]||(t[1]=o=>n.toggleMenu(o)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"])},[uu,p(" "+c(n.__("Options")),1)],2),s.row.$toggled?(l(),a("div",{key:0,onClick:t[2]||(t[2]=o=>n.toggleMenu(o)),class:"absolute w-full h-full z-10 top-0 left-0"})):u("",!0),i("div",cu,[s.row.$toggled?(l(),a("div",hu,[i("div",fu,[i("div",mu,[(l(!0),a(_,null,D(s.row.$actions,(o,f)=>(l(),a(_,{key:f},[o.type==="GOTO"?(l(),a("a",{key:0,href:o.url,class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:n.sanitizeHTML(o.label)},null,8,gu)):u("",!0),["GET","DELETE","POPUP"].includes(o.type)?(l(),a("a",{key:1,href:"javascript:void(0)",onClick:g=>n.triggerAsync(o),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:n.sanitizeHTML(o.label)},null,8,bu)):u("",!0)],64))),128))])])])):u("",!0)])])])):u("",!0),(l(!0),a(_,null,D(s.columns,(o,f)=>(l(),a("td",{key:f,class:"font-sans p-2"},[s.row[f]&&s.row[f].type&&s.row[f].type==="link"?(l(),a("a",{key:0,target:"_blank",href:s.row[f].href,innerHTML:n.sanitizeHTML(s.row[f].label)},null,8,_u)):u("",!0),typeof s.row[f]=="string"||typeof s.row[f]=="number"?(l(),a("div",{key:1,innerHTML:n.sanitizeHTML(s.row[f])},null,8,pu)):u("",!0),s.row[f]===null?(l(),a("div",yu,c(n.__("Undefined")),1)):u("",!0)]))),128)),!s.prependOptions&&s.showOptions?(l(),a("td",vu,[i("div",ku,[i("button",{onClick:t[3]||(t[3]=o=>n.toggleMenu(o)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"])},[wu,p(" "+c(n.__("Options")),1)],2),s.row.$toggled?(l(),a("div",{key:0,onClick:t[4]||(t[4]=o=>n.toggleMenu(o)),class:"absolute w-full h-full z-10 top-0 left-0"})):u("",!0),i("div",xu,[s.row.$toggled?(l(),a("div",Du,[i("div",Cu,[i("div",Mu,[(l(!0),a(_,null,D(s.row.$actions,(o,f)=>(l(),a(_,{key:f},[o.type==="GOTO"?(l(),a("a",{key:0,href:o.url,class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:n.sanitizeHTML(o.label)},null,8,Tu)):u("",!0),["GET","DELETE","POPUP"].includes(o.type)?(l(),a("a",{key:1,href:"javascript:void(0)",onClick:g=>n.triggerAsync(o),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:n.sanitizeHTML(o.label)},null,8,Su)):u("",!0)],64))),128))])])])):u("",!0)])])])):u("",!0)],2)}const Fu=C(au,[["render",$u]]),Ou={data(){return{childrens:[],tabState:new we}},props:["active"],computed:{activeComponent(){const e=this.childrens.filter(t=>t.active);return e.length>0?e[0]:!1}},beforeUnmount(){this.tabState.unsubscribe()},watch:{active(e,t){this.childrens.forEach(s=>{s.active=s.identifier===e,s.active&&this.toggle(s)})}},mounted(){this.buildChildrens(this.active)},methods:{__:b,toggle(e){this.$emit("active",e.identifier),this.$emit("changeTab",e.identifier),this.tabState.next(e)},buildChildrens(e){this.childrens=Array.from(this.$el.querySelectorAll(".ns-tab-item")).map(s=>{const h=s.getAttribute("identifier")||void 0;let d=!0;return s.getAttribute("visible")&&(d=s.getAttribute("visible")==="true"),{el:s,active:!!(e&&e===h),identifier:h,initialized:!1,visible:d,label:s.getAttribute("label")||b("Unamed Tab")}}).filter(s=>s.visible),!(this.childrens.filter(s=>s.active).length>0)&&this.childrens.length>0&&(this.childrens[0].active=!0),this.childrens.forEach(s=>{s.active&&this.toggle(s)})}}},Ru=["selected-tab"],Eu={class:"header ml-4 flex justify-between",style:{"margin-bottom":"-1px"}},Pu={class:"flex flex-auto"},ju=["onClick"];function Hu(e,t,s,h,d,n){return l(),a("div",{class:"tabs flex flex-col flex-auto ns-tab overflow-hidden","selected-tab":n.activeComponent.identifier},[i("div",Eu,[i("div",Pu,[(l(!0),a(_,null,D(d.childrens,(r,o)=>(l(),a("div",{key:r.identifier,onClick:f=>n.toggle(r),class:m([s.active===r.identifier?"border-b-0 active z-10":"border inactive","tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer"]),style:{"margin-right":"-1px"}},c(r.label),11,ju))),128))]),i("div",null,[y(e.$slots,"extra")])]),y(e.$slots,"default")],8,Ru)}const Uu=C(Ou,[["render",Hu]]),Au={data(){return{selectedTab:{},tabStateSubscriber:null}},computed:{},mounted(){this.tabStateSubscriber=this.$parent.tabState.subscribe(e=>{this.selectedTab=e})},unmounted(){this.tabStateSubscriber.unsubscribe()},props:["label","identifier","padding"]},Lu=["label","identifier"];function Yu(e,t,s,h,d,n){return l(),a("div",{class:m([d.selectedTab.identifier!==s.identifier?"hidden":"","ns-tab-item flex flex-auto overflow-hidden"]),label:s.label,identifier:s.identifier},[d.selectedTab.identifier===s.identifier?(l(),a("div",{key:0,class:m(["border rounded flex-auto overflow-y-auto",s.padding||"p-4"])},[y(e.$slots,"default")],2)):u("",!0)],10,Lu)}const Vu=C(Au,[["render",Yu]]),Nu={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"]},Bu={class:"flex flex-col mb-2 flex-auto ns-textarea"},Iu=["for"],zu={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},qu={class:"text-secondary sm:text-sm sm:leading-5"},Wu=["rows","disabled","id","type","placeholder"],Gu={key:0,class:"text-xs text-secondary"};function Ku(e,t,s,h,d,n){return l(),a("div",Bu,[i("label",{for:s.field.name,class:m([n.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},c(s.field.label),11,Iu),i("div",{class:m([n.hasError?"has-error":"is-pristine","mt-1 relative border-2 overflow-hidden rounded-md focus:shadow-sm mb-1"])},[s.leading?(l(),a("div",zu,[i("span",qu,c(s.leading),1)])):u("",!0),F(i("textarea",{rows:s.field.data&&s.field.data.rows||10,disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=r=>s.field.value=r),onBlur:t[1]||(t[1]=r=>e.$emit("blur",this)),onChange:t[2]||(t[2]=r=>e.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([n.inputClass,"form-input block w-full sm:text-sm sm:leading-5"]),placeholder:s.placeholder},null,42,Wu),[[R,s.field.value]])],2),!s.field.errors||s.field.errors.length===0?(l(),a("p",Gu,[y(e.$slots,"description")])):u("",!0),(l(!0),a(_,null,D(s.field.errors,(r,o)=>(l(),a("p",{key:o,class:"text-xs text-error-primary"},[r.identifier==="required"?y(e.$slots,r.identifier,{key:0},()=>[p("This field is required.")]):u("",!0),r.identifier==="email"?y(e.$slots,r.identifier,{key:1},()=>[p("This field must contain a valid email address.")]):u("",!0),r.identifier==="invalid"?y(e.$slots,r.identifier,{key:2},()=>[p(c(r.message),1)]):u("",!0)]))),128))])}const Qu=C(Nu,[["render",Ku]]),ac=Object.freeze(Object.defineProperty({__proto__:null,nsAlertPopup:q,nsAvatar:Ye,nsButton:ze,nsCalendar:te,nsCheckbox:ts,nsCkeditor:Me,nsCloseButton:rs,nsConfirmPopup:V,nsCrud:mn,nsCrudForm:An,nsDate:qn,nsDateRangePicker:le,nsDateTimePicker:ae,nsDatepicker:xl,nsDaterangePicker:Vl,nsDragzone:Gl,nsField:fa,nsFieldDescription:_a,nsIconButton:va,nsInlineMultiselect:La,nsInput:Wa,nsLink:Xa,nsMediaInput:Md,nsMenu:jd,nsMultiselect:to,nsNotice:Te,nsNumpad:Se,nsNumpadPlus:$e,nsPOSLoadingPopup:Fe,nsPageTitle:ro,nsPaginate:Oe,nsPromptPopup:Re,nsSearch:po,nsSearchSelect:Ro,nsSelect:Yo,nsSelectAudio:Ko,nsSpinner:Zo,nsSubmenu:lu,nsSwitch:ee,nsTableRow:Fu,nsTabs:Uu,nsTabsItem:Vu,nsTextarea:Qu},Symbol.toStringTag,{value:"Module"}));export{lu as a,ac as b,xl as c,Vl as d,ae as e,de as f,fa as g,rs as h,lc as i,jd as n};
