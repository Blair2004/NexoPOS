import{n as d,b as i,i as b,F as x}from"./bootstrap-BvuHheHc.js";import{_ as f}from"./lang-BINodpp-.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as l,c as n,o as t,b as s,a as _,F as y,e as F,g as T,f as m,t as u,w as V,i as X}from"./runtime-core.esm-bundler-D4l6Snf1.js";import"./currency-COpKd-rX.js";import"./chart-CFvJmF2u.js";import"./runtime-dom.esm-bundler-DaZ-XdMB.js";const w={name:"ns-register",data(){return{fields:[],xXsrfToken:null,validation:new x}},mounted(){b([i.get("/api/fields/ns.register"),i.get("/sanctum/csrf-cookie")]).subscribe(o=>{this.fields=this.validation.createFields(o[0]),this.xXsrfToken=i.response.config.headers["X-XSRF-TOKEN"],setTimeout(()=>nsHooks.doAction("ns-register-mounted",this))})},methods:{__:f,register(){if(!this.validation.validateFields(this.fields))return d.error(f("Unable to proceed the form is not valid."));this.validation.disableFields(this.fields),nsHooks.applyFilters("ns-register-submit",!0)&&i.post("/auth/sign-up",this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe({next:e=>{d.success(e.message),setTimeout(()=>{document.location=e.data.redirectTo},1500)},error:e=>{this.validation.triggerFieldsErrors(this.fields,e),this.validation.enableFields(this.fields),d.error(e.message)}})}}},N={class:"ns-box rounded shadow overflow-hidden transition-all duration-100"},B={class:"ns-box-body"},C={class:"p-3 -my-2"},E={key:0,class:"py-2 fade-in-entrance anim-duration-300"},R={key:0,class:"flex items-center justify-center"},S={class:"flex w-full items-center justify-center py-4"},j={href:"/sign-in",class:"link hover:underline text-blue-600 text-sm"},H={class:"flex ns-box-footer border-t justify-end items-center p-3"};function A(o,e,K,O,r,a){const h=l("ns-field"),p=l("ns-spinner"),g=l("ns-button");return t(),n("div",N,[s("div",B,[s("div",C,[r.fields.length>0?(t(),n("div",E,[(t(!0),n(y,null,F(r.fields,(c,v)=>(t(),T(h,{key:v,field:c},null,8,["field"]))),128))])):_("",!0)]),r.fields.length===0?(t(),n("div",R,[m(p)])):_("",!0),s("div",S,[s("a",j,u(a.__("Already registered ?")),1)])]),s("div",H,[s("div",null,[m(g,{onClick:e[0]||(e[0]=c=>a.register()),type:"info"},{default:V(()=>[X(u(a.__("Register")),1)]),_:1})])])])}const I=k(w,[["render",A]]);export{I as default};
