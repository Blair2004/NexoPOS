import U from"./ns-alert-popup-f8b83fc1.js";import{_ as g}from"./currency-dc6217f5.js";import{n as ae}from"./ns-avatar-image-1c4f26a6.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{af as n,G as r,H as i,c as S,an as x,am as k,A as a,F as y,al as D,aJ as O,M as p,aH as C,z as $,N as oe,ap as L,K as ue}from"./npm~@vue~runtime-core_-0a26b3ab.js";import{V as c,z as m,A as ce}from"./npm~@vue~shared_-5bb087a6.js";import{h as v}from"./npm~moment-a9aaa855.js";import{b as M,F as N,e as q,p as z,P,a as j,n as B,d as R}from"./bootstrap-b8cd97d4.js";import{m as E,w as H,l as A,j as W}from"./npm~@vue~runtime-dom_-2c8e0ca9.js";import{n as V,b as fe,e as G,f as he,g as me,a as be,h as ge,c as _e,i as ve,d as pe}from"./ns-prompt-popup-4f52d15c.js";import{D as K}from"./npm~vue2-daterange-picker-c3e32574.js";import{y as I}from"./npm~@vue~reactivity_-26e9e2f4.js";import{d as ye}from"./npm~vuedraggable-45210012.js";import{V as xe}from"./npm~vue-upload-component-5c82cdcf.js";import"./npm~@dicebear~avatars_-24df7cd3.js";import"./npm~@dicebear~avatars-avataaars-sprites_-796ded10.js";import"./npm~lodash-3db1c062.js";import{S as ke}from"./npm~rxjs-eeb06f17.js";const we={methods:{__:g},components:{nsAvatarImage:ae},name:"ns-avatar",data(){return{svg:""}},computed:{avatarUrl(){return this.url.length===0?"":this.url}},props:["url","display-name"]},Ce={class:"flex justify-between items-center flex-shrink-0"},De={class:"hidden md:inline-block px-2"},Te={class:"md:hidden px-2"},Me={class:"px-2"},Se={class:"overflow-hidden rounded-full bg-gray-600"};function $e(e,t,s,h,o,l){const u=x("ns-avatar-image");return n(),r("div",Ce,[i("span",De,c(l.__("Howdy, {name}").replace("{name}",this.displayName)),1),i("span",Te,c(e.displayName),1),i("div",Me,[i("div",Se,[S(u,{url:l.avatarUrl,name:e.displayName},null,8,["url","name"])])])])}const Oe=w(we,[["render",$e]]),Ee={data:()=>({clicked:!1,_save:0}),props:["type","disabled","link","href","routerLink","to","target"],mounted(){},computed:{isDisabled(){return this.disabled&&(this.disabled.length===0||this.disabled==="disabled"||this.disabled)}}},Fe=["disabled"],je=["target","href"];function Pe(e,t,s,h,o,l){return n(),r("div",{class:m(["flex ns-button",s.type?s.type:"default"])},[!s.link&&!s.href?(n(),r("button",{key:0,disabled:l.isDisabled,class:"flex rounded items-center py-2 px-3 font-semibold"},[k(e.$slots,"default")],8,Fe)):a("",!0),s.href?(n(),r("a",{key:1,target:s.target,href:s.href,class:"flex rounded items-center py-2 px-3 font-semibold"},[k(e.$slots,"default")],8,je)):a("",!0)],2)}const He=w(Ee,[["render",Pe]]),Re={name:"ns-calendar",props:["date","field","visible","range","selected-range","side"],data(){return{calendar:[[]],currentDay:v(),daysOfWeek:new Array(7).fill("").map((e,t)=>t),hours:0,minutes:0,currentView:"days",clickedOnCalendar:!1,moment:v,months:new Array(12).fill("").map((e,t)=>t)}},computed:{momentCopy(){return v()}},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},mounted(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null,""].includes(this.date)?v():v(this.date),this.hours=this.currentDay.hours(),this.minutes=this.currentDay.minutes(),this.build(),this.toggleView("days")},methods:{__:g,handleCalendarClick(){this.clickedOnCalendar=!0},getDayClass({day:e,_dayIndex:t,dayOfWeek:s,_index:h,currentDay:o}){const l=[];return(v(this.date).isSame(e.date,"day")||this.isRangeEdge(e))&&!this.isInvalidRange()?l.push("bg-info-secondary text-primary border-info-secondary text-white"):l.push("hover:bg-numpad-hover"),this.isInvalidRange()&&this.isRangeEdge(e)&&l.push("bg-error-secondary text-white"),h===0&&l.push("border-t border-tab-table-th"),this.isInRange(e)&&!this.isRangeEdge(e)?l.push("bg-info-primary"):e.isDifferentMonth&&!this.isRangeEdge(e)&&l.push("bg-tab-table-th"),l.join(" ")},erase(){this.selectDate({date:v(ns.date.current)})},isInRange(e){return this.range&&this.range.length===2&&this.range[0]&&this.range[1]?v(e.date).isSameOrAfter(this.range[0])&&v(e.date).isSameOrBefore(this.range[1]):!1},isInvalidRange(){return this.selectedRange&&this.selectedRange.endDate?v(this.selectedRange.startDate).isAfter(v(this.selectedRange.endDate))||v(this.selectedRange.endDate).isBefore(v(this.selectedRange.startDate)):!1},isRangeEdge(e){return this.range&&this.range.length===2&&this.range[0]&&this.range[1]?v(e.date).isSame(this.range[0],"day")||v(e.date).isSame(this.range[1],"day"):!1},setYear(e){parseInt(e.srcElement.value)>0&&parseInt(e.srcElement.value)<9999&&(this.currentDay.year(e.srcElement.value),this.selectDate({date:this.currentDay.clone()}))},subYear(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.selectDate({date:this.currentDay.clone()}))},addYear(){this.currentDay.add(1,"year"),this.selectDate({date:this.currentDay.clone()})},toggleView(e){this.currentView=e,this.currentView==="years"&&setTimeout(()=>{this.$refs.year.select()},100),this.currentView==="days"&&setTimeout(()=>{this.$refs.hours.addEventListener("focus",function(t){this.select()}),this.$refs.minutes.addEventListener("focus",function(t){this.select()})},100)},setMonth(e){this.currentDay.month(e),this.selectDate({date:this.currentDay.clone()})},detectHoursChange(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.selectDate({date:this.currentDay.clone()})},detectMinuteChange(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.selectDate({date:this.currentDay.clone()})},checkClickedItem(e){this.$parent.$el.getAttribute("class").split(" ").includes("picker")&&(!this.$parent.$el.contains(e.srcElement)&&!this.clickedOnCalendar&&this.visible&&this.$emit("onClickOut",!0),setTimeout(()=>{this.clickedOnCalendar=!1},100))},selectDate(e){if([void 0].includes(e))this.$emit("set",null);else{if(this.side==="left"&&v(this.selectedRange.endDate).isValid()&&e.date.isAfter(this.selectedRange.endDate))return M.error(g("The left range will be invalid.")).subscribe(),!1;if(this.side==="right"&&v(this.selectedRange.startDate).isValid()&&e.date.isBefore(this.selectedRange.startDate))return M.error(g("The right range will be invalid.")).subscribe(),!1;this.currentDay=e.date,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.$emit("set",this.currentDay.format("YYYY-MM-DD HH:mm:ss"))}this.build()},subMonth(){this.currentDay.subtract(1,"month"),this.build()},addMonth(){this.currentDay.add(1,"month"),this.build()},resetCalendar(){this.calendar=[[]]},build(){this.resetCalendar(),this.currentDay.clone().startOf("month");const e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");for(;;){e.day()===0&&this.calendar[0].length>0&&this.calendar.push([]);let s=this.calendar.length-1;if(this.calendar[s].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(v.now(),"day"),isDifferentMonth:!1,isNextMonth:!1,isPreviousMonth:!1}),e.isSame(t,"day"))break;e.add(1,"day")}if(this.calendar[0].length<7){const s=7-this.calendar[0].length,h=this.calendar[0][0].date.clone(),o=[];for(let l=0;l<s;l++)h.subtract(1,"day"),o.unshift({date:h.clone(),dayOfWeek:h.day(),isToday:h.isSame(v.now(),"day"),isDifferentMonth:!0,isNextMonth:!1,isPreviousMonth:!0});this.calendar[0].unshift(...o)}if(this.calendar[this.calendar.length-1].length<7){const s=this.calendar.length-1,h=7-this.calendar[s].length,o=this.calendar[s][this.calendar[s].length-1].date.clone(),l=[];for(let u=0;u<h;u++)o.add(1,"day"),l.push({date:o.clone(),dayOfWeek:o.day(),isToday:o.isSame(v.now(),"day"),isDifferentMonth:!0,isNextMonth:!0,isPreviousMonth:!1});this.calendar[s].push(...l)}}}},Le={key:0,class:"flex-auto"},Ae={class:"p-2 flex items-center"},Ve=i("i",{class:"las la-angle-left"},null,-1),Ye=[Ve],Ie={class:"flex flex-auto font-semibold text-primary justify-center"},Ue=i("i",{class:"las la-angle-right"},null,-1),Ne=[Ue],qe={class:"h-32 flex grow-0 items-center justify-center text-primary p-4"},ze={class:"rounded input-group info border-2 flex overflow-hidden"},Be=i("i",{class:"las la-minus"},null,-1),We=[Be],Ge={class:"w-24 flex grow-0"},Ke=["value"],Qe=i("i",{class:"las la-plus"},null,-1),Je=[Qe],Ze={class:"p-2"},Xe={key:1,class:"flex-auto border-b border-box-background"},et={class:"p-2 flex items-center"},tt=i("i",{class:"las la-angle-left"},null,-1),st=[tt],lt={class:"flex flex-auto font-semibold text-primary justify-center"},it={class:"mr-2 border-b border-info-secondary border-dashed"},nt=i("i",{class:"las la-angle-right"},null,-1),rt=[nt],dt={class:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-primary divide-x divide-y border-b border-box-background"},at={class:"w-full h-full"},ot=["onClick"],ut={class:"p-2"},ct={key:2},ft={class:"p-2 flex items-center"},ht=i("i",{class:"las la-angle-left"},null,-1),mt=[ht],bt={class:"flex flex-auto font-semibold text-primary justify-center"},gt=i("i",{class:"las la-angle-right"},null,-1),_t=[gt],vt={class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary divide-x divide-y"},pt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},yt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},xt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},kt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},wt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Ct={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Dt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},Tt=["onClick"],Mt={key:0},St={key:1,class:"text-secondary"},$t={class:"border-t border-tab-table-th w-full p-2"},Ot={class:"-mx-1 flex justify-between"},Et={class:"px-1"},Ft={class:"-mx-1 flex"},jt={class:"px-1"},Pt=i("i",{class:"las la-trash text-lg"},null,-1),Ht=[Pt],Rt={class:"px-2"},Lt={key:0,class:"rounded border-tab-table-th-edge flex items-center justify-center p-1 border"},At=i("span",{class:"pr-2 pl-1 text-primary"},[i("i",{class:"las la-clock"})],-1),Vt=i("span",{class:"mx-1"},":",-1);function Yt(e,t,s,h,o,l){return n(),r("div",{onClick:t[21]||(t[21]=u=>l.handleCalendarClick()),class:"flex bg-box-background flex-col rounded-lg overflow-hidden"},[o.currentView==="years"?(n(),r("div",Le,[i("div",Ae,[i("div",null,[i("button",{onClick:t[0]||(t[0]=u=>l.subMonth()),class:"w-8 h-8 ns-inset-button border outline-none text-numpad-text rounded"},Ye)]),i("div",Ie,[i("span",{class:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",onClick:t[1]||(t[1]=u=>l.toggleView("months"))},c(o.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[2]||(t[2]=u=>l.toggleView("years"))},c(o.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:t[3]||(t[3]=u=>l.addMonth()),class:"w-8 h-8 ns-inset-button border outline-none text-numpad-text rounded"},Ne)])]),i("div",qe,[i("div",ze,[i("button",{onClick:t[4]||(t[4]=u=>l.subYear()),class:"px-2 py-2"},We),i("div",Ge,[i("input",{type:"text",ref:"year",class:"p-2 flex-auto w-full text-center outline-none",onChange:t[5]||(t[5]=u=>l.setYear(u)),value:o.currentDay.format("YYYY")},null,40,Ke)]),i("button",{onClick:t[6]||(t[6]=u=>l.addYear()),class:"px-2 py-2"},Je)])]),i("div",Ze,[i("button",{onClick:t[7]||(t[7]=u=>l.toggleView("days")),class:"p-2 w-full ns-inset-button border text-sm error hover:text-white rounded flex items-center justify-center"},c(l.__("Return To Calendar")),1)])])):a("",!0),o.currentView==="months"?(n(),r("div",Xe,[i("div",et,[i("div",null,[i("button",{onClick:t[8]||(t[8]=u=>l.subYear()),class:"w-8 h-8 ns-inset-button outline-none border rounded"},st)]),i("div",lt,[i("span",it,c(o.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[9]||(t[9]=u=>l.toggleView("years"))},c(o.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:t[10]||(t[10]=u=>l.addYear()),class:"w-8 h-8 ns-inset-button outline-none border rounded"},rt)])]),i("div",dt,[(n(!0),r(y,null,D(o.months,(u,d)=>(n(),r("div",{key:d,class:"h-8 flex justify-center items-center text-sm border-box-background"},[i("div",at,[i("div",{class:m([l.momentCopy.month(u).format("MM")===o.currentDay.format("MM")?"bg-info-secondary text-white":"hover:bg-numpad-hover","h-full w-full border-box-background flex items-center justify-center cursor-pointer"]),onClick:f=>l.setMonth(u)},c(l.momentCopy.format("MMM")),11,ot)])]))),128))]),i("div",ut,[i("button",{onClick:t[11]||(t[11]=u=>l.toggleView("days")),class:"p-2 w-full ns-inset-button border text-sm error rounded flex items-center justify-center"},c(l.__("Return To Calendar")),1)])])):a("",!0),o.currentView==="days"?(n(),r("div",ct,[i("div",ft,[i("div",null,[i("button",{onClick:t[12]||(t[12]=u=>l.subMonth()),class:"w-8 h-8 ns-inset-button border rounded"},mt)]),i("div",bt,[i("span",{class:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",onClick:t[13]||(t[13]=u=>l.toggleView("months"))},c(o.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:t[14]||(t[14]=u=>l.toggleView("years"))},c(o.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:t[15]||(t[15]=u=>l.addMonth()),class:"w-8 h-8 ns-inset-button border rounded"},_t)])]),i("div",vt,[i("div",pt,c(l.__("Sun")),1),i("div",yt,c(l.__("Mon")),1),i("div",xt,c(l.__("Tue")),1),i("div",kt,c(l.__("Wed")),1),i("div",wt,c(l.__("Thr")),1),i("div",Ct,c(l.__("Fri")),1),i("div",Dt,c(l.__("Sat")),1)]),(n(!0),r(y,null,D(o.calendar,(u,d)=>(n(),r("div",{key:d,class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-primary divide-x divide-y"},[(n(!0),r(y,null,D(o.daysOfWeek,(f,b)=>(n(),r("div",{key:b,class:"md:h-10 h-8 flex justify-center items-center text-sm border-tab-table-th"},[(n(!0),r(y,null,D(u,(T,F)=>(n(),r(y,null,[T.dayOfWeek===f?(n(),r("div",{key:F,class:m([l.getDayClass({day:T,_dayIndex:F,dayOfWeek:f,_index:b,currentDay:o.currentDay}),"h-full w-full flex items-center justify-center cursor-pointer"]),onClick:Y=>l.selectDate(T)},[T.isDifferentMonth?a("",!0):(n(),r("span",Mt,c(T.date.format("DD")),1)),T.isDifferentMonth?(n(),r("span",St,c(T.date.format("DD")),1)):a("",!0)],10,Tt)):a("",!0)],64))),256))]))),128))]))),128))])):a("",!0),i("div",$t,[i("div",Ot,[i("div",Et,[i("div",Ft,[i("div",jt,[i("button",{onClick:t[16]||(t[16]=u=>l.erase()),class:"border ns-inset-button text-sm error rounded md:w-10 w-8 md:h-10 h-8 flex items-center justify-center"},Ht)])])]),i("div",Rt,[o.currentView==="days"?(n(),r("div",Lt,[At,O(i("input",{placeholder:"HH",ref:"hours",onChange:t[17]||(t[17]=u=>l.detectHoursChange(u)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-background outline-none text-sm active:border-numpad-edge","onUpdate:modelValue":t[18]||(t[18]=u=>o.hours=u),type:"number"},null,544),[[E,o.hours]]),Vt,O(i("input",{placeholder:"mm",ref:"minutes",onChange:t[19]||(t[19]=u=>l.detectMinuteChange(u)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-background outline-none text-sm active:border-numpad-edge","onUpdate:modelValue":t[20]||(t[20]=u=>o.minutes=u),type:"number"},null,544),[[E,o.minutes]])])):a("",!0)])])])])}const Q=w(Re,[["render",Yt]]),It={data:()=>({}),props:["checked","field","label"],computed:{isChecked(){return this.field?this.field.value:this.checked},hasError(){return this.field.errors!==void 0&&this.field.errors.length>0}},methods:{toggleIt(){this.field!==void 0&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}},Ut={class:"w-6 h-6 flex bg-input-background border-input-edge border-2 items-center justify-center cursor-pointer"},Nt={key:0,class:"las la-check"};function qt(e,t,s,h,o,l){return n(),r("div",{class:"flex ns-checkbox items-center justify-center cursor-pointer",onClick:t[0]||(t[0]=u=>l.toggleIt())},[i("div",Ut,[l.isChecked?(n(),r("i",Nt)):a("",!0)]),s.label?(n(),r("label",{key:0,class:m([l.hasError?"has-error":"is-pristine","mx-2"])},c(s.label),3)):a("",!0),s.field?(n(),r("label",{key:1,class:m([l.hasError?"has-error":"is-pristine","mx-2"])},c(s.field.label),3)):a("",!0)])}const zt=w(It,[["render",qt]]),Bt={name:"ns-close-button",methods:{}},Wt={class:"outline-none ns-close-button hover:border-transparent border rounded-full h-8 min-w-[2rem] items-center justify-center"},Gt=i("i",{class:"las la-times"},null,-1);function Kt(e,t,s,h,o,l){return n(),r("button",Wt,[Gt,p(),k(e.$slots,"default")])}const Qt=w(Bt,[["render",Kt]]),Jt={data(){return{fields:[],validation:new N}},props:["popup"],methods:{__:g,popupCloser:q,popupResolver:z,closePopup(){this.popupResolver(!1)},useFilters(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters(){this.fields.forEach(e=>e.value=""),this.popupResolver(null)}},mounted(){this.fields=this.validation.createFields(this.popup.params.queryFilters),this.popupCloser()}},Zt={class:"ns-box shadow-lg w-95vw h-95vh md:w-3/5-screen md:h-5/6-screen flex flex-col"},Xt={class:"p-2 border-b ns-box-header flex justify-between items-center"},es={class:"p-2 ns-box-body flex-auto"},ts={class:"p-2 flex justify-between ns-box-footer border-t"};function ss(e,t,s,h,o,l){const u=x("ns-close-button"),d=x("ns-field"),f=x("ns-button");return n(),r("div",Zt,[i("div",Xt,[i("h3",null,c(l.__("Search Filters")),1),i("div",null,[S(u,{onClick:t[0]||(t[0]=b=>l.closePopup())})])]),i("div",es,[(n(!0),r(y,null,D(o.fields,(b,T)=>(n(),$(d,{field:b,key:T},null,8,["field"]))),128))]),i("div",ts,[i("div",null,[S(f,{onClick:t[1]||(t[1]=b=>l.clearFilters()),type:"error"},{default:C(()=>[p(c(l.__("Clear Filters")),1)]),_:1})]),i("div",null,[S(f,{onClick:t[2]||(t[2]=b=>l.useFilters()),type:"info"},{default:C(()=>[p(c(l.__("Use Filters")),1)]),_:1})])])])}const ls=w(Jt,[["render",ss]]),is={data:()=>({prependOptions:!1,showOptions:!0,isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],headerButtons:[],withFilters:!1,columns:[],selectedEntries:[],globallyChecked:!1,result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}),name:"ns-crud",mounted(){this.identifier!==void 0&&nsCrudHandler.defineInstance(this.identifier,this),this.loadConfig()},props:["src","createUrl","mode","identifier","queryParams","popup"],computed:{getParsedSrc(){return`${this.src}?${this.sortColumn}${this.searchQuery}${this.queryFiltersString}${this.queryPage}${this.getQueryParams()?"&"+this.getQueryParams():""}`},showQueryFilters(){return this.queryFilters.length>0},getSelectedAction(){const e=this.bulkActions.filter(t=>t.identifier===this.bulkAction);return e.length>0?e[0]:!1},pagination(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage(){return this.result?`&page=${this.page}`:""},resultInfo(){return g("displaying {perPage} on {items} items").replace("{perPage}",this.result.per_page||0).replace("{items}",this.result.total||0)},headerButtonsComponents(){return this.headerButtons.map(e=>oe(()=>new Promise(t=>{t(nsExtraComponents[e])})))}},methods:{__:g,getQueryParams(){return this.queryParams?Object.keys(this.queryParams).map(e=>`${e}=${this.queryParams[e]}`).join("&"):""},pageNumbers(e,t){var s=[];t-3>1&&s.push(1,"...");for(let h=1;h<=e;h++)t+3>h&&t-3<h&&s.push(h);return t+3<e&&s.push("...",e),s.filter(h=>h>0||typeof h=="string")},downloadContent(){nsHttpClient.post(`${this.src}/export?${this.getParsedSrc}`,{entries:this.selectedEntries.map(e=>e.$id)}).subscribe(e=>{setTimeout(()=>document.location=e.url,300),M.success(g("The document has been generated.")).subscribe()},e=>{M.error(e.message||g("Unexpected error occurred.")).subscribe()})},clearSelectedEntries(){P.show(V,{title:g("Clear Selected Entries ?"),message:g("Would you like to clear all selected entries ?"),onAction:e=>{e&&(this.selectedEntries=[],this.handleGlobalChange(!1))}})},refreshRow(e){if(console.log({row:e}),e.$checked===!0)this.selectedEntries.filter(s=>s.$id===e.$id).length===0&&this.selectedEntries.push(e);else{const t=this.selectedEntries.filter(s=>s.$id===e.$id);if(t.length>0){const s=this.selectedEntries.indexOf(t[0]);this.selectedEntries.splice(s,1)}}},handleShowOptions(e){this.result.data.forEach(t=>{t.$id!==e.$id&&(t.$toggled=!1)})},handleGlobalChange(e){this.globallyChecked=e,this.result.data.forEach(t=>{t.$checked=e,this.refreshRow(t)})},loadConfig(){nsHttpClient.get(`${this.src}/config?${this.getQueryParams()}`).subscribe(t=>{this.columns=t.columns,this.bulkActions=t.bulkActions,this.queryFilters=t.queryFilters,this.prependOptions=t.prependOptions,this.showOptions=t.showOptions,this.headerButtons=t.headerButtons||[],this.refresh()},t=>{M.error(t.message,"OK",{duration:!1}).subscribe()})},cancelSearch(){this.searchInput="",this.search()},search(){this.searchInput?this.searchQuery=`&search=${this.searchInput}`:this.searchQuery="",this.page=1,this.refresh()},sort(e){if(this.columns[e].$sort===!1)return M.error(g("Sorting is explicitely disabled on this column")).subscribe();for(let t in this.columns)t!==e&&(this.columns[t].$sorted=!1,this.columns[t].$direction="");switch(this.columns[e].$sorted=!0,this.columns[e].$direction){case"asc":this.columns[e].$direction="desc";break;case"desc":this.columns[e].$direction="";break;case"":default:this.columns[e].$direction="asc";break}["asc","desc"].includes(this.columns[e].$direction)?this.sortColumn=`active=${e}&direction=${this.columns[e].$direction}`:this.sortColumn="",this.$emit("sort",this.columns[e]),this.refresh()},bulkDo(){if(this.bulkAction)if(this.selectedEntries.length>0){if(confirm(this.getSelectedAction.confirm||g("Would you like to perform the selected bulk action on the selected entries ?")))return nsHttpClient.post(`${this.src}/bulk-actions`,{action:this.bulkAction,entries:this.selectedEntries.map(e=>e.$id)}).subscribe({next:e=>{M.info(e.message).subscribe(),this.selectedEntries=[],this.refresh()},error:e=>{M.error(e.message).subscribe()}})}else return M.error(g("No selection has been made.")).subscribe();else return M.error(g("No action has been selected.")).subscribe()},async openQueryFilter(){try{const e=await new Promise((t,s)=>{P.show(ls,{resolve:t,reject:s,queryFilters:this.queryFilters})});this.withFilters=!1,this.queryFiltersString="",e!==null&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(e))),this.refresh()}catch{}},refresh(){this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get(`${this.getParsedSrc}`).subscribe(t=>{t.data=t.data.map(s=>(this.selectedEntries.filter(o=>o.$id===s.$id).length>0&&(s.$checked=!0),s)),this.isRefreshing=!1,this.result=t,this.page=t.current_page},t=>{this.isRefreshing=!1,M.error(t.message).subscribe()})}}},rs={key:0,id:"crud-table-header",class:"p-2 border-b flex flex-col md:flex-row justify-between flex-wrap"},ds={id:"crud-search-box",class:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex"},as={key:0,class:"px-2 flex items-center justify-center"},os=["href"],us=i("i",{class:"las la-plus"},null,-1),cs=[us],fs={class:"px-2"},hs={class:"rounded-full p-1 ns-crud-input flex"},ms=i("i",{class:"las la-search"},null,-1),bs=[ms],gs=i("i",{class:"las la-times text-white"},null,-1),_s=[gs],vs={class:"px-2 flex items-center justify-center"},ps={key:1,class:"px-2 flex items-center"},ys={key:0,class:"las la-filter"},xs={key:1,class:"las la-check"},ks={key:2,class:"ml-1"},ws={key:3,class:"ml-1"},Cs={key:2,id:"custom-buttons"},Ds={id:"crud-buttons",class:"-mx-1 flex flex-wrap w-full md:w-auto"},Ts={key:0,class:"px-1 flex items-center"},Ms=i("i",{class:"lar la-check-square"},null,-1),Ss={class:"px-1 flex items-center"},$s=i("i",{class:"las la-download"},null,-1),Os={class:"flex p-2"},Es={class:"overflow-x-auto flex-auto"},Fs={key:0,class:"table ns-table w-full"},js={class:"text-center px-2 border w-16 py-2"},Ps={key:0,class:"text-left px-2 py-2 w-16 border"},Hs=["onClick"],Rs={class:"w-full flex justify-between items-center"},Ls={class:"flex"},As={class:"h-6 w-6 flex justify-center items-center"},Vs={key:0,class:"las la-sort-amount-up"},Ys={key:1,class:"las la-sort-amount-down"},Is={key:1,class:"text-left px-2 py-2 w-16 border"},Us={key:1},Ns=["colspan"],qs={class:"p-2 flex border-t flex-col md:flex-row justify-between footer"},zs={key:0,id:"grouped-actions",class:"mb-2 md:mb-0 flex justify-between rounded-full ns-crud-input p-1"},Bs={class:"bg-input-disabled",selected:"",value:""},Ws=["value"],Gs={class:"flex"},Ks={class:"items-center flex text-primary mx-4"},Qs={id:"pagination",class:"flex items-center -mx-1"},Js=i("i",{class:"las la-angle-double-left"},null,-1),Zs=[Js],Xs=["onClick"],el=i("i",{class:"las la-angle-double-right"},null,-1),tl=[el];function sl(e,t,s,h,o,l){const u=x("ns-checkbox"),d=x("ns-table-row");return n(),r("div",{id:"crud-table",class:m(["w-full rounded-lg",s.mode!=="light"?"shadow mb-8":""])},[s.mode!=="light"?(n(),r("div",rs,[i("div",ds,[s.createUrl?(n(),r("div",as,[i("a",{href:s.createUrl||"#",class:"rounded-full ns-crud-button text-sm h-10 flex items-center justify-center cursor-pointer px-3 outline-none border"},cs,8,os)])):a("",!0),i("div",fs,[i("div",hs,[O(i("input",{onKeypress:t[0]||(t[0]=H(f=>l.search(),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=f=>e.searchInput=f),type:"text",class:"w-36 md:w-auto bg-transparent outline-none px-2"},null,544),[[E,e.searchInput]]),i("button",{onClick:t[2]||(t[2]=f=>l.search()),class:"rounded-full w-8 h-8 outline-none ns-crud-input-button"},bs),e.searchQuery?(n(),r("button",{key:0,onClick:t[3]||(t[3]=f=>l.cancelSearch()),class:"ml-1 rounded-full w-8 h-8 bg-error-secondary outline-none hover:bg-error-tertiary"},_s)):a("",!0)])]),i("div",vs,[i("button",{onClick:t[4]||(t[4]=f=>l.refresh()),class:"rounded-full text-sm h-10 px-3 outline-none border ns-crud-button"},[i("i",{class:m([e.isRefreshing?"animate-spin":"","las la-sync"])},null,2)])]),l.showQueryFilters?(n(),r("div",ps,[i("button",{onClick:t[5]||(t[5]=f=>l.openQueryFilter()),class:m([e.withFilters?"table-filters-enabled":"table-filters-disabled","ns-crud-button border rounded-full text-sm h-10 px-3 outline-none"])},[e.withFilters?a("",!0):(n(),r("i",ys)),e.withFilters?(n(),r("i",xs)):a("",!0),e.withFilters?a("",!0):(n(),r("span",ks,c(l.__("Filters")),1)),e.withFilters?(n(),r("span",ws,c(l.__("Has Filters")),1)):a("",!0)],2)])):a("",!0),l.headerButtonsComponents.length>0?(n(),r("div",Cs,[(n(!0),r(y,null,D(l.headerButtonsComponents,(f,b)=>(n(),$(L(f),{onRefresh:t[6]||(t[6]=T=>l.refresh()),result:e.result,key:b},null,40,["result"]))),128))])):a("",!0)]),i("div",Ds,[e.selectedEntries.length>0?(n(),r("div",Ts,[i("button",{onClick:t[7]||(t[7]=f=>l.clearSelectedEntries()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 outline-none ns-crud-button border"},[Ms,p(" "+c(l.__("{entries} entries selected").replace("{entries}",e.selectedEntries.length)),1)])])):a("",!0),i("div",Ss,[i("button",{onClick:t[8]||(t[8]=f=>l.downloadContent()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 ns-crud-button border outline-none"},[$s,p(" "+c(l.__("Download")),1)])])])])):a("",!0),i("div",Os,[i("div",Es,[Object.values(e.columns).length>0?(n(),r("table",Fs,[i("thead",null,[i("tr",null,[i("th",js,[S(u,{checked:e.globallyChecked,onChange:t[9]||(t[9]=f=>l.handleGlobalChange(f))},null,8,["checked"])]),e.prependOptions&&e.showOptions?(n(),r("th",Ps)):a("",!0),(n(!0),r(y,null,D(e.columns,(f,b)=>(n(),r("th",{key:b,onClick:T=>l.sort(b),style:ce({"min-width":f.width||"auto"}),class:"cursor-pointer justify-betweenw-40 border text-left px-2 py-2"},[i("div",Rs,[i("span",Ls,c(f.label),1),i("span",As,[f.$direction==="desc"?(n(),r("i",Vs)):a("",!0),f.$direction==="asc"?(n(),r("i",Ys)):a("",!0)])])],12,Hs))),128)),!e.prependOptions&&e.showOptions?(n(),r("th",Is)):a("",!0)])]),i("tbody",null,[e.result.data!==void 0&&e.result.data.length>0?(n(!0),r(y,{key:0},D(e.result.data,(f,b)=>(n(),$(d,{key:b,onUpdated:t[10]||(t[10]=T=>l.refreshRow(T)),columns:e.columns,prependOptions:e.prependOptions,showOptions:e.showOptions,row:f,onReload:t[11]||(t[11]=T=>l.refresh()),onToggled:t[12]||(t[12]=T=>l.handleShowOptions(T))},null,8,["columns","prependOptions","showOptions","row"]))),128)):a("",!0),!e.result||e.result.data.length===0?(n(),r("tr",Us,[i("td",{colspan:Object.values(e.columns).length+2,class:"text-center border py-3"},c(l.__("There is nothing to display...")),9,Ns)])):a("",!0)])])):a("",!0)])]),i("div",qs,[e.bulkActions.length>0?(n(),r("div",zs,[O(i("select",{class:"outline-none bg-transparent","onUpdate:modelValue":t[13]||(t[13]=f=>e.bulkAction=f),id:"grouped-actions"},[i("option",Bs,[k(e.$slots,"bulk-label",{},()=>[p(c(l.__("Bulk Actions")),1)])]),(n(!0),r(y,null,D(e.bulkActions,(f,b)=>(n(),r("option",{class:"bg-input-disabled",key:b,value:f.identifier},c(f.label),9,Ws))),128))],512),[[A,e.bulkAction]]),i("button",{onClick:t[14]||(t[14]=f=>l.bulkDo()),class:"ns-crud-input-button h-8 px-3 outline-none rounded-full flex items-center justify-center"},[k(e.$slots,"bulk-go",{},()=>[p(c(l.__("Apply")),1)])])])):a("",!0),i("div",Gs,[i("div",Ks,c(l.resultInfo),1),i("div",Qs,[e.result.current_page?(n(),r(y,{key:0},[i("a",{href:"javascript:void(0)",onClick:t[15]||(t[15]=f=>{e.page=e.result.first_page,l.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},Zs),(n(!0),r(y,null,D(l.pagination,(f,b)=>(n(),r(y,null,[e.page!=="..."?(n(),r("a",{key:b,class:m([e.page==f?"bg-info-tertiary border-transparent text-white":"","mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"]),onClick:T=>{e.page=f,l.refresh()},href:"javascript:void(0)"},c(f),11,Xs)):a("",!0),e.page==="..."?(n(),r("a",{key:b,href:"javascript:void(0)",class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"},"...")):a("",!0)],64))),256)),i("a",{href:"javascript:void(0)",onClick:t[16]||(t[16]=f=>{e.page=e.result.last_page,l.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},tl)],64)):a("",!0)])])])],2)}const ll=w(is,[["render",sl]]),il={data:()=>({form:{},globallyChecked:!1,formValidation:new N,rows:[]}),emits:["updated","saved"],mounted(){this.loadForm()},props:["src","createUrl","fieldClass","returnUrl","submitUrl","submitMethod","disableTabs","queryParams","popup"],computed:{activeTabFields(){for(let e in this.form.tabs)if(this.form.tabs[e].active)return this.form.tabs[e].fields;return[]},activeTabIdentifier(){for(let e in this.form.tabs)if(this.form.tabs[e].active)return e;return{}}},methods:{__:g,popupResolver:z,toggle(e){for(let t in this.form.tabs)this.form.tabs[t].active=!1;this.form.tabs[e].active=!0},async handleSaved(e,t,s){(await this.loadForm()).form.tabs[t].fields.filter(o=>{o.name===s.name&&e.data.entry&&(o.value=e.data.entry.id)})},handleClose(){this.popup&&this.popupResolver(!1)},submit(){if(this.formValidation.validateForm(this.form).length>0)return M.error(g("Unable to proceed the form is not valid"),g("Close")).subscribe();if(this.formValidation.disableForm(this.form),this.submitUrl===void 0)return M.error(g("No submit URL was provided"),g("Okay")).subscribe();j[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.appendQueryParamas(this.submitUrl),this.formValidation.extractForm(this.form)).subscribe(e=>{if(e.status==="success")if(this.popup)this.popupResolver(e);else{if(this.submitMethod&&this.submitMethod.toLowerCase()==="post"&&this.returnUrl!==!1)return document.location=e.data.editUrl||this.returnUrl;M.info(e.message,g("Okay"),{duration:3e3}).subscribe(),this.$emit("saved",e)}this.formValidation.enableForm(this.form)},e=>{M.error(e.message,void 0,{duration:5e3}).subscribe(),e.data!==void 0&&this.formValidation.triggerError(this.form,e.data),this.formValidation.enableForm(this.form)})},handleGlobalChange(e){this.globallyChecked=e,this.rows.forEach(t=>t.$checked=e)},loadForm(){return new Promise((e,t)=>{j.get(`${this.appendQueryParamas(this.src)}`).subscribe({next:h=>{e(h),this.form=this.parseForm(h.form),B.doAction("ns-crud-form-loaded",this),this.$emit("updated",this.form)},error:h=>{t(h),M.error(h.message,g("Okay"),{duration:0}).subscribe()}})})},appendQueryParamas(e){if(this.queryParams===void 0)return e;const t=Object.keys(this.queryParams).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(this.queryParams[s])}`).join("&");return e.includes("?")?`${e}&${t}`:`${e}?${t}`},parseForm(e){e.main.value=e.main.value===void 0?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0];let t=0;for(let s in e.tabs)t===0&&(e.tabs[s].active=!0),e.tabs[s].active=e.tabs[s].active===void 0?!1:e.tabs[s].active,e.tabs[s].fields=this.formValidation.createFields(e.tabs[s].fields),t++;return e}}},nl={key:0,class:"flex items-center justify-center h-full"},rl={key:0,class:"box-header border-b box-border p-2 flex justify-between items-center"},dl={class:"text-primary font-bold text-lg"},al={class:"flex flex-col"},ol={key:0,class:"flex justify-between items-center"},ul={for:"title",class:"font-bold my-2 text-primary"},cl={key:0},fl={for:"title",class:"text-sm my-2"},hl=["href"],ml=["disabled"],bl=["disabled"],gl={key:0,class:"text-xs text-primary py-1"},_l={key:0},vl={key:1},pl={class:"header flex ml-4",style:{"margin-bottom":"-1px"}},yl=["onClick"],xl={class:"ns-tab-item"},kl={class:"border p-4 rounded"},wl={class:"-mx-4 flex flex-wrap"},Cl={key:0,class:"flex justify-end"},Dl=["disabled"];function Tl(e,t,s,h,o,l){const u=x("ns-spinner"),d=x("ns-close-button"),f=x("ns-field");return n(),r(y,null,[Object.values(e.form).length===0?(n(),r("div",nl,[S(u)])):a("",!0),Object.values(e.form).length>0?(n(),r("div",{key:1,class:m(["form flex-auto",s.popup?"bg-box-background w-95vw md:w-2/3-screen":""]),id:"crud-form"},[s.popup?(n(),r("div",rl,[i("h2",dl,c(s.popup.params.title),1),i("div",null,[S(d,{onClick:t[0]||(t[0]=b=>l.handleClose())})])])):a("",!0),Object.values(e.form).length>0?(n(),r("div",{key:1,class:m(s.popup?"p-2":"")},[i("div",al,[e.form.main?(n(),r("div",ol,[i("label",ul,[e.form.main.name?(n(),r("span",cl,c(e.form.main.label),1)):a("",!0)]),i("div",fl,[s.returnUrl&&!s.popup?(n(),r("a",{key:0,href:s.returnUrl,class:"rounded-full border px-2 py-1 ns-inset-button error"},c(l.__("Go Back")),9,hl)):a("",!0)])])):a("",!0),e.form.main.name?(n(),r(y,{key:1},[i("div",{class:m([e.form.main.disabled?"disabled":e.form.main.errors.length>0?"error":"info","input-group flex border-2 rounded overflow-hidden"])},[O(i("input",{"onUpdate:modelValue":t[1]||(t[1]=b=>e.form.main.value=b),onKeydown:t[2]||(t[2]=H(b=>l.submit(),["enter"])),onKeypress:t[3]||(t[3]=b=>e.formValidation.checkField(e.form.main)),onBlur:t[4]||(t[4]=b=>e.formValidation.checkField(e.form.main)),onChange:t[5]||(t[5]=b=>e.formValidation.checkField(e.form.main)),disabled:e.form.main.disabled,type:"text",class:"flex-auto outline-none h-10 px-2"},null,40,ml),[[E,e.form.main.value]]),i("button",{disabled:e.form.main.disabled,class:m([e.form.main.disabled?"disabled":e.form.main.errors.length>0?"error":"","outline-none px-4 h-10 text-white"]),onClick:t[6]||(t[6]=b=>l.submit())},c(l.__("Save")),11,bl)],2),e.form.main.description&&e.form.main.errors.length===0?(n(),r("p",gl,c(e.form.main.description),1)):a("",!0),(n(!0),r(y,null,D(e.form.main.errors,(b,T)=>(n(),r("p",{key:T,class:"text-xs py-1 text-error-tertiary"},[b.identifier==="required"?(n(),r("span",_l,[k(e.$slots,"error-required",{},()=>[p(c(b.identifier),1)])])):a("",!0),b.identifier==="invalid"?(n(),r("span",vl,[k(e.$slots,"error-invalid",{},()=>[p(c(b.message),1)])])):a("",!0)]))),128))],64)):a("",!0)]),s.disableTabs!=="true"?(n(),r("div",{key:0,id:"tabs-container",class:m([s.popup?"mt-5":"my-5","ns-tab"])},[i("div",pl,[(n(!0),r(y,null,D(e.form.tabs,(b,T)=>(n(),r("div",{key:T,onClick:F=>l.toggle(T),class:m([b.active?"active border border-b-transparent":"inactive border","tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer"]),style:{"margin-right":"-1px"}},c(b.label),11,yl))),128))]),i("div",xl,[i("div",kl,[i("div",wl,[(n(!0),r(y,null,D(l.activeTabFields,(b,T)=>(n(),r("div",{key:`${l.activeTabIdentifier}-${T}`,class:m(s.fieldClass||"px-4 w-full md:w-1/2 lg:w-1/3")},[S(f,{onSaved:F=>l.handleSaved(F,l.activeTabIdentifier,b),onBlur:F=>e.formValidation.checkField(b),onChange:F=>e.formValidation.checkField(b),field:b},null,8,["onSaved","onBlur","onChange","field"])],2))),128))]),e.form.main.name?a("",!0):(n(),r("div",Cl,[i("div",{class:m(["ns-button",e.form.main.disabled?"default":e.form.main.errors.length>0?"error":"info"])},[i("button",{disabled:e.form.main.disabled,onClick:t[7]||(t[7]=b=>l.submit()),class:"outline-none px-4 h-10 border-l"},c(l.__("Save")),9,Dl)],2)]))])])],2)):a("",!0)],2)):a("",!0)],2)):a("",!0)],64)}const Ml=w(il,[["render",Tl]]),Sl={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-input-edge cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},$l={class:"flex flex-auto flex-col mb-2"},Ol=["for"],El={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Fl={class:"sm:text-sm sm:leading-5"},jl=["disabled","id","placeholder"];function Pl(e,t,s,h,o,l){const u=x("ns-field-description");return n(),r("div",$l,[i("label",{for:s.field.name,class:m([l.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[k(e.$slots,"default")],10,Ol),i("div",{class:m([l.hasError?"border-error-primary":"border-input-edge","bg-input-background text-secondary mt-1 relative border-2 rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",El,[i("span",Fl,c(s.leading),1)])):a("",!0),O(i("input",{disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=d=>s.field.value=d),onBlur:t[1]||(t[1]=d=>e.$emit("blur",this)),onChange:t[2]||(t[2]=d=>e.$emit("change",this)),id:s.field.name,type:"date",class:m([l.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,jl),[[E,s.field.value]])],2),S(u,{field:s.field},null,8,["field"])])}const Hl=w(Sl,[["render",Pl]]),Rl={name:"ns-date-range-picker",data(){return{dateRange:{startDate:null,endDate:null}}},components:{DateRangePicker:K},mounted(){this.field.value!==void 0&&(this.dateRange=this.field.value)},watch:{dateRange(){const e={startDate:v(this.dateRange.startDate).format("YYYY-MM-DD HH:mm"),endDate:v(this.dateRange.endDate).format("YYYY-MM-DD HH:mm")};this.field.value=e,this.$emit("change",this)}},methods:{__:g,getFormattedDate(e){return e!==null?v(e).format("YYYY-MM-DD HH:mm"):g("N/D")},clearDate(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Ll={class:"flex flex-auto flex-col mb-2 ns-date-range-picker"},Al=["for"],Vl={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Yl={class:"text-primary sm:text-sm sm:leading-5"},Il=i("i",{class:"las la-times"},null,-1),Ul=[Il],Nl={class:"flex justify-between items-center w-full py-2"},ql={class:"text-xs"},zl={class:"text-xs"};function Bl(e,t,s,h,o,l){const u=x("date-range-picker"),d=x("ns-field-description");return n(),r("div",Ll,[i("label",{for:s.field.name,class:m([l.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[k(e.$slots,"default")],10,Al),i("div",{class:m([l.hasError?"error":"","mt-1 relative flex input-group border-2 rounded-md overflow-hidden focus:shadow-sm"])},[s.leading?(n(),r("div",Vl,[i("span",Yl,c(s.leading),1)])):a("",!0),i("button",{class:"px-3 outline-none bg-error-secondary font-semibold text-white",onClick:t[0]||(t[0]=f=>l.clearDate())},Ul),S(u,{class:"w-full flex items-center bg-input-background",ref:"picker","locale-data":{firstDay:1,format:"yyyy-mm-dd HH:mm:ss"},timePicker:!0,timePicker24Hour:!0,showWeekNumbers:!0,showDropdowns:!0,autoApply:!1,appendToBody:!0,modelValue:o.dateRange,"onUpdate:modelValue":t[1]||(t[1]=f=>o.dateRange=f),disabled:s.field.disabled,linkedCalendars:!0},{input:C(f=>[i("div",Nl,[i("span",ql,c(l.__("Range Starts"))+" : "+c(l.getFormattedDate(f.startDate)),1),i("span",zl,c(l.__("Range Ends"))+" : "+c(l.getFormattedDate(f.endDate)),1)])]),_:1},8,["modelValue","disabled"])],2),S(d,{field:s.field},null,8,["field"])])}const J=w(Rl,[["render",Bl]]),Wl={name:"ns-date-time-picker",props:["field","date"],data(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:v}},computed:{fieldDate(){return this.field?v(this.field.value).isValid()?v(this.field.value):v():this.date?v(this.date):v()}},mounted(){let e=v(this.field.value);e.isValid()?this.setDate(e.format("YYYY-MM-DD HH:mm:ss")):this.setDate(v(ns.date.current).format("YYYY-MM-DD HH:mm:ss"))},methods:{__:g,setDate(e){this.field.value=e}}},Gl={class:"picker mb-2"},Kl={key:0,class:"block leading-5 font-medium text-primary"},Ql={class:"ns-button"},Jl=i("i",{class:"las la-clock text-xl"},null,-1),Zl={key:0,class:"mx-1 text-sm"},Xl={key:0},ei={key:1},ti={key:1,class:"mx-1 text-sm"},si={key:0},li={key:1},ii={key:1,class:"text-sm text-secondary py-1"},ni={key:2,class:"relative z-10 h-0 w-0"};function ri(e,t,s,h,o,l){const u=x("ns-calendar");return n(),r("div",Gl,[s.field&&s.field.label&&s.field.label.length>0?(n(),r("label",Kl,c(s.field.label),1)):a("",!0),i("div",Ql,[i("button",{onClick:t[0]||(t[0]=d=>o.visible=!o.visible),class:m([s.field&&s.field.label&&s.field.label.length>0?"mt-1 border border-input-edge":"","shadow rounded cursor-pointer w-full p-1 flex items-center text-primary"])},[Jl,s.field?(n(),r("span",Zl,[[null,"",void 0].includes(s.field.value)?a("",!0):(n(),r("span",Xl,c(l.fieldDate.format("YYYY-MM-DD HH:mm")),1)),[null,"",void 0].includes(s.field.value)?(n(),r("span",ei,"N/A")):a("",!0)])):a("",!0),s.date?(n(),r("span",ti,[[null,"",void 0].includes(s.date)?a("",!0):(n(),r("span",si,c(l.fieldDate.format("YYYY-MM-DD HH:mm")),1)),[null,"",void 0].includes(s.date)?(n(),r("span",li,"N/A")):a("",!0)])):a("",!0)],2)]),s.field?(n(),r("p",ii,c(s.field.description),1)):a("",!0),o.visible?(n(),r("div",ni,[i("div",{class:m([s.field&&s.field.label&&s.field.label.length>0?"-mt-4":"mt-2","absolute w-72 shadow-xl rounded ns-box anim-duration-300 zoom-in-entrance flex flex-col"])},[s.field?(n(),$(u,{key:0,onOnClickOut:t[1]||(t[1]=d=>o.visible=!1),onSet:t[2]||(t[2]=d=>l.setDate(d)),visible:o.visible,date:s.field.value},null,8,["visible","date"])):a("",!0),s.date?(n(),$(u,{key:1,onOnClickOut:t[3]||(t[3]=d=>o.visible=!1),onSet:t[4]||(t[4]=d=>l.setDate(d)),visible:o.visible,date:s.date},null,8,["visible","date"])):a("",!0)],2)])):a("",!0)])}const Z=w(Wl,[["render",ri]]),di={name:"ns-datepicker",components:{nsCalendar:Q},props:["label","date","format"],computed:{formattedDate(){return v(this.date).format(this.format||"YYYY-MM-DD HH:mm:ss")}},data(){return{visible:!1}},mounted(){},methods:{__:g,setDate(e){this.$emit("set",e)}}},ai={class:"picker"},oi={class:"ns-button"},ui=i("i",{class:"las la-clock text-2xl"},null,-1),ci={class:"mx-1 text-sm"},fi={key:0},hi={key:1},mi={key:0,class:"relative h-0 w-0 -mb-2"},bi={class:"w-72 mt-2 shadow-lg anim-duration-300 zoom-in-entrance flex flex-col ns-floating-panel"};function gi(e,t,s,h,o,l){const u=x("ns-calendar");return n(),r("div",ai,[i("div",oi,[i("button",{onClick:t[0]||(t[0]=d=>o.visible=!o.visible),class:"rounded cursor-pointer border border-input-edge shadow w-full px-1 py-1 flex items-center text-primary"},[ui,i("span",ci,[i("span",null,c(s.label||l.__("Date"))+" : ",1),s.date?(n(),r("span",fi,c(l.formattedDate),1)):(n(),r("span",hi,c(l.__("N/A")),1))])])]),o.visible?(n(),r("div",mi,[i("div",bi,[S(u,{visible:o.visible,onOnClickOut:t[1]||(t[1]=d=>o.visible=!1),date:s.date,onSet:t[2]||(t[2]=d=>l.setDate(d))},null,8,["visible","date"])])])):a("",!0)])}const _i=w(di,[["render",gi]]),vi={name:"ns-daterange-picker",data(){return{leftCalendar:v(),rightCalendar:v().add(1,"months"),rangeViewToggled:!1,clickedOnCalendar:!1}},components:{DateRangePicker:K},mounted(){this.field.value||this.clearDate(),document.addEventListener("click",this.checkClickedItem)},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},watch:{leftCalendar(){this.leftCalendar.isSame(this.rightCalendar,"month")&&this.rightCalendar.add(1,"months")},rightCalendar(){this.rightCalendar.isSame(this.leftCalendar,"month")&&this.leftCalendar.sub(1,"months")}},methods:{__:g,setDateRange(e,t){this.field.value[e]=t,v(this.field.value.startDate).isBefore(v(this.field.value.endDate))&&this.$emit("change",this.field)},getFormattedDate(e){return e!==null?v(e).format("YYYY-MM-DD HH:mm"):g("N/D")},clearDate(){this.field.value={startDate:null,endDate:null}},toggleRangeView(){this.rangeViewToggled=!this.rangeViewToggled},handleDateRangeClick(){this.clickedOnCalendar=!0},checkClickedItem(e){this.$el.getAttribute("class").split(" ").includes("ns-daterange-picker")&&(!this.$el.contains(e.srcElement)&&!this.clickedOnCalendar&&this.rangeViewToggled&&(this.$emit("blur",this.field),this.toggleRangeView()),setTimeout(()=>{this.clickedOnCalendar=!1},100))}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"},startDateFormatted(){return this.field.value!==void 0&&v(this.field.value.startDate).isValid()?v(this.field.value.startDate).format("YYYY-MM-DD HH:mm"):!1},endDateFormatted(){return this.field.value!==void 0&&v(this.field.value.endDate).isValid()?v(this.field.value.endDate).format("YYYY-MM-DD HH:mm"):!1}},props:["placeholder","leading","type","field"]},pi=["for"],yi={class:"border border-input-edge rounded-tl rounded-bl flex-auto flex"},xi={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ki={class:"text-primary sm:text-sm sm:leading-5"},wi=i("span",{class:"mr-1"},[i("i",{class:"las la-clock text-2xl"})],-1),Ci={class:""},Di=i("span",{class:"mx-2"},"â€”",-1),Ti=i("span",{class:"mr-1"},[i("i",{class:"las la-clock text-2xl"})],-1),Mi={class:""},Si=i("i",{class:"las la-times"},null,-1),$i=[Si],Oi={key:0,class:"relative h-0 w-0"},Ei={class:"z-10 absolute md:w-[550px] w-[225px] mt-2 shadow-lg anim-duration-300 zoom-in-entrance flex flex-col"},Fi={class:"flex flex-col md:flex-row bg-box-background rounded-lg"},ji=i("div",{class:"flex-auto border-l border-r"},null,-1);function Pi(e,t,s,h,o,l){const u=x("ns-calendar"),d=x("ns-field-description");return n(),r("div",{onClick:t[4]||(t[4]=f=>l.handleDateRangeClick()),class:"flex flex-auto flex-col mb-2 ns-daterange-picker"},[i("label",{for:s.field.name,class:m([l.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[k(e.$slots,"default")],10,pi),i("div",{class:m([l.hasError?"error":"","mt-1 relative flex input-group bg-input-background rounded overflow-hidden shadow focus:shadow-sm"])},[i("div",yi,[s.leading?(n(),r("div",xi,[i("span",ki,c(s.leading),1)])):a("",!0),i("div",{class:"flex flex-auto p-1 text-primary text-sm items-center cursor-pointer",onClick:t[0]||(t[0]=f=>l.toggleRangeView())},[wi,i("span",Ci,c(l.startDateFormatted||l.__("N/A")),1),Di,Ti,i("span",Mi,c(l.endDateFormatted||l.__("N/A")),1)])]),i("button",{class:"px-3 outline-none font-bold bg-error-tertiary",onClick:t[1]||(t[1]=f=>l.clearDate())},$i)],2),o.rangeViewToggled?(n(),r("div",Oi,[i("div",Ei,[i("div",Fi,[S(u,{class:"md:w-1/2 w-full",range:[l.startDateFormatted,l.endDateFormatted],side:"left",date:s.field.value.startDate,"selected-range":s.field.value,onSet:t[2]||(t[2]=f=>l.setDateRange("startDate",f))},null,8,["range","date","selected-range"]),ji,S(u,{class:"md:w-1/2 w-full",range:[l.startDateFormatted,l.endDateFormatted],side:"right",date:s.field.value.endDate,"selected-range":s.field.value,onSet:t[3]||(t[3]=f=>l.setDateRange("endDate",f))},null,8,["range","date","selected-range"])])])])):a("",!0),S(d,{field:s.field},null,8,["field"])])}const Hi=w(vi,[["render",Pi]]),Ri={name:"ns-dragzone",props:["raw-widgets","raw-columns"],components:{draggable:ye},data(){return{widgets:[],dragged:null,columns:[]}},mounted(){this.widgets=this.rawWidgets.map(e=>({name:e.name,componentName:e.component,className:e.className,component:I(window[e.component])})),this.columns=this.rawColumns.map(e=>(e.widgets.forEach(t=>{t.component=I(window[t.identifier]),t.componentName=t.identifier,t.className=t.class_name}),e))},methods:{__:g,handleChange(e,t){setTimeout(()=>{nsHttpClient.post("/api/users/widgets",{column:e}).subscribe(s=>{},s=>M.error(s.message||g("An unpexpected error occured while using the widget.")).subscribe())},100)},handleRemoveWidget(e,t){const s=t.widgets.indexOf(e);t.widgets.splice(s,1),this.handleChange(t)},async openWidgetAdded(e){try{const t=this.columns.filter(u=>u.name!==e.name?u.widgets.length>0:!1).map(u=>u.widgets).flat(),s=e.widgets.map(u=>u.componentName),h=this.widgets.filter(u=>!t.map(f=>f.componentName).includes(u.componentName)).map(u=>({value:u,label:u.name})),o=await new Promise((u,d)=>{const f=h.filter(b=>s.includes(b.componentName));Popup.show(fe,{value:f,resolve:u,reject:d,type:"multiselect",options:h,label:g("Choose Widget"),description:g("Select with widget you want to add to the column.")})}),l=this.columns.indexOf(e);this.columns[l].widgets=o,this.handleChange(this.columns[l])}catch(t){console.log(t)}}}},Li={class:"-mx-4 mt-4 flex flex-col md:flex-row-reverse flex-wrap"},Ai={class:"mb-4"},Vi=["onClick"],Yi={class:"text-sm text-primary",type:"info"};function Ii(e,t,s,h,o,l){const u=x("draggable");return n(),r("div",Li,[(n(!0),r(y,null,D(o.columns,d=>(n(),$(u,{key:d.name,onChange:f=>l.handleChange(d,f),"item-key":"componentName",group:d.parent,list:d.widgets,class:"mb-4 px-4 w-full lg:w-1/2 xl:w-1/3"},{item:C(({element:f})=>[i("div",Ai,[(n(),$(L(f.component),{onOnRemove:b=>l.handleRemoveWidget(f,d)},null,40,["onOnRemove"]))])]),footer:C(()=>[i("div",{onClick:f=>l.openWidgetAdded(d),class:"cursor-pointer border-2 border-dashed h-16 flex items-center justify-center"},[i("span",Yi,c(l.__("Click here to add widgets")),1)],8,Vi)]),_:2},1032,["onChange","group","list"]))),128))])}const Ui=w(Ri,[["render",Ii]]),Ni={emits:["blur","change","saved","keypress"],data:()=>({}),mounted(){},components:{nsDateRangePicker:J,nsDateTimePicker:Z,nsSwitch:G},computed:{isInputField(){return["text","password","email","number","tel"].includes(this.field.type)},isHiddenField(){return["hidden"].includes(this.field.type)},isDateField(){return["date"].includes(this.field.type)},isSelectField(){return["select"].includes(this.field.type)},isSearchField(){return["search-select"].includes(this.field.type)},isTextarea(){return["textarea"].includes(this.field.type)},isCheckbox(){return["checkbox"].includes(this.field.type)},isMultiselect(){return["multiselect"].includes(this.field.type)},isInlineMultiselect(){return["inline-multiselect"].includes(this.field.type)},isSelectAudio(){return["select-audio"].includes(this.field.type)},isSwitch(){return["switch"].includes(this.field.type)},isMedia(){return["media"].includes(this.field.type)},isCkEditor(){return["ckeditor"].includes(this.field.type)},isDateTimePicker(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker(){return["daterangepicker"].includes(this.field.type)},isCustom(){return["custom"].includes(this.field.type)}},props:["field"],methods:{handleSaved(e,t){this.$emit("saved",t)},addOption(e){this.field.type==="select"&&this.field.options.forEach(s=>s.selected=!1),e.selected=!0;const t=this.field.options.indexOf(e);this.field.options.splice(t,1),this.field.options.unshift(e),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:e})},changeTouchedState(e,t){t.stopPropagation&&(t.stopPropagation(),e.touched=!0,this.$emit("change",e))},refreshMultiselect(){this.field.value=this.field.options.filter(e=>e.selected).map(e=>e.value)},removeOption(e){e.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:e})}}},qi=["name","value"],zi={key:1,class:"flex flex-auto mb-2"},Bi=["innerHTML"],Wi=["innerHTML"],Gi=["innerHTML"],Ki=["innerHTML"],Qi=["innerHTML"],Ji=["innerHTML"],Zi=["innerHTML"],Xi=["innerHTML"],en=["innerHTML"],tn=["innerHTML"],sn=["innerHTML"],ln=["innerHTML"],nn=["innerHTML"],rn=["innerHTML"];function dn(e,t,s,h,o,l){const u=x("ns-input"),d=x("ns-date-time-picker"),f=x("ns-date"),b=x("ns-media-input"),T=x("ns-select"),F=x("ns-search-select"),Y=x("ns-daterange-picker"),te=x("ns-select-audio"),se=x("ns-textarea"),le=x("ns-checkbox"),ie=x("ns-inline-multiselect"),ne=x("ns-multiselect"),re=x("ns-ckeditor"),de=x("ns-switch");return n(),r(y,null,[l.isHiddenField?(n(),r("input",{key:0,type:"hidden",name:s.field.name,value:s.field.value},null,8,qi)):a("",!0),l.isHiddenField?a("",!0):(n(),r("div",zi,[l.isInputField?(n(),$(u,{key:0,onKeypress:t[0]||(t[0]=_=>l.changeTouchedState(s.field,_)),onChange:t[1]||(t[1]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,Bi)]),_:1},8,["field"])):a("",!0),l.isDateTimePicker?(n(),$(d,{key:1,onBlur:t[2]||(t[2]=_=>e.$emit("blur",s.field)),onChange:t[3]||(t[3]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,Wi)]),_:1},8,["field"])):a("",!0),l.isDateField?(n(),$(f,{key:2,onBlur:t[4]||(t[4]=_=>e.$emit("blur",s.field)),onChange:t[5]||(t[5]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,Gi)]),_:1},8,["field"])):a("",!0),l.isMedia?(n(),$(b,{key:3,onBlur:t[6]||(t[6]=_=>e.$emit("blur",s.field)),onChange:t[7]||(t[7]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,Ki)]),_:1},8,["field"])):a("",!0),l.isSelectField?(n(),$(T,{key:4,onChange:t[8]||(t[8]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,Qi)]),_:1},8,["field"])):a("",!0),l.isSearchField?(n(),$(F,{key:5,field:s.field,onSaved:t[9]||(t[9]=_=>l.handleSaved(s.field,_)),onChange:t[10]||(t[10]=_=>l.changeTouchedState(s.field,_))},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,Ji)]),_:1},8,["field"])):a("",!0),l.isDateRangePicker?(n(),$(Y,{key:6,onBlur:t[11]||(t[11]=_=>e.$emit("blur",s.field)),onChange:t[12]||(t[12]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,Zi)]),_:1},8,["field"])):a("",!0),l.isSelectAudio?(n(),$(te,{key:7,onBlur:t[13]||(t[13]=_=>e.$emit("blur",s.field)),onChange:t[14]||(t[14]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,Xi)]),_:1},8,["field"])):a("",!0),l.isTextarea?(n(),$(se,{key:8,onBlur:t[15]||(t[15]=_=>e.$emit("blur",s.field)),onChange:t[16]||(t[16]=_=>l.changeTouchedState(s.field,_)),field:s.field},{description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,en)]),default:C(()=>[i("template",null,[p(c(s.field.label),1)])]),_:1},8,["field"])):a("",!0),l.isCheckbox?(n(),$(le,{key:9,onBlur:t[17]||(t[17]=_=>e.$emit("blur",s.field)),onChange:t[18]||(t[18]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,tn)]),_:1},8,["field"])):a("",!0),l.isInlineMultiselect?(n(),$(ie,{key:10,onBlur:t[19]||(t[19]=_=>e.$emit("blur",s.field)),onUpdate:t[20]||(t[20]=_=>l.changeTouchedState(s.field,_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,sn)]),_:1},8,["field"])):a("",!0),l.isMultiselect?(n(),$(ne,{key:11,onAddOption:t[21]||(t[21]=_=>l.addOption(_)),onRemoveOption:t[22]||(t[22]=_=>l.removeOption(_)),field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,ln)]),_:1},8,["field"])):a("",!0),l.isCkEditor?(n(),$(re,{key:12,field:s.field},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,nn)]),_:1},8,["field"])):a("",!0),l.isSwitch?(n(),$(de,{key:13,field:s.field,onChange:t[23]||(t[23]=_=>l.changeTouchedState(s.field,_))},{default:C(()=>[p(c(s.field.label),1)]),description:C(()=>[i("span",{innerHTML:s.field.description||""},null,8,rn)]),_:1},8,["field"])):a("",!0),l.isCustom?(n(),$(ue,{key:14},[(n(),$(L(s.field.component),{field:s.field,onBlur:t[24]||(t[24]=_=>e.$emit("blur",s.field)),onChange:t[25]||(t[25]=_=>l.changeTouchedState(s.field,_))},null,40,["field"]))],1024)):a("",!0)]))],64)}const an=w(Ni,[["render",dn]]),on={name:"ns-field-detail",props:["field"],methods:{__:g}},un={key:0,class:"text-xs ns-description"};function cn(e,t,s,h,o,l){return n(),r(y,null,[!s.field.errors||s.field.errors.length===0?(n(),r("p",un,c(s.field.description),1)):a("",!0),(n(!0),r(y,null,D(s.field.errors,(u,d)=>(n(),r("p",{key:d,class:"text-xs ns-error"},[u.identifier==="required"?k(e.$slots,u.identifier,{key:0},()=>[p(c(l.__("This field is required.")),1)]):a("",!0),u.identifier==="email"?k(e.$slots,u.identifier,{key:1},()=>[p(c(l.__("This field must contain a valid email address.")),1)]):a("",!0),u.identifier==="invalid"?k(e.$slots,u.identifier,{key:2},()=>[p(c(u.message),1)]):a("",!0),u.identifier==="same"?k(e.$slots,u.identifier,{key:3},()=>[p(c(l.__('This field must be similar to "{other}""').replace("{other}",u.fields.filter(f=>f.name===u.rule.value)[0].label)),1)]):a("",!0),u.identifier==="min"?k(e.$slots,u.identifier,{key:4},()=>[p(c(l.__('This field must have at least "{length}" characters"').replace("{length}",u.rule.value)),1)]):a("",!0),u.identifier==="max"?k(e.$slots,u.identifier,{key:5},()=>[p(c(l.__('This field must have at most "{length}" characters"').replace("{length}",u.rule.value)),1)]):a("",!0),u.identifier==="different"?k(e.$slots,u.identifier,{key:6},()=>[p(c(l.__('This field must be different from "{other}""').replace("{other}",u.fields.filter(f=>f.name===u.rule.value)[0].label)),1)]):a("",!0)]))),128))],64)}const fn=w(on,[["render",cn]]),hn={props:["className","buttonClass","type"]};function mn(e,t,s,h,o,l){return n(),r("button",{class:m([s.type?s.type:s.buttonClass,"ns-inset-button rounded-full h-8 w-8 border items-center justify-center"])},[i("i",{class:m([s.className,"las"])},null,2)],2)}const bn=w(hn,[["render",mn]]),gn={name:"ns-input-label",props:["field"],data(){return{tags:[],searchField:"",focused:!1,optionsToKeyValue:{}}},methods:{addOption(e){let t;this.optionSuggestions.length===1&&e===void 0?t=this.optionSuggestions[0]:e!==void 0&&(t=e),t!==void 0&&(this.field.value.filter(h=>h===t.value).length>0||(this.searchField="",this.field.value.push(t.value),this.$emit("change",this.field)))},removeOption(e){const t=this.field.value.filter(s=>s!==e);this.field.value=t}},mounted(){if(this.$refs.searchField.addEventListener("focus",e=>{this.focused=!0}),this.$refs.searchField.addEventListener("blur",e=>{setTimeout(()=>{this.focused=!1},200)}),this.field.value.length===void 0)try{this.field.value=JSON.parse(this.field.value)}catch{this.field.value=[]}this.field.options.forEach(e=>{this.optionsToKeyValue[e.value]=e.label})},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},optionSuggestions(){if(typeof this.field.value.map=="function"){const e=this.field.value.map(t=>t.value);return this.field.options.filter(t=>!e.includes(t.value)&&this.focused>0&&(t.label.search(this.searchField)>-1||t.value.search(this.searchField)>-1))}return[]},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":""}},props:["placeholder","leading","type","field"]},_n={class:"flex flex-col mb-2 flex-auto ns-input"},vn=["for"],pn={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},yn={class:"leading sm:text-sm sm:leading-5"},xn=["disabled","id","type","placeholder"],kn={class:"rounded shadow bg-box-elevation-hover flex mr-1 mb-1"},wn={class:"p-2 flex items-center text-primary"},Cn={class:"flex items-center justify-center px-2"},Dn=["onClick"],Tn=i("i",{class:"las la-times-circle"},null,-1),Mn=[Tn],Sn={class:"relative"},$n=["placeholder"],On={class:"h-0 absolute w-full z-10"},En={class:"shadow bg-box-background absoluve bottom-0 w-full max-h-80 overflow-y-auto"},Fn=["onClick"];function jn(e,t,s,h,o,l){const u=x("ns-field-description");return n(),r("div",_n,[s.field.label&&s.field.label.length>0?(n(),r("label",{key:0,for:s.field.name,class:m([l.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[k(e.$slots,"default")],10,vn)):a("",!0),i("div",{class:m([(l.hasError?"has-error":"is-pristine")+" "+(s.field.description||s.field.errors>0?"mb-2":""),"mt-1 relative border-2 rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",pn,[i("span",yn,c(s.leading),1)])):a("",!0),i("div",{disabled:s.field.disabled,id:s.field.name,type:s.field.type,class:m([l.inputClass,"flex sm:text-sm sm:leading-5 p-1 flex-wrap"]),placeholder:s.field.placeholder||""},[(n(!0),r(y,null,D(s.field.value,d=>(n(),r("div",kn,[i("div",wn,c(o.optionsToKeyValue[d]),1),i("div",Cn,[i("div",{onClick:f=>l.removeOption(d),class:"cursor-pointer rounded-full bg-error-tertiary h-5 w-5 flex items-center justify-center"},Mn,8,Dn)])]))),256)),i("div",Sn,[O(i("input",{onChange:t[0]||(t[0]=d=>d.stopPropagation()),onKeydown:t[1]||(t[1]=H(d=>l.addOption(),["enter"])),ref:"searchField","onUpdate:modelValue":t[2]||(t[2]=d=>o.searchField=d),type:"text",class:"w-auto p-2 border-b border-dashed bg-transparent",placeholder:s.field.placeholder||"Start searching here..."},null,40,$n),[[E,o.searchField]]),i("div",On,[i("div",En,[i("ul",null,[(n(!0),r(y,null,D(l.optionSuggestions,d=>(n(),r("li",{onClick:f=>l.addOption(d),class:"p-2 hover:bg-box-elevation-hover text-primary cursor-pointer"},c(d.label),9,Fn))),256))])])])])],10,xn)],2),S(u,{field:s.field},null,8,["field"])])}const Pn=w(gn,[["render",jn]]),Hn={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Rn={class:"flex flex-col mb-2 flex-auto ns-input"},Ln=["for"],An={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Vn={class:"leading sm:text-sm sm:leading-5"},Yn=["disabled","id","type","placeholder"];function In(e,t,s,h,o,l){const u=x("ns-field-description");return n(),r("div",Rn,[s.field.label&&s.field.label.length>0?(n(),r("label",{key:0,for:s.field.name,class:m([l.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[k(e.$slots,"default")],10,Ln)):a("",!0),i("div",{class:m([(l.hasError?"has-error":"is-pristine")+" "+(s.field.description||s.field.errors>0?"mb-2":""),"mt-1 relative overflow-hidden border-2 rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",An,[i("span",Vn,c(s.leading),1)])):a("",!0),O(i("input",{disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=d=>s.field.value=d),id:s.field.name,type:s.type||s.field.type||"text",class:m([l.inputClass,"block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.field.placeholder||""},null,10,Yn),[[W,s.field.value]])],2),S(u,{field:s.field},null,8,["field"])])}const Un=w(Hn,[["render",In]]),Nn={data:()=>({clicked:!1,_save:0}),props:["type","to","href","target"],computed:{buttonclass(){switch(this.type){case"info":return"shadow bg-blue-400 text-white";case"success":return"shadow bg-green-400 text-white";case"error":return"shadow bg-red-400 text-white";case"warning":return"shadow bg-orange-400 text-white";default:return"shadow bg-white text-gray-800"}}}},qn={class:"flex"},zn=["target","href"];function Bn(e,t,s,h,o,l){return n(),r("div",qn,[s.href?(n(),r("a",{key:0,target:s.target,href:s.href,class:m([l.buttonclass,"rounded cursor-pointer py-2 px-3 font-semibold"])},[k(e.$slots,"default")],10,zn)):a("",!0)])}const Wn=w(Nn,[["render",Bn]]),X={zip:"la-file-archive",tar:"la-file-archive",bz:"la-file-archive","7z":"la-file-archive",css:"la-file-code",js:"la-file-code",json:"la-file-code",docx:"la-file-word",doc:"la-file-word",mp3:"la-file-audio",aac:"la-file-audio",ods:"la-file-audio",pdf:"la-file-pdf",csv:"la-file-csv",avi:"la-file-video",mpeg:"la-file-video",mpkg:"la-file-video",unknown:"la-file"},Gn={name:"ns-media",props:["popup"],components:{VueUpload:xe},data(){return{searchFieldDebounce:null,searchField:"",pages:[{label:g("Upload"),name:"upload",selected:!1},{label:g("Gallery"),name:"gallery",selected:!0}],resources:[],isDragging:!1,response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},fileIcons:X,queryPage:1,bulkSelect:!1,files:[]}},mounted(){this.popupCloser();const e=this.pages.filter(t=>t.name==="gallery")[0];this.select(e)},watch:{searchField(){clearTimeout(this.searchFieldDebounce),this.searchFieldDebounce=setTimeout(()=>{this.loadGallery(1)},500)},files:{handler(){this.uploadFiles()},deep:!0}},computed:{postMedia(){return B.applyFilters("http-client-url","/api/medias")},currentPage(){return this.pages.filter(e=>e.selected)[0]},hasOneSelected(){return this.response.data.filter(e=>e.selected).length>0},selectedResource(){return this.response.data.filter(e=>e.selected)[0]},csrf(){return ns.authentication.csrf},isPopup(){return typeof this.popup<"u"},user_id(){return this.isPopup&&this.popup.params.user_id||0},panelOpened(){return!this.bulkSelect&&this.hasOneSelected},popupInstance(){return this.popup}},methods:{popupCloser:q,__:g,cancelBulkSelect(){this.bulkSelect=!1,this.response.data.forEach(e=>e.selected=!1)},openError(e){P.show(U,{title:g("An error occured"),message:e.error.message||g("An unexpected error occured.")})},deleteSelected(){P.show(V,{title:g("Confirm Your Action"),message:g("You're about to delete selected resources. Would you like to proceed?"),onAction:e=>{e&&j.post("/api/medias/bulk-delete",{ids:this.response.data.filter(t=>t.selected).map(t=>t.id)}).subscribe({next:t=>{M.success(t.message).subscribe(),this.loadGallery()},error:t=>{M.error(t.message).subscribe()}})}})},loadUploadScreen(){setTimeout(()=>{this.setDropZone()},1e3)},setDropZone(){const e=document.getElementById("dropping-zone");e.addEventListener("dragenter",s=>this.preventDefaults(s),!1),e.addEventListener("dragleave",s=>this.preventDefaults(s),!1),e.addEventListener("dragover",s=>this.preventDefaults(s),!1),e.addEventListener("drop",s=>this.preventDefaults(s),!1),["dragenter","dragover"].forEach(s=>{e.addEventListener(s,()=>{this.isDragging=!0})}),["dragleave","drop"].forEach(s=>{e.addEventListener(s,()=>{this.isDragging=!1})}),e.addEventListener("drop",s=>this.handleDrop(s),!1),this.$refs.files.addEventListener("change",s=>this.processFiles(s.currentTarget.files))},async uploadFiles(){const e=this.files.filter(t=>t.uploaded===!1&&t.progress===0&&t.failed===!1);for(let t=0;t<e.length;t++){const s=e[t];try{s.progress=1;const h=await new Promise((o,l)=>{const u=new FormData;u.append("file",s.file),j.post("/api/medias",u,{headers:{"Content-Type":"multipart/form-data"}}).subscribe({next:d=>{s.uploaded=!0,s.progress=100,o(d)},error:d=>{e[t].failed=!0,e[t].error=d}})})}catch{s.failed=!0}}},handleDrop(e){this.processFiles(e.dataTransfer.files),e.preventDefault(),e.stopPropagation()},preventDefaults(e){e.preventDefault(),e.stopPropagation()},getAllParents(e){let t=[];for(;e.parentNode&&e.parentNode.nodeName.toLowerCase()!="body";)e=e.parentNode,t.push(e);return t},triggerManualUpload(e){const t=e.target;if(t!==null){const h=this.getAllParents(t).map(o=>{const l=o.getAttribute("class");if(l)return l.split(" ")});if(t.getAttribute("class")){const o=t.getAttribute("class").split(" ");h.push(o)}h.flat().includes("ns-scrollbar")||this.$refs.files.click()}},processFiles(e){Array.from(e).filter(h=>(console.log(this),Object.values(window.ns.medias.mimes).includes(h.type))).forEach(h=>{this.files.unshift({file:h,uploaded:!1,failed:!1,progress:0})})},select(e){this.pages.forEach(t=>t.selected=!1),e.selected=!0,e.name==="gallery"?this.loadGallery():e.name==="upload"&&this.loadUploadScreen()},loadGallery(e=null){e=e===null?this.queryPage:e,this.queryPage=e,j.get(`/api/medias?page=${e}&user_id=${this.user_id}${this.searchField.length>0?`&search=${this.searchField}`:""}`).subscribe(t=>{t.data.forEach(s=>s.selected=!1),this.response=t})},submitChange(e,t){j.put(`/api/medias/${t.id}`,{name:e.srcElement.textContent}).subscribe({next:s=>{t.fileEdit=!1,M.success(s.message,"OK").subscribe()},error:s=>{t.fileEdit=!1,M.success(s.message||g("An unexpected error occured."),"OK").subscribe()}})},useSelectedEntries(){this.popup.params.resolve({event:"use-selected",value:this.response.data.filter(e=>e.selected)}),this.popup.close()},selectResource(e){this.bulkSelect||this.response.data.forEach((t,s)=>{s!==this.response.data.indexOf(e)&&(t.selected=!1)}),e.fileEdit=!1,e.selected=!e.selected},isImage(e){return Object.keys(ns.medias.imageMimes).includes(e.extension)}}},Kn={class:"sidebar w-48 md:h-full flex-shrink-0"},Qn={class:"text-xl font-bold my-4 text-center"},Jn={class:"sidebar-menus flex md:block mt-8"},Zn=["onClick"],Xn={key:0,class:"content flex-auto w-full flex-col overflow-hidden flex"},er={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},tr=i("div",null,null,-1),sr={class:"cursor-pointer text-lg md:text-xl font-bold text-center text-primary mb-4"},lr={style:{display:"none"},type:"file",name:"",multiple:"",ref:"files",id:""},ir={class:"rounded bg-box-background shadow w-full md:w-2/3 text-primary h-56 overflow-y-auto ns-scrollbar p-2"},nr={key:0},rr={key:0,class:"rounded bg-info-primary flex items-center justify-center text-xs p-2"},dr=["onClick"],ar=i("i",{class:"las la-eye"},null,-1),or={class:"ml-2"},ur={key:1,class:"h-full w-full items-center justify-center flex text-center text-soft-tertiary"},cr={key:1,class:"content flex-auto flex-col w-full overflow-hidden flex"},fr={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},hr=i("div",null,null,-1),mr={class:"flex flex-auto overflow-hidden"},br={class:"shadow ns-grid flex flex-auto flex-col overflow-y-auto ns-scrollbar"},gr={class:"p-2 border-b border-box-background"},_r={class:"ns-input border-2 rounded border-input-edge bg-input-background flex"},vr=["placeholder"],pr={key:0,class:"flex items-center justify-center w-20 p-1"},yr={class:"flex flex-auto"},xr={class:"p-2 overflow-x-auto"},kr={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"},wr={class:"p-2"},Cr=["onClick"],Dr=["src","alt"],Tr={key:1,class:"object-cover h-full flex items-center justify-center"},Mr={key:0,class:"flex flex-auto items-center justify-center"},Sr={class:"text-2xl font-bold"},$r={id:"preview",class:"ns-media-preview-panel hidden lg:block w-64 flex-shrink-0"},Or={key:0,class:"h-64 bg-gray-800 flex items-center justify-center"},Er=["src","alt"],Fr={key:1,class:"object-cover h-full flex items-center justify-center"},jr={key:1,id:"details",class:"p-4 text-gray-700 text-sm"},Pr={class:"flex flex-col mb-2"},Hr={class:"font-bold block"},Rr=["contenteditable"],Lr={class:"flex flex-col mb-2"},Ar={class:"font-bold block"},Vr={class:"flex flex-col mb-2"},Yr={class:"font-bold block"},Ir={class:"py-2 pr-2 flex ns-media-footer flex-shrink-0 justify-between"},Ur={class:"flex -mx-2 flex-shrink-0"},Nr={key:0,class:"px-2"},qr={class:"ns-button shadow rounded overflow-hidden info"},zr=i("i",{class:"las la-times"},null,-1),Br={key:1,class:"px-2"},Wr={class:"ns-button shadow rounded overflow-hidden info"},Gr=i("i",{class:"las la-check-circle"},null,-1),Kr={key:2,class:"px-2"},Qr={class:"ns-button shadow rounded overflow-hidden warning"},Jr=i("i",{class:"las la-trash"},null,-1),Zr={class:"flex-shrink-0 -mx-2 flex"},Xr={class:"px-2"},ed={class:"rounded shadow overflow-hidden flex text-sm"},td=["disabled"],sd=i("hr",{class:"border-r border-gray-700"},null,-1),ld=["disabled"],id={key:0,class:"px-2"},nd={class:"ns-button info"};function rd(e,t,s,h,o,l){const u=x("ns-close-button");return n(),r("div",{class:m(["flex md:flex-row flex-col ns-box shadow-xl overflow-hidden",l.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full"]),id:"ns-media"},[i("div",Kn,[i("h3",Qn,c(l.__("Medias Manager")),1),i("ul",Jn,[(n(!0),r(y,null,D(o.pages,(d,f)=>(n(),r("li",{onClick:b=>l.select(d),class:m(["py-2 px-3 cursor-pointer border-l-8",d.selected?"active":""]),key:f},c(d.label),11,Zn))),128))])]),l.currentPage.name==="upload"?(n(),r("div",Xn,[l.isPopup?(n(),r("div",er,[tr,i("div",null,[S(u,{onClick:t[0]||(t[0]=d=>l.popupInstance.close())})])])):a("",!0),i("div",{id:"dropping-zone",onClick:t[1]||(t[1]=d=>l.triggerManualUpload(d)),class:m([o.isDragging?"border-dashed border-2":"","flex flex-auto m-2 p-2 flex-col border-info-primary items-center justify-center"])},[i("h3",sr,c(l.__("Click Here Or Drop Your File To Upload")),1),i("input",lr,null,512),i("div",ir,[o.files.length>0?(n(),r("ul",nr,[(n(!0),r(y,null,D(o.files,(d,f)=>(n(),r("li",{class:m([d.failed===!1?"border-info-secondary":"border-error-secondary","p-2 mb-2 border-b-2 flex items-center justify-between"]),key:f},[i("span",null,c(d.file.name),1),d.failed===!1?(n(),r("span",rr,c(d.progress)+"%",1)):a("",!0),d.failed===!0?(n(),r("div",{key:1,onClick:b=>l.openError(d),class:"rounded bg-error-primary hover:bg-error-secondary hover:text-white flex items-center justify-center text-xs p-2 cursor-pointer"},[ar,p(),i("span",or,c(l.__("See Error")),1)],8,dr)):a("",!0)],2))),128))])):a("",!0),o.files.length===0?(n(),r("div",ur,c(l.__("Your uploaded files will displays here.")),1)):a("",!0)])],2)])):a("",!0),l.currentPage.name==="gallery"?(n(),r("div",cr,[l.isPopup?(n(),r("div",fr,[hr,i("div",null,[S(u,{onClick:t[2]||(t[2]=d=>l.popupInstance.close())})])])):a("",!0),i("div",mr,[i("div",br,[i("div",gr,[i("div",_r,[O(i("input",{id:"search",type:"text","onUpdate:modelValue":t[3]||(t[3]=d=>o.searchField=d),placeholder:l.__("Search Medias"),class:"px-4 block w-full sm:text-sm sm:leading-5 h-10"},null,8,vr),[[E,o.searchField]]),o.searchField.length>0?(n(),r("div",pr,[i("button",{onClick:t[4]||(t[4]=d=>o.searchField=""),class:"h-full w-full rounded-tr rounded-br overflow-hidden"},c(l.__("Cancel")),1)])):a("",!0)])]),i("div",yr,[i("div",xr,[i("div",kr,[(n(!0),r(y,null,D(o.response.data,(d,f)=>(n(),r("div",{key:f,class:""},[i("div",wr,[i("div",{onClick:b=>l.selectResource(d),class:m([d.selected?"ns-media-image-selected ring-4":"","rounded-lg aspect-square bg-gray-500 m-2 overflow-hidden flex items-center justify-center"])},[l.isImage(d)?(n(),r("img",{key:0,class:"object-cover h-full",src:d.sizes.thumb,alt:d.name},null,8,Dr)):a("",!0),l.isImage(d)?a("",!0):(n(),r("div",Tr,[i("i",{class:m([o.fileIcons[d.extension]||o.fileIcons.unknown,"las text-8xl text-white"])},null,2)]))],10,Cr)])]))),128))])]),o.response.data.length===0?(n(),r("div",Mr,[i("h3",Sr,c(l.__("Nothing has already been uploaded")),1)])):a("",!0)])]),i("div",$r,[l.panelOpened?(n(),r("div",Or,[l.isImage(l.selectedResource)?(n(),r("img",{key:0,class:"object-cover h-full",src:l.selectedResource.sizes.thumb,alt:l.selectedResource.name},null,8,Er)):a("",!0),l.isImage(l.selectedResource)?a("",!0):(n(),r("div",Fr,[i("i",{class:m([o.fileIcons[l.selectedResource.extension]||o.fileIcons.unknown,"las text-8xl text-white"])},null,2)]))])):a("",!0),l.panelOpened?(n(),r("div",jr,[i("p",Pr,[i("strong",Hr,c(l.__("File Name"))+": ",1),i("span",{class:m(["p-2",l.selectedResource.fileEdit?"border-b border-input-edge bg-input-background":""]),onBlur:t[5]||(t[5]=d=>l.submitChange(d,l.selectedResource)),contenteditable:l.selectedResource.fileEdit?"true":"false",onClick:t[6]||(t[6]=d=>l.selectedResource.fileEdit=!0)},c(l.selectedResource.name),43,Rr)]),i("p",Lr,[i("strong",Ar,c(l.__("Uploaded At"))+":",1),i("span",null,c(l.selectedResource.created_at),1)]),i("p",Vr,[i("strong",Yr,c(l.__("By"))+" :",1),i("span",null,c(l.selectedResource.user.username),1)])])):a("",!0)])]),i("div",Ir,[i("div",Ur,[o.bulkSelect?(n(),r("div",Nr,[i("div",qr,[i("button",{onClick:t[7]||(t[7]=d=>l.cancelBulkSelect()),class:"py-2 px-3"},[zr,p(" "+c(l.__("Cancel")),1)])])])):a("",!0),l.hasOneSelected&&!o.bulkSelect?(n(),r("div",Br,[i("div",Wr,[i("button",{onClick:t[8]||(t[8]=d=>o.bulkSelect=!0),class:"py-2 px-3"},[Gr,p(" "+c(l.__("Bulk Select")),1)])])])):a("",!0),l.hasOneSelected?(n(),r("div",Kr,[i("div",Qr,[i("button",{onClick:t[9]||(t[9]=d=>l.deleteSelected()),class:"py-2 px-3"},[Jr,p(" "+c(l.__("Delete")),1)])])])):a("",!0)]),i("div",Zr,[i("div",Xr,[i("div",ed,[i("div",{class:m(["ns-button",o.response.current_page===1?"disabled cursor-not-allowed":"info"])},[i("button",{disabled:o.response.current_page===1,onClick:t[10]||(t[10]=d=>l.loadGallery(o.response.current_page-1)),class:"p-2"},c(l.__("Previous")),9,td)],2),sd,i("div",{class:m(["ns-button",o.response.current_page===o.response.last_page?"disabled cursor-not-allowed":"info"])},[i("button",{disabled:o.response.current_page===o.response.last_page,onClick:t[11]||(t[11]=d=>l.loadGallery(o.response.current_page+1)),class:"p-2"},c(l.__("Next")),9,ld)],2)])]),l.isPopup&&l.hasOneSelected?(n(),r("div",id,[i("div",nd,[i("button",{class:"rounded shadow p-2 text-sm",onClick:t[12]||(t[12]=d=>l.useSelectedEntries())},c(l.__("Use Selected")),1)])])):a("",!0)])])])):a("",!0)],2)}const ee=w(Gn,[["render",rd]]),uu=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),dd={computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":"ns-enabled"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},data(){return{fileIcons:X}},props:["placeholder","leading","type","field"],mounted(){},methods:{isImage(e){return Object.keys(ns.medias.imageMimes).includes(e.extension)},toggleMedia(){new Promise((t,s)=>{P.show(ee,{resolve:t,reject:s,...this.field.data||{}})}).then(t=>{t.event==="use-selected"&&(!this.field.data||this.field.data.type==="url"?this.field.value=t.value[0].sizes.original:!this.field.data||this.field.data.type==="model"?(this.field.value=t.value[0].id,this.field.data.model=t.value[0]):this.field.value=t.value[0].sizes.original,this.$forceUpdate())})}}},ad={class:"flex flex-col mb-2 flex-auto ns-media"},od=["for"],ud={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},cd={class:"text-primary sm:text-sm sm:leading-5"},fd={class:"rounded overflow-hidden flex"},hd={key:0,class:"form-input flex w-full sm:text-sm items-center sm:leading-5 h-10"},md=["src","alt"],bd={key:1,class:"object-cover flex items-center justify-center"},gd={class:"text-xs text-secondary"},_d=["disabled","id","type","placeholder"],vd=i("i",{class:"las la-photo-video"},null,-1),pd=[vd];function yd(e,t,s,h,o,l){const u=x("ns-field-description");return n(),r("div",ad,[i("label",{for:s.field.name,class:m([l.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[k(e.$slots,"default")],10,od),i("div",{class:m([l.hasError?"has-error":"is-pristine","mt-1 relative border-2 rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",ud,[i("span",cd,c(s.leading),1)])):a("",!0),i("div",fd,[s.field.data&&s.field.data.type==="model"?(n(),r("div",hd,[s.field.value&&s.field.data.model.name?(n(),r(y,{key:0},[l.isImage(s.field.data.model)?(n(),r("img",{key:0,class:"w-8 h-8 m-1",src:s.field.data.model.sizes.thumb,alt:s.field.data.model.name},null,8,md)):a("",!0),l.isImage(s.field.data.model)?a("",!0):(n(),r("div",bd,[i("i",{class:m([o.fileIcons[s.field.data.model.extension]||o.fileIcons.unknown,"las text-3xl"])},null,2)])),i("span",gd,c(s.field.data.model.name),1)],64)):a("",!0)])):a("",!0),!s.field.data||s.field.data.type==="undefined"||s.field.data.type==="url"?O((n(),r("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=d=>s.field.value=d),disabled:s.field.disabled,onBlur:t[1]||(t[1]=d=>e.$emit("blur",this)),onChange:t[2]||(t[2]=d=>e.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([l.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,_d)),[[W,s.field.value]]):a("",!0),i("button",{onClick:t[3]||(t[3]=d=>l.toggleMedia(s.field)),class:"w-10 h-10 flex items-center justify-center border-l-2 outline-none"},pd)])],2),S(u,{field:s.field},null,8,["field"])])}const xd=w(dd,[["render",yd]]),kd={data:()=>({defaultToggledState:!1,_save:0,hasChildren:!1}),props:["href","to","label","icon","notification","toggled","identifier"],mounted(){this.hasChildren=this.$el.querySelectorAll(".submenu").length>0,this.defaultToggledState=this.toggled!==void 0?this.toggled:this.defaultToggledState,R.subject().subscribe(e=>{e.value!==this.identifier&&(this.defaultToggledState=!1)})},methods:{toggleEmit(){this.toggle().then(e=>{e&&R.emit({identifier:"side-menu.open",value:this.identifier})})},goTo(e,t){return this.$router.push(e),t.preventDefault(),!1},toggle(){return new Promise((e,t)=>{(!this.href||this.href.length===0)&&(this.defaultToggledState=!this.defaultToggledState,e(this.defaultToggledState))})}}},wd=["href"],Cd={class:"flex items-center"},Dd={key:0,class:"rounded-full notification-label font-bold w-6 h-6 text-xs justify-center items-center flex"},Td=["href"],Md={class:"flex items-center"},Sd={key:0,class:"rounded-full notification-label font-bold w-6 h-6 text-xs justify-center items-center flex"};function $d(e,t,s,h,o,l){var u,d;return n(),r("div",null,[s.to&&!e.hasChildren?(n(),r("a",{key:0,onClick:t[0]||(t[0]=f=>l.goTo(s.to,f)),href:s.to,class:m([e.defaultToggledState?"toggled":"normal","flex justify-between py-2 border-l-8 px-3 font-bold ns-aside-menu"])},[i("span",Cd,[i("i",{class:m(["las text-lg mr-2",((u=s.icon)==null?void 0:u.length)>0?s.icon:"la-star"])},null,2),p(" "+c(s.label),1)]),s.notification>0?(n(),r("span",Dd,c(s.notification),1)):a("",!0)],10,wd)):(n(),r("a",{key:1,onClick:t[1]||(t[1]=f=>l.toggleEmit()),href:s.href||"javascript:void(0)",class:m([e.defaultToggledState?"toggled":"normal","flex justify-between py-2 border-l-8 px-3 font-bold ns-aside-menu"])},[i("span",Md,[i("i",{class:m(["las text-lg mr-2",((d=s.icon)==null?void 0:d.length)>0?s.icon:"la-star"])},null,2),p(" "+c(s.label),1)]),s.notification>0?(n(),r("span",Sd,c(s.notification),1)):a("",!0)],10,Td)),i("ul",{class:m([e.defaultToggledState?"":"hidden","submenu-wrapper"])},[k(e.$slots,"default")],2)])}const Od=w(kd,[["render",$d]]),Ed={data(){return{showPanel:!1,search:"",eventListener:null}},emits:["change","blur"],props:["field"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},_filtredOptions(){let e=this._options;return this.search.length>0&&(e=this._options.filter(t=>t.label.toLowerCase().search(this.search.toLowerCase())!==-1)),e.filter(t=>t.selected===!1)},_options(){return this.field.options.map(e=>(e.selected=e.selected===void 0?!1:e.selected,this.field.value&&this.field.value.includes(e.value)&&(e.selected=!0),e))}},methods:{__:g,togglePanel(){this.showPanel=!this.showPanel},selectAvailableOptionIfPossible(){this._filtredOptions.length>0&&this.addOption(this._filtredOptions[0])},addOption(e){this.field.disabled||(this.$emit("addOption",e),this.$forceUpdate(),setTimeout(()=>{this.search=""},100))},removeOption(e,t){if(!this.field.disabled)return t.preventDefault(),t.stopPropagation(),this.$emit("removeOption",e),this.$forceUpdate(),setTimeout(()=>{this.search=""},100),!1}},mounted(){this.field.value&&this.field.value.reverse().forEach(t=>{const s=this.field.options.filter(h=>h.value===t);s.length>0&&this.addOption(s[0])}),this.eventListener=document.addEventListener("click",e=>{let s=e.target.parentElement,h=!1;if(this.showPanel){for(;s;){if(s&&s.classList.contains("ns-multiselect")&&!s.classList.contains("arrows")){h=!0;break}s=s.parentElement}h===!1&&this.togglePanel()}})}},Fd={class:"flex flex-col ns-multiselect"},jd=["for"],Pd={class:"flex flex-col"},Hd={class:"flex -mx-1 -my-1 flex-wrap"},Rd={class:"rounded bg-info-secondary text-white flex justify-between p-1 items-center"},Ld={class:"pr-8"},Ad=["onClick"],Vd=i("i",{class:"las la-times"},null,-1),Yd=[Vd],Id={class:"arrows ml-1"},Ud={class:"ns-dropdown shadow"},Nd={class:"search border-b border-input-option-hover"},qd={class:"h-40 overflow-y-auto"},zd=["onClick"],Bd={key:0,class:"las la-check"},Wd={key:0,class:"p-2 text-center text-primary"},Gd={class:"my-2"};function Kd(e,t,s,h,o,l){const u=x("ns-field-description");return n(),r("div",Fd,[i("label",{for:s.field.name,class:m([l.hasError?"text-error-secondary":"text-primary","block mb-1 leading-5 font-medium"])},[k(e.$slots,"default")],10,jd),i("div",Pd,[i("div",{onClick:t[0]||(t[0]=d=>l.togglePanel()),class:m([(o.showPanel,""),"overflow-y-auto flex select-preview justify-between rounded border-2 border-input-option-hover p-2 items-start"]),style:{"max-height":"150px"}},[i("div",Hd,[(n(!0),r(y,null,D(l._options.filter(d=>d.selected),(d,f)=>(n(),r("div",{key:f,class:"px-1 my-1"},[i("div",Rd,[i("span",Ld,c(d.label),1),i("button",{onClick:b=>l.removeOption(d,b),class:"rounded outline-none hover:bg-info-tertiary h-6 w-6 flex items-center justify-center"},Yd,8,Ad)])]))),128))]),i("div",Id,[i("i",{class:m(["las la-angle-down",o.showPanel?"hidden":""])},null,2),i("i",{class:m(["las la-angle-up",o.showPanel?"":"hidden"])},null,2)])],2),o.showPanel?(n(),r("div",{key:0,class:m(["h-0 z-10",o.showPanel?"shadow":""])},[i("div",Ud,[i("div",Nd,[O(i("input",{onKeypress:t[1]||(t[1]=H(d=>l.selectAvailableOptionIfPossible(),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=d=>o.search=d),class:"p-2 w-full bg-transparent text-primary outline-none",placeholder:"Search"},null,544),[[E,o.search]])]),i("div",qd,[(n(!0),r(y,null,D(l._filtredOptions,(d,f)=>(n(),r("div",{onClick:b=>l.addOption(d),key:f,class:m([d.selected?"bg-info-secondary text-white":"text-primary","option p-2 flex justify-between cursor-pointer hover:bg-info-secondary hover:text-white"])},[i("span",null,c(d.label),1),i("span",null,[d.checked?(n(),r("i",Bd)):a("",!0)])],10,zd))),128))]),l._options.length===0?(n(),r("div",Wd,c(l.__("Nothing to display")),1)):a("",!0)])],2)):a("",!0)]),i("div",Gd,[S(u,{field:s.field},null,8,["field"])])])}const Qd=w(Ed,[["render",Kd]]),Jd={},Zd={class:"my-4"},Xd={class:"font-bold text-2xl"},ea={class:"text-primary"};function ta(e,t){return n(),r("div",Zd,[i("h2",Xd,[k(e.$slots,"title")]),i("span",ea,[k(e.$slots,"description")])])}const sa=w(Jd,[["render",ta]]),la={name:"ns-search",props:["url","placeholder","value","label","method","searchArgument"],data(){return{searchText:"",searchTimeout:null,results:[]}},methods:{__:g,selectOption(e){this.$emit("select",e),this.searchText="",this.results=[]},renderLabel(e,t){return typeof t=="object"?t.map(s=>e[s]).join(" "):e[t]}},watch:{searchText(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchText.length>0&&j[this.method||"post"](this.url,{[this.searchArgument||"search"]:this.searchText}).subscribe({next:e=>{this.results=e},error:e=>{M.error(e.message||g("An unexpected error occurred.")).subscribe()}})},1e3)}},mounted(){}},ia={class:"ns-search"},na={class:"input-group info border-2"},ra=["placeholder"],da={class:"relative"},aa={class:"w-full absolute shadow-lg"},oa={key:0,class:"ns-vertical-menu"},ua=["onClick"];function ca(e,t,s,h,o,l){return n(),r("div",ia,[i("div",na,[O(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=u=>o.searchText=u),class:"p-2 w-full outline-none",placeholder:s.placeholder||l.__("Search..."),id:""},null,8,ra),[[E,o.searchText]])]),i("div",da,[i("div",aa,[o.results.length>0&&o.searchText.length>0?(n(),r("ul",oa,[(n(!0),r(y,null,D(o.results,(u,d)=>(n(),r("li",{class:"border-b p-2 cursor-pointer",onClick:f=>l.selectOption(u),key:d},c(l.renderLabel(u,s.label)),9,ua))),128))])):a("",!0)])])])}const fa=w(la,[["render",ca]]),ha={data:()=>({searchField:"",showResults:!1}),name:"ns-search-select",emits:["saved","change"],props:["name","placeholder","field","leading"],computed:{selectedOptionLabel(){if(this.field.value===null||this.field.value===void 0)return g("Choose...");const e=this.field.options.filter(t=>t.value===this.field.value);return e.length>0?e[0].label:g("Choose...")},filtredOptions(){return this.searchField.length>0?this.field.options.filter(e=>new RegExp(this.searchField,"i").test(e.label)).splice(0,10):this.field.options},hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},watch:{showResults(){this.showResults===!0&&setTimeout(()=>{this.$refs.searchInputField.select()},50)}},mounted(){const e=this.field.options.filter(t=>t.value===this.field.value);e.length>0&&[null,void 0].includes(this.field.value)&&this.selectOption(e[0]),document.addEventListener("click",t=>{this.$el.contains(t.target)===!1&&(this.showResults=!1)})},methods:{__:g,selectFirstOption(){this.filtredOptions.length>0&&this.selectOption(this.filtredOptions[0])},selectOption(e){this.field.value=e.value,this.$emit("change",e.value),this.searchField="",this.showResults=!1},async triggerDynamicComponent(e){try{this.showResults=!1;const t=nsExtraComponents[e.component]||nsComponents[e.component];t===void 0&&M.error(g(`The component ${e.component} cannot be loaded. Make sure it's injected on nsExtraComponents object.`)).subscribe();const s=await new Promise((h,o)=>{const l=P.show(t,{...e.props||{},field:this.field,resolve:h,reject:o})});this.$emit("saved",s)}catch{}}}},ma={class:"flex flex-col flex-auto ns-select"},ba=["for"],ga={class:"text-primary text-sm"},_a=i("i",{class:"las la-plus"},null,-1),va=[_a],pa={key:0,class:"relative"},ya={class:"w-full overflow-hidden -top-[8px] border-r-2 border-l-2 border-t rounded-b-md border-b-2 border-input-edge bg-input-background shadow z-10 absolute"},xa={class:"border-b border-input-edge border-dashed p-2"},ka=["placeholder"],wa={class:"h-60 overflow-y-auto"},Ca=["onClick"];function Da(e,t,s,h,o,l){const u=x("ns-field-description");return n(),r("div",ma,[i("label",{for:s.field.name,class:m([l.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[k(e.$slots,"default")],10,ba),i("div",{class:m([l.hasError?"has-error":"is-pristine","border-2 mt-1 relative rounded-md shadow-sm mb-1 flex overflow-hidden"])},[i("div",{onClick:t[0]||(t[0]=d=>e.showResults=!e.showResults),class:"flex-auto h-10 sm:leading-5 py-2 px-4 flex items-center bg-input-background cursor-default"},[i("span",ga,c(l.selectedOptionLabel),1)]),s.field.component?(n(),r("div",{key:0,onClick:t[1]||(t[1]=d=>l.triggerDynamicComponent(s.field)),class:"flex items-center justify-center w-10 hover:cursor-pointer hover:bg-input-button-hover border-l-2 border-input-edge"},va)):a("",!0)],2),e.showResults?(n(),r("div",pa,[i("div",ya,[i("div",xa,[O(i("input",{onKeypress:t[2]||(t[2]=H(d=>l.selectFirstOption(),["enter"])),ref:"searchInputField","onUpdate:modelValue":t[3]||(t[3]=d=>e.searchField=d),type:"text",placeholder:l.__("Search result")},null,40,ka),[[E,e.searchField]])]),i("div",wa,[i("ul",null,[(n(!0),r(y,null,D(l.filtredOptions,d=>(n(),r("li",{onClick:f=>l.selectOption(d),class:"py-1 px-2 hover:bg-info-primary cursor-pointer text-primary"},c(d.label),9,Ca))),256))])])])])):a("",!0),S(u,{field:s.field},null,8,["field"])])}const Ta=w(ha,[["render",Da]]),Ma={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},mounted(){},methods:{__:g}},Sa={class:"flex flex-col flex-auto ns-select"},$a=["for"],Oa=["disabled","name"],Ea={value:null},Fa=["value"];function ja(e,t,s,h,o,l){const u=x("ns-field-description");return n(),r("div",Sa,[i("label",{for:s.field.name,class:m([l.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[k(e.$slots,"default")],10,$a),i("div",{class:m([l.hasError?"has-error":"is-pristine","border-2 mt-1 relative rounded-md shadow-sm mb-1 overflow-hidden"])},[O(i("select",{disabled:s.field.disabled?s.field.disabled:!1,name:s.field.name,"onUpdate:modelValue":t[0]||(t[0]=d=>s.field.value=d),class:m([l.inputClass,"form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 appearance-none"])},[i("option",Ea,c(l.__("Choose an option")),1),(n(!0),r(y,null,D(s.field.options,(d,f)=>(n(),r("option",{key:f,value:d.value,class:"py-2"},c(d.label),9,Fa))),128))],10,Oa),[[A,s.field.value]])],2),S(u,{field:s.field},null,8,["field"])])}const Pa=w(Ma,[["render",ja]]),Ha={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},methods:{__:g,playSelectedSound(){this.field.value!==null&&this.field.value.length>0&&new Audio(this.field.value).play()}}},Ra={class:"flex flex-col flex-auto"},La=["for"],Aa=i("button",{class:"w-10 flex item-center justify-center"},[i("i",{class:"las la-play text-2xl"})],-1),Va=[Aa],Ya=["disabled","name"],Ia=["value"];function Ua(e,t,s,h,o,l){const u=x("ns-field-description");return n(),r("div",Ra,[i("label",{for:s.field.name,class:m([l.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},[k(e.$slots,"default")],10,La),i("div",{class:m([l.hasError?"border-error-primary":"border-input-edge","border-2 mt-1 flex relative overflow-hidden rounded-md shadow-sm mb-1 form-input"])},[i("div",{onClick:t[0]||(t[0]=d=>l.playSelectedSound()),class:"border-r-2 border-input-edge flex-auto flex items-center justify-center hover:bg-info-tertiary hover:text-white"},Va),O(i("select",{disabled:s.field.disabled?s.field.disabled:!1,onChange:t[1]||(t[1]=d=>e.$emit("change",d)),name:s.field.name,"onUpdate:modelValue":t[2]||(t[2]=d=>s.field.value=d),class:m([l.inputClass,"text-primary block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 outline-none"])},[(n(!0),r(y,null,D(s.field.options,(d,f)=>(n(),r("option",{key:f,value:d.value,class:"py-2"},c(d.label),9,Ia))),128))],42,Ya),[[A,s.field.value]])],2),S(u,{field:s.field},null,8,["field"])])}const Na=w(Ha,[["render",Ua]]),qa={data:()=>({}),mounted(){},computed:{validatedSize(){return this.size||24},validatedBorder(){return this.border||8},validatedAnimation(){return this.animation||"fast"}},props:["color","size","border","animation"]},za={class:"flex items-center justify-center"};function Ba(e,t,s,h,o,l){return n(),r("div",za,[i("div",{class:m(["loader ease-linear rounded-full border-gray-200",l.validatedAnimation+" border-4 border-t-4 w-"+l.validatedSize+" h-"+l.validatedSize])},null,2)])}const Wa=w(qa,[["render",Ba]]),Ga={data:()=>({}),props:["href","label","active","to"],mounted(){},methods:{goTo(e,t){return this.$router.push(e),t.preventDefault(),!1}}},Ka={class:"submenu"},Qa=["href"],Ja=["href"];function Za(e,t,s,h,o,l){return n(),r("div",null,[i("li",Ka,[s.href?(n(),r("a",{key:0,class:m([s.active?"font-bold active":"normal","py-2 border-l-8 px-3 block ns-aside-submenu"]),href:s.href},[k(e.$slots,"default")],10,Qa)):s.to?(n(),r("a",{key:1,class:m([s.active?"font-bold active":"normal","py-2 border-l-8 px-3 block ns-aside-submenu"]),onClick:t[0]||(t[0]=u=>l.goTo(s.to,u)),href:s.to},[k(e.$slots,"default")],10,Ja)):a("",!0)])])}const Xa=w(Ga,[["render",Za]]),eo={props:["options","row","columns","prependOptions","showOptions"],data:()=>({optionsToggled:!1}),mounted(){},methods:{__:g,sanitizeHTML(e){var t=document.createElement("div");t.innerHTML=e;for(var s=t.getElementsByTagName("script"),h=s.length;h--;)s[h].parentNode.removeChild(s[h]);return t.innerHTML},getElementOffset(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},toggleMenu(e){if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout(()=>{const t=this.$el.querySelectorAll(".relative > .absolute")[0],s=this.$el.querySelectorAll(".relative")[0],h=this.getElementOffset(s);t.style.top=h.top+"px",t.style.left=h.left+"px",s!==void 0&&(s.classList.remove("relative"),s.classList.add("dropdown-holder"))},100);else{const t=this.$el.querySelectorAll(".dropdown-holder")[0];t.classList.remove("dropdown-holder"),t.classList.add("relative")}},handleChanged(e){this.row.$checked=e,this.$emit("updated",this.row)},triggerAsync(e){e.confirm!==null?confirm(e.confirm.message)&&j[e.type.toLowerCase()](e.url).subscribe(t=>{M.success(t.message).subscribe(),this.$emit("reload",this.row)},t=>{this.toggleMenu(),M.error(t.message).subscribe()}):(R.emit({identifier:"ns-table-row-action",value:{action:e,row:this.row,component:this}}),this.toggleMenu())},triggerPopup(e,t){const s=window.nsExtraComponents[e.component];if(console.log({action:e}),e.component)return s?new Promise((h,o)=>{Popup.show(s,{resolve:h,reject:o,row:t,action:e})}):M.error(g(`Unable to load the component "${e.component}". Make sure the component is registered to "nsExtraComponents".`)).subscribe();this.triggerAsync(e)}}},to={class:"font-sans p-2"},so={key:0,class:"font-sans p-2"},lo={class:""},io=i("i",{class:"las la-ellipsis-h"},null,-1),no={class:"relative"},ro={key:0,class:"zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper"},ao={class:"rounded-md shadow-xs"},oo={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},uo=["href","innerHTML"],co=["onClick","innerHTML"],fo=["href","innerHTML"],ho=["innerHTML"],mo={key:2},bo={key:1,class:"font-sans p-2 flex flex-col items-center justify-center"},go={class:""},_o=i("i",{class:"las la-ellipsis-h"},null,-1),vo={class:"relative"},po={key:0,class:"zoom-in-entrance border border-box-edge anim-duration-300 z-50 origin-bottom-right -ml-28 w-56 mt-2 absolute rounded-md shadow-lg ns-menu-wrapper"},yo={class:"rounded-md shadow-xs"},xo={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},ko=["href","innerHTML"],wo=["onClick","innerHTML"];function Co(e,t,s,h,o,l){const u=x("ns-checkbox");return n(),r("tr",{class:m(["ns-table-row",s.row.$cssClass?s.row.$cssClass:"border text-sm"])},[i("td",to,[S(u,{onChange:t[0]||(t[0]=d=>l.handleChanged(d)),checked:s.row.$checked},null,8,["checked"])]),s.prependOptions&&s.showOptions?(n(),r("td",so,[i("div",lo,[i("button",{onClick:t[1]||(t[1]=d=>l.toggleMenu(d)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"])},[io,p(" "+c(l.__("Options")),1)],2),s.row.$toggled?(n(),r("div",{key:0,onClick:t[2]||(t[2]=d=>l.toggleMenu(d)),class:"absolute w-full h-full z-10 top-0 left-0"})):a("",!0),i("div",no,[s.row.$toggled?(n(),r("div",ro,[i("div",ao,[i("div",oo,[(n(!0),r(y,null,D(s.row.$actions,(d,f)=>(n(),r(y,{key:f},[d.type==="GOTO"?(n(),r("a",{key:0,href:d.url,class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:l.sanitizeHTML(d.label)},null,8,uo)):a("",!0),["GET","DELETE","POPUP"].includes(d.type)?(n(),r("a",{key:1,href:"javascript:void(0)",onClick:b=>l.triggerAsync(d),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:l.sanitizeHTML(d.label)},null,8,co)):a("",!0)],64))),128))])])])):a("",!0)])])])):a("",!0),(n(!0),r(y,null,D(s.columns,(d,f)=>(n(),r("td",{key:f,class:"font-sans p-2"},[s.row[f]&&s.row[f].type&&s.row[f].type==="link"?(n(),r("a",{key:0,target:"_blank",href:s.row[f].href,innerHTML:l.sanitizeHTML(s.row[f].label)},null,8,fo)):a("",!0),typeof s.row[f]=="string"||typeof s.row[f]=="number"?(n(),r("div",{key:1,innerHTML:l.sanitizeHTML(s.row[f])},null,8,ho)):a("",!0),s.row[f]===null?(n(),r("div",mo,c(l.__("Undefined")),1)):a("",!0)]))),128)),!s.prependOptions&&s.showOptions?(n(),r("td",bo,[i("div",go,[i("button",{onClick:t[3]||(t[3]=d=>l.toggleMenu(d)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-none rounded-full w-24 text-sm p-1 border"])},[_o,p(" "+c(l.__("Options")),1)],2),s.row.$toggled?(n(),r("div",{key:0,onClick:t[4]||(t[4]=d=>l.toggleMenu(d)),class:"absolute w-full h-full z-10 top-0 left-0"})):a("",!0),i("div",vo,[s.row.$toggled?(n(),r("div",po,[i("div",yo,[i("div",xo,[(n(!0),r(y,null,D(s.row.$actions,(d,f)=>(n(),r(y,{key:f},[d.type==="GOTO"?(n(),r("a",{key:0,href:d.url,class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:l.sanitizeHTML(d.label)},null,8,ko)):a("",!0),["GET","DELETE","POPUP"].includes(d.type)?(n(),r("a",{key:1,href:"javascript:void(0)",onClick:b=>l.triggerAsync(d),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:l.sanitizeHTML(d.label)},null,8,wo)):a("",!0)],64))),128))])])])):a("",!0)])])])):a("",!0)],2)}const Do=w(eo,[["render",Co]]),To={data(){return{childrens:[],tabState:new ke}},props:["active"],computed:{activeComponent(){const e=this.childrens.filter(t=>t.active);return e.length>0?e[0]:!1}},beforeUnmount(){this.tabState.unsubscribe()},watch:{active(e,t){this.childrens.forEach(s=>{s.active=s.identifier===e,s.active&&this.toggle(s)})}},mounted(){this.buildChildrens(this.active)},methods:{__:g,toggle(e){this.$emit("active",e.identifier),this.$emit("changeTab",e.identifier),this.tabState.next(e)},buildChildrens(e){this.childrens=Array.from(this.$el.querySelectorAll(".ns-tab-item")).map(s=>{const h=s.getAttribute("identifier")||void 0;let o=!0;return s.getAttribute("visible")&&(o=s.getAttribute("visible")==="true"),{el:s,active:!!(e&&e===h),identifier:h,initialized:!1,visible:o,label:s.getAttribute("label")||g("Unamed Tab")}}).filter(s=>s.visible),!(this.childrens.filter(s=>s.active).length>0)&&this.childrens.length>0&&(this.childrens[0].active=!0),this.childrens.forEach(s=>{s.active&&this.toggle(s)})}}},Mo=["selected-tab"],So={class:"header ml-4 flex justify-between",style:{"margin-bottom":"-1px"}},$o={class:"flex flex-auto"},Oo=["onClick"];function Eo(e,t,s,h,o,l){return n(),r("div",{class:"tabs flex flex-col flex-auto ns-tab overflow-hidden","selected-tab":l.activeComponent.identifier},[i("div",So,[i("div",$o,[(n(!0),r(y,null,D(o.childrens,(u,d)=>(n(),r("div",{key:u.identifier,onClick:f=>l.toggle(u),class:m([s.active===u.identifier?"border-b-0 active z-10":"border inactive","tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer"]),style:{"margin-right":"-1px"}},c(u.label),11,Oo))),128))]),i("div",null,[k(e.$slots,"extra")])]),k(e.$slots,"default")],8,Mo)}const Fo=w(To,[["render",Eo]]),jo={data(){return{selectedTab:{},tabStateSubscriber:null}},computed:{},mounted(){this.tabStateSubscriber=this.$parent.tabState.subscribe(e=>{this.selectedTab=e})},unmounted(){this.tabStateSubscriber.unsubscribe()},props:["label","identifier","padding"]},Po=["label","identifier"];function Ho(e,t,s,h,o,l){return n(),r("div",{class:m([o.selectedTab.identifier!==s.identifier?"hidden":"","ns-tab-item flex flex-auto overflow-hidden"]),label:s.label,identifier:s.identifier},[o.selectedTab.identifier===s.identifier?(n(),r("div",{key:0,class:m(["border rounded flex-auto overflow-y-auto",s.padding||"p-4"])},[k(e.$slots,"default")],2)):a("",!0)],10,Po)}const Ro=w(jo,[["render",Ho]]),Lo={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"]},Ao={class:"flex flex-col mb-2 flex-auto ns-textarea"},Vo=["for"],Yo={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Io={class:"text-secondary sm:text-sm sm:leading-5"},Uo=["rows","disabled","id","type","placeholder"],No={key:0,class:"text-xs text-secondary"};function qo(e,t,s,h,o,l){return n(),r("div",Ao,[i("label",{for:s.field.name,class:m([l.hasError?"text-error-primary":"text-primary","block leading-5 font-medium"])},c(s.field.label),11,Vo),i("div",{class:m([l.hasError?"has-error":"is-pristine","mt-1 relative border-2 overflow-hidden rounded-md focus:shadow-sm mb-1"])},[s.leading?(n(),r("div",Yo,[i("span",Io,c(s.leading),1)])):a("",!0),O(i("textarea",{rows:s.field.data&&s.field.data.rows||10,disabled:s.field.disabled,"onUpdate:modelValue":t[0]||(t[0]=u=>s.field.value=u),onBlur:t[1]||(t[1]=u=>e.$emit("blur",this)),onChange:t[2]||(t[2]=u=>e.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([l.inputClass,"form-input block w-full sm:text-sm sm:leading-5"]),placeholder:s.placeholder},null,42,Uo),[[E,s.field.value]])],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",No,[k(e.$slots,"description")])):a("",!0),(n(!0),r(y,null,D(s.field.errors,(u,d)=>(n(),r("p",{key:d,class:"text-xs text-error-primary"},[u.identifier==="required"?k(e.$slots,u.identifier,{key:0},()=>[p("This field is required.")]):a("",!0),u.identifier==="email"?k(e.$slots,u.identifier,{key:1},()=>[p("This field must contain a valid email address.")]):a("",!0),u.identifier==="invalid"?k(e.$slots,u.identifier,{key:2},()=>[p(c(u.message),1)]):a("",!0)]))),128))])}const zo=w(Lo,[["render",qo]]),cu=Object.freeze(Object.defineProperty({__proto__:null,nsAlertPopup:U,nsAvatar:Oe,nsButton:He,nsCalendar:Q,nsCheckbox:zt,nsCkeditor:he,nsCloseButton:Qt,nsConfirmPopup:V,nsCrud:ll,nsCrudForm:Ml,nsDate:Hl,nsDateRangePicker:J,nsDateTimePicker:Z,nsDatepicker:_i,nsDaterangePicker:Hi,nsDragzone:Ui,nsField:an,nsFieldDescription:fn,nsIconButton:bn,nsInlineMultiselect:Pn,nsInput:Un,nsLink:Wn,nsMediaInput:xd,nsMenu:Od,nsMultiselect:Qd,nsNotice:me,nsNumpad:be,nsNumpadPlus:ge,nsPOSLoadingPopup:_e,nsPageTitle:sa,nsPaginate:ve,nsPromptPopup:pe,nsSearch:fa,nsSearchSelect:Ta,nsSelect:Pa,nsSelectAudio:Na,nsSpinner:Wa,nsSubmenu:Xa,nsSwitch:G,nsTableRow:Do,nsTabs:Fo,nsTabsItem:Ro,nsTextarea:zo},Symbol.toStringTag,{value:"Module"}));export{Xa as a,cu as b,_i as c,Hi as d,Z as e,ee as f,an as g,Qt as h,uu as i,Od as n};
