import{_ as o}from"./lang-BINodpp-.js";import{n as r,k as _,b as a,i as x,F as y}from"./bootstrap-DI8pXSaz.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as c,c as d,o as s,a as u,b as t,f as h,F,e as S,g as p,t as b,w as T}from"./runtime-core.esm-bundler-DUdZl5j1.js";import"./currency-BCJk0SN4.js";import"./chart-BXKSDqJb.js";import"./runtime-dom.esm-bundler-BJBE8XOq.js";const V={name:"ns-login",data(){return{fields:[],xXsrfToken:null,validation:new y,isSubitting:!1}},mounted(){x([a.get("/api/fields/ns.password-lost"),a.get("/sanctum/csrf-cookie")]).subscribe(i=>{this.fields=this.validation.createFields(i[0]),this.xXsrfToken=a.response.config.headers["X-XSRF-TOKEN"],setTimeout(()=>_.doAction("ns-login-mounted",this),100)},i=>{r.error(i.message||o("An unexpected error occurred."),o("OK"),{duration:0})})},methods:{__:o,requestRecovery(){if(!this.validation.validateFields(this.fields))return r.error(o("Unable to proceed the form is not valid."));this.validation.disableFields(this.fields),_.applyFilters("ns-password-lost-submit",!0)&&(this.isSubitting=!0,a.post("/auth/password-lost",this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe(e=>{r.success(e.message),setTimeout(()=>{document.location=e.data.redirectTo},500)},e=>{this.isSubitting=!1,this.validation.enableFields(this.fields),e.data&&this.validation.triggerFieldsErrors(this.fields,e.data),r.error(e.message)}))}}},X={class:"ns-box rounded shadow overflow-hidden transition-all duration-100"},B={key:0,class:"flex items-center justify-center py-10"},C={class:"p-3"},N={key:0,class:"fade-in-entrance anim-duration-300"},R={class:"flex w-full items-center justify-center py-2"},j={href:"/sign-in",class:"hover:underline text-blue-600 text-sm"},E={class:"flex ns-box-footer justify-end items-center border-t p-3"};function K(i,e,O,q,n,l){const f=c("ns-spinner"),v=c("ns-field"),g=c("ns-button");return s(),d("div",X,[n.fields.length===0?(s(),d("div",B,[h(f,{border:"4",size:"16"})])):u("",!0),t("div",C,[n.fields.length>0?(s(),d("div",N,[(s(!0),d(F,null,S(n.fields,(m,k)=>(s(),p(v,{key:k,field:m},null,8,["field"]))),128))])):u("",!0),t("div",R,[t("a",j,b(l.__("Remember Your Password ?")),1)])]),t("div",E,[t("div",null,[h(g,{onClick:e[0]||(e[0]=m=>l.requestRecovery()),class:"justify-between",type:"info"},{default:T(()=>[n.isSubitting?(s(),p(f,{key:0,class:"mr-2",size:"6",border:"2"})):u("",!0),t("span",null,b(l.__("Submit")),1)]),_:1})])])])}const U=w(V,[["render",K]]);export{U as default};
