import{a as o}from"./npm~eventemitter3-c7e30f9c.js";import{l as x}from"./npm~xml-lexer-6516179a.js";var g=o,f=x,i=f.Type,c={element:"element",text:"text"},s=function(r){return Object.assign({name:"",type:c.element,value:"",parent:null,attributes:{},children:[]},r)},p=function(r){r=Object.assign({stream:!1,parentNodes:!0,doneEvent:"done",tagPrefix:"tag:",emitTopLevelOnly:!1,debug:!1},r);var t=void 0,a=void 0,e=void 0,u=void 0,n=new g,b=function(l){switch(l.type){case i.openTag:if(e===null)e=a,e.name=l.value;else{var d=s({name:l.value,parent:e});e.children.push(d),e=d}break;case i.closeTag:var v=e.parent;if(r.parentNodes||(e.parent=null),e.name!==l.value)break;r.stream&&v===a&&(a.children=[],e.parent=null),(!r.emitTopLevelOnly||v===a)&&(n.emit(r.tagPrefix+e.name,e),n.emit("tag",e.name,e)),e===a&&(t.removeAllListeners("data"),n.emit(r.doneEvent,e),a=null),e=v;break;case i.text:e&&e.children.push(s({type:c.text,value:l.value,parent:r.parentNodes?e:null}));break;case i.attributeName:u=l.value,e.attributes[u]="";break;case i.attributeValue:e.attributes[u]=l.value;break}};return n.reset=function(){t=f.create({debug:r.debug}),t.on("data",b),a=s(),e=null,u="",n.parse=t.write},n.reset(),n},y=function(r,t){t=Object.assign({},t,{stream:!1,tagPrefix:":"});var a=p(t),e=void 0;return a.on("done",function(u){e=u}),a.parse(r),e},k={parseSync:y,create:p,NodeType:c};export{k as r};
