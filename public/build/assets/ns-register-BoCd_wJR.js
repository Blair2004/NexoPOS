import{F as x,g as y,n,b as d}from"./bootstrap-BERCplJB.js";import{_ as m}from"./lang-BINodpp-.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as t,c as o,a as s,F as T,b as V,g as w,e as h,f as c,t as f,w as p,i as g}from"./runtime-core.esm-bundler-CZ21d09l.js";import"./currency-DQAAGb0G.js";import"./chart-XFVd3zf7.js";import"./runtime-dom.esm-bundler-BXIQQKg6.js";const X={name:"ns-register",data(){return{fields:[],xXsrfToken:null,validation:new x}},mounted(){y([n.get("/api/fields/ns.register"),n.get("/sanctum/csrf-cookie")]).subscribe(r=>{this.fields=this.validation.createFields(r[0]),this.xXsrfToken=n.response.config.headers["X-XSRF-TOKEN"],setTimeout(()=>nsHooks.doAction("ns-register-mounted",this))})},methods:{__:m,register(){if(!this.validation.validateFields(this.fields))return d.error(m("Unable to proceed the form is not valid."));this.validation.disableFields(this.fields),nsHooks.applyFilters("ns-register-submit",!0)&&n.post("/auth/sign-up",this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe({next:e=>{d.success(e.message),setTimeout(()=>{document.location=e.data.redirectTo},1500)},error:e=>{this.validation.triggerFieldsErrors(this.fields,e),this.validation.enableFields(this.fields),d.error(e.message)}})}}},N={class:"ns-box rounded shadow overflow-hidden transition-all duration-100"},B={class:"ns-box-body"},C={class:"p-3 -my-2"},S={key:0,class:"py-2 fade-in-entrance anim-duration-300"},E={key:0,class:"flex items-center justify-center"},R={class:"flex w-full items-center justify-center py-4"},j={href:"/sign-in",class:"link hover:underline text-sm"},H={class:"flex ns-box-footer border-t justify-between items-center p-3"};function A(r,e,K,O,a,i){const v=l("ns-field"),b=l("ns-spinner"),_=l("ns-button");return t(),o("div",N,[s("div",B,[s("div",C,[a.fields.length>0?(t(),o("div",S,[(t(!0),o(T,null,V(a.fields,(u,k)=>(t(),w(v,{key:k,field:u},null,8,["field"]))),128))])):h("",!0)]),a.fields.length===0?(t(),o("div",E,[c(b)])):h("",!0),s("div",R,[s("a",j,f(i.__("Already registered ?")),1)])]),s("div",H,[s("div",null,[c(_,{onClick:e[0]||(e[0]=u=>i.register()),type:"info"},{default:p(()=>[g(f(i.__("Register")),1)]),_:1})]),s("div",null,[c(_,{link:!0,href:"/sign-in",type:"success"},{default:p(()=>[g(f(i.__("Sign In")),1)]),_:1})])])])}const G=F(X,[["render",A]]);export{G as default};
