import{n as V,e as W,g as ve,N as ye,f as se,c as ne,h as _e,i as ke,a as we,j as xe,b as De,k as Ce,d as Me}from"./ns-prompt-popup-IaNplttS.js";import{N as Te}from"./ns-avatar-0iWK8npH.js";import{n as Se}from"./ns-avatar-image-Bp-d6whW.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as r,o as i,a as c,A as w,n as m,b as l,t as h,F as v,e as C,B as R,r as y,g as S,i as k,f as T,w as M,d as Ee,j as N,C as Fe,s as G,K as le,D as Re,E as J,G as ee,h as B,H as ie,I as Oe,k as Pe,u as te}from"./runtime-core.esm-bundler-1O6SuJ5P.js";import{h as x,b as E,p as re,a as ae,F as de,P as L,B as je,c as $,n as oe,S as Ae}from"./bootstrap-sz2eKFsW.js";import{_ as p}from"./lang-BINodpp-.js";import{v as A,w as Y,a as U,T as He,b as $e,d as ue}from"./runtime-dom.esm-bundler-BpKa6iGo.js";const Ue={data:()=>({clicked:!1,_save:0}),props:["type","disabled","link","href","routerLink","to","target"],mounted(){},computed:{isDisabled(){return this.disabled&&(this.disabled.length===0||this.disabled==="disabled"||this.disabled)}}},Le=["disabled"],Ye=["target","href"];function Be(t,e,s,u,d,n){return i(),r("div",{class:m(["flex ns-button",s.type?s.type:"default"])},[!s.link&&!s.href?(i(),r("button",{key:0,disabled:n.isDisabled,class:"flex items-center py-2 px-3 font-semibold"},[w(t.$slots,"default")],8,Le)):c("",!0),s.href?(i(),r("a",{key:1,target:s.target,href:s.href,class:"flex items-center py-2 px-3 font-semibold"},[w(t.$slots,"default")],8,Ye)):c("",!0)],2)}const Ve=D(Ue,[["render",Be]]),Ne={name:"ns-calendar",props:["date","field","visible","range","selected-range","side"],data(){return{calendar:[[]],currentDay:x(),daysOfWeek:new Array(7).fill("").map((t,e)=>e),hours:0,minutes:0,currentView:"days",clickedOnCalendar:!1,moment:x,months:new Array(12).fill("").map((t,e)=>e)}},computed:{momentCopy(){return x()}},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},mounted(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null,""].includes(this.date)?x():x(this.date),this.hours=this.currentDay.hours(),this.minutes=this.currentDay.minutes(),this.build(),this.toggleView("days")},methods:{__:p,handleCalendarClick(){this.clickedOnCalendar=!0},getDayClass({day:t,_dayIndex:e,dayOfWeek:s,_index:u,currentDay:d}){const n=[];return(x(this.date).isSame(t.date,"day")||this.isRangeEdge(t))&&!this.isInvalidRange()?n.push("bg-info-secondary text-fontcolor border-info-secondary text-white"):n.push("hover:bg-numpad-hover"),this.isInvalidRange()&&this.isRangeEdge(t)&&n.push("bg-error-secondary text-white"),u===0&&n.push("border-t border-tab-table-th"),this.isInRange(t)&&!this.isRangeEdge(t)?n.push("bg-info-primary"):t.isDifferentMonth&&!this.isRangeEdge(t)&&n.push("bg-tab-table-th"),n.join(" ")},erase(){this.selectDate({date:x(ns.date.current)})},isInRange(t){return this.range&&this.range.length===2&&this.range[0]&&this.range[1]?x(t.date).isSameOrAfter(this.range[0])&&x(t.date).isSameOrBefore(this.range[1]):!1},isInvalidRange(){return this.selectedRange&&this.selectedRange.endDate?x(this.selectedRange.startDate).isAfter(x(this.selectedRange.endDate))||x(this.selectedRange.endDate).isBefore(x(this.selectedRange.startDate)):!1},isRangeEdge(t){return this.range&&this.range.length===2&&this.range[0]&&this.range[1]?x(t.date).isSame(this.range[0],"day")||x(t.date).isSame(this.range[1],"day"):!1},setYear(t){parseInt(t.srcElement.value)>0&&parseInt(t.srcElement.value)<9999&&(this.currentDay.year(t.srcElement.value),this.selectDate({date:this.currentDay.clone()}))},subYear(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.selectDate({date:this.currentDay.clone()}))},addYear(){this.currentDay.add(1,"year"),this.selectDate({date:this.currentDay.clone()})},toggleView(t){this.currentView=t,this.currentView==="years"&&setTimeout(()=>{this.$refs.year.select()},100),this.currentView==="days"&&setTimeout(()=>{this.$refs.hours.addEventListener("focus",function(e){this.select()}),this.$refs.minutes.addEventListener("focus",function(e){this.select()})},100)},setMonth(t){this.currentDay.month(t),this.selectDate({date:this.currentDay.clone()})},detectHoursChange(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.selectDate({date:this.currentDay.clone()})},detectMinuteChange(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.selectDate({date:this.currentDay.clone()})},checkClickedItem(t){this.$parent.$el.getAttribute("class").split(" ").includes("picker")&&(!this.$parent.$el.contains(t.srcElement)&&!this.clickedOnCalendar&&this.visible&&this.$emit("onClickOut",!0),setTimeout(()=>{this.clickedOnCalendar=!1},100))},selectDate(t){if([void 0].includes(t))this.$emit("set",null);else{if(this.side==="left"&&x(this.selectedRange.endDate).isValid()&&t.date.isAfter(this.selectedRange.endDate))return E.error(p("The left range will be invalid.")).subscribe(),!1;if(this.side==="right"&&x(this.selectedRange.startDate).isValid()&&t.date.isBefore(this.selectedRange.startDate))return E.error(p("The right range will be invalid.")).subscribe(),!1;this.currentDay=t.date,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.$emit("set",this.currentDay.format("YYYY-MM-DD HH:mm:ss"))}this.build()},subMonth(){this.currentDay.subtract(1,"month"),this.build()},addMonth(){this.currentDay.add(1,"month"),this.build()},resetCalendar(){this.calendar=[[]]},build(){this.resetCalendar(),this.currentDay.clone().startOf("month");const t=this.currentDay.clone().startOf("month"),e=this.currentDay.clone().endOf("month");for(;;){t.day()===0&&this.calendar[0].length>0&&this.calendar.push([]);let s=this.calendar.length-1;if(this.calendar[s].push({date:t.clone(),dayOfWeek:t.day(),isToday:t.isSame(x.now(),"day"),isDifferentMonth:!1,isNextMonth:!1,isPreviousMonth:!1}),t.isSame(e,"day"))break;t.add(1,"day")}if(this.calendar[0].length<7){const s=7-this.calendar[0].length,u=this.calendar[0][0].date.clone(),d=[];for(let n=0;n<s;n++)u.subtract(1,"day"),d.unshift({date:u.clone(),dayOfWeek:u.day(),isToday:u.isSame(x.now(),"day"),isDifferentMonth:!0,isNextMonth:!1,isPreviousMonth:!0});this.calendar[0].unshift(...d)}if(this.calendar[this.calendar.length-1].length<7){const s=this.calendar.length-1,u=7-this.calendar[s].length,d=this.calendar[s][this.calendar[s].length-1].date.clone(),n=[];for(let a=0;a<u;a++)d.add(1,"day"),n.push({date:d.clone(),dayOfWeek:d.day(),isToday:d.isSame(x.now(),"day"),isDifferentMonth:!0,isNextMonth:!0,isPreviousMonth:!1});this.calendar[s].push(...n)}}}},Ie={key:0,class:"flex-auto"},ze={class:"p-2 flex items-center"},qe={class:"flex flex-auto font-semibold text-fontcolor justify-center"},We={class:"h-32 flex grow-0 items-center justify-center text-fontcolor p-4"},Ge={class:"rounded input-group info border-2 flex overflow-hidden"},Qe={class:"w-24 flex grow-0"},Ke=["value"],Ze={class:"p-2"},Xe={key:1,class:"flex-auto border-b border-box-background"},Je={class:"p-2 flex items-center"},et={class:"flex flex-auto font-semibold text-fontcolor justify-center"},tt={class:"mr-2 border-b border-info-secondary border-dashed"},st={class:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-fontcolor divide-x divide-y border-b border-box-background"},nt={class:"w-full h-full"},lt=["onClick"],it={class:"p-2"},rt={key:2},at={class:"p-2 flex items-center"},dt={class:"flex flex-auto font-semibold text-fontcolor justify-center"},ot={class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-fontcolor divide-x divide-y"},ut={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},ct={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},ht={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},ft={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},mt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},gt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},bt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},pt=["onClick"],vt={key:0},yt={key:1,class:"text-fontcolor-soft"},_t={class:"border-t border-tab-table-th w-full p-2"},kt={class:"-mx-1 flex justify-between"},wt={class:"px-1"},xt={class:"-mx-1 flex"},Dt={class:"px-1"},Ct={class:"px-2"},Mt={key:0,class:"rounded border-tab-table-th-edge flex items-center justify-center p-1 border"};function Tt(t,e,s,u,d,n){return i(),r("div",{onClick:e[21]||(e[21]=a=>n.handleCalendarClick()),class:"flex bg-box-background flex-col rounded-lg overflow-hidden"},[d.currentView==="years"?(i(),r("div",Ie,[l("div",ze,[l("div",null,[l("button",{onClick:e[0]||(e[0]=a=>n.subMonth()),class:"w-8 h-8 ns-inset-button border outline-hidden text-numpad-text rounded"},e[22]||(e[22]=[l("i",{class:"las la-angle-left"},null,-1)]))]),l("div",qe,[l("span",{class:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",onClick:e[1]||(e[1]=a=>n.toggleView("months"))},h(d.currentDay.format("MMM")),1),l("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:e[2]||(e[2]=a=>n.toggleView("years"))},h(d.currentDay.format("YYYY")),1)]),l("div",null,[l("button",{onClick:e[3]||(e[3]=a=>n.addMonth()),class:"w-8 h-8 ns-inset-button border outline-hidden text-numpad-text rounded"},e[23]||(e[23]=[l("i",{class:"las la-angle-right"},null,-1)]))])]),l("div",We,[l("div",Ge,[l("button",{onClick:e[4]||(e[4]=a=>n.subYear()),class:"px-2 py-2"},e[24]||(e[24]=[l("i",{class:"las la-minus"},null,-1)])),l("div",Qe,[l("input",{type:"text",ref:"year",class:"p-2 flex-auto w-full text-center outline-hidden",onChange:e[5]||(e[5]=a=>n.setYear(a)),value:d.currentDay.format("YYYY")},null,40,Ke)]),l("button",{onClick:e[6]||(e[6]=a=>n.addYear()),class:"px-2 py-2"},e[25]||(e[25]=[l("i",{class:"las la-plus"},null,-1)]))])]),l("div",Ze,[l("button",{onClick:e[7]||(e[7]=a=>n.toggleView("days")),class:"p-2 w-full ns-inset-button border text-sm error hover:text-white rounded flex items-center justify-center"},h(n.__("Return To Calendar")),1)])])):c("",!0),d.currentView==="months"?(i(),r("div",Xe,[l("div",Je,[l("div",null,[l("button",{onClick:e[8]||(e[8]=a=>n.subYear()),class:"w-8 h-8 ns-inset-button outline-hidden border rounded"},e[26]||(e[26]=[l("i",{class:"las la-angle-left"},null,-1)]))]),l("div",et,[l("span",tt,h(d.currentDay.format("MMM")),1),l("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:e[9]||(e[9]=a=>n.toggleView("years"))},h(d.currentDay.format("YYYY")),1)]),l("div",null,[l("button",{onClick:e[10]||(e[10]=a=>n.addYear()),class:"w-8 h-8 ns-inset-button outline-hidden border rounded"},e[27]||(e[27]=[l("i",{class:"las la-angle-right"},null,-1)]))])]),l("div",st,[(i(!0),r(v,null,C(d.months,(a,o)=>(i(),r("div",{key:o,class:"h-8 flex justify-center items-center text-sm border-box-background"},[l("div",nt,[l("div",{class:m([n.momentCopy.month(a).format("MM")===d.currentDay.format("MM")?"bg-info-secondary text-white":"hover:bg-numpad-hover","h-full w-full border-box-background flex items-center justify-center cursor-pointer"]),onClick:f=>n.setMonth(a)},h(n.momentCopy.format("MMM")),11,lt)])]))),128))]),l("div",it,[l("button",{onClick:e[11]||(e[11]=a=>n.toggleView("days")),class:"p-2 w-full ns-inset-button border text-sm error rounded flex items-center justify-center"},h(n.__("Return To Calendar")),1)])])):c("",!0),d.currentView==="days"?(i(),r("div",rt,[l("div",at,[l("div",null,[l("button",{onClick:e[12]||(e[12]=a=>n.subMonth()),class:"w-8 h-8 ns-inset-button border rounded"},e[28]||(e[28]=[l("i",{class:"las la-angle-left"},null,-1)]))]),l("div",dt,[l("span",{class:"mr-2 cursor-pointer border-b border-info-secondary border-dashed",onClick:e[13]||(e[13]=a=>n.toggleView("months"))},h(d.currentDay.format("MMM")),1),l("span",{class:"cursor-pointer border-b border-info-secondary border-dashed",onClick:e[14]||(e[14]=a=>n.toggleView("years"))},h(d.currentDay.format("YYYY")),1)]),l("div",null,[l("button",{onClick:e[15]||(e[15]=a=>n.addMonth()),class:"w-8 h-8 ns-inset-button border rounded"},e[29]||(e[29]=[l("i",{class:"las la-angle-right"},null,-1)]))])]),l("div",ot,[l("div",ut,h(n.__("Sun")),1),l("div",ct,h(n.__("Mon")),1),l("div",ht,h(n.__("Tue")),1),l("div",ft,h(n.__("Wed")),1),l("div",mt,h(n.__("Thr")),1),l("div",gt,h(n.__("Fri")),1),l("div",bt,h(n.__("Sat")),1)]),(i(!0),r(v,null,C(d.calendar,(a,o)=>(i(),r("div",{key:o,class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-fontcolor divide-x divide-y"},[(i(!0),r(v,null,C(d.daysOfWeek,(f,g)=>(i(),r("div",{key:g,class:"md:h-10 h-8 flex justify-center items-center text-sm border-tab-table-th"},[(i(!0),r(v,null,C(a,(b,F)=>(i(),r(v,null,[b.dayOfWeek===f?(i(),r("div",{key:F,class:m([n.getDayClass({day:b,_dayIndex:F,dayOfWeek:f,_index:g,currentDay:d.currentDay}),"h-full w-full flex items-center justify-center cursor-pointer"]),onClick:O=>n.selectDate(b)},[b.isDifferentMonth?c("",!0):(i(),r("span",vt,h(b.date.format("DD")),1)),b.isDifferentMonth?(i(),r("span",yt,h(b.date.format("DD")),1)):c("",!0)],10,pt)):c("",!0)],64))),256))]))),128))]))),128))])):c("",!0),l("div",_t,[l("div",kt,[l("div",wt,[l("div",xt,[l("div",Dt,[l("button",{onClick:e[16]||(e[16]=a=>n.erase()),class:"border ns-inset-button text-sm error rounded md:w-10 w-8 md:h-10 h-8 flex items-center justify-center"},e[30]||(e[30]=[l("i",{class:"las la-trash text-lg"},null,-1)]))])])]),l("div",Ct,[d.currentView==="days"?(i(),r("div",Mt,[e[31]||(e[31]=l("span",{class:"pr-2 pl-1 text-font"},[l("i",{class:"las la-clock"})],-1)),R(l("input",{placeholder:"HH",ref:"hours",onChange:e[17]||(e[17]=a=>n.detectHoursChange(a)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-background outline-hidden text-sm active:border-numpad-edge","onUpdate:modelValue":e[18]||(e[18]=a=>d.hours=a),type:"number"},null,544),[[A,d.hours]]),e[32]||(e[32]=l("span",{class:"mx-1"},":",-1)),R(l("input",{placeholder:"mm",ref:"minutes",onChange:e[19]||(e[19]=a=>n.detectMinuteChange(a)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-background outline-hidden text-sm active:border-numpad-edge","onUpdate:modelValue":e[20]||(e[20]=a=>d.minutes=a),type:"number"},null,544),[[A,d.minutes]])])):c("",!0)])])])])}const ce=D(Ne,[["render",Tt]]),St={data:()=>({}),props:["checked","field","label"],computed:{isChecked(){return this.field?this.field.value:this.checked},hasError(){return!!(this.field&&this.field.errors!==void 0&&this.field.errors.length>0)}},methods:{toggleIt(){this.field!==void 0&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}},Et={class:"w-6 h-6 flex border items-center justify-center cursor-pointer"},Ft={key:0,class:"las la-check"},Rt={key:0,class:"mx-2"},Ot={key:1,class:"mx-2"};function Pt(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",null,[l("div",{class:m(["flex ns-checkbox cursor-pointer mb-2",(n.isChecked?"checked":"")+" "+(s.field?n.hasError?"has-error":"is-pristine":"")]),onClick:e[0]||(e[0]=o=>n.toggleIt())},[l("div",Et,[n.isChecked?(i(),r("i",Ft)):c("",!0)]),s.label?(i(),r("label",Rt,h(s.label),1)):c("",!0),s.field?(i(),r("label",Ot,h(s.field.label),1)):c("",!0)],2),s.field?(i(),S(a,{key:0,field:s.field},null,8,["field"])):c("",!0)])}const jt=D(St,[["render",Pt]]),At={name:"ns-close-button",methods:{}},Ht={class:"outline-hidden ns-close-button hover:border-transparent border rounded-full h-8 min-w-[2rem] items-center justify-center"};function $t(t,e,s,u,d,n){return i(),r("button",Ht,[e[0]||(e[0]=l("i",{class:"las la-times"},null,-1)),e[1]||(e[1]=k()),w(t.$slots,"default")])}const Ut=D(At,[["render",$t]]),Lt={data(){return{fields:[],validation:new de}},props:["popup"],methods:{__:p,popupCloser:ae,popupResolver:re,closePopup(){this.popupResolver(!1)},useFilters(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters(){this.fields.forEach(t=>t.value=""),this.popupResolver(null)}},mounted(){this.fields=this.validation.createFields(this.popup.params.queryFilters),this.popupCloser()}},Yt={class:"ns-box shadow-lg w-95vw h-95vh md:w-3/5-screen md:h-5/6-screen flex flex-col"},Bt={class:"p-2 border-b ns-box-header flex justify-between items-center"},Vt={class:"p-2 ns-box-body flex-auto"},Nt={class:"p-2 flex justify-between ns-box-footer border-t"};function It(t,e,s,u,d,n){const a=y("ns-close-button"),o=y("ns-field"),f=y("ns-button");return i(),r("div",Yt,[l("div",Bt,[l("h3",null,h(n.__("Search Filters")),1),l("div",null,[T(a,{onClick:e[0]||(e[0]=g=>n.closePopup())})])]),l("div",Vt,[(i(!0),r(v,null,C(d.fields,(g,b)=>(i(),S(o,{field:g,key:b},null,8,["field"]))),128))]),l("div",Nt,[l("div",null,[T(f,{onClick:e[1]||(e[1]=g=>n.clearFilters()),type:"error"},{default:M(()=>[k(h(n.__("Clear Filters")),1)]),_:1})]),l("div",null,[T(f,{onClick:e[2]||(e[2]=g=>n.useFilters()),type:"info"},{default:M(()=>[k(h(n.__("Use Filters")),1)]),_:1})])])])}const zt=D(Lt,[["render",It]]),qt={data:()=>({prependOptions:!1,showOptions:!0,showCheckboxes:!0,isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],headerButtons:[],withFilters:!1,selectedEntriesSubject:new RxJS.BehaviorSubject([]),columns:[],selectedEntries:[],globallyChecked:!1,showSelectedEntries:!0,crudConfig:{},result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}),name:"ns-crud",mounted(){this.identifier!==void 0&&nsCrudHandler.defineInstance(this.identifier,this),this.loadConfig()},watch:{selectedEntries:{deep:!0,handler(t){this.selectedEntriesSubject.next(t),this.result.data.forEach(e=>{t.filter(u=>u.$id===e.$id).length>0?e.$checked=!0:e.$checked=!1})}}},props:["src","createUrl","mode","identifier","queryParams","popup"],computed:{getParsedSrc(){return`${this.src}?${this.sortColumn}${this.searchQuery}${this.queryFiltersString}${this.queryPage}${this.getQueryParams()?"&"+this.getQueryParams():""}`},showQueryFilters(){return this.queryFilters.length>0},getSelectedAction(){const t=this.bulkActions.filter(e=>e.identifier===this.bulkAction);return t.length>0?t[0]:!1},pagination(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage(){return this.result?`&page=${this.page}`:""},resultInfo(){return p("displaying {perPage} on {items} items").replace("{perPage}",this.result.per_page||0).replace("{items}",this.result.total||0)},headerButtonsComponents(){return this.headerButtons.map(t=>Ee(()=>new Promise(e=>{e(nsExtraComponents[t])})))}},methods:{__:p,getQueryParams(){return this.queryParams?Object.keys(this.queryParams).map(t=>`${t}=${this.queryParams[t]}`).join("&"):""},pageNumbers(t,e){var s=[];e-3>1&&s.push(1,"...");for(let u=1;u<=t;u++)e+3>u&&e-3<u&&s.push(u);return e+3<t&&s.push("...",t),s.filter(u=>u>0||typeof u=="string")},handleHeaderButtonUpdate(t){for(let e in t)["selectedEntries","page","bulkAction","searchInput","globallyChecked","sortColumn","searchQuery","queryFiltersString","withFilters","bulkActions"].includes(e)&&(this[e]=t[e])},downloadContent(){nsHttpClient.post(`${this.src}/export?${this.getParsedSrc}`,{entries:this.selectedEntries.map(t=>t.$id)}).subscribe(t=>{setTimeout(()=>document.location=t.url,300),E.success(p("The document has been generated.")).subscribe()},t=>{E.error(t.message||p("Unexpected error occurred.")).subscribe()})},clearSelectedEntries(){L.show(V,{title:p("Clear Selected Entries ?"),message:p("Would you like to clear all selected entries ?"),onAction:t=>{t&&(this.selectedEntries=[],this.handleGlobalChange(!1))}})},refreshRow(t){if(t.$checked===!0)this.selectedEntries.filter(s=>s.$id===t.$id).length===0&&this.selectedEntries.push(t);else{const e=this.selectedEntries.filter(s=>s.$id===t.$id);if(e.length>0){const s=this.selectedEntries.indexOf(e[0]);this.selectedEntries.splice(s,1)}}},handleShowOptions(t){this.result.data.forEach(e=>{e.$id!==t.$id&&(e.$toggled=!1)})},handleGlobalChange(t){this.globallyChecked=t,this.result.data.forEach(e=>{e.$checked=t,this.refreshRow(e)})},loadConfig(){nsHttpClient.get(`${this.src}/config?${this.getQueryParams()}`).subscribe(e=>{this.crudConfig=e,this.columns=e.columns,this.bulkActions=e.bulkActions,this.queryFilters=e.queryFilters,this.prependOptions=e.prependOptions,this.showOptions=e.showOptions,this.showCheckboxes=e.showCheckboxes,this.headerButtons=e.headerButtons||[],this.showSelectedEntries=e.showSelectedEntries,this.refresh()},e=>{E.error(e.message,"OK",{duration:!1}).subscribe()})},cancelSearch(){this.searchInput="",this.search()},search(){this.searchInput?this.searchQuery=`&search=${this.searchInput}`:this.searchQuery="",this.page=1,this.refresh()},sort(t){if(this.columns[t].$sort===!1)return E.error(p("Sorting is explicitely disabled on this column")).subscribe();for(let e in this.columns)e!==t&&(this.columns[e].$sorted=!1,this.columns[e].$direction="");switch(this.columns[t].$sorted=!0,this.columns[t].$direction){case"asc":this.columns[t].$direction="desc";break;case"desc":this.columns[t].$direction="";break;case"":default:this.columns[t].$direction="asc";break}["asc","desc"].includes(this.columns[t].$direction)?this.sortColumn=`active=${t}&direction=${this.columns[t].$direction}`:this.sortColumn="",this.$emit("sort",this.columns[t]),this.refresh()},bulkDo(){if(this.bulkAction)if(this.selectedEntries.length>0){if(confirm(this.getSelectedAction.confirm||p("Would you like to perform the selected bulk action on the selected entries ?")))return nsHttpClient.post(`${this.src}/bulk-actions`,{action:this.bulkAction,entries:this.selectedEntries.map(t=>t.$id)}).subscribe({next:t=>{E.info(t.message).subscribe(),this.selectedEntries=[],this.refresh()},error:t=>{E.error(t.message).subscribe()}})}else return E.error(p("No selection has been made.")).subscribe();else return E.error(p("No action has been selected.")).subscribe()},async openQueryFilter(){try{const t=await new Promise((e,s)=>{L.show(zt,{resolve:e,reject:s,queryFilters:this.queryFilters})});this.withFilters=!1,this.queryFiltersString="",t!==null&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(t))),this.refresh()}catch{}},refresh(){this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get(`${this.getParsedSrc}`).subscribe(e=>{e.data=e.data.map(s=>(this.selectedEntries.filter(d=>d.$id===s.$id).length>0&&(s.$checked=!0),s)),this.isRefreshing=!1,this.result=e,this.page=e.current_page},e=>{this.isRefreshing=!1,E.error(e.message).subscribe()})}}},Wt={key:0,id:"crud-table-header",class:"p-2 flex flex-col md:flex-row justify-between flex-wrap"},Gt={id:"crud-search-box",class:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex"},Qt={key:0,class:"px-2 flex items-center justify-center"},Kt=["href"],Zt={class:"px-2"},Xt={class:"rounded-full p-1 ns-crud-input flex"},Jt={class:"px-2 flex items-center justify-center"},es={key:1,class:"px-2 flex items-center"},ts={key:0,class:"las la-filter"},ss={key:1,class:"las la-check"},ls={key:2,class:"ml-1"},is={key:3,class:"ml-1"},rs={key:2,id:"custom-buttons"},as={id:"crud-buttons",class:"-mx-1 flex flex-wrap w-full md:w-auto"},ds={key:0,class:"px-1 flex items-center"},os={class:"px-1 flex items-center"},us={id:"crud-table-body",class:"flex"},cs={class:"overflow-x-auto flex-auto"},hs={key:0,class:"table ns-table w-full"},fs={key:0,class:"text-center px-2 border w-16 py-2"},ms={key:1,class:"text-left px-2 py-2 w-16 border"},gs=["onClick"],bs={class:"w-full flex justify-between items-center"},ps={class:"flex"},vs={class:"h-6 w-6 flex justify-center items-center"},ys={key:0,class:"las la-sort-amount-up"},_s={key:1,class:"las la-sort-amount-down"},ks={key:2,class:"text-left px-2 py-2 w-16 border"},ws={key:1},xs=["colspan"],Ds={class:"p-2 flex flex-col md:flex-row justify-between footer"},Cs={key:0,id:"grouped-actions",class:"mb-2 md:mb-0 flex justify-between rounded-full ns-crud-input p-1"},Ms={class:"bg-input-disabled",selected:"",value:""},Ts=["value"],Ss={class:"flex"},Es={class:"items-center flex text-fontcolor mx-4"},Fs={id:"pagination",class:"flex items-center -mx-1"},Rs=["onClick"];function Os(t,e,s,u,d,n){const a=y("ns-checkbox"),o=y("ns-table-row");return i(),r("div",{id:"crud-table",class:m(["w-full rounded-lg",s.mode!=="light"?"shadow mb-8":""])},[s.mode!=="light"?(i(),r("div",Wt,[l("div",Gt,[s.createUrl?(i(),r("div",Qt,[l("a",{href:s.createUrl||"#",class:"rounded-full ns-crud-button text-sm h-10 flex items-center justify-center cursor-pointer px-3 outline-hidden border"},e[18]||(e[18]=[l("i",{class:"las la-plus"},null,-1)]),8,Kt)])):c("",!0),l("div",Zt,[l("div",Xt,[R(l("input",{onKeypress:e[0]||(e[0]=Y(f=>n.search(),["enter"])),"onUpdate:modelValue":e[1]||(e[1]=f=>t.searchInput=f),type:"text",class:"w-36 md:w-auto bg-transparent outline-hidden px-2"},null,544),[[A,t.searchInput]]),l("button",{onClick:e[2]||(e[2]=f=>n.search()),class:"rounded-full w-8 h-8 outline-hidden ns-crud-input-button"},e[19]||(e[19]=[l("i",{class:"las la-search"},null,-1)])),t.searchQuery?(i(),r("button",{key:0,onClick:e[3]||(e[3]=f=>n.cancelSearch()),class:"ml-1 rounded-full w-8 h-8 outline-hidden ns-crud-input-button error"},e[20]||(e[20]=[l("i",{class:"las la-times"},null,-1)]))):c("",!0)])]),l("div",Jt,[l("button",{onClick:e[4]||(e[4]=f=>n.refresh()),class:"rounded-full text-sm h-10 px-3 outline-hidden border ns-crud-button"},[l("i",{class:m([t.isRefreshing?"animate-spin":"","las la-sync"])},null,2)])]),n.showQueryFilters?(i(),r("div",es,[l("button",{onClick:e[5]||(e[5]=f=>n.openQueryFilter()),class:m([t.withFilters?"table-filters-enabled":"table-filters-disabled","ns-crud-button border rounded-full text-sm h-10 px-3 outline-hidden"])},[t.withFilters?c("",!0):(i(),r("i",ts)),t.withFilters?(i(),r("i",ss)):c("",!0),t.withFilters?c("",!0):(i(),r("span",ls,h(n.__("Filters")),1)),t.withFilters?(i(),r("span",is,h(n.__("Has Filters")),1)):c("",!0)],2)])):c("",!0),n.headerButtonsComponents.length>0?(i(),r("div",rs,[(i(!0),r(v,null,C(n.headerButtonsComponents,(f,g)=>(i(),S(N(f),{onUpdate:e[6]||(e[6]=b=>n.handleHeaderButtonUpdate(b)),config:t.crudConfig,onRefresh:e[7]||(e[7]=b=>n.refresh()),selectedSubject:t.selectedEntriesSubject,result:t.result,key:g},null,40,["config","selectedSubject","result"]))),128))])):c("",!0)]),l("div",as,[t.selectedEntries.length>0&&t.showSelectedEntries?(i(),r("div",ds,[l("button",{onClick:e[8]||(e[8]=f=>n.clearSelectedEntries()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 outline-hidden ns-crud-button border"},[e[21]||(e[21]=l("i",{class:"lar la-check-square"},null,-1)),k(" "+h(n.__("{entries} entries selected").replace("{entries}",t.selectedEntries.length)),1)])])):c("",!0),l("div",os,[l("button",{onClick:e[9]||(e[9]=f=>n.downloadContent()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 ns-crud-button border outline-hidden"},[e[22]||(e[22]=l("i",{class:"las la-download"},null,-1)),k(" "+h(n.__("Download")),1)])])])])):c("",!0),l("div",us,[l("div",cs,[Object.values(t.columns).length>0?(i(),r("table",hs,[l("thead",null,[l("tr",null,[t.showCheckboxes?(i(),r("th",fs,[T(a,{checked:t.globallyChecked,onChange:e[10]||(e[10]=f=>n.handleGlobalChange(f))},null,8,["checked"])])):c("",!0),t.prependOptions&&t.showOptions?(i(),r("th",ms)):c("",!0),(i(!0),r(v,null,C(t.columns,(f,g)=>(i(),r("th",{key:g,onClick:b=>n.sort(g),style:Fe({width:f.width||"auto","max-width":f.maxWidth||"auto","min-width":f.minWidth||"auto"}),class:"cursor-pointer justify-between w-40 border text-left px-2 py-2"},[l("div",bs,[l("span",ps,h(f.label),1),l("span",vs,[f.$direction==="desc"?(i(),r("i",ys)):c("",!0),f.$direction==="asc"?(i(),r("i",_s)):c("",!0)])])],12,gs))),128)),!t.prependOptions&&t.showOptions?(i(),r("th",ks)):c("",!0)])]),l("tbody",null,[t.result.data!==void 0&&t.result.data.length>0?(i(!0),r(v,{key:0},C(t.result.data,(f,g)=>(i(),S(o,{key:g,onUpdated:e[11]||(e[11]=b=>n.refreshRow(b)),columns:t.columns,prependOptions:t.prependOptions,showOptions:t.showOptions,showCheckboxes:t.showCheckboxes,row:f,onReload:e[12]||(e[12]=b=>n.refresh()),onToggled:e[13]||(e[13]=b=>n.handleShowOptions(b))},null,8,["columns","prependOptions","showOptions","showCheckboxes","row"]))),128)):c("",!0),!t.result||t.result.data.length===0?(i(),r("tr",ws,[l("td",{colspan:Object.values(t.columns).length+2,class:"text-center border py-3"},h(n.__("There is nothing to display...")),9,xs)])):c("",!0)])])):c("",!0)])]),l("div",Ds,[t.bulkActions.length>0?(i(),r("div",Cs,[R(l("select",{class:"outline-hidden bg-transparent","onUpdate:modelValue":e[14]||(e[14]=f=>t.bulkAction=f),id:"grouped-actions"},[l("option",Ms,[w(t.$slots,"bulk-label",{},()=>[k(h(n.__("Bulk Actions")),1)])]),(i(!0),r(v,null,C(t.bulkActions,(f,g)=>(i(),r("option",{class:"bg-input-disabled",key:g,value:f.identifier},h(f.label),9,Ts))),128))],512),[[U,t.bulkAction]]),l("button",{onClick:e[15]||(e[15]=f=>n.bulkDo()),class:"ns-crud-input-button h-8 px-3 outline-hidden rounded-full flex items-center justify-center"},[w(t.$slots,"bulk-go",{},()=>[k(h(n.__("Apply")),1)])])])):c("",!0),l("div",Ss,[l("div",Es,h(n.resultInfo),1),l("div",Fs,[t.result.current_page?(i(),r(v,{key:0},[l("a",{href:"javascript:void(0)",onClick:e[16]||(e[16]=f=>{t.page=t.result.first_page,n.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},e[23]||(e[23]=[l("i",{class:"las la-angle-double-left"},null,-1)])),(i(!0),r(v,null,C(n.pagination,(f,g)=>(i(),r(v,null,[t.page!=="..."?(i(),r("a",{key:g,class:m([t.page==f?"active":"","mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"]),onClick:b=>{t.page=f,n.refresh()},href:"javascript:void(0)"},h(f),11,Rs)):c("",!0),t.page==="..."?(i(),r("a",{key:g,href:"javascript:void(0)",class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"},"...")):c("",!0)],64))),256)),l("a",{href:"javascript:void(0)",onClick:e[17]||(e[17]=f=>{t.page=t.result.last_page,n.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},e[24]||(e[24]=[l("i",{class:"las la-angle-double-right"},null,-1)]))],64)):c("",!0)])])])],2)}const Ps=D(qt,[["render",Os]]),js={data:()=>({form:{},globallyChecked:!1,formValidation:new de,links:{},rows:[],optionAttributes:{},extraComponents:()=>nsExtraComponents,nsComponents:()=>nsComponents}),emits:["updated","saved"],mounted(){this.loadForm()},props:["src","createUrl","fieldClass","submitUrl","submitMethod","disableTabs","queryParams","popup"],computed:{activeTabFields(){for(let t in this.form.tabs)if(this.form.tabs[t].active)return this.form.tabs[t].fields;return[]},activeTab(){for(let t in this.form.tabs)if(this.form.tabs[t].active)return this.form.tabs[t];return!1},activeTabIdentifier(){for(let t in this.form.tabs)if(this.form.tabs[t].active)return t;return{}}},methods:{__:p,popupResolver:re,toggle(t){for(let e in this.form.tabs)this.form.tabs[e].active=!1;this.form.tabs[t].active=!0},async handleSaved(t,e,s){this.form.tabs[e].fields.filter(u=>{u.name===s.name&&t.data.entry&&(u.options.push({label:t.data.entry[this.optionAttributes.label],value:t.data.entry[this.optionAttributes.value]}),u.value=t.data.entry.id)})},handleClose(){this.popup&&this.popupResolver(!1)},submit(){if(this.formValidation.validateForm(this.form).length>0)return E.error(p("The form is not valid. Double check it or refer to the error dislayed above."),p("Close")).subscribe();if(this.formValidation.disableForm(this.form),this.submitUrl===void 0)return E.error(p("No submit URL was provided"),p("Okay")).subscribe();$[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.appendQueryParamas(this.submitUrl),this.formValidation.extractForm(this.form)).subscribe(e=>{if(e.status==="success")if(this.popup)this.popupResolver(e);else{if(this.submitMethod&&this.submitMethod.toLowerCase()==="post"&&this.links.list!==!1)return document.location=e.data.editUrl||this.links.list;E.info(e.message,p("Okay"),{duration:3e3}).subscribe(),this.$emit("saved",e)}this.formValidation.enableForm(this.form)},e=>{E.error(e.message,void 0,{duration:5e3}).subscribe(),e.data!==void 0&&this.formValidation.triggerError(this.form,e.data),this.formValidation.enableForm(this.form)})},handleGlobalChange(t){this.globallyChecked=t,this.rows.forEach(e=>e.$checked=t)},loadForm(){return new Promise((t,e)=>{$.get(`${this.appendQueryParamas(this.src)}`).subscribe({next:u=>{t(u),this.form=this.parseForm(u.form),this.links=u.links,this.optionAttributes=u.optionAttributes,oe.doAction("ns-crud-form-loaded",this),this.form.main&&setTimeout(()=>{this.$el.querySelector("#crud-form input").focus()},100),this.$emit("updated",this.form)},error:u=>{e(u),E.error(u.message,p("Okay"),{duration:0}).subscribe()}})})},appendQueryParamas(t){if(this.queryParams===void 0)return t;const e=Object.keys(this.queryParams).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(this.queryParams[s])}`).join("&");return t.includes("?")?`${t}&${e}`:`${t}?${e}`},parseForm(t){t.main.value=t.main.value===void 0?"":t.main.value,t.main=this.formValidation.createFields([t.main])[0];let e=0;for(let s in t.tabs)e===0&&(t.tabs[s].active=!0),t.tabs[s].active=t.tabs[s].active===void 0?!1:t.tabs[s].active,t.tabs[s].fields=this.formValidation.createFields(t.tabs[s].fields),t.tabs[s].subject=new je({}),t.tabs[s].fields.forEach(u=>{u.subject=t.tabs[s].subject}),t.tabs[s].component&&t.tabs[s].instance===void 0&&(t.tabs[s].instance={object:G(this.extraComponents()[t.tabs[s].component]),errors:[]}),e++;return t},handleFieldChange(t,e){t.errors.length===0&&t.subject.next({field:t,fields:e})},handleTabError(t){this.form.tabs[this.activeTabIdentifier].instance.errors=[],t!==!1?this.form.tabs[this.activeTabIdentifier].instance.errors.push(...t):this.form.tabs[this.activeTabIdentifier].instance.errors=[]},handleTabChange(t){this.form.tabs[this.activeTabIdentifier].fields=t}}},As={key:0,class:"flex items-center justify-center h-full"},Hs={key:1,class:"box-header border-b border-box-edge box-border p-2 flex justify-between items-center"},$s={class:"text-fontcolor font-bold text-lg"},Us={class:"flex flex-col"},Ls={key:0,class:"flex justify-between items-center"},Ys={for:"title",class:"font-bold my-2 text-font"},Bs={key:0},Vs={for:"title",class:"text-sm my-2"},Ns=["href"],Is=["disabled"],zs=["disabled"],qs={key:0,class:"text-xs text-fontcolor py-1"},Ws={key:0},Gs={key:1},Qs={class:"header flex ml-4",style:{"margin-bottom":"-1px"}},Ks=["onClick"],Zs={class:"ns-tab-item"},Xs={class:"border p-4 rounded"},Js={key:0,class:"-mx-4 flex flex-wrap"},en={key:1,class:"-mx-4 flex flex-wrap"},tn={key:1,class:"px-4 text-center"},sn={class:"text-error-tertiary border-dashed border-error-tertiary border p-4"},nn={key:2,class:"flex justify-end"},ln=["disabled"];function rn(t,e,s,u,d,n){const a=y("ns-spinner"),o=y("ns-close-button"),f=y("ns-field");return Object.values(t.form).length>0?(i(),r("div",{key:0,class:m(["form flex-auto",s.popup?"ns-box w-95vw md:w-2/3-screen max-h-6/7-screen overflow-hidden flex flex-col":""]),id:"crud-form"},[Object.values(t.form).length===0?(i(),r("div",As,[T(a)])):c("",!0),s.popup?(i(),r("div",Hs,[l("h2",$s,h(s.popup.params.title),1),l("div",null,[T(o,{onClick:e[0]||(e[0]=g=>n.handleClose())})])])):c("",!0),Object.values(t.form).length>0?(i(),r("div",{key:2,class:m(s.popup?"p-2 overflow-y-auto":"")},[l("div",Us,[t.form.main?(i(),r("div",Ls,[l("label",Ys,[t.form.main.name?(i(),r("span",Bs,h(t.form.main.label),1)):c("",!0)]),l("div",Vs,[t.links.list&&!s.popup?(i(),r("a",{key:0,href:t.links.list,class:"rounded-full border px-2 py-1 ns-inset-button error"},h(n.__("Go Back")),9,Ns)):c("",!0)])])):c("",!0),t.form.main.name?(i(),r(v,{key:1},[l("div",{class:m([t.form.main.disabled?"disabled":t.form.main.errors.length>0?"error":"primary","input-group flex border rounded overflow-hidden"])},[R(l("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>t.form.main.value=g),onKeydown:e[2]||(e[2]=Y(g=>n.submit(),["enter"])),onKeypress:e[3]||(e[3]=g=>t.formValidation.checkField(t.form.main)),onBlur:e[4]||(e[4]=g=>t.formValidation.checkField(t.form.main)),onChange:e[5]||(e[5]=g=>t.formValidation.checkField(t.form.main)),disabled:t.form.main.disabled,type:"text",class:"flex-auto outline-hidden h-10 px-2"},null,40,Is),[[A,t.form.main.value]]),l("button",{disabled:t.form.main.disabled,class:m([t.form.main.disabled?"disabled":t.form.main.errors.length>0?"error":"","outline-hidden px-4 h-10 text-white"]),onClick:e[6]||(e[6]=g=>n.submit())},h(n.__("Save")),11,zs)],2),t.form.main.description&&t.form.main.errors.length===0?(i(),r("p",qs,h(t.form.main.description),1)):c("",!0),(i(!0),r(v,null,C(t.form.main.errors,(g,b)=>(i(),r("p",{key:b,class:"text-xs py-1 text-error-tertiary"},[g.identifier==="required"?(i(),r("span",Ws,[w(t.$slots,"error-required",{},()=>[k(h(g.identifier),1)])])):c("",!0),g.identifier==="invalid"?(i(),r("span",Gs,[w(t.$slots,"error-invalid",{},()=>[k(h(g.message),1)])])):c("",!0)]))),128))],64)):c("",!0)]),s.disableTabs!=="true"?(i(),r("div",{key:0,id:"tabs-container",class:m([s.popup?"mt-5":"my-5","ns-tab"])},[l("div",Qs,[(i(!0),r(v,null,C(t.form.tabs,(g,b)=>(i(),r("div",{key:b,onClick:F=>n.toggle(b),class:m([g.active?"active border":"inactive border","tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer"]),style:{"margin-right":"-1px"}},h(g.label),11,Ks))),128))]),l("div",Zs,[l("div",Xs,[n.activeTabFields.length>0&&!n.activeTab.component?(i(),r("div",Js,[(i(!0),r(v,null,C(n.activeTabFields,(g,b)=>(i(),r("div",{key:`${n.activeTabIdentifier}-${b}`,class:m(s.fieldClass||"px-4 w-full md:w-1/2 lg:w-1/3")},[T(f,{onSaved:F=>n.handleSaved(F,n.activeTabIdentifier,g),onBlur:F=>t.formValidation.checkField(g),onChange:F=>t.formValidation.checkField(g)&&n.handleFieldChange(g,n.activeTabFields),field:g},null,8,["onSaved","onBlur","onChange","field"])],2))),128))])):c("",!0),n.activeTab&&n.activeTab.component?(i(),r("div",en,[n.activeTab.instance.object?(i(),r("div",{key:`${n.activeTabIdentifier}`,class:m(s.fieldClass||"px-4 w-full")},[(i(),S(le,null,[(i(),S(N(n.activeTab.instance.object),{onChanged:e[7]||(e[7]=g=>n.handleTabChange(g)),onInvalid:e[8]||(e[8]=g=>n.handleTabError(g)),tab:n.activeTab},null,40,["tab"]))],1024))],2)):(i(),r("div",tn,[l("div",sn,h(n.__("Failed to load the component: {component}".replace("{component}",n.activeTab.component))),1)]))])):c("",!0),t.form.main.name?c("",!0):(i(),r("div",nn,[l("div",{class:m(["ns-button",t.form.main.disabled?"default":t.form.main.errors.length>0?"error":"info"])},[l("button",{disabled:t.form.main.disabled,onClick:e[9]||(e[9]=g=>n.submit()),class:"outline-hidden px-4 h-10 border-l"},h(n.__("Save")),9,ln)],2)]))])])],2)):c("",!0)],2)):c("",!0)],2)):c("",!0)}const an=D(js,[["render",rn]]),dn={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-input-edge cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},on=["for"],un={class:"text-fontcolor-soft mt-1 relative overflow-hidden border rounded-md focus:shadow-sm"},cn={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},hn={class:"sm:text-sm sm:leading-5"},fn=["disabled","id","placeholder"];function mn(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",{class:m(["flex flex-auto flex-col mb-2 ns-date",n.hasError?"has-error":"is-pristine"])},[l("label",{for:s.field.name,class:"block leading-5 font-medium"},[w(t.$slots,"default")],8,on),l("div",un,[s.leading?(i(),r("div",cn,[l("span",hn,h(s.leading),1)])):c("",!0),R(l("input",{disabled:s.field.disabled,"onUpdate:modelValue":e[0]||(e[0]=o=>s.field.value=o),onBlur:e[1]||(e[1]=o=>t.$emit("blur",this)),onChange:e[2]||(e[2]=o=>t.$emit("change",this)),id:s.field.name,type:"date",class:m([n.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,fn),[[A,s.field.value]])]),T(a,{field:s.field},null,8,["field"])],2)}const gn=D(dn,[["render",mn]]),he={isSame:(t,e,s)=>{let u=new Date(t),d=new Date(e);return s==="date"&&(u.setHours(0,0,0,0),d.setHours(0,0,0,0)),u.getTime()===d.getTime()},daysInMonth:(t,e)=>new Date(t,e,0).getDate(),weekNumber:t=>ve(t),format:(t,e)=>W(t,e),nextMonth:t=>{let e=new Date(t.getTime());return e.setDate(1),e.setMonth(e.getMonth()+1),e},prevMonth:t=>{let e=new Date(t.getTime());return e.setDate(1),e.setMonth(e.getMonth()-1),e},validateDateRange:(t,e,s)=>{let u=new Date(s),d=new Date(e);return s&&t.getTime()>u.getTime()?u:e&&t.getTime()<d.getTime()?d:t},localeData:t=>({...{direction:"ltr",format:"mm/dd/yyyy",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:W.i18n.dayNames.slice(0,7).map(s=>s.substring(0,2)),monthNames:W.i18n.monthNames.slice(0,12),firstDay:0},...t}),yearMonth:t=>{let e=t.getMonth()+1;return t.getFullYear()+(e<10?"0":"")+e},isValidDate:t=>t instanceof Date&&!isNaN(t)},Q={props:{dateUtil:{type:[Object,String],default:"native"}},created(){this.$dateUtil=he}},bn={mixins:[Q],name:"calendar",props:{monthDate:Date,localeData:Object,start:Date,end:Date,minDate:Date,maxDate:Date,showDropdowns:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},dateFormat:{type:Function,default:null}},data(){let t=this.monthDate||this.start||new Date;return{currentMonthDate:t,year_text:t.getFullYear()}},methods:{prevMonthClick(){this.changeMonthDate(this.$dateUtil.prevMonth(this.currentMonthDate))},nextMonthClick(){this.changeMonthDate(this.$dateUtil.nextMonth(this.currentMonthDate))},changeMonthDate(t,e=!0){let s=this.$dateUtil.yearMonth(this.currentMonthDate);this.currentMonthDate=this.$dateUtil.validateDateRange(t,this.minDate,this.maxDate),e&&s!==this.$dateUtil.yearMonth(this.currentMonthDate)&&this.$emit("change-month",{month:this.currentMonthDate.getMonth()+1,year:this.currentMonthDate.getFullYear()}),this.checkYear()},dayClass(t){let e=new Date(t);e.setHours(0,0,0,0);let s=new Date(this.start);s.setHours(0,0,0,0);let u=new Date(this.end);u.setHours(0,0,0,0);let d={off:t.getMonth()+1!==this.month,weekend:t.getDay()===6||t.getDay()===0,today:e.setHours(0,0,0,0)==new Date().setHours(0,0,0,0),active:e.setHours(0,0,0,0)==new Date(this.start).setHours(0,0,0,0)||e.setHours(0,0,0,0)==new Date(this.end).setHours(0,0,0,0),"in-range":e>=s&&e<=u,"start-date":e.getTime()===s.getTime(),"end-date":e.getTime()===u.getTime(),disabled:this.minDate&&e.getTime()<this.minDate.getTime()||this.maxDate&&e.getTime()>this.maxDate.getTime()};return this.dateFormat?this.dateFormat(d,t):d},checkYear(){this.$refs.yearSelect!==document.activeElement&&this.$nextTick(()=>{this.year_text=this.monthDate.getFullYear()})}},computed:{monthName(){return this.locale.monthNames[this.currentMonthDate.getMonth()]},year:{get(){return this.year_text},set(t){this.year_text=t;let e=this.$dateUtil.validateDateRange(new Date(t,this.month,1),this.minDate,this.maxDate);this.$dateUtil.isValidDate(e)&&this.$emit("change-month",{month:e.getMonth(),year:e.getFullYear()})}},month:{get(){return this.currentMonthDate.getMonth()+1},set(t){let e=this.$dateUtil.validateDateRange(new Date(this.year,t-1,1),this.minDate,this.maxDate);this.$emit("change-month",{month:e.getMonth()+1,year:e.getFullYear()})}},calendar(){let t=this.month,e=this.currentMonthDate.getFullYear(),s=new Date(e,t-1,1),u=this.$dateUtil.prevMonth(s).getMonth()+1,d=this.$dateUtil.prevMonth(s).getFullYear(),n=new Date(d,t-1,0).getDate(),a=s.getDay(),o=[];for(let b=0;b<6;b++)o[b]=[];let f=n-a+this.locale.firstDay+1;f>n&&(f-=7),a===this.locale.firstDay&&(f=n-6);let g=new Date(d,u-1,f,12,0,0);for(let b=0,F=0,O=0;b<6*7;b++,F++,g.setDate(g.getDate()+1))b>0&&F%7===0&&(F=0,O++),o[O][F]=new Date(g.getTime());return o},months(){let t=this.locale.monthNames.map((e,s)=>({label:e,value:s}));if(this.maxDate&&this.minDate){let e=this.maxDate.getFullYear()-this.minDate.getFullYear();if(e<2){let s=[];if(e<1)for(let u=this.minDate.getMonth();u<=this.maxDate.getMonth();u++)s.push(u);else{for(let u=0;u<=this.maxDate.getMonth();u++)s.push(u);for(let u=this.minDate.getMonth();u<12;u++)s.push(u)}if(s.length>0)return t.filter(u=>s.find(d=>u.value===d)>-1)}}return t},locale(){return this.$dateUtil.localeData(this.localeData)}},watch:{monthDate(t){this.currentMonthDate.getTime()!==t.getTime()&&this.changeMonthDate(t,!1)}}},pn={class:"table-condensed"},vn=["colspan"],yn={class:"row mx-1"},_n=["value"],kn=["colspan"],wn={key:0,class:"week"},xn={key:0,class:"week"},Dn=["onClick","onMouseover"];function Cn(t,e,s,u,d,n){return i(),r("table",pn,[l("thead",null,[l("tr",null,[l("th",{class:"prev available",onClick:e[0]||(e[0]=(...a)=>n.prevMonthClick&&n.prevMonthClick(...a)),tabindex:"0"},e[5]||(e[5]=[l("span",null,null,-1)])),s.showDropdowns?(i(),r("th",{key:0,colspan:s.showWeekNumbers?6:5,class:"month"},[l("div",yn,[R(l("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.month=a),class:"monthselect col"},[(i(!0),r(v,null,C(n.months,a=>(i(),r("option",{key:a.value,value:a.value+1},h(a.label),9,_n))),128))],512),[[U,n.month]]),R(l("input",{ref:"yearSelect",type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>n.year=a),onBlur:e[3]||(e[3]=(...a)=>n.checkYear&&n.checkYear(...a)),class:"yearselect col"},null,544),[[A,n.year]])])],8,vn)):(i(),r("th",{key:1,colspan:s.showWeekNumbers?6:5,class:"month"},h(n.monthName)+" "+h(n.year),9,kn)),l("th",{class:"next available",onClick:e[4]||(e[4]=(...a)=>n.nextMonthClick&&n.nextMonthClick(...a)),tabindex:"0"},e[6]||(e[6]=[l("span",null,null,-1)]))])]),l("tbody",null,[l("tr",null,[s.showWeekNumbers?(i(),r("th",wn,h(n.locale.weekLabel),1)):c("",!0),(i(!0),r(v,null,C(n.locale.daysOfWeek,a=>(i(),r("th",{key:a},h(a),1))),128))]),(i(!0),r(v,null,C(n.calendar,(a,o)=>(i(),r("tr",{key:o},[s.showWeekNumbers&&(o%7||o===0)?(i(),r("td",xn,h(t.$dateUtil.weekNumber(a[0])),1)):c("",!0),(i(!0),r(v,null,C(a,(f,g)=>(i(),r("td",{class:m(n.dayClass(f)),onClick:b=>t.$emit("dateClick",f),onMouseover:b=>t.$emit("hoverDate",f),key:g},[w(t.$slots,"date-slot",{date:f},()=>[k(h(f.getDate()),1)],!0)],42,Dn))),128))]))),128))])])}const Mn=D(bn,[["render",Cn],["__scopeId","data-v-66e2a2e7"]]),Tn={props:{miniuteIncrement:{type:Number,default:5},hour24:{type:Boolean,default:!0},secondPicker:{type:Boolean,default:!1},currentTime:{default(){return new Date}},readonly:{type:Boolean,default:!1}},data(){let t=this.currentTime?this.currentTime:new Date,e=t.getHours();return{hour:this.hour24?e:e%12||12,minute:t.getMinutes()-t.getMinutes()%this.miniuteIncrement,second:t.getSeconds(),ampm:e<12?"AM":"PM"}},computed:{hours(){let t=[],e=this.hour24?24:12;for(let s=0;s<e;s++)t.push(this.hour24?s:s+1);return t},minutes(){let t=[],e=60;for(let s=0;s<e;s=s+this.miniuteIncrement)t.push(s);return t}},watch:{hour(){this.onChange()},minute(){this.onChange()},second(){this.onChange()},ampm(){this.onChange()}},methods:{formatNumber:t=>t<10?"0"+t.toString():t.toString(),getHour(){return this.hour24?this.hour:this.hour===12?this.ampm==="AM"?0:12:this.hour+(this.ampm==="PM"?12:0)},onChange(){this.$emit("update",{hours:this.getHour(),minutes:this.minute,seconds:this.second})}}},Sn={class:"calendar-time"},En=["disabled"],Fn=["value"],Rn=["disabled"],On=["value"],Pn=["disabled"],jn=["value"],An=["disabled"];function Hn(t,e,s,u,d,n){return i(),r("div",Sn,[R(l("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>d.hour=a),class:"hourselect form-control mr-1",disabled:s.readonly},[(i(!0),r(v,null,C(n.hours,a=>(i(),r("option",{key:a,value:a},h(n.formatNumber(a)),9,Fn))),128))],8,En),[[U,d.hour]]),e[6]||(e[6]=k(" :")),R(l("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.minute=a),class:"minuteselect form-control ml-1",disabled:s.readonly},[(i(!0),r(v,null,C(n.minutes,a=>(i(),r("option",{key:a,value:a},h(n.formatNumber(a)),9,On))),128))],8,Rn),[[U,d.minute]]),s.secondPicker?(i(),r(v,{key:0},[e[4]||(e[4]=k(" :")),R(l("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>d.second=a),class:"secondselect form-control ml-1",disabled:s.readonly},[(i(),r(v,null,C(60,a=>l("option",{key:a-1,value:a-1},h(n.formatNumber(a-1)),9,jn)),64))],8,Pn),[[U,d.second]])],64)):c("",!0),s.hour24?c("",!0):R((i(),r("select",{key:1,"onUpdate:modelValue":e[3]||(e[3]=a=>d.ampm=a),class:"ampmselect",disabled:s.readonly},e[5]||(e[5]=[l("option",{value:"AM"},"AM",-1),l("option",{value:"PM"},"PM",-1)]),8,An)),[[U,d.ampm]])])}const $n=D(Tn,[["render",Hn]]),Un={mixins:[Q],props:{ranges:Object,selected:Object,localeData:Object,alwaysShowCalendars:Boolean},data(){return{customRangeActive:!1}},methods:{clickRange(t){this.customRangeActive=!1,this.$emit("clickRange",t)},clickCustomRange(){this.customRangeActive=!0,this.$emit("showCustomRange")},range_class(t){return{active:t.selected===!0}}},computed:{listedRanges(){return this.ranges?Object.keys(this.ranges).map(t=>({label:t,value:this.ranges[t],selected:this.$dateUtil.isSame(this.selected.startDate,this.ranges[t][0])&&this.$dateUtil.isSame(this.selected.endDate,this.ranges[t][1])})):!1},selectedRange(){return this.listedRanges.find(t=>t.selected===!0)},showCustomRangeLabel(){return!this.alwaysShowCalendars}}},Ln={class:"ranges"},Yn={key:0},Bn=["onClick","data-range-key"];function Vn(t,e,s,u,d,n){return i(),r("div",Ln,[s.ranges?(i(),r("ul",Yn,[(i(!0),r(v,null,C(n.listedRanges,a=>(i(),r("li",{onClick:o=>n.clickRange(a.value),"data-range-key":a.label,key:a.label,class:m(n.range_class(a)),tabindex:"0"},h(a.label),11,Bn))),128)),n.showCustomRangeLabel?(i(),r("li",{key:0,class:m({active:d.customRangeActive||!n.selectedRange}),onClick:e[0]||(e[0]=(...a)=>n.clickCustomRange&&n.clickCustomRange(...a)),tabindex:"0"},h(s.localeData.customRangeLabel),3)):c("",!0)])):c("",!0)])}const Nn=D(Un,[["render",Vn]]),In={mounted(t,{instance:e}){if(e.appendToBody){const{height:s,top:u,left:d,width:n,right:a}=e.$refs.toggle.getBoundingClientRect();t.unbindPosition=e.calculatePosition(t,e,{width:n,top:window.scrollY+u+s,left:window.scrollX+d,right:a}),document.body.appendChild(t)}else e.$el.appendChild(t)},unmounted(t,{instance:e}){e.appendToBody&&(t.unbindPosition&&typeof t.unbindPosition=="function"&&t.unbindPosition(),t.parentNode&&t.parentNode.removeChild(t))}},zn={inheritAttrs:!1,components:{Calendar:Mn,CalendarTime:$n,CalendarRanges:Nn},mixins:[Q],directives:{appendToBody:In},emits:["update:modelValue","toggle","hoverDate","startSelection","select","change-month","finishSelection"],props:{modelValue:{type:Object},minDate:{type:[String,Date],default(){return null}},maxDate:{type:[String,Date],default(){return null}},showWeekNumbers:{type:Boolean,default:!1},linkedCalendars:{type:Boolean,default:!0},singleDatePicker:{type:[Boolean,String],default:!1},showDropdowns:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},timePickerIncrement:{type:Number,default:5},timePicker24Hour:{type:Boolean,default:!0},timePickerSeconds:{type:Boolean,default:!1},autoApply:{type:Boolean,default:!1},localeData:{type:Object,default(){return{}}},dateRange:{type:[Object],default:null,required:!0},ranges:{type:[Object,Boolean],default(){let t=new Date;t.setHours(0,0,0,0);let e=new Date;e.setHours(11,59,59,999);let s=new Date;s.setDate(t.getDate()-1),s.setHours(0,0,0,0);let u=new Date;u.setDate(t.getDate()-1),u.setHours(11,59,59,999);let d=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0,11,59,59,999);return{Today:[t,e],Yesterday:[s,u],"This month":[d,n],"This year":[new Date(t.getFullYear(),0,1),new Date(t.getFullYear(),11,31,11,59,59,999)],"Last month":[new Date(t.getFullYear(),t.getMonth()-1,1),new Date(t.getFullYear(),t.getMonth(),0,11,59,59,999)]}}},opens:{type:String,default:"center"},dateFormat:Function,alwaysShowCalendars:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},controlContainerClass:{type:[Object,String],default:"form-control reportrange-text"},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(t,e,{width:s,top:u,left:d,right:n}){e.opens==="center"?t.style.left=d+s/2+"px":e.opens==="left"?t.style.right=window.innerWidth-n+"px":e.opens==="right"&&(t.style.left=d+"px"),t.style.top=u+"px"}},closeOnEsc:{type:Boolean,default:!0},readonly:{type:Boolean}},data(){const t=he;let e={locale:t.localeData({...this.localeData})},s=this.dateRange.startDate||null,u=this.dateRange.endDate||null;if(e.monthDate=s?new Date(s):new Date,e.nextMonthDate=t.nextMonth(e.monthDate),e.start=s?new Date(s):null,this.singleDatePicker&&this.singleDatePicker!=="range"?e.end=e.start:e.end=u?new Date(u):null,e.in_selection=!1,e.open=!1,e.showCustomRangeCalendars=!1,e.locale.firstDay!==0){let d=e.locale.firstDay,n=[...e.locale.daysOfWeek];for(;d>0;)n.push(n.shift()),d--;e.locale.daysOfWeek=n}return e},methods:{dateFormatFn(t,e){let s=new Date(e);s.setHours(0,0,0,0);let u=new Date(this.start);u.setHours(0,0,0,0);let d=new Date(this.end);return d.setHours(0,0,0,0),t["in-range"]=s>=u&&s<=d,this.dateFormat?this.dateFormat(t,e):t},changeLeftMonth(t){let e=new Date(t.year,t.month-1,1);this.monthDate=e,(this.linkedCalendars||this.$dateUtil.yearMonth(this.monthDate)>=this.$dateUtil.yearMonth(this.nextMonthDate))&&(this.nextMonthDate=this.$dateUtil.validateDateRange(this.$dateUtil.nextMonth(e),this.minDate,this.maxDate),(!this.singleDatePicker||this.singleDatePicker==="range")&&this.$dateUtil.yearMonth(this.monthDate)===this.$dateUtil.yearMonth(this.nextMonthDate)&&(this.monthDate=this.$dateUtil.validateDateRange(this.$dateUtil.prevMonth(this.monthDate),this.minDate,this.maxDate))),this.$emit("change-month",this.monthDate,0)},changeRightMonth(t){let e=new Date(t.year,t.month-1,1);this.nextMonthDate=e,(this.linkedCalendars||this.$dateUtil.yearMonth(this.nextMonthDate)<=this.$dateUtil.yearMonth(this.monthDate))&&(this.monthDate=this.$dateUtil.validateDateRange(this.$dateUtil.prevMonth(e),this.minDate,this.maxDate),this.$dateUtil.yearMonth(this.monthDate)===this.$dateUtil.yearMonth(this.nextMonthDate)&&(this.nextMonthDate=this.$dateUtil.validateDateRange(this.$dateUtil.nextMonth(this.nextMonthDate),this.minDate,this.maxDate))),this.$emit("change-month",this.monthDate,1)},normalizeDatetime(t,e){let s=new Date(t);return this.timePicker&&e&&(s.setHours(e.getHours()),s.setMinutes(e.getMinutes()),s.setSeconds(e.getSeconds()),s.setMilliseconds(e.getMilliseconds())),s},dateClick(t){if(this.readonly)return!1;this.in_selection?(this.in_selection=!1,this.end=this.normalizeDatetime(t,this.end),this.end<this.start&&(this.in_selection=!0,this.start=this.normalizeDatetime(t,this.start),this.$emit("startSelection",this.start)),this.in_selection||(this.$emit("finishSelection",this.end),this.onSelect(),this.autoApply&&this.clickedApply())):(this.start=this.normalizeDatetime(t,this.start),this.end=this.normalizeDatetime(t,this.end),!this.singleDatePicker||this.singleDatePicker==="range"?(this.in_selection=!0,this.$emit("startSelection",this.start)):(this.onSelect(),this.autoApply&&this.clickedApply()))},hoverDate(t){if(this.readonly)return!1;let e=this.normalizeDatetime(t,this.end);this.in_selection&&e>=this.start&&(this.end=e),this.$emit("hoverDate",t)},onClickPicker(){this.disabled||this.togglePicker(null,!0)},togglePicker(t,e){typeof t=="boolean"?this.open=t:this.open=!this.open,e===!0&&this.$emit("toggle",this.open,this.togglePicker)},clickedApply(){this.togglePicker(!1,!0),this.$emit("update:modelValue",{startDate:this.start,endDate:this.singleDatePicker&&this.singleDatePicker!=="range"?this.start:this.end})},clickCancel(){if(this.open){let t=this.dateRange.startDate,e=this.dateRange.endDate;this.start=t?new Date(t):null,this.end=e?new Date(e):null,this.in_selection=!1,this.togglePicker(!1,!0)}},onSelect(){this.$emit("select",{startDate:this.start,endDate:this.end})},clickAway(t){t&&t.target&&!this.$el.contains(t.target)&&this.$refs.dropdown&&!this.$refs.dropdown.contains(t.target)&&this.clickCancel()},clickRange(t){this.in_selection=!1,this.$dateUtil.isValidDate(t[0])&&this.$dateUtil.isValidDate(t[1])?(this.start=this.$dateUtil.validateDateRange(new Date(t[0]),this.minDate,this.maxDate),this.end=this.$dateUtil.validateDateRange(new Date(t[1]),this.minDate,this.maxDate),this.changeLeftMonth({month:this.start.getMonth()+1,year:this.start.getFullYear()}),this.linkedCalendars===!1&&this.changeRightMonth({month:this.end.getMonth()+1,year:this.end.getFullYear()})):(this.start=null,this.end=null),this.onSelect(),this.autoApply&&this.clickedApply()},onUpdateStartTime(t){let e=new Date(this.start);e.setHours(t.hours),e.setMinutes(t.minutes),e.setSeconds(t.seconds),this.start=this.$dateUtil.validateDateRange(e,this.minDate,this.maxDate),this.autoApply&&this.$emit("update:modelValue",{startDate:this.start,endDate:this.singleDatePicker&&this.singleDatePicker!=="range"?this.start:this.end})},onUpdateEndTime(t){let e=new Date(this.end);e.setHours(t.hours),e.setMinutes(t.minutes),e.setSeconds(t.seconds),this.end=this.$dateUtil.validateDateRange(e,this.minDate,this.maxDate),this.autoApply&&this.$emit("update:modelValue",{startDate:this.start,endDate:this.end})},handleEscape(t){this.open&&t.keyCode===27&&this.closeOnEsc&&this.clickCancel()}},computed:{showRanges(){return this.ranges!==!1&&!this.readonly},showCalendars(){return this.alwaysShowCalendars||this.showCustomRangeCalendars},startText(){return this.start===null?"":this.$dateUtil.format(this.start,this.locale.format)},endText(){return this.end===null?"":this.$dateUtil.format(this.end,this.locale.format)},rangeText(){let t=this.startText;return(!this.singleDatePicker||this.singleDatePicker==="range")&&(t+=this.locale.separator+this.endText),t},min(){return this.minDate?new Date(this.minDate):null},max(){return this.maxDate?new Date(this.maxDate):null},pickerStyles(){return{"show-calendar":this.open||this.opens==="inline","show-ranges":this.showRanges,"show-weeknumbers":this.showWeekNumbers,single:this.singleDatePicker,["opens"+this.opens]:!0,linked:this.linkedCalendars,"hide-calendars":!this.showCalendars}},isClear(){return!this.dateRange.startDate||!this.dateRange.endDate},isDirty(){let t=new Date(this.dateRange.startDate),e=new Date(this.dateRange.endDate);return!this.isClear&&(this.start.getTime()!==t.getTime()||this.end.getTime()!==e.getTime())}},watch:{minDate(){let t=this.$dateUtil.validateDateRange(this.monthDate,this.minDate||new Date,this.maxDate);this.changeLeftMonth({year:t.getFullYear(),month:t.getMonth()+1})},maxDate(){let t=this.$dateUtil.validateDateRange(this.nextMonthDate,this.minDate,this.maxDate||new Date);this.changeRightMonth({year:t.getFullYear(),month:t.getMonth()+1})},"dateRange.startDate"(t){this.$dateUtil.isValidDate(new Date(t))&&(this.start=t&&!this.isClear&&this.$dateUtil.isValidDate(new Date(t))?new Date(t):null,this.isClear?(this.start=null,this.end=null):(this.start=new Date(this.dateRange.startDate),this.end=new Date(this.dateRange.endDate)))},"dateRange.endDate"(t){this.$dateUtil.isValidDate(new Date(t))&&(this.end=t&&!this.isClear?new Date(t):null,this.isClear?(this.start=null,this.end=null):(this.start=new Date(this.dateRange.startDate),this.end=new Date(this.dateRange.endDate)))},open:{handler(t){typeof document=="object"&&this.$nextTick(()=>{t?document.body.addEventListener("click",this.clickAway):document.body.removeEventListener("click",this.clickAway),t?document.addEventListener("keydown",this.handleEscape):document.removeEventListener("keydown",this.handleEscape),!this.alwaysShowCalendars&&this.ranges&&(this.showCustomRangeCalendars=!Object.keys(this.ranges).find(e=>this.$dateUtil.isSame(this.start,this.ranges[e][0],"date")&&this.$dateUtil.isSame(this.end,this.ranges[e][1],"date")))})},immediate:!0}}},qn={class:"calendars"},Wn={key:1,class:"calendars-container"};const Gn={class:"calendar-table"},Qn={key:0,class:"drp-calendar col right"};const Kn={class:"calendar-table"},Zn={key:0,class:"drp-buttons"},Xn={key:0,class:"drp-selected"},Jn=["disabled"];function el(t,e,s,u,d,n){const a=y("calendar-ranges"),o=y("calendar"),f=y("calendar-time"),g=Re("append-to-body");return i(),r("div",{class:m(["vue-daterange-picker",{inline:s.opens==="inline"}])},[l("div",{class:m(s.controlContainerClass),onClick:e[0]||(e[0]=(...b)=>n.onClickPicker&&n.onClickPicker(...b)),ref:"toggle"},[w(t.$slots,"input",{startDate:t.start,endDate:t.end,ranges:s.ranges,rangeText:n.rangeText},()=>[e[4]||(e[4]=l("i",{class:"glyphicon glyphicon-calendar fa fa-calendar"},null,-1)),e[5]||(e[5]=k(" ")),l("span",null,h(n.rangeText),1),e[6]||(e[6]=l("b",{class:"caret"},null,-1))],!0)],2),T(He,{name:"slide-fade",mode:"out-in"},{default:M(()=>[t.open||s.opens==="inline"?R((i(),r("div",{key:0,class:m(["daterangepicker ltr",n.pickerStyles]),ref:"dropdown"},[w(t.$slots,"header",{rangeText:n.rangeText,locale:t.locale,clickCancel:n.clickCancel,clickApply:n.clickedApply,in_selection:t.in_selection,autoApply:s.autoApply},void 0,!0),l("div",qn,[n.showRanges?w(t.$slots,"ranges",{key:0,startDate:t.start,endDate:t.end,ranges:s.ranges,clickRange:n.clickRange},()=>[T(a,{onClickRange:n.clickRange,onShowCustomRange:e[1]||(e[1]=b=>t.showCustomRangeCalendars=!0),"always-show-calendars":s.alwaysShowCalendars,"locale-data":t.locale,ranges:s.ranges,selected:{startDate:t.start,endDate:t.end}},null,8,["onClickRange","always-show-calendars","locale-data","ranges","selected"])],!0):c("",!0),n.showCalendars?(i(),r("div",Wn,[l("div",{class:m(["drp-calendar col left",{single:s.singleDatePicker}])},[c("",!0),l("div",Gn,[T(o,{monthDate:t.monthDate,"locale-data":t.locale,start:t.start,end:t.end,minDate:n.min,maxDate:n.max,"show-dropdowns":s.showDropdowns,onChangeMonth:n.changeLeftMonth,"date-format":n.dateFormatFn,onDateClick:n.dateClick,onHoverDate:n.hoverDate,showWeekNumbers:s.showWeekNumbers},{default:M(()=>[w(t.$slots,"date",J(ee(t.data)),void 0,!0)]),_:3},8,["monthDate","locale-data","start","end","minDate","maxDate","show-dropdowns","onChangeMonth","date-format","onDateClick","onHoverDate","showWeekNumbers"])]),s.timePicker&&t.start?(i(),S(f,{key:1,onUpdate:n.onUpdateStartTime,"miniute-increment":s.timePickerIncrement,hour24:s.timePicker24Hour,"second-picker":s.timePickerSeconds,"current-time":t.start,readonly:s.readonly},null,8,["onUpdate","miniute-increment","hour24","second-picker","current-time","readonly"])):c("",!0)],2),s.singleDatePicker?c("",!0):(i(),r("div",Qn,[c("",!0),l("div",Kn,[T(o,{monthDate:t.nextMonthDate,"locale-data":t.locale,start:t.start,end:t.end,minDate:n.min,maxDate:n.max,"show-dropdowns":s.showDropdowns,onChangeMonth:n.changeRightMonth,"date-format":n.dateFormatFn,onDateClick:n.dateClick,onHoverDate:n.hoverDate,showWeekNumbers:s.showWeekNumbers},{default:M(()=>[w(t.$slots,"date",J(ee(t.data)),void 0,!0)]),_:3},8,["monthDate","locale-data","start","end","minDate","maxDate","show-dropdowns","onChangeMonth","date-format","onDateClick","onHoverDate","showWeekNumbers"])]),s.timePicker&&t.end?(i(),S(f,{key:1,onUpdate:n.onUpdateEndTime,"miniute-increment":s.timePickerIncrement,hour24:s.timePicker24Hour,"second-picker":s.timePickerSeconds,"current-time":t.end,readonly:s.readonly},null,8,["onUpdate","miniute-increment","hour24","second-picker","current-time","readonly"])):c("",!0)]))])):c("",!0)]),w(t.$slots,"footer",{rangeText:n.rangeText,locale:t.locale,clickCancel:n.clickCancel,clickApply:n.clickedApply,in_selection:t.in_selection,autoApply:s.autoApply},()=>[s.autoApply?c("",!0):(i(),r("div",Zn,[n.showCalendars?(i(),r("span",Xn,h(n.rangeText),1)):c("",!0),s.readonly?c("",!0):(i(),r("button",{key:1,class:"cancelBtn btn btn-sm btn-secondary",type:"button",onClick:e[2]||(e[2]=(...b)=>n.clickCancel&&n.clickCancel(...b))},h(t.locale.cancelLabel),1)),s.readonly?c("",!0):(i(),r("button",{key:2,class:"applyBtn btn btn-sm btn-success",disabled:t.in_selection,type:"button",onClick:e[3]||(e[3]=(...b)=>n.clickedApply&&n.clickedApply(...b))},h(t.locale.applyLabel),9,Jn))]))],!0)],2)),[[g]]):c("",!0)]),_:3})],2)}const tl=D(zn,[["render",el],["__scopeId","data-v-577c3804"]]),sl={name:"ns-date-range-picker",data(){return{dateRange:{startDate:null,endDate:null}}},components:{DateRangePicker:tl},mounted(){this.field.value!==void 0&&(this.dateRange=this.field.value)},watch:{dateRange(){const t={startDate:x(this.dateRange.startDate).format("YYYY-MM-DD HH:mm"),endDate:x(this.dateRange.endDate).format("YYYY-MM-DD HH:mm")};this.field.value=t,this.$emit("change",this)}},methods:{__:p,getFormattedDate(t){return t!==null?x(t).format("YYYY-MM-DD HH:mm"):p("N/D")},clearDate(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},nl={class:"flex flex-auto flex-col mb-2 ns-date-range-picker"},ll=["for"],il={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},rl={class:"text-fontcolor sm:text-sm sm:leading-5"},al={class:"flex justify-between items-center w-full py-2"},dl={class:"text-xs"},ol={class:"text-xs"};function ul(t,e,s,u,d,n){const a=y("date-range-picker"),o=y("ns-field-description");return i(),r("div",nl,[l("label",{for:s.field.name,class:m([n.hasError?"text-error-primary":"text-font","block leading-5 font-medium"])},[w(t.$slots,"default")],10,ll),l("div",{class:m([n.hasError?"error":"","mt-1 relative flex input-group border-2 rounded-md overflow-hidden focus:shadow-sm"])},[s.leading?(i(),r("div",il,[l("span",rl,h(s.leading),1)])):c("",!0),l("button",{class:"px-3 outline-hidden bg-error-secondary font-semibold text-white",onClick:e[0]||(e[0]=f=>n.clearDate())},e[2]||(e[2]=[l("i",{class:"las la-times"},null,-1)])),T(a,{class:"w-full flex items-center bg-input-background",ref:"picker","locale-data":{firstDay:1,format:"yyyy-mm-dd HH:mm:ss"},timePicker:!0,timePicker24Hour:!0,showWeekNumbers:!0,showDropdowns:!0,autoApply:!1,appendToBody:!0,modelValue:d.dateRange,"onUpdate:modelValue":e[1]||(e[1]=f=>d.dateRange=f),disabled:s.field.disabled,linkedCalendars:!0},{input:M(f=>[l("div",al,[l("span",dl,h(n.__("Range Starts"))+" : "+h(n.getFormattedDate(f.startDate)),1),l("span",ol,h(n.__("Range Ends"))+" : "+h(n.getFormattedDate(f.endDate)),1)])]),_:1},8,["modelValue","disabled"])],2),T(o,{field:s.field},null,8,["field"])])}const fe=D(sl,[["render",ul]]),cl={name:"ns-date-time-picker",props:["field","date"],data(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:x}},computed:{fieldDate(){return this.field?x(this.field.value).isValid()?x(this.field.value):x():this.date?x(this.date):x()}},mounted(){let t=x(this.field.value);t.isValid()?this.setDate(t.format("YYYY-MM-DD HH:mm:ss")):this.setDate(x(ns.date.current).format("YYYY-MM-DD HH:mm:ss"))},methods:{__:p,setDate(t){this.field.value=t}}},hl={class:"picker mb-2"},fl={key:0,class:"block leading-5 font-medium text-font"},ml={class:"ns-button"},gl={key:0,class:"mx-1 text-sm"},bl={key:0},pl={key:1},vl={key:1,class:"mx-1 text-sm"},yl={key:0},_l={key:1},kl={key:1,class:"text-sm text-fontcolor-soft py-1"},wl={key:2,class:"relative z-10 h-0 w-0"};function xl(t,e,s,u,d,n){const a=y("ns-calendar");return i(),r("div",hl,[s.field&&s.field.label&&s.field.label.length>0?(i(),r("label",fl,h(s.field.label),1)):c("",!0),l("div",ml,[l("button",{onClick:e[0]||(e[0]=o=>d.visible=!d.visible),class:m([s.field&&s.field.label&&s.field.label.length>0?"mt-1 border border-input-edge":"","shadow rounded cursor-pointer w-full p-1 flex items-center text-font"])},[e[5]||(e[5]=l("i",{class:"las la-clock text-xl"},null,-1)),s.field?(i(),r("span",gl,[[null,"",void 0].includes(s.field.value)?c("",!0):(i(),r("span",bl,h(n.fieldDate.format("YYYY-MM-DD HH:mm")),1)),[null,"",void 0].includes(s.field.value)?(i(),r("span",pl,"N/A")):c("",!0)])):c("",!0),s.date?(i(),r("span",vl,[[null,"",void 0].includes(s.date)?c("",!0):(i(),r("span",yl,h(n.fieldDate.format("YYYY-MM-DD HH:mm")),1)),[null,"",void 0].includes(s.date)?(i(),r("span",_l,"N/A")):c("",!0)])):c("",!0)],2)]),s.field?(i(),r("p",kl,h(s.field.description),1)):c("",!0),d.visible?(i(),r("div",wl,[l("div",{class:m([s.field&&s.field.label&&s.field.label.length>0?"-mt-4":"mt-2","absolute w-72 shadow-xl rounded ns-box anim-duration-300 zoom-in-entrance flex flex-col"])},[s.field?(i(),S(a,{key:0,onOnClickOut:e[1]||(e[1]=o=>d.visible=!1),onSet:e[2]||(e[2]=o=>n.setDate(o)),visible:d.visible,date:s.field.value},null,8,["visible","date"])):c("",!0),s.date?(i(),S(a,{key:1,onOnClickOut:e[3]||(e[3]=o=>d.visible=!1),onSet:e[4]||(e[4]=o=>n.setDate(o)),visible:d.visible,date:s.date},null,8,["visible","date"])):c("",!0)],2)])):c("",!0)])}const me=D(cl,[["render",xl]]),Dl={name:"ns-datepicker",components:{nsCalendar:ce},props:["label","date","format"],computed:{formattedDate(){return x(this.date).format(this.format||"YYYY-MM-DD HH:mm:ss")}},data(){return{visible:!1}},mounted(){},methods:{__:p,setDate(t){this.$emit("set",t)}}},Cl={class:"picker"},Ml={class:"ns-button"},Tl={class:"mx-1 text-sm"},Sl={key:0},El={key:1},Fl={key:0,class:"relative h-0 w-0 -mb-2"},Rl={class:"w-72 mt-2 shadow-lg anim-duration-300 zoom-in-entrance flex flex-col ns-floating-panel"};function Ol(t,e,s,u,d,n){const a=y("ns-calendar");return i(),r("div",Cl,[l("div",Ml,[l("button",{onClick:e[0]||(e[0]=o=>d.visible=!d.visible),class:"rounded cursor-pointer border shadow w-full px-1 py-1 flex items-center text-font"},[e[3]||(e[3]=l("i",{class:"las la-clock text-2xl"},null,-1)),l("span",Tl,[l("span",null,h(s.label||n.__("Date"))+" : ",1),s.date?(i(),r("span",Sl,h(n.formattedDate),1)):(i(),r("span",El,h(n.__("N/A")),1))])])]),d.visible?(i(),r("div",Fl,[l("div",Rl,[T(a,{visible:d.visible,onOnClickOut:e[1]||(e[1]=o=>d.visible=!1),date:s.date,onSet:e[2]||(e[2]=o=>n.setDate(o))},null,8,["visible","date"])])])):c("",!0)])}const Pl=D(Dl,[["render",Ol]]),jl={name:"ns-daterange-picker",data(){return{leftCalendar:x(),rightCalendar:x().add(1,"months"),rangeViewToggled:!1,clickedOnCalendar:!1}},mounted(){this.field.value||this.clearDate(),document.addEventListener("click",this.checkClickedItem)},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},watch:{leftCalendar(){this.leftCalendar.isSame(this.rightCalendar,"month")&&this.rightCalendar.add(1,"months")},rightCalendar(){this.rightCalendar.isSame(this.leftCalendar,"month")&&this.leftCalendar.sub(1,"months")}},methods:{__:p,setDateRange(t,e){this.field.value[t]=e,x(this.field.value.startDate).isBefore(x(this.field.value.endDate))&&this.$emit("change",this.field)},getFormattedDate(t){return t!==null?x(t).format("YYYY-MM-DD HH:mm"):p("N/D")},clearDate(){this.field.value={startDate:null,endDate:null}},toggleRangeView(){this.rangeViewToggled=!this.rangeViewToggled},handleDateRangeClick(){this.clickedOnCalendar=!0},checkClickedItem(t){this.$el.getAttribute("class").split(" ").includes("ns-daterange-picker")&&(!this.$el.contains(t.srcElement)&&!this.clickedOnCalendar&&this.rangeViewToggled&&(this.$emit("blur",this.field),this.toggleRangeView()),setTimeout(()=>{this.clickedOnCalendar=!1},100))}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"},startDateFormatted(){return this.field.value!==void 0&&x(this.field.value.startDate).isValid()?x(this.field.value.startDate).format("YYYY-MM-DD HH:mm"):!1},endDateFormatted(){return this.field.value!==void 0&&x(this.field.value.endDate).isValid()?x(this.field.value.endDate).format("YYYY-MM-DD HH:mm"):!1}},props:["placeholder","leading","type","field"]},Al=["for"],Hl={class:"border border-input-edge rounded-tl rounded-bl flex-auto flex"},$l={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ul={class:"text-fontcolor sm:text-sm sm:leading-5"},Ll={class:""},Yl={class:""},Bl={key:0,class:"relative h-0 w-0"},Vl={class:"z-10 absolute md:w-[550px] w-[225px] mt-2 shadow-lg anim-duration-300 zoom-in-entrance flex flex-col"},Nl={class:"flex flex-col md:flex-row bg-box-background rounded-lg"};function Il(t,e,s,u,d,n){const a=y("ns-calendar"),o=y("ns-field-description");return i(),r("div",{onClick:e[4]||(e[4]=f=>n.handleDateRangeClick()),class:"flex flex-auto flex-col mb-2 ns-daterange-picker"},[l("label",{for:s.field.name,class:m([n.hasError?"text-error-primary":"text-font","block leading-5 font-medium"])},[w(t.$slots,"default")],10,Al),l("div",{class:m([n.hasError?"error":"","mt-1 relative flex input-group bg-input-background rounded overflow-hidden shadow focus:shadow-sm"])},[l("div",Hl,[s.leading?(i(),r("div",$l,[l("span",Ul,h(s.leading),1)])):c("",!0),l("div",{class:"flex flex-auto p-1 text-fontcolor text-sm items-center cursor-pointer",onClick:e[0]||(e[0]=f=>n.toggleRangeView())},[e[5]||(e[5]=l("span",{class:"mr-1"},[l("i",{class:"las la-clock text-2xl"})],-1)),l("span",Ll,h(n.startDateFormatted||n.__("N/A")),1),e[6]||(e[6]=l("span",{class:"mx-2"},"",-1)),e[7]||(e[7]=l("span",{class:"mr-1"},[l("i",{class:"las la-clock text-2xl"})],-1)),l("span",Yl,h(n.endDateFormatted||n.__("N/A")),1)])]),l("button",{class:"px-3 outline-hidden font-bold bg-error-tertiary",onClick:e[1]||(e[1]=f=>n.clearDate())},e[8]||(e[8]=[l("i",{class:"las la-times"},null,-1)]))],2),d.rangeViewToggled?(i(),r("div",Bl,[l("div",Vl,[l("div",Nl,[T(a,{class:"md:w-1/2 w-full",range:[n.startDateFormatted,n.endDateFormatted],side:"left",date:s.field.value.startDate,"selected-range":s.field.value,onSet:e[2]||(e[2]=f=>n.setDateRange("startDate",f))},null,8,["range","date","selected-range"]),e[9]||(e[9]=l("div",{class:"flex-auto border-l border-r"},null,-1)),T(a,{class:"md:w-1/2 w-full",range:[n.startDateFormatted,n.endDateFormatted],side:"right",date:s.field.value.endDate,"selected-range":s.field.value,onSet:e[3]||(e[3]=f=>n.setDateRange("endDate",f))},null,8,["range","date","selected-range"])])])])):c("",!0),T(o,{field:s.field},null,8,["field"])])}const zl=D(jl,[["render",Il]]),ql={mounted(){console.log(this.parent)},props:["parent"],methods:{__:p,resetDefault(){Popup.show(nsConfirmPopup,{title:p("Confirm Your Action"),message:p("This will clear all records and accounts. It's ideal if you want to start from scratch. Are you sure you want to reset default settings for accounting?"),onAction:t=>{t&&this.resetDefaultAccounting()}})},resetDefaultAccounting(){nsHttpClient.get("/api/transactions-accounts/reset-defaults").subscribe({next:t=>{E.success(t.message).subscribe(),this.parent.loadSettingsForm()},error:t=>{E.error(t.message).subscribe()}})}}};function Wl(t,e,s,u,d,n){const a=y("ns-button");return i(),S(a,{onClick:e[0]||(e[0]=o=>n.resetDefault()),type:"warning"},{default:M(()=>[k(h(n.__("Reset Default")),1)]),_:1})}const Gl=D(ql,[["render",Wl]]),Ql={name:"ns-dropzone",emits:["dropped"],mounted(){},setup(t,{emit:e}){return{dropZone:B(null),handleDrop:d=>{const n=d.dataTransfer.getData("text");e("dropped",n)}}}};function Kl(t,e,s,u,d,n){return i(),r("div",{ref:"dropZone",class:"ns-drop-zone mb-4",onDragover:e[0]||(e[0]=$e(()=>{},["prevent"]))},[w(t.$slots,"default",{},void 0,!0)],544)}const Zl=D(Ql,[["render",Kl],["__scopeId","data-v-2d2d8b6c"]]),Xl={emits:["drag-start","drag-end"],name:"ns-draggable",props:{widget:{required:!0}},setup(t,{emit:e}){const s=B(null),u=B(null);let d=null,n=0,a=0,o=0,f=0;const g=O=>{const j=O.srcElement.closest(".ns-draggable-item"),P=j.getBoundingClientRect();d=j.cloneNode(!0),d.setAttribute("class","ns-ghost"),d.style.display="none",d.style.position="fixed",d.style.top=`${P.top}px`,d.style.left=`${P.left}px`,d.style.width=`${P.width}px`,d.style.height=`${P.height}px`,j.closest(".ns-drop-zone").appendChild(d),n=O.clientX-o,a=O.clientY-f,u.value={dom:j},e("drag-start",t.widget)},b=O=>{if(u.value===null)return;const j=u.value.dom.closest(".ns-drop-zone").querySelector(".ns-ghost"),P=j.querySelector("div");Array.from(P.classList).filter(H=>H.startsWith("shadow")).forEach(H=>P.classList.remove(H)),o=O.clientX-n,f=O.clientY-a,P.style.boxShadow="0px 4px 10px 5px rgb(0 0 0 / 48%)",j.style.display="block",j.style.transform=`translate(${o}px, ${f}px)`,j.style.cursor="grabbing",document.querySelectorAll(".ns-drop-zone").forEach(H=>{H.getBoundingClientRect();const{left:z,top:q,right:_,bottom:pe}=H.getBoundingClientRect(),{clientX:Z,clientY:X}=O;Z>=z&&Z<=_&&X>=q&&X<=pe?H.setAttribute("hovered","true"):H.setAttribute("hovered","false")})},F=O=>{if(u.value===null)return;const P=u.value.dom.closest(".ns-drop-zone").querySelector(".ns-ghost");P&&P.remove(),u.value=null,o=0,f=0,O.srcElement.closest(".ns-drop-zone"),e("drag-end",t.widget)};return ie(()=>{s.value&&(document.addEventListener("mousemove",O=>b(O)),document.addEventListener("mouseup",O=>F(O)))}),Oe(()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",F)}),{draggable:s,startDrag:g}}};function Jl(t,e,s,u,d,n){return i(),r("div",{ref:"draggable",class:"ns-draggable-item",onMousedown:e[0]||(e[0]=(...a)=>u.startDrag&&u.startDrag(...a))},[w(t.$slots,"default")],544)}const ei=D(Xl,[["render",Jl]]),ti={name:"ns-dragzone",props:["raw-widgets","raw-columns"],components:{nsDropzone:Zl,nsDraggable:ei},data(){return{widgets:[],theme:ns.theme,dragged:null,columns:[]}},mounted(){this.widgets=this.rawWidgets.map(t=>({name:t.name,"component-name":t["component-name"],"class-name":t["class-name"],component:G(window[t["component-name"]])})),this.columns=this.rawColumns.map(t=>(t.widgets.forEach(e=>{e.component=G(window[e.identifier]),e["class-name"]=e.class_name,e["component-name"]=e.identifier}),t)),setTimeout(()=>{var t=document.querySelectorAll(".widget-placeholder");document.addEventListener("mousemove",e=>{for(var s=0;s<t.length;s++){var u=t[s].getBoundingClientRect();if(e.clientX>=u.left&&e.clientX<=u.right&&e.clientY>=u.top&&e.clientY<=u.bottom){t[s].setAttribute("hovered","true");break}else t[s].setAttribute("hovered","false")}})},10)},computed:{hasUnusedWidgets(){const t=this.columns.map(e=>e.widgets).flat();return this.widgets.filter(e=>!t.map(u=>u["component-name"]).includes(e["component-name"])).length>0}},methods:{__:p,handleEndDragging(t){const e=document.querySelector('.ns-drop-zone[hovered="true"]');if(e){const d=e.closest("[column-name]").getAttribute("column-name"),n=this.columns.filter(P=>P.name===d),a=n[0].widgets.filter(P=>P["component-name"]===e.querySelector(".ns-draggable-item").getAttribute("component-name")),o=document.querySelector(`[component-name="${t["component-name"]}"]`),g=o.closest("[column-name]").getAttribute("column-name"),b=this.columns.filter(P=>P.name===g),F=b[0].widgets.filter(P=>P["component-name"]===o.getAttribute("component-name"));if(F[0]["component-name"]===a[0]["component-name"])return;const O=F[0].position,j=a[0].position;F[0].column=d,F[0].position=j,a[0].column=g,a[0].position=O,n[0].widgets[j]=F[0],b[0].widgets[O]=a[0],this.handleChange(n[0]),this.handleChange(b[0]),e.setAttribute("hovered","false")}const s=document.querySelector('.widget-placeholder[hovered="true"]');if(s){const u=s.closest("[column-name]").getAttribute("column-name");if(t===u){console.log("The widget is already in the same column.");return}const d=this.columns.filter(o=>o.name===t.column)[0],n=d.widgets.indexOf(t);d.widgets.splice(n,1);const a=this.columns.filter(o=>o.name===u)[0];t.position=a.widgets.length,t.column=u,a.widgets.push(t),this.handleChange(d),this.handleChange(a)}},handleChange(t,e){setTimeout(()=>{nsHttpClient.post("/api/users/widgets",{column:t}).subscribe(s=>{},s=>E.error(s.message||p("An unpexpected error occured while using the widget.")).subscribe())},100)},handleRemoveWidget(t,e){const s=e.widgets.indexOf(t);e.widgets.splice(s,1),this.handleChange(e)},async openWidgetAdded(t){try{const e=this.columns.filter(a=>a.name!==t.name?(console.log(a.name),a.widgets.length>0):!1).map(a=>a.widgets).flat(),s=t.widgets.map(a=>a["component-name"]),u=this.widgets.filter(a=>{const o=e.map(f=>f["component-name"]);return o.push(...s),!o.includes(a["component-name"])}).map(a=>({value:a,label:a.name})),d=await new Promise((a,o)=>{const f=u.filter(g=>s.includes(g["component-name"]));Popup.show(ye,{value:f,resolve:a,reject:o,type:"multiselect",options:u,label:p("Choose Widget"),description:p("Select with widget you want to add to the column.")})}),n=this.columns.indexOf(t);this.columns[n].widgets=[...this.columns[n].widgets,...d].map((a,o)=>(a.position=o,a.column=t.name,a)),this.handleChange(this.columns[n])}catch(e){console.log(e)}}}},si={class:"flex md:-mx-2 flex-wrap"},ni=["column-name"],li=["onClick"],ii={class:"text-sm text-font",type:"info"};function ri(t,e,s,u,d,n){const a=y("ns-draggable"),o=y("ns-dropzone");return i(),r("div",si,[(i(!0),r(v,null,C(d.columns,(f,g)=>(i(),r("div",{class:"w-full md:px-2 md:w-1/2 lg:w-1/3 xl:1/4","column-name":f.name,key:f.name},[(i(!0),r(v,null,C(f.widgets,b=>(i(),S(o,null,{default:M(()=>[T(a,{"component-name":b["component-name"],onDragEnd:e[0]||(e[0]=F=>n.handleEndDragging(F)),widget:b},{default:M(()=>[(i(),S(N(b.component),{onOnRemove:F=>n.handleRemoveWidget(b,f),widget:b},null,40,["onOnRemove","widget"]))]),_:2},1032,["component-name","widget"])]),_:2},1024))),256)),n.hasUnusedWidgets?(i(),r("div",{key:0,onClick:b=>n.openWidgetAdded(f),class:"widget-placeholder cursor-pointer border-2 border-dashed h-16 flex items-center justify-center"},[l("span",ii,h(n.__("Click here to add widgets")),1)],8,li)):c("",!0)],8,ni))),128))])}const ai=D(ti,[["render",ri],["__scopeId","data-v-a7c91447"]]),di={emits:["blur","change","saved","keypress"],data:()=>({formSubjectSubscription:null}),mounted(){},components:{nsDateRangePicker:fe,nsDateTimePicker:me,nsSwitch:se},computed:{isInputField(){return["text","password","email","number","tel"].includes(this.field.type)},isHiddenField(){return["hidden"].includes(this.field.type)},isDateField(){return["date"].includes(this.field.type)},isSelectField(){return["select"].includes(this.field.type)},isSearchField(){return["search-select"].includes(this.field.type)},isTextarea(){return["textarea"].includes(this.field.type)},isCheckbox(){return["checkbox"].includes(this.field.type)},isMultiselect(){return["multiselect"].includes(this.field.type)},isInlineMultiselect(){return["inline-multiselect"].includes(this.field.type)},isSelectAudio(){return["select-audio"].includes(this.field.type)},isSwitch(){return["switch"].includes(this.field.type)},isMedia(){return["media"].includes(this.field.type)},isCkEditor(){return["ckeditor"].includes(this.field.type)},isDateTimePicker(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker(){return["daterangepicker"].includes(this.field.type)},isCustom(){return["custom"].includes(this.field.type)}},props:["field"],methods:{handleSaved(t,e){this.$emit("saved",e)},addOption(t){this.field.type==="select"&&this.field.options.forEach(s=>s.selected=!1),t.selected=!0;const e=this.field.options.indexOf(t);this.field.options.splice(e,1),this.field.options.unshift(t),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:t})},changeTouchedState(t,e){e&&e.stopPropagation&&e.stopPropagation(),t.touched=!0,this.$emit("change",t)},refreshMultiselect(){this.field.value=this.field.options.filter(t=>t.selected).map(t=>t.value)},removeOption(t){t.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:t})}}},oi=["name","value"],ui={key:1,class:"flex flex-auto mb-2"},ci=["innerHTML"],hi=["innerHTML"],fi=["innerHTML"],mi=["innerHTML"],gi=["innerHTML"],bi=["innerHTML"],pi=["innerHTML"],vi=["innerHTML"],yi=["innerHTML"],_i=["innerHTML"],ki=["innerHTML"],wi=["innerHTML"],xi=["innerHTML"],Di=["innerHTML"];function Ci(t,e,s,u,d,n){const a=y("ns-input"),o=y("ns-date-time-picker"),f=y("ns-date"),g=y("ns-media-input"),b=y("ns-select"),F=y("ns-search-select"),O=y("ns-daterange-picker"),j=y("ns-select-audio"),P=y("ns-textarea"),I=y("ns-checkbox"),K=y("ns-inline-multiselect"),H=y("ns-multiselect"),z=y("ns-ckeditor"),q=y("ns-switch");return i(),r(v,null,[n.isHiddenField?(i(),r("input",{key:0,type:"hidden",name:s.field.name,value:s.field.value},null,8,oi)):c("",!0),n.isHiddenField?c("",!0):(i(),r("div",ui,[n.isInputField?(i(),S(a,{key:0,onKeypress:e[0]||(e[0]=_=>n.changeTouchedState(s.field,_)),onChange:e[1]||(e[1]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,ci)]),_:1},8,["field"])):c("",!0),n.isDateTimePicker?(i(),S(o,{key:1,onBlur:e[2]||(e[2]=_=>t.$emit("blur",s.field)),onChange:e[3]||(e[3]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,hi)]),_:1},8,["field"])):c("",!0),n.isDateField?(i(),S(f,{key:2,onBlur:e[4]||(e[4]=_=>t.$emit("blur",s.field)),onChange:e[5]||(e[5]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,fi)]),_:1},8,["field"])):c("",!0),n.isMedia?(i(),S(g,{key:3,onBlur:e[6]||(e[6]=_=>t.$emit("blur",s.field)),onChange:e[7]||(e[7]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,mi)]),_:1},8,["field"])):c("",!0),n.isSelectField?(i(),S(b,{key:4,onChange:e[8]||(e[8]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,gi)]),_:1},8,["field"])):c("",!0),n.isSearchField?(i(),S(F,{key:5,field:s.field,onSaved:e[9]||(e[9]=_=>n.handleSaved(s.field,_)),onChange:e[10]||(e[10]=_=>n.changeTouchedState(s.field,_))},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,bi)]),_:1},8,["field"])):c("",!0),n.isDateRangePicker?(i(),S(O,{key:6,onBlur:e[11]||(e[11]=_=>t.$emit("blur",s.field)),onChange:e[12]||(e[12]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,pi)]),_:1},8,["field"])):c("",!0),n.isSelectAudio?(i(),S(j,{key:7,onBlur:e[13]||(e[13]=_=>t.$emit("blur",s.field)),onChange:e[14]||(e[14]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,vi)]),_:1},8,["field"])):c("",!0),n.isTextarea?(i(),S(P,{key:8,onBlur:e[15]||(e[15]=_=>t.$emit("blur",s.field)),onChange:e[16]||(e[16]=_=>n.changeTouchedState(s.field,_)),field:s.field},{description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,yi)]),default:M(()=>[l("template",null,[k(h(s.field.label),1)])]),_:1},8,["field"])):c("",!0),n.isCheckbox?(i(),S(I,{key:9,onBlur:e[17]||(e[17]=_=>t.$emit("blur",s.field)),onChange:e[18]||(e[18]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,_i)]),_:1},8,["field"])):c("",!0),n.isInlineMultiselect?(i(),S(K,{key:10,onBlur:e[19]||(e[19]=_=>t.$emit("blur",s.field)),onUpdate:e[20]||(e[20]=_=>n.changeTouchedState(s.field,_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,ki)]),_:1},8,["field"])):c("",!0),n.isMultiselect?(i(),S(H,{key:11,onAddOption:e[21]||(e[21]=_=>n.addOption(_)),onRemoveOption:e[22]||(e[22]=_=>n.removeOption(_)),field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,wi)]),_:1},8,["field"])):c("",!0),n.isCkEditor?(i(),S(z,{key:12,field:s.field},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,xi)]),_:1},8,["field"])):c("",!0),n.isSwitch?(i(),S(q,{key:13,field:s.field,onChange:e[23]||(e[23]=_=>n.changeTouchedState(s.field,_))},{default:M(()=>[k(h(s.field.label),1)]),description:M(()=>[l("span",{innerHTML:s.field.description||""},null,8,Di)]),_:1},8,["field"])):c("",!0),n.isCustom?(i(),S(le,{key:14},[(i(),S(N(s.field.component),{field:s.field,onBlur:e[24]||(e[24]=_=>t.$emit("blur",s.field)),onChange:e[25]||(e[25]=_=>n.changeTouchedState(s.field,_))},null,40,["field"]))],1024)):c("",!0)]))],64)}const Mi=D(di,[["render",Ci]]),Ti={name:"ns-field-detail",props:["field"],methods:{__:p}},Si={key:0,class:"text-xs ns-description"};function Ei(t,e,s,u,d,n){return i(),r(v,null,[!s.field.errors||s.field.errors.length===0?(i(),r("p",Si,h(s.field.description),1)):c("",!0),(i(!0),r(v,null,C(s.field.errors,(a,o)=>(i(),r("p",{key:o,class:"text-xs ns-error"},[a.identifier==="required"?w(t.$slots,a.identifier,{key:0},()=>[k(h(n.__("This field is required.")),1)]):c("",!0),a.identifier==="email"?w(t.$slots,a.identifier,{key:1},()=>[k(h(n.__("This field must contain a valid email address.")),1)]):c("",!0),a.identifier==="invalid"?w(t.$slots,a.identifier,{key:2},()=>[k(h(a.message),1)]):c("",!0),a.identifier==="same"?w(t.$slots,a.identifier,{key:3},()=>[k(h(n.__('This field must be similar to "{other}""').replace("{other}",a.fields.filter(f=>f.name===a.rule.value)[0].label)),1)]):c("",!0),a.identifier==="min"?w(t.$slots,a.identifier,{key:4},()=>[k(h(n.__('This field must have at least "{length}" characters"').replace("{length}",a.rule.value)),1)]):c("",!0),a.identifier==="max"?w(t.$slots,a.identifier,{key:5},()=>[k(h(n.__('This field must have at most "{length}" characters"').replace("{length}",a.rule.value)),1)]):c("",!0),a.identifier==="different"?w(t.$slots,a.identifier,{key:6},()=>[k(h(n.__('This field must be different from "{other}""').replace("{other}",a.fields.filter(f=>f.name===a.rule.value)[0].label)),1)]):c("",!0)]))),128))],64)}const Fi=D(Ti,[["render",Ei]]),Ri={props:["className","buttonClass","type"]};function Oi(t,e,s,u,d,n){return i(),r("button",{class:m([s.type?s.type:s.buttonClass,"ns-inset-button rounded-full h-8 w-8 border items-center justify-center"])},[l("i",{class:m([s.className,"las"])},null,2)],2)}const Pi=D(Ri,[["render",Oi]]),ji={name:"ns-input-label",props:["field"],data(){return{tags:[],searchField:"",focused:!1,optionsToKeyValue:{}}},methods:{addOption(t){let e;this.optionSuggestions.length===1&&t===void 0?e=this.optionSuggestions[0]:t!==void 0&&(e=t),e!==void 0&&(this.field.value.filter(u=>u===e.value).length>0||(this.searchField="",this.field.value.push(e.value),this.$emit("change",this.field)))},removeOption(t){const e=this.field.value.filter(s=>s!==t);this.field.value=e}},mounted(){if(this.$refs.searchField.addEventListener("focus",t=>{this.focused=!0}),this.$refs.searchField.addEventListener("blur",t=>{setTimeout(()=>{this.focused=!1},200)}),this.field.value.length===void 0)try{this.field.value=JSON.parse(this.field.value)}catch{this.field.value=[]}this.field.options.forEach(t=>{this.optionsToKeyValue[t.value]=t.label})},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},optionSuggestions(){if(typeof this.field.value.map=="function"){const t=this.field.value.map(e=>e.value);return this.field.options.filter(e=>!t.includes(e.value)&&this.focused>0&&(e.label.search(this.searchField)>-1||e.value.search(this.searchField)>-1))}return[]},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":""}},props:["placeholder","leading","type","field"]},Ai={class:"flex flex-col mb-2 flex-auto ns-inline-multiselect"},Hi=["for"],$i={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ui={class:"leading sm:text-sm sm:leading-5"},Li=["disabled","id","type","placeholder"],Yi={class:"selected-option"},Bi={class:"flex items-center justify-center text-font"},Vi={class:"flex items-center justify-center px-1"},Ni=["onClick"],Ii={class:"relative"},zi=["placeholder"],qi={class:"h-0 absolute w-full z-10"},Wi={class:"shadow menu absoluve bottom-0 w-full max-h-80 overflow-y-auto"},Gi=["onClick"];function Qi(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",Ai,[s.field.label&&s.field.label.length>0?(i(),r("label",{key:0,for:s.field.name,class:m([n.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[w(t.$slots,"default")],10,Hi)):c("",!0),l("div",{class:m([(n.hasError?"has-error":"is-pristine")+" "+(s.field.description||s.field.errors>0?"mb-2":""),"mt-1 relative rounded-md focus:shadow-sm"])},[s.leading?(i(),r("div",$i,[l("span",Ui,h(s.leading),1)])):c("",!0),l("div",{disabled:s.field.disabled,id:s.field.name,type:s.field.type,class:m([n.inputClass,"flex sm:text-sm sm:leading-5 p-1 flex-wrap"]),placeholder:s.field.placeholder||""},[(i(!0),r(v,null,C(s.field.value,o=>(i(),r("div",Yi,[l("div",Bi,h(d.optionsToKeyValue[o]),1),l("div",Vi,[l("div",{onClick:f=>n.removeOption(o),class:"cursor-pointer rounded-full h-5 w-5 flex items-center justify-center"},e[3]||(e[3]=[l("i",{class:"las la-times-circle"},null,-1)]),8,Ni)])]))),256)),l("div",Ii,[R(l("input",{onChange:e[0]||(e[0]=o=>o.stopPropagation()),onKeydown:e[1]||(e[1]=Y(o=>n.addOption(),["enter"])),ref:"searchField","onUpdate:modelValue":e[2]||(e[2]=o=>d.searchField=o),type:"text",class:"w-auto p-2 border-b border-dashed bg-transparent",placeholder:s.field.placeholder||"Start searching here..."},null,40,zi),[[A,d.searchField]]),l("div",qi,[l("div",Wi,[l("ul",null,[(i(!0),r(v,null,C(n.optionSuggestions,o=>(i(),r("li",{onClick:f=>n.addOption(o),class:"p-2 hover:bg-box-elevation-hover text-fontcolor cursor-pointer"},h(o.label),9,Gi))),256))])])])])],10,Li)],2),T(a,{field:s.field},null,8,["field"])])}const Ki=D(ji,[["render",Qi]]),Zi={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},Xi=["for"],Ji={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},er={class:"leading sm:text-sm sm:leading-5"},tr=["disabled","id","type","placeholder"];function sr(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-input",n.hasError?"has-error":"is-pristine"])},[s.field.label&&s.field.label.length>0?(i(),r("label",{key:0,for:s.field.name,class:"block leading-5 font-medium"},[w(t.$slots,"default")],8,Xi)):c("",!0),l("div",{class:m([s.field.description||s.field.errors>0?"mb-2":"","mt-1 relative overflow-hidden border rounded-md focus:shadow-sm"])},[s.leading?(i(),r("div",Ji,[l("span",er,h(s.leading),1)])):c("",!0),R(l("input",{disabled:s.field.disabled,"onUpdate:modelValue":e[0]||(e[0]=o=>s.field.value=o),id:s.field.name,type:s.type||s.field.type||"text",class:m([n.inputClass,"block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.field.placeholder||""},null,10,tr),[[ue,s.field.value]])],2),T(a,{field:s.field},null,8,["field"])],2)}const nr=D(Zi,[["render",sr]]),lr={data:()=>({clicked:!1,_save:0}),props:["type","to","href","target"],computed:{buttonclass(){switch(this.type){case"info":return"shadow bg-info-secondary text-white";case"success":return"shadow bg-success-secondary text-white";case"error":return"shadow bg-error-secondary text-white";case"warning":return"shadow bg-warning-secondary text-white";default:return"shadow bg-white text-gray-800"}}}},ir={class:"flex"},rr=["target","href"];function ar(t,e,s,u,d,n){return i(),r("div",ir,[s.href?(i(),r("a",{key:0,target:s.target,href:s.href,class:m([n.buttonclass,"rounded cursor-pointer py-2 px-3 font-semibold"])},[w(t.$slots,"default")],10,rr)):c("",!0)])}const dr=D(lr,[["render",ar]]),ge={zip:"la-file-archive",tar:"la-file-archive",bz:"la-file-archive","7z":"la-file-archive",css:"la-file-code",js:"la-file-code",json:"la-file-code",docx:"la-file-word",doc:"la-file-word",mp3:"la-file-audio",aac:"la-file-audio",ods:"la-file-audio",pdf:"la-file-pdf",csv:"la-file-csv",avi:"la-file-video",mpeg:"la-file-video",mpkg:"la-file-video",unknown:"la-file"},or={name:"ns-media",props:["popup"],data(){return{searchFieldDebounce:null,searchField:"",pages:[{label:p("Upload"),name:"upload",selected:!1},{label:p("Gallery"),name:"gallery",selected:!0}],resources:[],isDragging:!1,response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},fileIcons:ge,queryPage:1,bulkSelect:!1,files:[]}},mounted(){this.popupCloser();const t=this.pages.filter(e=>e.name==="gallery")[0];this.select(t)},watch:{searchField(){clearTimeout(this.searchFieldDebounce),this.searchFieldDebounce=setTimeout(()=>{this.loadGallery(1)},500)},files:{handler(){this.uploadFiles()},deep:!0}},computed:{postMedia(){return oe.applyFilters("http-client-url","/api/medias")},currentPage(){return this.pages.filter(t=>t.selected)[0]},hasOneSelected(){return this.response.data.filter(t=>t.selected).length>0},selectedResource(){return this.response.data.filter(t=>t.selected)[0]},csrf(){return ns.authentication.csrf},isPopup(){return typeof this.popup<"u"},user_id(){return this.isPopup&&this.popup.params.user_id||0},panelOpened(){return!this.bulkSelect&&this.hasOneSelected},popupInstance(){return this.popup}},methods:{popupCloser:ae,__:p,cancelBulkSelect(){this.bulkSelect=!1,this.response.data.forEach(t=>t.selected=!1)},openError(t){L.show(ne,{title:p("An error occured"),message:t.error.message||p("An unexpected error occured.")})},deleteSelected(){L.show(V,{title:p("Confirm Your Action"),message:p("You're about to delete selected resources. Would you like to proceed?"),onAction:t=>{t&&$.post("/api/medias/bulk-delete",{ids:this.response.data.filter(e=>e.selected).map(e=>e.id)}).subscribe({next:e=>{E.success(e.message).subscribe(),this.loadGallery()},error:e=>{E.error(e.message).subscribe()}})}})},loadUploadScreen(){setTimeout(()=>{this.setDropZone()},1e3)},setDropZone(){const t=document.getElementById("dropping-zone");t.addEventListener("dragenter",s=>this.preventDefaults(s),!1),t.addEventListener("dragleave",s=>this.preventDefaults(s),!1),t.addEventListener("dragover",s=>this.preventDefaults(s),!1),t.addEventListener("drop",s=>this.preventDefaults(s),!1),["dragenter","dragover"].forEach(s=>{t.addEventListener(s,()=>{this.isDragging=!0})}),["dragleave","drop"].forEach(s=>{t.addEventListener(s,()=>{this.isDragging=!1})}),t.addEventListener("drop",s=>this.handleDrop(s),!1),this.$refs.files.addEventListener("change",s=>this.processFiles(s.currentTarget.files))},async uploadFiles(){const t=this.files.filter(e=>e.uploaded===!1&&e.progress===0&&e.failed===!1);for(let e=0;e<t.length;e++){const s=t[e];try{s.progress=1;const u=await new Promise((d,n)=>{const a=new FormData;a.append("file",s.file),$.post("/api/medias",a,{headers:{"Content-Type":"multipart/form-data"}}).subscribe({next:o=>{s.uploaded=!0,s.progress=100,d(o)},error:o=>{t[e].failed=!0,t[e].error=o}})})}catch{s.failed=!0}}},handleDrop(t){this.processFiles(t.dataTransfer.files),t.preventDefault(),t.stopPropagation()},preventDefaults(t){t.preventDefault(),t.stopPropagation()},getAllParents(t){let e=[];for(;t.parentNode&&t.parentNode.nodeName.toLowerCase()!="body";)t=t.parentNode,e.push(t);return e},triggerManualUpload(t){const e=t.target;if(e!==null){const u=this.getAllParents(e).map(d=>{const n=d.getAttribute("class");if(n)return n.split(" ")});if(e.getAttribute("class")){const d=e.getAttribute("class").split(" ");u.push(d)}u.flat().includes("ns-scrollbar")||this.$refs.files.click()}},processFiles(t){Array.from(t).filter(u=>(console.log(this),Object.values(window.ns.medias.mimes).includes(u.type))).forEach(u=>{this.files.unshift({file:u,uploaded:!1,failed:!1,progress:0})})},select(t){this.pages.forEach(e=>e.selected=!1),t.selected=!0,t.name==="gallery"?this.loadGallery():t.name==="upload"&&this.loadUploadScreen()},loadGallery(t=null){t=t===null?this.queryPage:t,this.queryPage=t,$.get(`/api/medias?page=${t}&user_id=${this.user_id}${this.searchField.length>0?`&search=${this.searchField}`:""}`).subscribe(e=>{e.data.forEach(s=>s.selected=!1),this.response=e})},submitChange(t,e){$.put(`/api/medias/${e.id}`,{name:t.srcElement.textContent}).subscribe({next:s=>{e.fileEdit=!1,E.success(s.message,"OK").subscribe()},error:s=>{e.fileEdit=!1,E.success(s.message||p("An unexpected error occured."),"OK").subscribe()}})},useSelectedEntries(){this.popup.params.resolve({event:"use-selected",value:this.response.data.filter(t=>t.selected)}),this.popup.close()},selectResource(t){this.bulkSelect||this.response.data.forEach((e,s)=>{s!==this.response.data.indexOf(t)&&(e.selected=!1)}),t.fileEdit=!1,t.selected=!t.selected},isImage(t){return Object.keys(ns.medias.imageMimes).includes(t.extension)}}},ur={class:"sidebar w-48 md:h-full flex-shrink-0"},cr={class:"text-xl font-bold my-4 text-center"},hr={class:"sidebar-menus flex md:block mt-8"},fr=["onClick"],mr={key:0,class:"content flex-auto w-full flex-col overflow-hidden flex"},gr={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},br={class:"cursor-pointer text-lg md:text-xl font-bold text-center text-fontcolor mb-4"},pr={style:{display:"none"},type:"file",name:"",multiple:"",ref:"files",id:""},vr={class:"rounded bg-box-background shadow w-full md:w-2/3 text-fontcolor h-56 overflow-y-auto ns-scrollbar p-2"},yr={key:0},_r={key:0,class:"rounded bg-info-primary flex items-center justify-center text-xs p-2"},kr=["onClick"],wr={class:"ml-2"},xr={key:1,class:"h-full w-full items-center justify-center flex text-center text-soft-tertiary"},Dr={key:1,class:"content flex-auto flex-col w-full overflow-hidden flex"},Cr={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},Mr={class:"flex flex-auto overflow-hidden"},Tr={class:"shadow ns-grid flex flex-auto flex-col"},Sr={class:"p-2 border-b border-box-background"},Er={class:"ns-input border-2 rounded border-input-edge bg-input-background flex"},Fr=["placeholder"],Rr={key:0,class:"flex items-center justify-center w-20 p-1"},Or={class:"flex flex-auto overflow-hidden"},Pr={class:"p-2 overflow-y-auto ns-scrollbar"},jr={class:"grid grid-cols-2 md:grid-cols-3 gap-1 lg:grid-cols-4"},Ar=["onClick"],Hr=["src","alt"],$r={key:1,class:"object-cover h-full flex items-center justify-center"},Ur={key:0,class:"flex flex-auto items-center justify-center"},Lr={class:"text-2xl font-bold"},Yr={id:"preview",class:"ns-media-preview-panel hidden lg:block w-64 flex-shrink-0"},Br={key:0,class:"h-64 bg-gray-800 flex items-center justify-center"},Vr=["src","alt"],Nr={key:1,class:"object-cover h-full flex items-center justify-center"},Ir={key:1,id:"details",class:"p-4 text-gray-700 text-sm"},zr={class:"flex flex-col mb-2"},qr={class:"font-bold block"},Wr=["contenteditable"],Gr={class:"flex flex-col mb-2"},Qr={class:"font-bold block"},Kr={class:"flex flex-col mb-2"},Zr={class:"font-bold block"},Xr={class:"py-2 pr-2 flex ns-media-footer flex-shrink-0 justify-between"},Jr={class:"flex -mx-2 flex-shrink-0"},ea={key:0,class:"px-2"},ta={class:"ns-button shadow rounded overflow-hidden info"},sa={key:1,class:"px-2"},na={class:"ns-button shadow rounded overflow-hidden info"},la={key:2,class:"px-2"},ia={class:"ns-button shadow rounded overflow-hidden warning"},ra={class:"flex-shrink-0 -mx-2 flex"},aa={class:"px-2"},da={class:"rounded shadow overflow-hidden flex text-sm"},oa=["disabled"],ua=["disabled"],ca={key:0,class:"px-2"},ha={class:"ns-button info"};function fa(t,e,s,u,d,n){const a=y("ns-close-button");return i(),r("div",{class:m(["flex md:flex-row flex-col ns-box shadow-xl overflow-hidden",n.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full"]),id:"ns-media"},[l("div",ur,[l("h3",cr,h(n.__("Medias Manager")),1),l("ul",hr,[(i(!0),r(v,null,C(d.pages,(o,f)=>(i(),r("li",{onClick:g=>n.select(o),class:m(["py-2 px-3 cursor-pointer border-l-8",o.selected?"active":""]),key:f},h(o.label),11,fr))),128))])]),n.currentPage.name==="upload"?(i(),r("div",mr,[n.isPopup?(i(),r("div",gr,[e[13]||(e[13]=l("div",null,null,-1)),l("div",null,[T(a,{onClick:e[0]||(e[0]=o=>n.popupInstance.close())})])])):c("",!0),l("div",{id:"dropping-zone",onClick:e[1]||(e[1]=o=>n.triggerManualUpload(o)),class:m([d.isDragging?"border-dashed border-2":"","flex flex-auto m-2 p-2 flex-col border-info-primary items-center justify-center"])},[l("h3",br,h(n.__("Click Here Or Drop Your File To Upload")),1),l("input",pr,null,512),l("div",vr,[d.files.length>0?(i(),r("ul",yr,[(i(!0),r(v,null,C(d.files,(o,f)=>(i(),r("li",{class:m([o.failed===!1?"border-info-secondary":"border-error-secondary","p-2 mb-2 border-b-2 flex items-center justify-between"]),key:f},[l("span",null,h(o.file.name),1),o.failed===!1?(i(),r("span",_r,h(o.progress)+"%",1)):c("",!0),o.failed===!0?(i(),r("div",{key:1,onClick:g=>n.openError(o),class:"rounded bg-error-primary hover:bg-error-secondary hover:text-white flex items-center justify-center text-xs p-2 cursor-pointer"},[e[14]||(e[14]=l("i",{class:"las la-eye"},null,-1)),e[15]||(e[15]=k()),l("span",wr,h(n.__("See Error")),1)],8,kr)):c("",!0)],2))),128))])):c("",!0),d.files.length===0?(i(),r("div",xr,h(n.__("Your uploaded files will displays here.")),1)):c("",!0)])],2)])):c("",!0),n.currentPage.name==="gallery"?(i(),r("div",Dr,[n.isPopup?(i(),r("div",Cr,[e[16]||(e[16]=l("div",null,null,-1)),l("div",null,[T(a,{onClick:e[2]||(e[2]=o=>n.popupInstance.close())})])])):c("",!0),l("div",Mr,[l("div",Tr,[l("div",Sr,[l("div",Er,[R(l("input",{id:"search",type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>d.searchField=o),placeholder:n.__("Search Medias"),class:"px-4 block w-full sm:text-sm sm:leading-5 h-10"},null,8,Fr),[[A,d.searchField]]),d.searchField.length>0?(i(),r("div",Rr,[l("button",{onClick:e[4]||(e[4]=o=>d.searchField=""),class:"h-full w-full rounded-tr rounded-br overflow-hidden"},h(n.__("Cancel")),1)])):c("",!0)])]),l("div",Or,[l("div",Pr,[l("div",jr,[(i(!0),r(v,null,C(d.response.data,(o,f)=>(i(),r("div",{key:f,class:""},[l("div",null,[l("div",{onClick:g=>n.selectResource(o),class:m([o.selected?"ns-media-image-selected ring-4":"","aspect-square bg-gray-500 overflow-hidden flex items-center justify-center"])},[n.isImage(o)?(i(),r("img",{key:0,class:"object-cover h-full",src:o.sizes.thumb,alt:o.name},null,8,Hr)):c("",!0),n.isImage(o)?c("",!0):(i(),r("div",$r,[l("i",{class:m([d.fileIcons[o.extension]||d.fileIcons.unknown,"las text-8xl text-white"])},null,2)]))],10,Ar)])]))),128))])]),d.response.data.length===0?(i(),r("div",Ur,[l("h3",Lr,h(n.__("Nothing has already been uploaded")),1)])):c("",!0)])]),l("div",Yr,[n.panelOpened?(i(),r("div",Br,[n.isImage(n.selectedResource)?(i(),r("img",{key:0,class:"object-cover h-full",src:n.selectedResource.sizes.thumb,alt:n.selectedResource.name},null,8,Vr)):c("",!0),n.isImage(n.selectedResource)?c("",!0):(i(),r("div",Nr,[l("i",{class:m([d.fileIcons[n.selectedResource.extension]||d.fileIcons.unknown,"las text-8xl text-white"])},null,2)]))])):c("",!0),n.panelOpened?(i(),r("div",Ir,[l("p",zr,[l("strong",qr,h(n.__("File Name"))+": ",1),l("span",{class:m(["p-2",n.selectedResource.fileEdit?"border-b border-input-edge bg-input-background":""]),onBlur:e[5]||(e[5]=o=>n.submitChange(o,n.selectedResource)),contenteditable:n.selectedResource.fileEdit?"true":"false",onClick:e[6]||(e[6]=o=>n.selectedResource.fileEdit=!0)},h(n.selectedResource.name),43,Wr)]),l("p",Gr,[l("strong",Qr,h(n.__("Uploaded At"))+":",1),l("span",null,h(n.selectedResource.created_at),1)]),l("p",Kr,[l("strong",Zr,h(n.__("By"))+" :",1),l("span",null,h(n.selectedResource.user.username),1)])])):c("",!0)])]),l("div",Xr,[l("div",Jr,[d.bulkSelect?(i(),r("div",ea,[l("div",ta,[l("button",{onClick:e[7]||(e[7]=o=>n.cancelBulkSelect()),class:"py-2 px-3"},[e[17]||(e[17]=l("i",{class:"las la-times"},null,-1)),k(" "+h(n.__("Cancel")),1)])])])):c("",!0),n.hasOneSelected&&!d.bulkSelect?(i(),r("div",sa,[l("div",na,[l("button",{onClick:e[8]||(e[8]=o=>d.bulkSelect=!0),class:"py-2 px-3"},[e[18]||(e[18]=l("i",{class:"las la-check-circle"},null,-1)),k(" "+h(n.__("Bulk Select")),1)])])])):c("",!0),n.hasOneSelected?(i(),r("div",la,[l("div",ia,[l("button",{onClick:e[9]||(e[9]=o=>n.deleteSelected()),class:"py-2 px-3"},[e[19]||(e[19]=l("i",{class:"las la-trash"},null,-1)),k(" "+h(n.__("Delete")),1)])])])):c("",!0)]),l("div",ra,[l("div",aa,[l("div",da,[l("div",{class:m(["ns-button",d.response.current_page===1?"disabled cursor-not-allowed":"info"])},[l("button",{disabled:d.response.current_page===1,onClick:e[10]||(e[10]=o=>n.loadGallery(d.response.current_page-1)),class:"p-2"},h(n.__("Previous")),9,oa)],2),e[20]||(e[20]=l("hr",{class:"border-r border-gray-700"},null,-1)),l("div",{class:m(["ns-button",d.response.current_page===d.response.last_page?"disabled cursor-not-allowed":"info"])},[l("button",{disabled:d.response.current_page===d.response.last_page,onClick:e[11]||(e[11]=o=>n.loadGallery(d.response.current_page+1)),class:"p-2"},h(n.__("Next")),9,ua)],2)])]),n.isPopup&&n.hasOneSelected?(i(),r("div",ca,[l("div",ha,[l("button",{class:"rounded shadow p-2 text-sm",onClick:e[12]||(e[12]=o=>n.useSelectedEntries())},h(n.__("Use Selected")),1)])])):c("",!0)])])])):c("",!0)],2)}const be=D(or,[["render",fa]]),ru=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"})),ma={computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},data(){return{fileIcons:ge}},props:["placeholder","leading","type","field"],mounted(){},methods:{isImage(t){return Object.keys(ns.medias.imageMimes).includes(t.extension)},toggleMedia(){new Promise((e,s)=>{L.show(be,{resolve:e,reject:s,...this.field.data||{}})}).then(e=>{e.event==="use-selected"&&(!this.field.data||this.field.data.type==="url"?this.field.value=e.value[0].sizes.original:!this.field.data||this.field.data.type==="model"?(this.field.value=e.value[0].id,this.field.data.model=e.value[0]):this.field.value=e.value[0].sizes.original,this.$forceUpdate())})}}},ga=["for"],ba={class:"mt-1 relative border rounded-md focus:shadow-sm"},pa={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},va={class:"text-fontcolor sm:text-sm sm:leading-5"},ya={class:"rounded overflow-hidden flex"},_a={key:0,class:"form-input flex w-full sm:text-sm items-center sm:leading-5 h-10"},ka=["src","alt"],wa={key:1,class:"object-cover flex items-center justify-center"},xa={class:"text-xs text-fontcolor-soft"},Da=["disabled","id","type","placeholder"];function Ca(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-media",n.hasError?"has-error":"is-pristine"])},[l("label",{for:s.field.name,class:"block leading-5 font-medium"},[w(t.$slots,"default")],8,ga),l("div",ba,[s.leading?(i(),r("div",pa,[l("span",va,h(s.leading),1)])):c("",!0),l("div",ya,[s.field.data&&s.field.data.type==="model"?(i(),r("div",_a,[s.field.value&&s.field.data.model.name?(i(),r(v,{key:0},[n.isImage(s.field.data.model)?(i(),r("img",{key:0,class:"w-8 h-8 m-1",src:s.field.data.model.sizes.thumb,alt:s.field.data.model.name},null,8,ka)):c("",!0),n.isImage(s.field.data.model)?c("",!0):(i(),r("div",wa,[l("i",{class:m([d.fileIcons[s.field.data.model.extension]||d.fileIcons.unknown,"las text-3xl"])},null,2)])),l("span",xa,h(s.field.data.model.name),1)],64)):c("",!0)])):c("",!0),!s.field.data||s.field.data.type==="undefined"||s.field.data.type==="url"?R((i(),r("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=o=>s.field.value=o),disabled:s.field.disabled,onBlur:e[1]||(e[1]=o=>t.$emit("blur",this)),onChange:e[2]||(e[2]=o=>t.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([n.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,Da)),[[ue,s.field.value]]):c("",!0),l("button",{onClick:e[3]||(e[3]=o=>n.toggleMedia(s.field)),class:"w-10 h-10 flex items-center justify-center border-l outline-hidden"},e[4]||(e[4]=[l("i",{class:"las la-photo-video"},null,-1)]))])]),T(a,{field:s.field},null,8,["field"])],2)}const Ma=D(ma,[["render",Ca]]),Ta={data:()=>({defaultToggledState:!1,_save:0,hasChildren:!1}),props:["href","to","label","icon","notification","toggled","identifier"],mounted(){this.hasChildren=this.$el.querySelectorAll(".submenu").length>0,this.defaultToggledState=this.toggled!==void 0?this.toggled:this.defaultToggledState,nsEvent.subject().subscribe(t=>{t.value!==this.identifier&&(this.defaultToggledState=!1)})},methods:{toggleEmit(){this.toggle().then(t=>{t&&nsEvent.emit({identifier:"side-menu.open",value:this.identifier})})},goTo(t,e){return this.$router.push(t),e.preventDefault(),!1},toggle(){return new Promise((t,e)=>{(!this.href||this.href.length===0)&&(this.defaultToggledState=!this.defaultToggledState,t(this.defaultToggledState))})}}},Sa=["href"],Ea={class:"flex items-center"},Fa={key:0,class:"rounded-full notification-label font-bold w-6 h-6 text-xs justify-center items-center flex"},Ra=["href"],Oa={class:"flex items-center"},Pa={key:0,class:"rounded-full notification-label font-bold w-6 h-6 text-xs justify-center items-center flex"},ja={key:1,class:"flex items-center"},Aa={key:0,class:"las la-angle-down"},Ha={key:1,class:"las la-angle-up"};function $a(t,e,s,u,d,n){var a,o;return i(),r("li",null,[s.to&&!t.hasChildren?(i(),r("a",{key:0,onClick:e[0]||(e[0]=f=>n.goTo(s.to,f)),href:s.to,class:m([t.defaultToggledState?"toggled":"normal","flex justify-between py-2 border-l-8 px-3 font-bold ns-aside-menu"])},[l("span",Ea,[l("i",{class:m(["las text-lg mr-2",((a=s.icon)==null?void 0:a.length)>0?s.icon:"la-star"])},null,2),k(" "+h(s.label),1)]),s.notification>0?(i(),r("span",Fa,h(s.notification),1)):c("",!0)],10,Sa)):(i(),r("a",{key:1,onClick:e[1]||(e[1]=f=>n.toggleEmit()),href:s.href||"javascript:void(0)",class:m([t.defaultToggledState?"toggled":"normal","flex justify-between py-2 border-l-8 px-3 font-bold ns-aside-menu"])},[l("span",Oa,[l("i",{class:m(["las text-lg mr-2",((o=s.icon)==null?void 0:o.length)>0?s.icon:"la-star"])},null,2),k(" "+h(s.label),1)]),s.notification>0?(i(),r("span",Pa,h(s.notification),1)):c("",!0),t.hasChildren?(i(),r("span",ja,[t.defaultToggledState?c("",!0):(i(),r("i",Aa)),t.defaultToggledState?(i(),r("i",Ha)):c("",!0)])):c("",!0)],10,Ra)),l("ul",{class:m([t.defaultToggledState?"":"hidden","submenu-wrapper"])},[w(t.$slots,"default")],2)])}const Ua=D(Ta,[["render",$a]]),La={data(){return{showPanel:!1,search:"",eventListener:null}},emits:["change","blur"],props:["field"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},_filtredOptions(){let t=this._options;return this.search.length>0&&(t=this._options.filter(e=>e.label.toLowerCase().search(this.search.toLowerCase())!==-1)),t.filter(e=>e.selected===!1)},_options(){return this.field.options.map(t=>(t.selected=t.selected===void 0?!1:t.selected,this.field.value&&this.field.value.includes(t.value)&&(t.selected=!0),t))}},methods:{__:p,togglePanel(){this.field.disabled||(this.showPanel=!this.showPanel)},selectAvailableOptionIfPossible(){this._filtredOptions.length>0&&this.addOption(this._filtredOptions[0])},addOption(t){this.field.disabled||(this.$emit("addOption",t),this.$forceUpdate(),setTimeout(()=>{this.search=""},100))},removeOption(t,e){if(!this.field.disabled)return e.preventDefault(),e.stopPropagation(),this.$emit("removeOption",t),this.$forceUpdate(),setTimeout(()=>{this.search=""},100),!1}},mounted(){this.field.value&&this.field.value.reverse().forEach(e=>{const s=this.field.options.filter(u=>u.value===e);s.length>0&&this.addOption(s[0])}),this.eventListener=document.addEventListener("click",t=>{let s=t.target.parentElement,u=!1;if(this.showPanel){for(;s;){if(s&&s.classList.contains("ns-multiselect")&&!s.classList.contains("arrows")){u=!0;break}s=s.parentElement}u===!1&&this.togglePanel()}})}},Ya=["for"],Ba={class:"flex flex-col"},Va={class:"flex -mx-1 -my-1 flex-wrap"},Na={class:"rounded selected-pills flex justify-between p-1 items-center"},Ia={class:"pr-8 text-xs"},za=["onClick"],qa={class:"arrows ml-1"},Wa={class:"ns-dropdown shadow border rounded-b-md"},Ga={class:"search border-b border-input-option-hover"},Qa={class:"h-40 overflow-y-auto"},Ka=["onClick"],Za={key:0,class:"las la-check"},Xa={key:0,class:"p-2 text-center text-fontcolor"},Ja={class:"my-2"};function ed(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",{class:m(["flex flex-col ns-multiselect",n.hasError?"has-error":"is-pristine"])},[l("label",{for:s.field.name,class:"block mb-1 leading-5 font-medium"},[w(t.$slots,"default")],8,Ya),l("div",Ba,[l("div",{onClick:e[0]||(e[0]=o=>n.togglePanel()),class:m([(s.field.disabled?"disabled":"")+" "+(d.showPanel?"toggled":"untoggled"),"overflow-y-auto flex select-preview justify-between border p-2 items-start"]),style:{"max-height":"150px"}},[l("div",Va,[(i(!0),r(v,null,C(n._options.filter(o=>o.selected),(o,f)=>(i(),r("div",{key:f,class:"px-1 my-1"},[l("div",Na,[l("span",Ia,h(o.label),1),l("button",{onClick:g=>n.removeOption(o,g),class:"rounded outline-hidden hover:bg-info-tertiary h-4 w-4 flex items-center justify-center"},e[3]||(e[3]=[l("i",{class:"las la-times"},null,-1)]),8,za)])]))),128))]),l("div",qa,[l("span",{class:m(d.showPanel?"":"hidden")},e[4]||(e[4]=[l("i",{class:"las la-angle-down"},null,-1)]),2),l("span",{class:m(d.showPanel?"hidden":"")},e[5]||(e[5]=[l("i",{class:"las la-angle-up"},null,-1)]),2)])],2),d.showPanel?(i(),r("div",{key:0,class:m(["h-0 z-10",d.showPanel?"shadow":""]),style:{"margin-top":"-2px","margin-bottom":"2px"}},[l("div",Wa,[l("div",Ga,[R(l("input",{onKeypress:e[1]||(e[1]=Y(o=>n.selectAvailableOptionIfPossible(),["enter"])),"onUpdate:modelValue":e[2]||(e[2]=o=>d.search=o),class:"p-2 w-full bg-transparent text-fontcolor outline-hidden",placeholder:"Search"},null,544),[[A,d.search]])]),l("div",Qa,[(i(!0),r(v,null,C(n._filtredOptions,(o,f)=>(i(),r("div",{onClick:g=>n.addOption(o),key:f,class:m([o.selected?"selected":"","option p-2 flex justify-between cursor-pointer"])},[l("span",null,h(o.label),1),l("span",null,[o.checked?(i(),r("i",Za)):c("",!0)])],10,Ka))),128))]),n._options.length===0?(i(),r("div",Xa,h(n.__("Nothing to display")),1)):c("",!0)])],2)):c("",!0)]),l("div",Ja,[T(a,{field:s.field},null,8,["field"])])],2)}const td=D(La,[["render",ed]]),sd={class:"w-6/7-screen md:w-4/7-screen lg:w-3/7-screen flex flex-col shadow-lg bg-popup-surface"},nd={class:"flex flex-col"},ld={class:"h-24 font-bold text-4xl text-fontcolor flex justify-center items-center"},id=Pe({__name:"ns-numpad-popup",props:["popup"],setup(t){let e=B("");const s=t,u=n=>{e.value=n},d=()=>{s.popup.params.resolve(e.value),s.popup.close()};return ie(()=>{e.value=s.popup.params.value}),(n,a)=>{const o=y("ns-numpad-plus");return i(),r("div",sd,[l("div",nd,[l("div",ld,h(te(e)),1),T(o,{onChanged:a[0]||(a[0]=f=>u(f)),onNext:a[1]||(a[1]=f=>d()),value:te(e)},null,8,["value"])])])}}}),rd={},ad={class:"my-4"},dd={class:"font-bold text-2xl"},od={class:"text-font"};function ud(t,e){return i(),r("div",ad,[l("h2",dd,[w(t.$slots,"title")]),l("span",od,[w(t.$slots,"description")])])}const cd=D(rd,[["render",ud]]),hd={name:"ns-search",props:["url","placeholder","value","label","method","searchArgument"],data(){return{searchText:"",searchTimeout:null,results:[]}},methods:{__:p,selectOption(t){this.$emit("select",t),this.searchText="",this.results=[]},renderLabel(t,e){return typeof e=="object"?e.map(s=>t[s]).join(" "):t[e]}},watch:{searchText(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchText.length>0&&$[this.method||"post"](this.url,{[this.searchArgument||"search"]:this.searchText}).subscribe({next:t=>{this.results=t},error:t=>{E.error(t.message||p("An unexpected error occurred.")).subscribe()}})},1e3)}},mounted(){}},fd={class:"ns-search"},md={class:"input-group info border-2"},gd=["placeholder"],bd={class:"relative"},pd={class:"w-full absolute shadow-lg"},vd={key:0,class:"ns-vertical-menu"},yd=["onClick"];function _d(t,e,s,u,d,n){return i(),r("div",fd,[l("div",md,[R(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>d.searchText=a),class:"p-2 w-full outline-hidden",placeholder:s.placeholder||n.__("Search..."),id:""},null,8,gd),[[A,d.searchText]])]),l("div",bd,[l("div",pd,[d.results.length>0&&d.searchText.length>0?(i(),r("ul",vd,[(i(!0),r(v,null,C(d.results,(a,o)=>(i(),r("li",{class:"border-b p-2 cursor-pointer",onClick:f=>n.selectOption(a),key:o},h(n.renderLabel(a,s.label)),9,yd))),128))])):c("",!0)])])])}const kd=D(hd,[["render",_d]]),wd={data:()=>({searchField:"",showResults:!1,subscription:null}),name:"ns-search-select",emits:["saved","change"],props:["name","placeholder","field","leading"],computed:{selectedOptionLabel(){if(this.field.value===null||this.field.value===void 0)return p("Choose...");const t=this.field.options.filter(e=>e.value===this.field.value);return t.length>0?t[0].label:p("Choose...")},filtredOptions(){return this.searchField.length>0?this.field.options.filter(t=>new RegExp(this.searchField,"i").test(t.label)).splice(0,10):this.field.options},hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},watch:{showResults(){this.showResults===!0&&setTimeout(()=>{this.$refs.searchInputField.select()},50)}},mounted(){const t=this.field.options.filter(e=>e.value===this.field.value);t.length>0&&[null,void 0].includes(this.field.value)&&this.selectOption(t[0]),this.field.subject&&(this.subscription=this.field.subject.subscribe(({field:e,fields:s})=>{if(e&&s&&this.field.refresh&&e.name===this.field.refresh.watch){const u=this.field.refresh.url,d=this.field.refresh.data,n={identifier:e.value,...d};nsHttpClient.post(u,n).subscribe({next:a=>{this.field.options=a},error:a=>{console.error(a)}})}})),document.addEventListener("click",e=>{this.$el.contains(e.target)===!1&&(this.showResults=!1)})},destroyed(){this.subscription&&this.subscription.unsubscribe()},methods:{__:p,hasSelectedValues(t){return t.options.map(s=>s.value).includes(t.value)},resetSelectedInput(t){t.disabled||(t.value=null,this.$emit("change",null),this.showResults=!1,this.searchField="")},selectFirstOption(){this.filtredOptions.length>0&&this.selectOption(this.filtredOptions[0])},selectOption(t){this.field.value=t.value,this.$emit("change",t.value),this.searchField="",this.showResults=!1},async triggerDynamicComponent(t){try{this.showResults=!1;const e=nsExtraComponents[t.component]||nsComponents[t.component];e===void 0&&E.error(p(`The component ${t.component} cannot be loaded. Make sure it's injected on nsExtraComponents object.`)).subscribe();const s=await new Promise((u,d)=>{const n=L.show(e,{...t.props||{},field:this.field,resolve:u,reject:d})});this.$emit("saved",s)}catch{}},triggerFieldAbout(t){nsNotice.info(p("About this field"),t.about,{duration:5e3})}}},xd=["disabled"],Dd=["for"],Cd={class:"text-fontcolor text-sm"},Md={key:0,class:"relative"},Td={class:"w-full overflow-hidden -top-[5px] ns-select-results border rounded-b-md shadow z-10 absolute"},Sd={class:"border-b border-dashed p-2 filter-input-wrapper"},Ed=["placeholder"],Fd={class:"h-60 overflow-y-auto"},Rd=["onClick"];function Od(t,e,s,u,d,n){const a=y("ns-field-description");return s.field?(i(),r("div",{key:0,class:m(["flex flex-col flex-auto ns-select",n.hasError?"has-error":"is-pristine"]),disabled:s.field.disabled},[l("label",{for:s.field.name,class:"block leading-5 font-medium"},[w(t.$slots,"default")],8,Dd),l("div",{class:m([(s.field.disabled?"cursor-not-allowed":"cursor-default")+" "+(t.showResults?"rounded-t-md":"rounded-md"),"border mt-1 relative shadow-sm mb-1 flex overflow-hidden"])},[l("div",{onClick:e[0]||(e[0]=o=>!s.field.disabled&&(t.showResults=!t.showResults)),class:"placeholder flex-auto h-10 sm:leading-5 py-2 px-4 flex items-center"},[l("span",Cd,h(n.selectedOptionLabel),1)]),n.hasSelectedValues(s.field)&&!s.field.disabled?(i(),r("button",{key:0,onClick:e[1]||(e[1]=o=>n.resetSelectedInput(s.field)),class:"flex items-center justify-center w-10 border-l hover:cursor-pointer hover:bg-error-tertiary hover:text-white border-input-edge"},e[6]||(e[6]=[l("i",{class:"las la-times"},null,-1)]))):c("",!0),s.field.component&&!s.field.disabled?(i(),r("button",{key:1,onClick:e[2]||(e[2]=o=>n.triggerDynamicComponent(s.field)),class:"flex items-center justify-center w-10 hover:cursor-pointer border-l"},e[7]||(e[7]=[l("i",{class:"las la-plus"},null,-1)]))):c("",!0),s.field.about?(i(),r("button",{key:2,onClick:e[3]||(e[3]=o=>n.triggerFieldAbout(s.field)),class:"flex items-center justify-center w-10 hover:cursor-pointer border-l"},e[8]||(e[8]=[l("i",{class:"las la-question-circle text-2xl text-font"},null,-1)]))):c("",!0)],2),t.showResults?(i(),r("div",Md,[l("div",Td,[l("div",Sd,[R(l("input",{onKeypress:e[4]||(e[4]=Y(o=>n.selectFirstOption(),["enter"])),ref:"searchInputField","onUpdate:modelValue":e[5]||(e[5]=o=>t.searchField=o),type:"text",placeholder:n.__("Search result")},null,40,Ed),[[A,t.searchField]])]),l("div",Fd,[l("ul",null,[(i(!0),r(v,null,C(n.filtredOptions,o=>(i(),r("li",{onClick:f=>n.selectOption(o),class:"py-1 px-2 hover:bg-info-primary cursor-pointer text-font"},h(o.label),9,Rd))),256))])])])])):c("",!0),T(a,{field:s.field},null,8,["field"])],10,xd)):c("",!0)}const Pd=D(wd,[["render",Od]]),jd={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},mounted(){},methods:{__:p}},Ad=["for"],Hd={class:"border mt-1 relative rounded-md shadow-sm mb-1 overflow-hidden"},$d=["disabled","name"],Ud={value:null},Ld=["value"];function Yd(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",{class:m(["flex flex-col flex-auto ns-select",n.hasError?"has-error":"is-pristine"])},[l("label",{for:s.field.name,class:"block leading-5 font-medium"},[w(t.$slots,"default")],8,Ad),l("div",Hd,[R(l("select",{disabled:s.field.disabled?s.field.disabled:!1,name:s.field.name,"onUpdate:modelValue":e[0]||(e[0]=o=>s.field.value=o),class:m([n.inputClass,"form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 appearance-none"])},[l("option",Ud,h(n.__("Choose an option")),1),(i(!0),r(v,null,C(s.field.options,(o,f)=>(i(),r("option",{key:f,value:o.value,class:"py-2"},h(o.label),9,Ld))),128))],10,$d),[[U,s.field.value]])]),T(a,{field:s.field},null,8,["field"])],2)}const Bd=D(jd,[["render",Yd]]),Vd={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},methods:{__:p,playSelectedSound(){this.field.value!==null&&this.field.value.length>0&&new Audio(this.field.value).play()}}},Nd={class:"flex flex-col flex-auto ns-select-audio"},Id=["for"],zd=["disabled","name"],qd=["value"];function Wd(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",Nd,[l("label",{for:s.field.name,class:m([n.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[w(t.$slots,"default")],10,Id),l("div",{class:m([n.hasError?"error":"","mt-1 flex relative mb-1 form-input"])},[l("button",{onClick:e[0]||(e[0]=o=>n.playSelectedSound()),class:"rounded-l border w-12 flex-auto flex items-center justify-center"},e[3]||(e[3]=[l("i",{class:"las la-play text-2xl"},null,-1)])),R(l("select",{disabled:s.field.disabled?s.field.disabled:!1,onChange:e[1]||(e[1]=o=>t.$emit("change",o)),name:s.field.name,"onUpdate:modelValue":e[2]||(e[2]=o=>s.field.value=o),class:m([n.inputClass,"text-fontcolor block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 outline-hidden"])},[(i(!0),r(v,null,C(s.field.options,(o,f)=>(i(),r("option",{key:f,value:o.value,class:"py-2"},h(o.label),9,qd))),128))],42,zd),[[U,s.field.value]])],2),T(a,{field:s.field},null,8,["field"])])}const Gd=D(Vd,[["render",Wd]]),Qd={data:()=>({}),mounted(){},computed:{validatedSize(){return this.size||24},validatedBorder(){return this.border||8},validatedAnimation(){return this.animation||"fast"}},props:["color","size","border","animation"]},Kd={class:"flex items-center justify-center"};function Zd(t,e,s,u,d,n){return i(),r("div",Kd,[l("div",{class:m(["loader ease-linear rounded-full border-gray-200",n.validatedAnimation+" border-4 border-t-4 w-"+n.validatedSize+" h-"+n.validatedSize])},null,2)])}const Xd=D(Qd,[["render",Zd]]),Jd={data:()=>({}),props:["href","label","active","to"],mounted(){},methods:{goTo(t,e){return this.$router.push(t),e.preventDefault(),!1}}},eo={class:"submenu"},to=["href"],so=["href"];function no(t,e,s,u,d,n){return i(),r("div",null,[l("li",eo,[s.href?(i(),r("a",{key:0,class:m([s.active?"font-bold active":"normal","py-2 border-l-4 px-4 block ns-aside-submenu"]),href:s.href},[w(t.$slots,"default")],10,to)):s.to?(i(),r("a",{key:1,class:m([s.active?"font-bold active":"normal","py-2 border-l-4 px-4 block ns-aside-submenu"]),onClick:e[0]||(e[0]=a=>n.goTo(s.to,a)),href:s.to},[w(t.$slots,"default")],10,so)):c("",!0)])])}const lo=D(Jd,[["render",no]]),io={props:["options","row","columns","prependOptions","showOptions","showCheckboxes"],data:()=>({optionsToggled:!1}),mounted(){},methods:{__:p,sanitizeHTML(t){var e=document.createElement("div");e.innerHTML=t;for(var s=e.getElementsByTagName("script"),u=s.length;u--;)s[u].parentNode.removeChild(s[u]);return e.innerHTML},getElementOffset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},toggleMenu(t){if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout(()=>{const e=this.$el.querySelectorAll(".dropdown-holder > .ns-menu-wrapper")[0],s=this.$el.querySelectorAll(".dropdown-holder")[0],u=this.getElementOffset(s);e.style.top=u.top+"px",e.style.left=u.left+"px",e.classList.remove("hidden"),s!==void 0&&(s.classList.remove("off"),s.classList.add("on"))},100);else{const e=this.$el.querySelectorAll(".dropdown-holder")[0];e.classList.remove("on"),e.classList.add("off")}},handleChanged(t){this.row.$checked=t,this.$emit("updated",this.row)},triggerAsync(t){t.confirm!==null?Popup.show(V,{title:t.confirm.title||p("Confirm Your Action"),message:t.confirm.message||p("Would you like to delete this entry?"),onAction:e=>{e&&$[t.type.toLowerCase()](t.url).subscribe(s=>{E.success(s.message).subscribe(),this.$emit("reload",this.row)},s=>{this.toggleMenu(),E.error(s.message).subscribe()})}}):(nsEvent.emit({identifier:"ns-table-row-action",value:{action:t,row:this.row,component:this}}),this.toggleMenu())},triggerPopup(t,e){const s=window.nsExtraComponents[t.component];if(t.component)return s?new Promise((u,d)=>{Popup.show(s,{resolve:u,reject:d,row:e,action:t})}):E.error(p(`Unable to load the component "${t.component}". Make sure the component is registered to "nsExtraComponents".`)).subscribe();this.triggerAsync(t)}}},ro={key:0,class:"font-sans p-2"},ao={key:1,class:"font-sans p-2"},oo={class:""},uo={class:"dropdown-holder"},co={key:0,class:"zoom-in-entrance anim-duration-300 ns-menu-wrapper hidden z-50 origin-top-left mt-2"},ho={class:"rounded-md"},fo={role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},mo=["href","target","innerHTML"],go=["onClick","innerHTML"],bo=["href","innerHTML"],po=["innerHTML"],vo={class:"flex md:-mx-1 md:flex-wrap flex-col md:flex-row text-xs"},yo={class:"md:px-1 w-full md:w-1/2 lg:w-2/4"},_o=["innerHTML"],ko={key:2},wo={key:2,class:"font-sans p-2 flex flex-col items-center justify-center"},xo={class:""},Do={class:"dropdown-holder"},Co={key:0,class:"zoom-in-entrance anim-duration-300 z-50 origin-bottom-right mt-2 -ml-31 w-56 absolute rounded-md shadow-lg ns-menu-wrapper"},Mo={class:"rounded-md"},To={role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},So=["href","target","innerHTML"],Eo=["onClick","innerHTML"];function Fo(t,e,s,u,d,n){const a=y("ns-checkbox");return i(),r("tr",{class:m(["ns-table-row border text-sm",s.row.$cssClass?s.row.$cssClass:""])},[s.showCheckboxes?(i(),r("td",ro,[T(a,{onChange:e[0]||(e[0]=o=>n.handleChanged(o)),checked:s.row.$checked},null,8,["checked"])])):c("",!0),s.prependOptions&&s.showOptions?(i(),r("td",ao,[l("div",oo,[l("button",{onClick:e[1]||(e[1]=o=>n.toggleMenu(o)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-hidden rounded-full w-24 text-sm p-1 border"])},[e[5]||(e[5]=l("i",{class:"las la-ellipsis-h"},null,-1)),k(" "+h(n.__("Options")),1)],2),s.row.$toggled?(i(),r("div",{key:0,onClick:e[2]||(e[2]=o=>n.toggleMenu(o)),class:"absolute w-full h-full z-10 top-0 left-0"})):c("",!0),l("div",uo,[s.row.$toggled?(i(),r("div",co,[l("div",ho,[l("div",fo,[(i(!0),r(v,null,C(s.row.$actions,(o,f)=>(i(),r(v,{key:f},[["GOTO","TAB"].includes(o.type)?(i(),r("a",{key:0,href:o.url,target:o.type==="TAB"?"_blank":"_self",class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:n.sanitizeHTML(o.label)},null,8,mo)):c("",!0),["GET","DELETE","POPUP"].includes(o.type)?(i(),r("a",{key:1,href:"javascript:void(0)",onClick:g=>n.triggerAsync(o),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:n.sanitizeHTML(o.label)},null,8,go)):c("",!0)],64))),128))])])])):c("",!0)])])])):c("",!0),(i(!0),r(v,null,C(s.columns,(o,f)=>(i(),r("td",{key:f,class:"font-sans p-2"},[s.row[f]&&s.row[f].type&&s.row[f].type==="link"?(i(),r("a",{key:0,target:"_blank",href:s.row[f].href,innerHTML:n.sanitizeHTML(s.row[f].label)},null,8,bo)):c("",!0),typeof s.row[f]=="string"||typeof s.row[f]=="number"?(i(),r(v,{key:1},[o.attributes&&o.attributes.length>0?(i(),r(v,{key:0},[l("h3",{class:"fond-bold text-lg",innerHTML:n.sanitizeHTML(s.row[f])},null,8,po),l("div",vo,[(i(!0),r(v,null,C(o.attributes,g=>(i(),r("div",yo,[l("strong",null,h(g.label),1),k(": "+h(s.row[g.column]),1)]))),256))])],64)):(i(),r("div",{key:1,innerHTML:n.sanitizeHTML(s.row[f])},null,8,_o))],64)):c("",!0),s.row[f]===null?(i(),r("div",ko,h(n.__("Undefined")),1)):c("",!0)]))),128)),!s.prependOptions&&s.showOptions?(i(),r("td",wo,[l("div",xo,[l("button",{onClick:e[3]||(e[3]=o=>n.toggleMenu(o)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-hidden rounded-full w-24 text-sm p-1 border"])},[e[6]||(e[6]=l("i",{class:"las la-ellipsis-h"},null,-1)),k(" "+h(n.__("Options")),1)],2),s.row.$toggled?(i(),r("div",{key:0,onClick:e[4]||(e[4]=o=>n.toggleMenu(o)),class:"absolute w-full h-full z-10 top-0 left-0"})):c("",!0),l("div",Do,[s.row.$toggled?(i(),r("div",Co,[l("div",Mo,[l("div",To,[(i(!0),r(v,null,C(s.row.$actions,(o,f)=>(i(),r(v,{key:f},[["GOTO","TAB"].includes(o.type)?(i(),r("a",{key:0,href:o.url,target:o.type==="TAB"?"_blank":"_self",class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:n.sanitizeHTML(o.label)},null,8,So)):c("",!0),["GET","DELETE","POPUP"].includes(o.type)?(i(),r("a",{key:1,href:"javascript:void(0)",onClick:g=>n.triggerAsync(o),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:n.sanitizeHTML(o.label)},null,8,Eo)):c("",!0)],64))),128))])])])):c("",!0)])])])):c("",!0)],2)}const Ro=D(io,[["render",Fo]]),Oo={data(){return{childrens:[],tabState:new Ae}},props:["active"],computed:{activeComponent(){const t=this.childrens.filter(e=>e.active);return t.length>0?t[0]:!1}},beforeUnmount(){this.tabState.unsubscribe()},watch:{active(t,e){this.childrens.forEach(s=>{s.active=s.identifier===t,s.active&&this.toggle(s)})}},mounted(){this.buildChildrens(this.active)},methods:{__:p,toggle(t){this.$emit("active",t.identifier),this.$emit("changeTab",t.identifier),this.tabState.next(t)},buildChildrens(t){this.childrens=Array.from(this.$el.querySelectorAll(".ns-tab-item")).map(s=>{const u=s.getAttribute("identifier")||void 0;let d=!0;return s.getAttribute("visible")&&(d=s.getAttribute("visible")==="true"),{el:s,active:!!(t&&t===u),identifier:u,closable:s.getAttribute("closable")==="true",initialized:!1,visible:d,label:s.getAttribute("label")||p("Unamed Tab")}}).filter(s=>s.visible),!(this.childrens.filter(s=>s.active).length>0)&&this.childrens.length>0&&(this.childrens[0].active=!0),this.childrens.forEach(s=>{s.active&&this.toggle(s)})}}},Po=["selected-tab"],jo={class:"header ml-4 flex justify-between",style:{"margin-bottom":"-1px"}},Ao={class:"flex flex-auto"},Ho=["onClick"],$o=["onClick"];function Uo(t,e,s,u,d,n){return i(),r("div",{class:"tabs flex flex-col flex-auto ns-tab overflow-hidden","selected-tab":n.activeComponent.identifier},[l("div",jo,[l("div",Ao,[(i(!0),r(v,null,C(d.childrens,(a,o)=>(i(),r("div",{key:a.identifier,onClick:f=>n.toggle(a),class:m([s.active===a.identifier?"border-b-0 active z-10":"border inactive","tab rounded-tl rounded-tr border px-2 py-1 cursor-pointer flex items-center"]),style:{"margin-right":"-1px"}},[l("span",null,h(a.label),1),a.closable?(i(),r("div",{key:0,onClick:f=>t.$emit("close",a),class:"ns-inset-button border border-box-edge text-xs hover:border-error-tertiary error rounded-full h-5 w-5 flex items-center justify-center ml-1"},e[0]||(e[0]=[l("i",{class:"las la-times"},null,-1)]),8,$o)):c("",!0)],10,Ho))),128))]),l("div",null,[w(t.$slots,"extra")])]),w(t.$slots,"default")],8,Po)}const Lo=D(Oo,[["render",Uo]]),Yo={data(){return{selectedTab:{},tabStateSubscriber:null}},computed:{},mounted(){this.tabStateSubscriber=this.$parent.tabState.subscribe(t=>{this.selectedTab=t})},unmounted(){this.tabStateSubscriber.unsubscribe()},props:["label","closable","identifier","padding"]},Bo=["closable","label","identifier"];function Vo(t,e,s,u,d,n){return i(),r("div",{class:m([d.selectedTab.identifier!==s.identifier?"hidden":"","ns-tab-item flex flex-auto overflow-hidden"]),closable:s.closable,label:s.label,identifier:s.identifier},[d.selectedTab.identifier===s.identifier?(i(),r("div",{key:0,class:m(["border rounded flex-auto overflow-y-auto",s.padding||"p-4"])},[w(t.$slots,"default")],2)):c("",!0)],10,Bo)}const No=D(Yo,[["render",Vo]]),Io={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"]},zo=["for"],qo={class:"mt-1 relative border overflow-hidden rounded-md focus:shadow-sm mb-1"},Wo={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Go={class:"text-fontcolor-soft sm:text-sm sm:leading-5"},Qo=["rows","disabled","id","type","placeholder"];function Ko(t,e,s,u,d,n){const a=y("ns-field-description");return i(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-textarea",n.hasError?"has-error":"is-pristine"])},[l("label",{for:s.field.name,class:"block leading-5 font-medium"},h(s.field.label),9,zo),l("div",qo,[s.leading?(i(),r("div",Wo,[l("span",Go,h(s.leading),1)])):c("",!0),R(l("textarea",{rows:s.field.data&&s.field.data.rows||10,disabled:s.field.disabled,"onUpdate:modelValue":e[0]||(e[0]=o=>s.field.value=o),onBlur:e[1]||(e[1]=o=>t.$emit("blur",this)),onChange:e[2]||(e[2]=o=>t.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([n.inputClass,"form-input block w-full sm:text-sm sm:leading-5"]),placeholder:s.placeholder},null,42,Qo),[[A,s.field.value]])]),T(a,{field:s.field},null,8,["field"])],2)}const Zo=D(Io,[["render",Ko]]),au=Object.freeze(Object.defineProperty({__proto__:null,nsAlertPopup:ne,nsAvatar:Te,nsAvatarImage:Se,nsButton:Ve,nsCalendar:ce,nsCheckbox:jt,nsCkeditor:_e,nsCloseButton:Ut,nsConfirmPopup:V,nsCrud:Ps,nsCrudForm:an,nsDate:gn,nsDateRangePicker:fe,nsDateTimePicker:me,nsDatepicker:Pl,nsDaterangePicker:zl,nsDefaultAccounting:Gl,nsDragzone:ai,nsField:Mi,nsFieldDescription:Fi,nsIconButton:Pi,nsInlineMultiselect:Ki,nsInput:nr,nsLink:dr,nsMediaInput:Ma,nsMenu:Ua,nsMultiselect:td,nsNotice:ke,nsNumpad:we,nsNumpadPlus:xe,nsNumpadPopup:id,nsPOSLoadingPopup:De,nsPageTitle:cd,nsPaginate:Ce,nsPromptPopup:Me,nsSearch:kd,nsSearchSelect:Pd,nsSelect:Bd,nsSelectAudio:Gd,nsSpinner:Xd,nsSubmenu:lo,nsSwitch:se,nsTableRow:Ro,nsTabs:Lo,nsTabsItem:No,nsTextarea:Zo},Symbol.toStringTag,{value:"Module"}));export{an as N,id as _,Ua as a,au as b,Pl as c,zl as d,me as e,be as f,Mi as g,Ut as h,Xd as i,ru as j,lo as n};
