import{a as $,p as H,n as v,F as N,P as b,b as Y,i as G}from"./bootstrap-BuidiYeb.js";import{n as D}from"./currency-BCJk0SN4.js";import{_ as c}from"./lang-BINodpp-.js";import{s as L}from"./pos-section-switch-DmfccXVX.js";import{a as Q,d as R,c as W,b as z,P as K,n as J}from"./ns-pos-shipping-popup-63MzfTiC.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as a,o as d,b as o,t as r,r as m,f as x,B as X,F as g,e as S,g as T,w as O,i as q,a as p,h as B,a3 as C,j as V,n as j}from"./runtime-core.esm-bundler-DUdZl5j1.js";import{A as f}from"./action-permissions-pyf1wKQL.js";import{v as Z,w as ee}from"./runtime-dom.esm-bundler-BJBE8XOq.js";import{b as te,g as se,a as oe,n as F}from"./ns-prompt-popup-TBOi7zcm.js";import"./chart-BXKSDqJb.js";import"./ns-orders-preview-popup-D1kM7s0M.js";import"./browser-B-RaiDhA.js";const re={props:["order"],methods:{__,async payOrder(){POS.runPaymentQueue()}},mounted(){for(let e in nsShortcuts)["ns_pos_keyboard_payment"].includes(e)&&nsHotPress.create("ns_pos_keyboard_payment").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,t=>{t.preventDefault(),this.payOrder()})},unmounted(){nsHotPress.destroy("ns_pos_keyboard_payment")}},ne={class:"text-lg hidden md:inline lg:text-2xl"};function ie(e,t,n,u,l,s){return d(),a("div",{onClick:t[0]||(t[0]=i=>s.payOrder()),id:"pay-button",class:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-green-500 text-white hover:bg-green-600 border-r border-green-600 flex-auto"},[t[1]||(t[1]=o("i",{class:"mr-2 text-2xl lg:text-xl las la-cash-register"},null,-1)),o("span",ne,r(s.__("Pay")),1)])}const de=y(re,[["render",ie]]),ae={name:"ns-pos-hold-orders",props:["popup"],data(){return{order:{},title:"",show:!0}},mounted(){this.popupCloser(),this.show=POS.getHoldPopupEnabled(),this.show||this.popup.params.resolve({title:this.title}),this.$refs.reference.focus(),this.$refs.reference.select(),this.order=this.popup.params.order,this.title=this.popup.params.order.title||""},methods:{__:c,nsCurrency:D,popupCloser:$,submitHold(){this.popup.close(),this.popup.params.resolve({title:this.title})}}},le={class:"ns-box shadow-lg w-[85.71vw] md:w-[42.86vw] lg:w-[33.33vw]"},ue={class:"p-2 flex ns-box-header justify-between border-b items-center"},ce={class:"font-semibold"},pe={class:"flex-auto ns-box-body"},_e={class:"border-b h-16 flex items-center justify-center"},he={class:"text-5xl text-font"},be={class:"p-2"},me={class:"input-group border-2 info"},fe=["placeholder"],ye={class:"p-2"},ve={class:"text-fontcolor-soft"},xe={class:"flex ns-box-footer"};function we(e,t,n,u,l,s){const i=m("ns-close-button");return d(),a("div",le,[o("div",ue,[o("h3",ce,r(s.__("Hold Order")),1),o("div",null,[x(i,{onClick:t[0]||(t[0]=_=>n.popup.close())})])]),o("div",pe,[o("div",_e,[o("span",he,r(s.nsCurrency(l.order.total)),1)]),o("div",be,[o("div",me,[X(o("input",{onKeyup:t[1]||(t[1]=ee(_=>s.submitHold(),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=_=>l.title=_),ref:"reference",type:"text",placeholder:s.__("Order Reference"),class:"outline-hidden rounded border-2 p-2 w-full"},null,40,fe),[[Z,l.title]])])]),o("div",ye,[o("p",ve,r(s.__("The current order will be set on hold. You can retrieve this order from the pending order button. Providing a reference to it might help you to identify the order more quickly.")),1)])]),o("div",xe,[o("div",{onClick:t[3]||(t[3]=_=>s.submitHold()),class:"cursor-pointer w-1/2 py-3 flex justify-center items-center bg-green-500 text-white font-semibold"},r(s.__("Confirm")),1),o("div",{onClick:t[4]||(t[4]=_=>n.popup.close()),class:"cursor-pointer w-1/2 py-3 flex justify-center items-center bg-error-secondary text-white font-semibold"},r(s.__("Cancel")),1)])])}const ge=y(ae,[["render",we]]),Pe={props:["order"],methods:{__,async holdOrder(){if(await f.canProceed("nexopos.cart.hold"),this.order.payment_status!=="hold"&&this.order.payments.length>0)return nsSnackBar.error(__("Unable to hold an order which payment status has been updated already."));const e=nsHooks.applyFilters("ns-hold-queue",[ProductsQueue,CustomerQueue,TypeQueue]);for(let n in e)try{const l=await new e[n](this.order).run()}catch{return!1}nsHooks.applyFilters("ns-override-hold-popup",()=>{new Promise((u,l)=>{Popup.show(ge,{resolve:u,reject:l,order:this.order})}).then(u=>{this.order.title=u.title,this.order.payment_status="hold",POS.order.next(this.order);const l=Popup.show(te);POS.submitOrder().then(s=>{l.close(),nsSnackBar.success(s.message)},s=>{l.close(),nsSnackBar.error(s.message)})}).catch(u=>{console.log(u)})})()}},mounted(){for(let e in nsShortcuts)["ns_pos_keyboard_hold_order"].includes(e)&&nsHotPress.create("ns_pos_keyboard_hold_order").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,t=>{t.preventDefault(),this.holdOrder()})},unmounted(){nsHotPress.destroy("ns_pos_keyboard_hold_order")}},ke={class:"text-lg hidden md:inline lg:text-2xl"};function Ce(e,t,n,u,l,s){return d(),a("div",{onClick:t[0]||(t[0]=i=>s.holdOrder()),id:"hold-button",class:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-blue-500 text-white border-r hover:bg-blue-600 border-blue-600 flex-auto"},[t[1]||(t[1]=o("i",{class:"mr-2 text-2xl lg:text-xl las la-pause"},null,-1)),o("span",ke,r(s.__("Hold")),1)])}const Se=y(Pe,[["render",Ce]]),Oe={props:["order","settings"],methods:{__,async openDiscountPopup(e,t,n=null){if(!this.settings.products_discount&&t==="product")return nsSnackBar.error(__("You're not allowed to add a discount on the product."));if(!this.settings.cart_discount&&t==="cart")return nsSnackBar.error(__("You're not allowed to add a discount on the cart."));const u={product:"nexopos.cart.product-discount",cart:"nexopos.cart.discount"};try{await f.canProceed(u[t])}catch{return nsSnackBar.error(__("Your action were'nt granted."))}Popup.show(Q,{reference:e,type:t,onSubmit(l){t==="product"?POS.updateProduct(e,l,n):t==="cart"&&POS.updateCart(e,l)}},{popupClass:"bg-white h:2/3 shadow-lg xl:w-1/4 lg:w-2/5 md:w-2/3 w-full"})}}},Te={class:"text-lg hidden md:inline lg:text-2xl"};function Be(e,t,n,u,l,s){return d(),a("div",{onClick:t[0]||(t[0]=i=>s.openDiscountPopup(n.order,"cart")),id:"discount-button",class:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center border-r border-box-edge flex-auto"},[t[1]||(t[1]=o("i",{class:"mr-2 text-2xl lg:text-xl las la-percent"},null,-1)),o("span",Te,r(s.__("Discount")),1)])}const qe=y(Oe,[["render",Be]]),je={props:["order","settings"],methods:{__,voidOngoingOrder(){POS.voidOrder(this.order)}}},$e={class:"text-lg hidden md:inline lg:text-2xl"};function Ne(e,t,n,u,l,s){return d(),a("div",{onClick:t[0]||(t[0]=i=>s.voidOngoingOrder(n.order)),id:"void-button",class:"flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center bg-red-500 text-white border-box-edge hover:bg-red-600 flex-auto"},[t[1]||(t[1]=o("i",{class:"mr-2 text-2xl lg:text-xl las la-trash"},null,-1)),o("span",$e,r(s.__("Void")),1)])}const De=y(je,[["render",Ne]]),Fe={name:"ns-pos-note-popup",props:["popup"],data(){return{validation:new N,fields:[{label:c("Note"),name:"note",value:"",description:c("More details about this order"),type:"textarea"},{label:c("Display On Receipt"),name:"note_visibility",value:"",options:[{label:c("Yes"),value:"visible"},{label:c("No"),value:"hidden"}],description:c("Will display the note on the receipt"),type:"switch"}]}},mounted(){this.popupCloser(),this.fields.forEach(e=>{e.name==="note"?e.value=this.popup.params.note:e.name==="note_visibility"&&(e.value=this.popup.params.note_visibility)})},methods:{__:c,popupResolver:H,popupCloser:$,closePopup(){this.popupResolver(!1)},saveNote(){if(!this.validation.validateFields(this.fields)){const e=this.validation.validateFieldsErrors(this.fields);return this.validation.triggerFieldsErrors(this.fields,e),this.$forceUpdate(),v.error(c("Unable to proceed the form is not valid."))}return this.popupResolver(this.validation.extractFields(this.fields))}}},He={class:"shadow-lg ns-box w-95vw md:w-[60vw] lg:w-[40vw]"},Ve={class:"p-2 flex justify-between items-center border-b ns-box-header"},Qe={class:"font-bold"},Re={class:"p-2"},Ae={class:"p-2 flex justify-end border-t ns-box-footer"};function Ue(e,t,n,u,l,s){const i=m("ns-close-button"),_=m("ns-field"),h=m("ns-button");return d(),a("div",He,[o("div",Ve,[o("h3",Qe,r(s.__("Order Note")),1),o("div",null,[x(i,{onClick:t[0]||(t[0]=w=>s.closePopup())})])]),o("div",Re,[(d(!0),a(g,null,S(l.fields,(w,P)=>(d(),T(_,{key:P,field:w},null,8,["field"]))),128))]),o("div",Ae,[x(h,{type:"info",onClick:t[1]||(t[1]=w=>s.saveNote())},{default:O(()=>[q(r(s.__("Save")),1)]),_:1})])])}const A=y(Fe,[["render",Ue]]),Me={name:"ns-pos-cart-comment-button",props:{order:{type:Object,required:!0}},data(){return{__:c}},methods:{async openNotePopup(){await f.canProceed("nexopos.cart.comments");try{const e=await new Promise((n,u)=>{const l=this.order.note,s=this.order.note_visibility;b.show(A,{resolve:n,reject:u,note:l,note_visibility:s})}),t={...this.order,...e};POS.order.next(t)}catch(e){e!==!1&&v.error(e.message)}}}},Ee={class:"ns-button"},Ie={class:"ml-1 hidden md:inline-block"};function Ye(e,t,n,u,l,s){return d(),a("div",Ee,[o("button",{onClick:t[0]||(t[0]=i=>s.openNotePopup()),class:"w-full h-10 px-3 outline-hidden"},[t[1]||(t[1]=o("i",{class:"las la-comment"},null,-1)),o("span",Ie,r(l.__("Comments")),1)])])}const Ge=y(Me,[["render",Ye]]),Le={name:"ns-pos-tax-popup",props:["popup"],data(){return{validation:new N,tax_group:[],order:null,orderSubscriber:null,optionsSubscriber:null,options:{},tax_group:[],activeTab:"",group_fields:[{label:c("Select Tax"),name:"tax_group_id",description:c("Define the tax that apply to the sale."),type:"select",disabled:!0,value:"",validation:"required",options:[]},{label:c("Type"),name:"tax_type",disabled:!0,value:"",description:c("Define how the tax is computed"),type:"select",validation:"required",options:[{label:c("Exclusive"),value:"exclusive"},{label:c("Inclusive"),value:"inclusive"}]}]}},mounted(){this.loadGroups(),this.popupCloser(),this.activeTab=this.popup.params.activeTab||"settings",this.group_fields.forEach(e=>{e.value=this.popup.params[e.name]||void 0}),this.orderSubscriber=POS.order.subscribe(e=>{this.order=e}),this.optionsSubscriber=POS.options.subscribe(e=>{this.options=e,["variable_vat","products_variable_vat"].includes(this.options.ns_pos_vat)&&this.group_fields.forEach(t=>t.disabled=!1)})},unmounted(){this.orderSubscriber.unsubscribe(),this.optionsSubscriber.unsubscribe()},methods:{__:c,nsCurrency:D,popupCloser:$,popupResolver:H,changeActive(e){this.activeTab=e},closePopup(){this.popupResolver(!1)},saveTax(){if(!this.validation.validateFields(this.group_fields))return v.error(c("Unable to proceed the form is not valid."));const e=this.validation.extractFields(this.group_fields);e.tax_group={},this.popupResolver(e)},loadGroups(){Y.get("/api/taxes/groups").subscribe(e=>{this.groups=e,this.group_fields.forEach(t=>{t.name==="tax_group_id"&&(t.options=this.groups.map(n=>({label:n.name,value:n.id})))})})}}},We={class:"ns-box shadow-lg w-95vw md:w-[60vw] lg:w-[40vw]"},ze={class:"p-2 flex justify-between items-center border-b ns-box-header"},Ke={class:"text-blog"},Je={class:"p-2 ns-box-body"},Xe={class:"p-2 border-b ns-box-body"},Ze={class:"flex justify-end p-2"},et={key:0,class:"p-2"},tt={key:0,class:"p-2 text-center text-font"},st={key:0,class:"p-2"},ot={class:"border shadow p-2 w-full flex justify-between items-center elevation-surface"};function rt(e,t,n,u,l,s){const i=m("ns-close-button"),_=m("ns-field"),h=m("ns-button"),w=m("ns-tabs-item"),P=m("ns-tabs");return d(),a("div",We,[o("div",ze,[o("h3",Ke,r(s.__("Tax & Summary")),1),o("div",null,[x(i,{onClick:t[0]||(t[0]=k=>s.closePopup())})])]),o("div",Je,[Object.keys(l.options).length>0?(d(),T(P,{key:0,active:l.activeTab,onChangeTab:t[2]||(t[2]=k=>s.changeActive(k))},{default:O(()=>[x(w,{padding:"0",label:s.__("Settings"),identifier:"settings",active:!0},{default:O(()=>[o("div",Xe,[(d(!0),a(g,null,S(l.group_fields,(k,I)=>(d(),T(_,{field:k,key:I},null,8,["field"]))),128))]),o("div",Ze,[x(h,{onClick:t[1]||(t[1]=k=>s.saveTax()),type:"info"},{default:O(()=>[q(r(s.__("Save")),1)]),_:1})])]),_:1},8,["label"]),x(w,{padding:"0",label:s.__("Summary"),identifier:"summary",active:!1},{default:O(()=>[l.order?(d(),a("div",et,[(d(!0),a(g,null,S(l.order.taxes,k=>(d(),a("div",{key:k.id,class:"mb-2 border shadow p-2 w-full flex justify-between items-center elevation-surface"},[o("span",null,r(k.name),1),o("span",null,r(s.nsCurrency(k.tax_value)),1)]))),128)),l.order.taxes.length===0?(d(),a("div",tt,r(s.__("No tax is active")),1)):p("",!0)])):p("",!0)]),_:1},8,["label"]),["products_vat"].includes(l.options.ns_pos_vat)?(d(),T(w,{key:0,padding:"0",label:s.__("Product Taxes"),identifier:"product_taxes",active:!1},{default:O(()=>[l.order?(d(),a("div",st,[o("div",ot,[o("span",null,r(s.__("Product Taxes")),1),o("span",null,r(s.nsCurrency(l.order.products_tax_value)),1)])])):p("",!0)]),_:1},8,["label"])):p("",!0)]),_:1},8,["active"])):p("",!0)])])}const U=y(Le,[["render",rt]]),nt={name:"ns-pos-cart-taxes-button",props:{order:{type:Object,required:!0}},data(){return{__:c}},methods:{async selectTaxGroup(e="settings"){await f.canProceed("nexopos.cart.taxes");try{const t=await new Promise((u,l)=>{const s=this.order.taxes,i=this.order.tax_group_id,_=this.order.tax_type;b.show(U,{resolve:u,reject:l,taxes:s,tax_group_id:i,tax_type:_,activeTab:e})}),n={...this.order,...t};POS.order.next(n)}catch{}}}},it={class:"ns-button"},dt={class:"ml-1 hidden md:inline-block"},at={key:0,class:"ml-1 rounded-full flex items-center justify-center h-6 w-6 bg-info-secondary text-white"};function lt(e,t,n,u,l,s){return d(),a("div",it,[o("button",{onClick:t[0]||(t[0]=i=>s.selectTaxGroup()),class:"w-full h-10 px-3 outline-hidden flex items-center"},[t[1]||(t[1]=o("i",{class:"las la-balance-scale-left"},null,-1)),o("span",dt,r(l.__("Taxes")),1),n.order.taxes&&n.order.taxes.length>0?(d(),a("span",at,r(n.order.taxes.length),1)):p("",!0)])])}const ut=y(nt,[["render",lt]]),ct={name:"ns-pos-cart-coupons-button",props:{order:{type:Object,required:!0}},data(){return{__:c}},methods:{async selectCoupon(){await f.canProceed("nexopos.cart.coupons");try{const e=await new Promise((t,n)=>{b.show(R,{resolve:t,reject:n})})}catch{}}}},pt={class:"ns-button"},_t={class:"ml-1 hidden md:inline-block"},ht={key:0,class:"ml-1 rounded-full flex items-center justify-center h-6 w-6 bg-info-secondary text-white"};function bt(e,t,n,u,l,s){return d(),a("div",pt,[o("button",{onClick:t[0]||(t[0]=i=>s.selectCoupon()),class:"w-full h-10 px-3 outline-hidden flex items-center"},[t[1]||(t[1]=o("i",{class:"las la-tags"},null,-1)),o("span",_t,r(l.__("Coupons")),1),n.order.coupons&&n.order.coupons.length>0?(d(),a("span",ht,r(n.order.coupons.length),1)):p("",!0)])])}const mt=y(ct,[["render",bt]]),ft={name:"ns-pos-order-settings",props:["popup"],mounted(){nsHttpClient.get("/api/fields/ns.pos-order-settings").subscribe(e=>{e.forEach(t=>{t.value=this.popup.params.order[t.name]||""}),this.fields=this.validation.createFields(e)},e=>{}),this.popupCloser()},data(){return{fields:[],validation:new N}},methods:{__,popupCloser,popupResolver,closePopup(){this.popupResolver(!1)},saveSettings(){const e=this.validation.extractFields(this.fields);this.popupResolver(e)}}},yt={class:"shadow-lg flex flex-col ns-box w-95vw h-95vh md:w-[60vw] md:h-[60vh] lg:w-[40vw]"},vt={class:"p-2 border-b ns-box-header items-center flex justify-between"},xt={class:"text-semibold"},wt={class:"p-2 flex-auto border-b ns-box-body overflow-y-auto"},gt={class:"p-2 flex justify-end ns-box-footer"};function Pt(e,t,n,u,l,s){const i=m("ns-close-button"),_=m("ns-field"),h=m("ns-button");return d(),a("div",yt,[o("div",vt,[o("h3",xt,r(s.__("Order Settings")),1),o("div",null,[x(i,{onClick:t[0]||(t[0]=w=>s.closePopup())})])]),o("div",wt,[(d(!0),a(g,null,S(l.fields,(w,P)=>(d(),T(_,{field:w,key:P},null,8,["field"]))),128))]),o("div",gt,[x(h,{onClick:t[1]||(t[1]=w=>s.saveSettings()),type:"info"},{default:O(()=>[q(r(s.__("Save")),1)]),_:1})])])}const M=y(ft,[["render",Pt]]),kt={name:"ns-pos-cart-settings-button",props:{order:{type:Object,required:!0},settings:{type:Object,required:!0}},data(){return{__:c}},methods:{async defineOrderSettings(){if(!this.settings.edit_settings)return v.error(c("You're not allowed to edit the order settings."));await f.canProceed("defineOrderSettings");try{const e=await new Promise((t,n)=>{b.show(M,{resolve:t,reject:n,order:this.order})});POS.order.next({...this.order,...e})}catch{}}}},Ct={class:"ns-button"},St={class:"ml-1 hidden md:inline-block"};function Ot(e,t,n,u,l,s){return d(),a("div",Ct,[o("button",{onClick:t[0]||(t[0]=i=>s.defineOrderSettings()),class:"w-full h-10 px-3 outline-hidden flex items-center"},[t[1]||(t[1]=o("i",{class:"las la-tools"},null,-1)),o("span",St,r(l.__("Settings")),1)])])}const Tt=y(kt,[["render",Ot]]),Bt={name:"ns-pos-quick-product-popup",props:["popup"],methods:{__:c,popupCloser:$,popupResolver:H,close(){this.popupResolver(!1)},async addProduct(){const e=this.validation.extractFields(this.fields),t=this.fields.filter(s=>typeof s.show>"u"||typeof s.show=="function"&&s.show(e)),n=this.validation.validateFields(t);if(!n)return v.error(c("Unable to proceed. The form is not valid."));console.log(n,e);let u=this.validation.extractFields(t);u.$original=()=>({stock_management:"disabled",category_id:0,tax_group:this.tax_groups.filter(s=>parseInt(s.id)===parseInt(u.tax_group_id))[0],tax_group_id:u.tax_group_id,tax_type:u.tax_type}),u.product_type==="product"?(u.unit_name=this.units.filter(s=>s.id===u.unit_id)[0].name,u.quantity=parseFloat(u.quantity),u.unit_price=parseFloat(u.unit_price),u.mode="custom",u.price_with_tax=u.unit_price,u.price_without_tax=u.unit_price,u.tax_value=0):(u.unit_name=c("N/A"),u.unit_price=0,u.quantity=1);const l=await POS.defineQuantities(u,this.units);u.$quantities=()=>l,u=POS.computeProductTax(u),POS.addToCart(u),this.close()},loadData(){this.loaded=!1,G(nsHttpClient.get("/api/units"),nsHttpClient.get("/api/taxes/groups")).subscribe({next:e=>{this.units=e[0],this.tax_groups=e[1],this.fields.filter(t=>{t.name==="tax_group_id"&&(t.options=e[1].map(n=>({label:n.name,value:n.id})),e[1].length>0&&e[1][0].id!==void 0&&(t.value=e[1][0].id||this.options.ns_pos_tax_group)),t.name==="tax_type"&&(t.value=this.options.tax_type||"inclusive"),t.name==="unit_id"&&([0,null,void 0].includes(this.options.ns_pos_quick_product_default_unit)||(t.value=this.options.ns_pos_quick_product_default_unit),t.options=e[0].map(n=>({label:n.name,value:n.id})))}),this.buildForm()},error:e=>{}})},buildForm(){this.fields=this.validation.createFields(this.fields),this.loaded=!0,setTimeout(()=>{this.$el.querySelector("#name").select()},100)}},computed:{form(){return this.validation.extractFields(this.fields)}},data(){return{units:[],options:POS.options.getValue(),tax_group:{},loaded:!1,validation:new N,fields:[{label:c("Name"),name:"name",type:"text",description:c("Provide a unique name for the product."),validation:"required"},{label:c("Product Type"),name:"product_type",type:"select",description:c("Define the product type."),options:[{label:c("Normal"),value:"product"},{label:c("Dynamic"),value:"dynamic"}],value:"product",validation:"required"},{label:c("Rate"),name:"rate",type:"text",description:c("In case the product is computed based on a percentage, define the rate here."),validation:"required",show(e){return e.product_type==="dynamic"}},{label:c("Unit Price"),name:"unit_price",type:"text",description:c("Define what is the sale price of the item."),validation:"required",value:0,show(e){return e.product_type==="product"}},{label:c("Quantity"),name:"quantity",type:"text",value:1,description:c("Set the quantity of the product."),validation:"required",show(e){return e.product_type==="product"}},{label:c("Unit"),name:"unit_id",type:"select",options:[],description:c("Assign a unit to the product."),validation:"required",show(e){return e.product_type==="product"}},{label:c("Tax Type"),name:"tax_type",type:"select",options:[{label:c("Disabled"),value:""},{label:c("Inclusive"),value:"inclusive"},{label:c("Exclusive"),value:"exclusive"}],description:c("Define what is tax type of the item."),show(e){return e.product_type==="product"}},{label:c("Tax Group"),name:"tax_group_id",type:"select",options:[],description:c("Choose the tax group that should apply to the item."),show(e){return e.product_type==="product"}}]}},mounted(){this.popupCloser(),this.loadData()}},qt={class:"w-95vw flex flex-col h-95vh shadow-lg md:w-[60vw] lg:w-[40vw] md:h-[60vh] ns-box"},jt={class:"header ns-box-header border-b flex justify-between p-2 items-center"},$t={class:"ns-box-body p-2 flex-auto overflow-y-auto"},Nt={key:0,class:"h-full w-full flex justify-center items-center"},Dt={class:"ns-box-footer border-t flex justify-between p-2"};function Ft(e,t,n,u,l,s){const i=m("ns-close-button"),_=m("ns-spinner"),h=m("ns-field"),w=m("ns-button");return d(),a("div",qt,[o("div",jt,[o("h3",null,r(s.__("Product / Service")),1),o("div",null,[x(i,{onClick:t[0]||(t[0]=P=>s.close())})])]),o("div",$t,[l.loaded?p("",!0):(d(),a("div",Nt,[x(_)])),l.loaded?(d(!0),a(g,{key:1},S(l.fields,(P,k)=>(d(),a(g,null,[P.show&&P.show(s.form)||!P.show?(d(),T(h,{key:k,field:P},null,8,["field"])):p("",!0)],64))),256)):p("",!0)]),o("div",Dt,[t[2]||(t[2]=o("div",null,null,-1)),o("div",null,[x(w,{onClick:t[1]||(t[1]=P=>s.addProduct()),type:"info"},{default:O(()=>[q(r(s.__("Create")),1)]),_:1})])])])}const E=y(Bt,[["render",Ft]]),Ht={name:"ns-pos-cart-quick-product-button",props:{order:{type:Object,required:!0},options:{type:Object,required:!0}},data(){return{__:c}},methods:{async openAddQuickProduct(){await f.canProceed("nexopos.cart.products");try{const e=await new Promise((t,n)=>{b.show(E,{resolve:t,reject:n})})}catch{}}}},Vt={key:0,class:"ns-button"},Qt={class:"ml-1 hidden md:inline-block"};function Rt(e,t,n,u,l,s){return n.options.ns_pos_quick_product==="yes"?(d(),a("div",Vt,[o("button",{onClick:t[0]||(t[0]=i=>s.openAddQuickProduct()),class:"w-full h-10 px-3 outline-hidden flex items-center"},[t[1]||(t[1]=o("i",{class:"las la-plus"},null,-1)),o("span",Qt,r(l.__("Product")),1)])])):p("",!0)}const At=y(Ht,[["render",Rt]]),Ut={name:"ns-pos-product-price-product",props:["popup"],components:{nsNumpad:oe,nsNumpadPlus:se},computed:{},data(){return{product:{},optionsSubscription:null,options:{},price:0}},mounted(){this.popupCloser(),this.product=this.popup.params.product,this.optionsSubscription=POS.options.subscribe(e=>{this.options=B(e)})},beforeDestroy(){this.optionsSubscription.unsubscribe()},methods:{popupResolver,popupCloser,nsCurrency:D,__,updateProductPrice(e){this.product.unit_price=e},resolveProductPrice(e){this.popupResolver(this.product.unit_price)}}},Mt={class:"ns-box shadow-lg w-95vw md:w-[60vw] lg:w-[40vw]"},Et={class:"popup-heading ns-box-header"},It={class:"flex flex-col ns-box-body"},Yt={class:"h-16 flex items-center justify-center elevation-surface info font-bold"},Gt={class:"text-2xl"};function Lt(e,t,n,u,l,s){const i=m("ns-close-button"),_=m("ns-numpad");return d(),a("div",Mt,[o("div",Et,[o("h3",null,r(s.__("Product Price")),1),o("div",null,[x(i,{onClick:t[0]||(t[0]=h=>s.popupResolver(!1))})])]),o("div",It,[o("div",Yt,[o("h2",Gt,r(s.nsCurrency(l.product.unit_price)),1)]),x(_,{floating:!0,onChanged:t[1]||(t[1]=h=>s.updateProductPrice(h)),onNext:t[2]||(t[2]=h=>s.resolveProductPrice(h)),value:l.product.unit_price},null,8,["value"])])])}const Wt=y(Ut,[["render",Lt]]),zt={name:"ns-pos-cart",data:()=>({popup:null,cartButtons:{},products:[],defaultCartButtons:{nsPosPayButton:C(de),nsPosHoldButton:C(Se),nsPosDiscountButton:C(qe),nsPosVoidButton:C(De)},cartHeaderButtons:{},defaultCartHeaderButtons:{nsPosCartCommentButton:C(Ge),nsPosCartTaxesButton:C(ut),nsPosCartCouponsButton:C(mt),nsPosCartSettingsButton:C(Tt),nsPosCartQuickProductButton:C(At)},visibleSection:null,visibleSectionSubscriber:null,cartButtonsSubscriber:null,cartHeaderButtonSubscriber:null,optionsSubscriber:null,options:{},typeSubscribe:null,orderSubscribe:null,productSubscribe:null,settingsSubscribe:null,settings:{},types:[],order:B({})}),computed:{selectedType(){return this.order.type?this.order.type.label:"N/A"},isVisible(){return this.visibleSection==="cart"},customerName(){return this.order.customer?`${this.order.customer.first_name||this.order.customer.last_name?this.getFirstName():this.getUserName()}`:"N/A"},couponName(){return c("Apply Coupon")}},mounted(){this.cartButtonsSubscriber=POS.cartButtons.subscribe(e=>{this.cartButtons=e}),this.cartHeaderButtonSubscriber=POS.cartHeaderButtons.subscribe(e=>{this.cartHeaderButtons=e}),this.optionsSubscriber=POS.options.subscribe(e=>{this.options=e}),this.typeSubscribe=POS.types.subscribe(e=>this.types=e),this.orderSubscribe=POS.order.subscribe(e=>{this.order=B(e)}),this.productSubscribe=POS.products.subscribe(e=>{this.products=B(e)}),this.settingsSubscribe=POS.settings.subscribe(e=>{this.settings=B(e)}),this.visibleSectionSubscriber=POS.visibleSection.subscribe(e=>{this.visibleSection=B(e)}),nsHooks.addAction("ns-before-cart-reset","ns-pos-cart-buttons",()=>{POS.cartButtons.next(this.defaultCartButtons),POS.cartHeaderButtons.next(this.defaultCartHeaderButtons)});for(let e in nsShortcuts)["ns_pos_keyboard_shipping"].includes(e)&&nsHotPress.create("ns_pos_keyboard_shipping").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,t=>{t.preventDefault(),this.openShippingPopup()}),["ns_pos_keyboard_note"].includes(e)&&nsHotPress.create("ns_pos_keyboard_note").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,t=>{t.preventDefault(),this.openNotePopup()})},unmounted(){this.visibleSectionSubscriber.unsubscribe(),this.typeSubscribe.unsubscribe(),this.orderSubscribe.unsubscribe(),this.productSubscribe.unsubscribe(),this.settingsSubscribe.unsubscribe(),this.optionsSubscriber.unsubscribe(),this.cartButtonsSubscriber.unsubscribe(),this.cartHeaderButtonSubscriber.unsubscribe(),nsHotPress.destroy("ns_pos_keyboard_shipping"),nsHotPress.destroy("ns_pos_keyboard_note")},methods:{__:c,nsCurrency:D,switchTo:L,getFirstName(){return`${this.order.customer.first_name||""} ${this.order.customer.last_name||""}`},getUserName(){return this.order.customer.username},takeRandomClass(){return"border-gray-500 bg-gray-400 text-white hover:bg-gray-500"},displayProductQuantity(e){const t=e.$quantities();if(t&&t.is_weighable&&t.unit){const n=t.unit.identifier;if(["kilogram","gram","miligram","tones"].includes(n))try{const l=ns.language||"en",s=this.getFullLocale(l),_={kilogram:"kilogram",gram:"gram",miligram:"milligram",tones:"metric-ton"}[n]||n;return new Intl.NumberFormat(s,{style:"unit",unit:_,unitDisplay:"short",minimumFractionDigits:0,maximumFractionDigits:3}).format(e.quantity)}catch(l){return console.warn("Failed to format weight quantity:",l),e.quantity}}return e.quantity},getFullLocale(e){return{en:"en-US",de:"de-DE",fr:"fr-FR",es:"es-ES",it:"it-IT",id:"id-ID",ar:"ar-SA",pt:"pt-PT",tr:"tr-TR",km:"km-KH",vi:"vi-VN",sq:"sq-AL"}[e]||`${e}-${e.toUpperCase()}`},async openAddQuickProduct(){await f.canProceed("nexopos.cart.products");try{const e=await new Promise((t,n)=>{b.show(E,{resolve:t,reject:n})})}catch{}},summarizeCoupons(){const e=this.order.coupons.map(t=>t.value);return e.length>0?e.reduce((t,n)=>t+n):0},async changeProductPrice(e){if(e.product_type==="dynamic")return v.error(c("Dynamic product can't have their price updated."));if(this.settings.unit_price_editable)try{await f.canProceed("nexopos.cart.product-price");const t=await new Promise((u,l)=>b.show(Wt,{product:Object.assign({},e),resolve:u,reject:l})),n={...e.$quantities(),custom_price_edit:t,custom_price_with_tax:t,custom_price_without_tax:t};return e.$quantities=()=>n,e.mode="custom",POS.recomputeProducts(POS.products.getValue()),POS.refreshCart(),v.success(c("The product price has been updated."))}catch(t){if(t!==!1)throw v.error(t),t}else return v.error(c("The editable price feature is disabled."))},async selectCoupon(){await f.canProceed("nexopos.cart.coupons");try{const e=await new Promise((t,n)=>{b.show(R,{resolve:t,reject:n})})}catch{}},async defineOrderSettings(){if(!this.settings.edit_settings)return v.error(c("You're not allowed to edit the order settings."));await f.canProceed("defineOrderSettings");try{const e=await new Promise((t,n)=>{b.show(M,{resolve:t,reject:n,order:this.order})});POS.order.next({...this.order,...e})}catch{}},async openNotePopup(){await f.canProceed("nexopos.cart.comments");try{const e=await new Promise((n,u)=>{const l=this.order.note,s=this.order.note_visibility;b.show(A,{resolve:n,reject:u,note:l,note_visibility:s})}),t={...this.order,...e};POS.order.next(t)}catch(e){e!==!1&&v.error(e.message)}},async selectTaxGroup(e="settings"){await f.canProceed("nexopos.cart.taxes");try{const t=await new Promise((u,l)=>{const s=this.order.taxes,i=this.order.tax_group_id,_=this.order.tax_type;b.show(U,{resolve:u,reject:l,taxes:s,tax_group_id:i,tax_type:_,activeTab:e})}),n={...this.order,...t};POS.order.next(n),POS.refreshCart()}catch{}},openTaxSummary(){this.selectTaxGroup("summary")},selectCustomer(){b.show(J)},async openDiscountPopup(e,t,n=null){if(!this.settings.products_discount&&t==="product")return v.error(c("You're not allowed to add a discount on the product."));if(!this.settings.cart_discount&&t==="cart")return v.error(c("You're not allowed to add a discount on the cart."));t==="product"&&(e.disable_flat=!0),await f.canProceed(t==="product"?"nexopos.cart.product-discount":"nexopos.cart.discount");try{const u=await new Promise((l,s)=>{b.show(Q,{reference:e,resolve:l,reject:s,type:t,onSubmit(i){if(i.discount_type==="flat"&&i.discount>e.total_price)return v.error(c("The discount amount can't exceed the total price of the product."));t==="product"?POS.updateProduct(e,i,n):t==="cart"&&POS.updateCart(e,i)}},{popupClass:"bg-white h:2/3 shadow-lg xl:w-1/4 lg:w-2/5 md:w-2/3 w-full"})})}catch{}},async toggleMode(e,t){if(!this.options.ns_pos_allow_wholesale_price)return v.error(c("Unable to change the price mode. This feature has been disabled."));e.mode==="normal"?(await f.canProceed("nexopos.cart.product-wholesale-price"),b.show(F,{title:c("Enable WholeSale Price"),message:c("Would you like to switch to wholesale price ?"),onAction(n){n&&POS.updateProduct(e,{mode:"wholesale"},t)}})):b.show(F,{title:c("Enable Normal Price"),message:c("Would you like to switch to normal price ?"),onAction(n){n&&POS.updateProduct(e,{mode:"normal"},t)}})},async removeUsingIndex(e){await f.canProceed("nexopos.cart.product-delete"),b.show(F,{title:c("Confirm Your Action"),message:c("Would you like to delete this product ?"),onAction(t){t&&POS.removeProductUsingIndex(e)}})},allowQuantityModification(e){return e.product_type==="product"},changeQuantity(e,t){this.allowQuantityModification(e)&&new K(e).run({unit_quantity_id:e.unit_quantity_id,unit_name:e.unit_name,$quantities:e.$quantities}).then(u=>{POS.updateProduct(e,u,t)})},openOrderType(){b.show(z)},openShippingPopup(){b.show(W)}}},Kt={id:"pos-cart",class:"flex-auto flex flex-col"},Jt={key:0,id:"tools",class:"flex pl-2 ns-tab"},Xt={key:0,class:"flex items-center justify-center text-sm rounded-full h-6 w-6 bg-green-500 text-white ml-1"},Zt={class:"rounded shadow ns-tab-item flex-auto flex overflow-hidden"},es={class:"cart-table flex flex-auto flex-col overflow-hidden"},ts={id:"cart-toolbox",class:"w-full p-2 border-b"},ss={class:"border rounded overflow-hidden"},os={class:"flex flex-wrap"},rs={id:"cart-table-header",class:"w-full text-fontcolor font-semibold flex"},is={class:"w-full lg:w-4/6 p-2 border border-l-0 border-t-0"},ds={class:"hidden lg:flex lg:w-1/6 p-2 border-b border-t-0"},as={class:"hidden lg:flex lg:w-1/6 p-2 border border-r-0 border-t-0"},ls={id:"cart-products-table",class:"flex flex-auto flex-col overflow-auto"},us={key:0,class:"text-fontcolor flex"},cs={class:"w-full text-center py-4 border-b"},ps=["product-index"],_s={class:"w-full lg:w-4/6 p-2 border border-l-0 border-t-0"},hs={class:"flex justify-between product-details mb-1"},bs={class:"font-semibold"},ms={class:"-mx-1 flex product-options"},fs={class:"px-1"},ys=["onClick"],vs={key:0,class:"px-1"},xs=["onClick"],ws={class:"flex justify-between product-controls"},gs={class:"-mx-1 flex flex-wrap"},Ps={class:"px-1 w-1/2 md:w-auto mb-1"},ks=["onClick"],Cs={class:"px-1 w-1/2 md:w-auto mb-1"},Ss=["onClick"],Os={key:0},Ts={class:"px-1 w-1/2 md:w-auto mb-1 lg:hidden"},Bs=["onClick"],qs={class:"px-1 w-1/2 md:w-auto mb-1 lg:hidden"},js={class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},$s=["onClick"],Ns={key:0,class:"border-b border-dashed border-secondary p-2"},Ds={class:"hidden lg:flex w-1/6 p-2 border border-r-0 border-t-0 items-center justify-center"},Fs={id:"cart-products-summary",class:"flex"},Hs={key:0,class:"table ns-table w-full text-sm"},Vs={key:0},Qs={width:"200",class:"border p-2",colspan:"2"},Rs={key:0,class:"py-1"},As={key:1,class:"py-1"},Us={width:"200",class:"border p-2 text-right"},Ms={width:"200",class:"border p-2"},Es={width:"200",class:"border p-2"},Is={width:"200",class:"border p-2 text-right"},Ys={key:1},Gs={width:"200",class:"border p-2"},Ls={width:"200",class:"border p-2 text-right"},Ws={width:"200",class:"border p-2"},zs={width:"200",class:"border p-2"},Ks={key:0},Js={key:1},Xs={width:"200",class:"border p-2 text-right"},Zs={key:2},eo={width:"200",class:"border p-2"},to={width:"200",class:"border p-2 text-right"},so={class:"success"},oo={key:0,width:"200",class:"border p-2"},ro={key:1,width:"200",class:"border p-2"},no={width:"200",class:"border p-2"},io={width:"200",class:"border p-2 text-right"},ao={key:1,class:"table ns-table w-full text-sm"},lo={key:0},uo={width:"200",class:"border p-2"},co={key:0,class:"py-1"},po={key:1,class:"py-1"},_o={width:"200",class:"border p-2 text-right"},ho={width:"200",class:"border p-2"},bo={width:"200",class:"border p-2"},mo={class:"flex justify-between"},fo={key:1},yo={width:"200",class:"border p-2"},vo={width:"200",class:"border p-2 text-right"},xo={width:"200",class:"border p-2"},wo={width:"200",class:"border p-2"},go={class:"flex justify-between items-center"},Po={key:0},ko={key:1},Co={key:2},So={width:"200",class:"border p-2"},Oo={class:"success"},To={width:"200",class:"border p-2"},Bo={width:"200",class:"border p-2"},qo={class:"flex justify-between w-full"},jo={class:"h-16 flex flex-shrink-0 border-t border-box-edge",id:"cart-bottom-buttons"};function $o(e,t,n,u,l,s){return d(),a("div",Kt,[e.visibleSection==="cart"?(d(),a("div",Jt,[o("div",{onClick:t[0]||(t[0]=i=>s.switchTo("cart")),class:"flex cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 font-semibold active tab"},[o("span",null,r(s.__("Cart")),1),e.order?(d(),a("span",Xt,r(e.products.length),1)):p("",!0)]),o("div",{onClick:t[1]||(t[1]=i=>s.switchTo("grid")),class:"cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 border-t border-r border-l inactive tab"},r(s.__("Products")),1)])):p("",!0),o("div",Zt,[o("div",es,[o("div",ts,[o("div",ss,[o("div",os,[(d(!0),a(g,null,S(e.cartHeaderButtons,i=>(d(),T(V(i),{key:i,order:e.order,settings:e.settings,options:e.options},null,8,["order","settings","options"]))),128))])])]),o("div",rs,[o("div",is,r(s.__("Product")),1),o("div",ds,r(s.__("Quantity")),1),o("div",as,r(s.__("Total")),1)]),o("div",ls,[e.products.length===0?(d(),a("div",us,[o("div",cs,[o("h3",null,r(s.__("No products added...")),1)])])):p("",!0),(d(!0),a(g,null,S(e.products,(i,_)=>(d(),a("div",{"product-index":_,key:i.barcode,class:"product-item flex"},[o("div",_s,[o("div",hs,[o("h3",bs,r(i.name)+" â€” "+r(i.unit_name),1),o("div",ms,[o("div",fs,[o("a",{onClick:h=>s.removeUsingIndex(_),class:"hover:text-error-secondary cursor-pointer outline-hidden border-dashed py-1 border-b border-error-secondary text-sm"},[...t[17]||(t[17]=[o("i",{class:"las la-trash text-xl"},null,-1)])],8,ys)]),e.options.ns_pos_allow_wholesale_price&&s.allowQuantityModification(i)?(d(),a("div",vs,[o("a",{class:j([i.mode==="wholesale"?"text-success-secondary border-success-secondary":"border-secondary","cursor-pointer outline-hidden border-dashed py-1 border-b text-sm"]),onClick:h=>s.toggleMode(i,_)},[...t[18]||(t[18]=[o("i",{class:"las la-award text-xl"},null,-1)])],10,xs)])):p("",!0)])]),o("div",ws,[o("div",gs,[o("div",Ps,[o("a",{onClick:h=>s.changeProductPrice(i),class:j([i.mode==="wholesale"?"text-success-secondary hover:text-success-secondary border-success-secondary":"border-secondary","cursor-pointer outline-hidden border-dashed py-1 border-b text-sm"])},r(s.__("Price"))+" : "+r(s.nsCurrency(i.unit_price)),11,ks)]),o("div",Cs,[s.allowQuantityModification(i)?(d(),a("a",{key:0,onClick:h=>s.openDiscountPopup(i,"product",_),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},[q(r(s.__("Discount"))+" ",1),i.discount_type==="percentage"?(d(),a("span",Os,r(i.discount_percentage)+"%",1)):p("",!0),q(" : "+r(s.nsCurrency(i.discount)),1)],8,Ss)):p("",!0)]),o("div",Ts,[s.allowQuantityModification(i)?(d(),a("a",{key:0,onClick:h=>s.changeQuantity(i,_),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Quantity"))+": "+r(s.displayProductQuantity(i)),9,Bs)):p("",!0)]),o("div",qs,[o("span",js,r(s.__("Total :"))+" "+r(s.nsCurrency(i.total_price)),1)])])])]),o("div",{onClick:h=>s.changeQuantity(i,_),class:j([s.allowQuantityModification(i)?"cursor-pointer ns-numpad-key":"","hidden lg:flex w-1/6 p-2 border-b items-center justify-center"])},[s.allowQuantityModification(i)?(d(),a("span",Ns,r(s.displayProductQuantity(i)),1)):p("",!0)],10,$s),o("div",Ds,r(s.nsCurrency(i.total_price)),1)],8,ps))),128))]),o("div",Fs,[e.visibleSection==="both"?(d(),a("table",Hs,[o("tbody",null,[["products_vat"].includes(e.options.ns_pos_vat)?(d(),a("tr",Vs,[o("td",Qs,[e.options.ns_pos_price_with_tax==="yes"?(d(),a("span",Rs,r(s.__("Product Taxes (included)")),1)):(d(),a("span",As,r(s.__("Product Taxes")),1))]),o("td",Us,r(s.nsCurrency(e.order.products_tax_value)),1)])):p("",!0),o("tr",null,[o("td",Ms,[o("a",{onClick:t[2]||(t[2]=i=>s.selectCustomer()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Customer"))+": "+r(s.customerName),1)]),o("td",Es,r(s.__("Sub Total")),1),o("td",Is,r(s.nsCurrency(e.order.subtotal)),1)]),e.order.coupons.length>0?(d(),a("tr",Ys,[t[19]||(t[19]=o("td",{width:"200",class:"border p-2"},null,-1)),o("td",Gs,[o("a",{onClick:t[3]||(t[3]=i=>s.selectCoupon()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Coupons")),1)]),o("td",Ls,r(s.nsCurrency(s.summarizeCoupons())),1)])):p("",!0),o("tr",null,[o("td",Ws,[o("a",{onClick:t[4]||(t[4]=i=>s.openOrderType()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Type"))+": "+r(s.selectedType),1)]),o("td",zs,[o("span",null,r(s.__("Discount")),1),e.order.discount_type==="percentage"?(d(),a("span",Ks,"("+r(e.order.discount_percentage)+"%)",1)):p("",!0),e.order.discount_type==="flat"?(d(),a("span",Js,"("+r(s.__("Flat"))+")",1)):p("",!0)]),o("td",Xs,[o("a",{onClick:t[5]||(t[5]=i=>s.openDiscountPopup(e.order,"cart")),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.nsCurrency(e.order.discount)),1)])]),e.order.type&&e.order.type.identifier==="delivery"?(d(),a("tr",Zs,[t[20]||(t[20]=o("td",{width:"200",class:"border p-2"},null,-1)),o("td",eo,[o("a",{onClick:t[6]||(t[6]=i=>s.openShippingPopup()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Shipping")),1)]),o("td",to,r(s.nsCurrency(e.order.shipping)),1)])):p("",!0),o("tr",so,[["flat_vat","variable_vat"].includes(e.options.ns_pos_vat)?(d(),a("td",oo,[o("a",{onClick:t[7]||(t[7]=i=>s.openTaxSummary()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(e.order.tax_group.name?e.order.tax_group.name:s.__("Tax"))+": "+r(s.nsCurrency(e.order.tax_value)),1)])):(d(),a("td",ro)),o("td",no,r(s.__("Total")),1),o("td",io,r(s.nsCurrency(e.order.total)),1)])])])):p("",!0),e.visibleSection==="cart"?(d(),a("table",ao,[o("tbody",null,[["products_vat"].includes(e.options.ns_pos_vat)?(d(),a("tr",lo,[o("td",uo,[e.options.ns_pos_price_with_tax==="yes"?(d(),a("span",co,r(s.__("Product Taxes (included)")),1)):(d(),a("span",po,r(s.__("Product Taxes")),1))]),o("td",_o,r(s.nsCurrency(e.order.products_tax_value)),1)])):p("",!0),o("tr",null,[o("td",ho,[o("a",{onClick:t[8]||(t[8]=i=>s.selectCustomer()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Customer"))+": "+r(s.customerName),1)]),o("td",bo,[o("div",mo,[o("span",null,r(s.__("Sub Total")),1),o("span",null,r(s.nsCurrency(e.order.subtotal)),1)])])]),e.order.coupons.length>0?(d(),a("tr",fo,[t[21]||(t[21]=o("td",{width:"200",class:"border p-2"},null,-1)),o("td",yo,[o("a",{onClick:t[9]||(t[9]=i=>s.selectCoupon()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Coupons")),1)]),o("td",vo,r(s.nsCurrency(s.summarizeCoupons())),1)])):p("",!0),o("tr",null,[o("td",xo,[o("a",{onClick:t[10]||(t[10]=i=>s.openOrderType()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Type"))+": "+r(s.selectedType),1)]),o("td",wo,[o("div",go,[o("p",null,[o("span",null,r(s.__("Discount")),1),e.order.discount_type==="percentage"?(d(),a("span",Po,"("+r(e.order.discount_percentage)+"%)",1)):p("",!0),e.order.discount_type==="flat"?(d(),a("span",ko,"("+r(s.__("Flat"))+")",1)):p("",!0)]),o("a",{onClick:t[11]||(t[11]=i=>s.openDiscountPopup(e.order,"cart")),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.nsCurrency(e.order.discount)),1)])])]),e.order.type&&e.order.type.identifier==="delivery"?(d(),a("tr",Co,[t[23]||(t[23]=o("td",{width:"200",class:"border p-2"},null,-1)),o("td",So,[o("a",{onClick:t[12]||(t[12]=i=>s.openShippingPopup()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Shipping")),1),t[22]||(t[22]=o("span",null,null,-1))])])):p("",!0),o("tr",Oo,[o("td",To,[e.options.ns_pos_vat!=="disabled"?(d(),a(g,{key:0},[e.order&&e.options.ns_pos_tax_type==="exclusive"?(d(),a(g,{key:0},[e.options.ns_pos_price_with_tax==="yes"?(d(),a("a",{key:0,onClick:t[13]||(t[13]=i=>s.openTaxSummary()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Tax"))+": "+r(s.nsCurrency(e.order.tax_value)),1)):e.options.ns_pos_price_with_tax==="no"?(d(),a("a",{key:1,onClick:t[14]||(t[14]=i=>s.openTaxSummary()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Tax Inclusive"))+": "+r(s.nsCurrency(e.order.tax_value)),1)):p("",!0)],64)):e.order&&e.options.ns_pos_tax_type==="inclusive"?(d(),a(g,{key:1},[e.options.ns_pos_price_with_tax==="yes"?(d(),a("a",{key:0,onClick:t[15]||(t[15]=i=>s.openTaxSummary()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Tax Included"))+": "+r(s.nsCurrency(e.order.tax_value)),1)):e.options.ns_pos_price_with_tax==="no"?(d(),a("a",{key:1,onClick:t[16]||(t[16]=i=>s.openTaxSummary()),class:"cursor-pointer outline-hidden border-dashed py-1 border-b border-secondary text-sm"},r(s.__("Tax Included"))+": "+r(s.nsCurrency(e.order.tax_value)),1)):p("",!0)],64)):p("",!0)],64)):p("",!0)]),o("td",Bo,[o("div",qo,[o("span",null,r(s.__("Total")),1),o("span",null,r(s.nsCurrency(e.order.total)),1)])])])])])):p("",!0)]),o("div",jo,[Object.keys(e.cartButtons).length===0?(d(!0),a(g,{key:0},S(new Array(4).fill(),i=>(d(),a("div",{class:j([s.takeRandomClass(),"animate-pulse flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center border-r flex-auto"])},[...t[24]||(t[24]=[o("i",{class:"mx-4 rounded-full bg-slate-300 h-5 w-5"},null,-1),o("div",{class:"text-lg mr-4 hidden md:flex md:flex-auto lg:text-2xl"},[o("div",{class:"h-2 flex-auto bg-slate-200 rounded"})],-1)])],2))),256)):p("",!0),(d(!0),a(g,null,S(e.cartButtons,i=>(d(),T(V(i),{order:e.order,settings:e.settings},null,8,["order","settings"]))),256))])])])])}const Go=y(zt,[["render",$o]]);export{Go as default};
