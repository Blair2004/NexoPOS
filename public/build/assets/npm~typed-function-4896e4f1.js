function R(p,y){var h=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!h){if(Array.isArray(p)||(h=xr(p))||y&&p&&typeof p.length=="number"){h&&(p=h);var P=0,k=function(){};return{s:k,n:function(){return P>=p.length?{done:!0}:{done:!1,value:p[P++]}},e:function(_){throw _},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var U=!0,v=!1,T;return{s:function(){h=h.call(p)},n:function(){var _=h.next();return U=_.done,_},e:function(_){v=!0,T=_},f:function(){try{!U&&h.return!=null&&h.return()}finally{if(v)throw T}}}}function xr(p,y){if(p){if(typeof p=="string")return Ae(p,y);var h=Object.prototype.toString.call(p).slice(8,-1);if(h==="Object"&&p.constructor&&(h=p.constructor.name),h==="Map"||h==="Set")return Array.from(p);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Ae(p,y)}}function Ae(p,y){(y==null||y>p.length)&&(y=p.length);for(var h=0,P=new Array(y);h<y;h++)P[h]=p[h];return P}function B(p){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},B(p)}function xe(){return!0}function M(){return!1}function z(){}var be="Argument is not a typed-function.";function Ee(){function p(e){return B(e)==="object"&&e!==null&&e.constructor===Object}var y=[{name:"number",test:function(r){return typeof r=="number"}},{name:"string",test:function(r){return typeof r=="string"}},{name:"boolean",test:function(r){return typeof r=="boolean"}},{name:"Function",test:function(r){return typeof r=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(r){return r instanceof Date}},{name:"RegExp",test:function(r){return r instanceof RegExp}},{name:"Object",test:p},{name:"null",test:function(r){return r===null}},{name:"undefined",test:function(r){return r===void 0}}],h={name:"any",test:xe,isAny:!0},P,k,U=0,v={createCount:0};function T(e){var r=P.get(e);if(r)return r;var n='Unknown type "'+e+'"',t=e.toLowerCase(),o,f=R(k),i;try{for(f.s();!(i=f.n()).done;)if(o=i.value,o.toLowerCase()===t){n+='. Did you mean "'+o+'" ?';break}}catch(a){f.e(a)}finally{f.f()}throw new TypeError(n)}function F(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",n=r?T(r).index:k.length,t=[],o=0;o<e.length;++o){if(!e[o]||typeof e[o].name!="string"||typeof e[o].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var f=e[o].name;if(P.has(f))throw new TypeError('Duplicate type name "'+f+'"');t.push(f),P.set(f,{name:f,test:e[o].test,isAny:e[o].isAny,index:n+o,conversionsTo:[]})}var i=k.slice(n);k=k.slice(0,n).concat(t).concat(i);for(var a=n+t.length;a<k.length;++a)P.get(k[a]).index=a}function _(){P=new Map,k=[],U=0,F([h],!1)}_(),F(y);function Ce(){var e,r=R(k),n;try{for(r.s();!(n=r.n()).done;)e=n.value,P.get(e).conversionsTo=[]}catch(t){r.e(t)}finally{r.f()}U=0}function te(e){var r=k.filter(function(n){var t=P.get(n);return!t.isAny&&t.test(e)});return r.length?r:["any"]}function G(e){return e&&typeof e=="function"&&"_typedFunctionData"in e}function ae(e,r,n){if(!G(e))throw new TypeError(be);var t=n&&n.exact,o=Array.isArray(r)?r.join(","):r,f=Z(o),i=Y(f);if(!t||i in e.signatures){var a=e._typedFunctionData.signatureMap.get(i);if(a)return a}var s=f.length,c;if(t){c=[];var l;for(l in e.signatures)c.push(e._typedFunctionData.signatureMap.get(l))}else c=e._typedFunctionData.signatures;for(var u=0;u<s;++u){var E=f[u],w=[],b=void 0,m=R(c),O;try{for(m.s();!(O=m.n()).done;){b=O.value;var d=N(b.params,u);if(!(!d||E.restParam&&!d.restParam)){if(!d.hasAny){var D=function(){var j=oe(d);if(E.types.some(function(H){return!j.has(H.name)}))return"continue"}();if(D==="continue")continue}w.push(b)}}}catch(j){m.e(j)}finally{m.f()}if(c=w,c.length===0)break}var C,S=R(c),L;try{for(S.s();!(L=S.n()).done;)if(C=L.value,C.params.length<=s)return C}catch(j){S.e(j)}finally{S.f()}throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+Y(f,", ")+"))")}function Se(e,r,n){return ae(e,r,n).implementation}function Pe(e,r){var n=T(r);if(n.test(e))return e;var t=n.conversionsTo;if(t.length===0)throw new Error("There are no conversions to "+r+" defined.");for(var o=0;o<t.length;o++){var f=T(t[o].from);if(f.test(e))return t[o].convert(e)}throw new Error("Cannot convert "+e+" to "+r)}function Y(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return e.map(function(n){return n.name}).join(r)}function ke(e){var r=e.indexOf("...")===0,n=r?e.length>3?e.slice(3):"any":e,t=n.split("|").map(function(a){return T(a.trim())}),o=!1,f=r?"...":"",i=t.map(function(a){return o=a.isAny||o,f+=a.name+"|",{name:a.name,typeIndex:a.index,test:a.test,isAny:a.isAny,conversion:null,conversionIndex:-1}});return{types:i,name:f.slice(0,-1),hasAny:o,hasConversion:!1,restParam:r}}function Oe(e){var r=e.types.map(function(i){return i.name}),n=Me(r),t=e.hasAny,o=e.name,f=n.map(function(i){var a=T(i.from);return t=a.isAny||t,o+="|"+i.from,{name:i.from,typeIndex:a.index,test:a.test,isAny:a.isAny,conversion:i,conversionIndex:i.index}});return{types:e.types.concat(f),name:o,hasAny:t,hasConversion:f.length>0,restParam:e.restParam}}function oe(e){return e.typeSet||(e.typeSet=new Set,e.types.forEach(function(r){return e.typeSet.add(r.name)})),e.typeSet}function Z(e){var r=[];if(typeof e!="string")throw new TypeError("Signatures must be strings");var n=e.trim();if(n==="")return r;for(var t=n.split(","),o=0;o<t.length;++o){var f=ke(t[o].trim());if(f.restParam&&o!==t.length-1)throw new SyntaxError('Unexpected rest parameter "'+t[o]+'": only allowed for the last parameter');if(f.types.length===0)return null;r.push(f)}return r}function x(e){var r=$(e);return r?r.restParam:!1}function g(e){if(!e||e.types.length===0)return xe;if(e.types.length===1)return T(e.types[0].name).test;if(e.types.length===2){var r=T(e.types[0].name).test,n=T(e.types[1].name).test;return function(f){return r(f)||n(f)}}else{var t=e.types.map(function(o){return T(o.name).test});return function(f){for(var i=0;i<t.length;i++)if(t[i](f))return!0;return!1}}}function je(e){var r,n,t;if(x(e)){r=le(e).map(g);var o=r.length,f=g($(e)),i=function(s){for(var c=o;c<s.length;c++)if(!f(s[c]))return!1;return!0};return function(s){for(var c=0;c<r.length;c++)if(!r[c](s[c]))return!1;return i(s)&&s.length>=o+1}}else return e.length===0?function(s){return s.length===0}:e.length===1?(n=g(e[0]),function(s){return n(s[0])&&s.length===1}):e.length===2?(n=g(e[0]),t=g(e[1]),function(s){return n(s[0])&&t(s[1])&&s.length===2}):(r=e.map(g),function(s){for(var c=0;c<r.length;c++)if(!r[c](s[c]))return!1;return s.length===r.length})}function N(e,r){return r<e.length?e[r]:x(e)?$(e):null}function ee(e,r){var n=N(e,r);return n?oe(n):new Set}function re(e){return e.conversion===null||e.conversion===void 0}function fe(e,r){var n=new Set;return e.forEach(function(t){var o=ee(t.params,r),f,i=R(o),a;try{for(i.s();!(a=i.n()).done;)f=a.value,n.add(f)}catch(s){i.e(s)}finally{i.f()}}),n.has("any")?["any"]:Array.from(n)}function se(e,r,n){var t,o,f=e||"unnamed",i=n,a,s=function(){var m=[];if(i.forEach(function(d){var D=N(d.params,a),C=g(D);(a<d.params.length||x(d.params))&&C(r[a])&&m.push(d)}),m.length===0){if(o=fe(i,a),o.length>0){var O=te(r[a]);return t=new TypeError("Unexpected type of argument in function "+f+" (expected: "+o.join(" or ")+", actual: "+O.join(" | ")+", index: "+a+")"),t.data={category:"wrongType",fn:f,index:a,actual:O,expected:o},{v:t}}}else i=m};for(a=0;a<r.length;a++){var c=s();if(B(c)==="object")return c.v}var l=i.map(function(b){return x(b.params)?1/0:b.params.length});if(r.length<Math.min.apply(null,l))return o=fe(i,a),t=new TypeError("Too few arguments in function "+f+" (expected: "+o.join(" or ")+", index: "+r.length+")"),t.data={category:"tooFewArgs",fn:f,index:r.length,expected:o},t;var u=Math.max.apply(null,l);if(r.length>u)return t=new TypeError("Too many arguments in function "+f+" (expected: "+u+", actual: "+r.length+")"),t.data={category:"tooManyArgs",fn:f,index:r.length,expectedLength:u},t;for(var E=[],w=0;w<r.length;++w)E.push(te(r[w]).join("|"));return t=new TypeError('Arguments of type "'+E.join(", ")+'" do not match any of the defined signatures of function '+f+"."),t.data={category:"mismatch",actual:E},t}function ie(e){for(var r=k.length+1,n=0;n<e.types.length;n++)re(e.types[n])&&(r=Math.min(r,e.types[n].typeIndex));return r}function ue(e){for(var r=U+1,n=0;n<e.types.length;n++)re(e.types[n])||(r=Math.min(r,e.types[n].conversionIndex));return r}function Ie(e,r){if(e.hasAny){if(!r.hasAny)return 1}else if(r.hasAny)return-1;if(e.restParam){if(!r.restParam)return 1}else if(r.restParam)return-1;if(e.hasConversion){if(!r.hasConversion)return 1}else if(r.hasConversion)return-1;var n=ie(e)-ie(r);if(n<0)return-1;if(n>0)return 1;var t=ue(e)-ue(r);return t<0?-1:t>0?1:0}function De(e,r){var n=e.params,t=r.params,o=$(n),f=$(t),i=x(n),a=x(t);if(i&&o.hasAny){if(!a||!f.hasAny)return 1}else if(a&&f.hasAny)return-1;var s=0,c=0,l,u=R(n),E;try{for(u.s();!(E=u.n()).done;)l=E.value,l.hasAny&&++s,l.hasConversion&&++c}catch(J){u.e(J)}finally{u.f()}var w=0,b=0,m=R(t),O;try{for(m.s();!(O=m.n()).done;)l=O.value,l.hasAny&&++w,l.hasConversion&&++b}catch(J){m.e(J)}finally{m.f()}if(s!==w)return s-w;if(i&&o.hasConversion){if(!a||!f.hasConversion)return 1}else if(a&&f.hasConversion)return-1;if(c!==b)return c-b;if(i){if(!a)return 1}else if(a)return-1;var d=(n.length-t.length)*(i?-1:1);if(d!==0)return d;for(var D=[],C=0,S=0;S<n.length;++S){var L=Ie(n[S],t[S]);D.push(L),C+=L}if(C!==0)return C;for(var j,H=0,V=D;H<V.length;H++)if(j=V[H],j!==0)return j;return 0}function Me(e){if(e.length===0)return[];var r=e.map(T);e.length>1&&r.sort(function(s,c){return s.index-c.index});var n=r[0].conversionsTo;if(e.length===1)return n;n=n.concat([]);for(var t=new Set(e),o=1;o<r.length;++o){var f=void 0,i=R(r[o].conversionsTo),a;try{for(i.s();!(a=i.n()).done;)f=a.value,t.has(f.from)||(n.push(f),t.add(f.from))}catch(s){i.e(s)}finally{i.f()}}return n}function Re(e,r){var n=r;if(e.some(function(a){return a.hasConversion})){var t=x(e),o=e.map(Fe);n=function(){for(var s=[],c=t?arguments.length-1:arguments.length,l=0;l<c;l++)s[l]=o[l](arguments[l]);return t&&(s[c]=arguments[c].map(o[c])),r.apply(this,s)}}var f=n;if(x(e)){var i=e.length-1;f=function(){return n.apply(this,ne(arguments,0,i).concat([ne(arguments,i)]))}}return f}function Fe(e){var r,n,t,o,f=[],i=[];switch(e.types.forEach(function(a){a.conversion&&(f.push(T(a.conversion.from).test),i.push(a.conversion.convert))}),i.length){case 0:return function(s){return s};case 1:return r=f[0],t=i[0],function(s){return r(s)?t(s):s};case 2:return r=f[0],n=f[1],t=i[0],o=i[1],function(s){return r(s)?t(s):n(s)?o(s):s};default:return function(s){for(var c=0;c<i.length;c++)if(f[c](s))return i[c](s);return s}}}function _e(e){function r(n,t,o){if(t<n.length){var f=n[t],i=[];if(f.restParam){var a=f.types.filter(re);a.length<f.types.length&&i.push({types:a,name:"..."+a.map(function(s){return s.name}).join("|"),hasAny:a.some(function(s){return s.isAny}),hasConversion:!1,restParam:!0}),i.push(f)}else i=f.types.map(function(s){return{types:[s],name:s.name,hasAny:s.isAny,hasConversion:s.conversion,restParam:!1}});return Be(i,function(s){return r(n,t+1,o.concat([s]))})}else return[o]}return r(e,0,[])}function Ue(e,r){for(var n=Math.max(e.length,r.length),t=0;t<n;t++){var o=ee(e,t),f=ee(r,t),i=!1,a=void 0,s=R(f),c;try{for(s.s();!(c=s.n()).done;)if(a=c.value,o.has(a)){i=!0;break}}catch(b){s.e(b)}finally{s.f()}if(!i)return!1}var l=e.length,u=r.length,E=x(e),w=x(r);return E?w?l===u:u>=l:w?l>=u:l===u}function Le(e){return e.map(function(r){return ye(r)?pe(r.referToSelf.callback):he(r)?ve(r.referTo.references,r.referTo.callback):r})}function He(e,r,n){var t=[],o,f=R(e),i;try{for(f.s();!(i=f.n()).done;){o=i.value;var a=n[o];if(typeof a!="number")throw new TypeError('No definition for referenced signature "'+o+'"');if(a=r[a],typeof a!="function")return!1;t.push(a)}}catch(s){f.e(s)}finally{f.f()}return t}function Ye(e,r,n){for(var t=Le(e),o=new Array(t.length).fill(!1),f=!0;f;){f=!1;for(var i=!0,a=0;a<t.length;++a)if(!o[a]){var s=t[a];if(ye(s))t[a]=s.referToSelf.callback(n),t[a].referToSelf=s.referToSelf,o[a]=!0,i=!1;else if(he(s)){var c=He(s.referTo.references,t,r);c?(t[a]=s.referTo.callback.apply(this,c),t[a].referTo=s.referTo,o[a]=!0,i=!1):f=!0}}if(i&&f)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return t}function $e(e){var r=/\bthis(\(|\.signatures\b)/;Object.keys(e).forEach(function(n){var t=e[n];if(r.test(t.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function qe(e,r){if(v.createCount++,Object.keys(r).length===0)throw new SyntaxError("No signatures provided");v.warnAgainstDeprecatedThis&&$e(r);var n=[],t=[],o={},f=[],i,a=function(){if(!Object.prototype.hasOwnProperty.call(r,i))return"continue";var A=Z(i);if(!A)return"continue";n.forEach(function(q){if(Ue(q,A))throw new TypeError('Conflicting signatures "'+Y(q)+'" and "'+Y(A)+'".')}),n.push(A);var de=t.length;t.push(r[i]);var Ar=A.map(Oe),W=void 0,X=R(_e(Ar)),Te;try{for(X.s();!(Te=X.n()).done;){W=Te.value;var we=Y(W);f.push({params:W,name:we,fn:de}),W.every(function(q){return!q.hasConversion})&&(o[we]=de)}}catch(q){X.e(q)}finally{X.f()}};for(i in r)var s=a();f.sort(De);var c=Ye(t,o,Q),l;for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(o[l]=c[o[l]]);for(var u=[],E=new Map,w=0,b=f;w<b.length;w++)l=b[w],E.has(l.name)||(l.fn=c[l.fn],u.push(l),E.set(l.name,l));for(var m=u[0]&&u[0].params.length<=2&&!x(u[0].params),O=u[1]&&u[1].params.length<=2&&!x(u[1].params),d=u[2]&&u[2].params.length<=2&&!x(u[2].params),D=u[3]&&u[3].params.length<=2&&!x(u[3].params),C=u[4]&&u[4].params.length<=2&&!x(u[4].params),S=u[5]&&u[5].params.length<=2&&!x(u[5].params),L=m&&O&&d&&D&&C&&S,j=0;j<u.length;++j)u[j].test=je(u[j].params);for(var H=m?g(u[0].params[0]):M,V=O?g(u[1].params[0]):M,J=d?g(u[2].params[0]):M,Ve=D?g(u[3].params[0]):M,We=C?g(u[4].params[0]):M,Xe=S?g(u[5].params[0]):M,Ze=m?g(u[0].params[1]):M,Ne=O?g(u[1].params[1]):M,er=d?g(u[2].params[1]):M,rr=D?g(u[3].params[1]):M,nr=C?g(u[4].params[1]):M,tr=S?g(u[5].params[1]):M,K=0;K<u.length;++K)u[K].implementation=Re(u[K].params,u[K].fn);var ar=m?u[0].implementation:z,or=O?u[1].implementation:z,fr=d?u[2].implementation:z,sr=D?u[3].implementation:z,ir=C?u[4].implementation:z,ur=S?u[5].implementation:z,cr=m?u[0].params.length:-1,lr=O?u[1].params.length:-1,vr=d?u[2].params.length:-1,pr=D?u[3].params.length:-1,hr=C?u[4].params.length:-1,yr=S?u[5].params.length:-1,gr=L?6:0,mr=u.length,dr=u.map(function(I){return I.test}),Tr=u.map(function(I){return I.implementation}),wr=function(){for(var A=gr;A<mr;A++)if(dr[A](arguments))return Tr[A].apply(this,arguments);return v.onMismatch(e,arguments,u)};function Q(I,A){return arguments.length===cr&&H(I)&&Ze(A)?ar.apply(this,arguments):arguments.length===lr&&V(I)&&Ne(A)?or.apply(this,arguments):arguments.length===vr&&J(I)&&er(A)?fr.apply(this,arguments):arguments.length===pr&&Ve(I)&&rr(A)?sr.apply(this,arguments):arguments.length===hr&&We(I)&&nr(A)?ir.apply(this,arguments):arguments.length===yr&&Xe(I)&&tr(A)?ur.apply(this,arguments):wr.apply(this,arguments)}try{Object.defineProperty(Q,"name",{value:e})}catch{}return Q.signatures=o,Q._typedFunctionData={signatures:u,signatureMap:E},Q}function ce(e,r,n){throw se(e,r,n)}function le(e){return ne(e,0,e.length-1)}function $(e){return e[e.length-1]}function ne(e,r,n){return Array.prototype.slice.call(e,r,n)}function ze(e,r){for(var n=0;n<e.length;n++)if(r(e[n]))return e[n]}function Be(e,r){return Array.prototype.concat.apply([],e.map(r))}function Ge(){var e=le(arguments).map(function(n){return Y(Z(n))}),r=$(arguments);if(typeof r!="function")throw new TypeError("Callback function expected as last argument");return ve(e,r)}function ve(e,r){return{referTo:{references:e,callback:r}}}function pe(e){if(typeof e!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:e}}}function he(e){return e&&B(e.referTo)==="object"&&Array.isArray(e.referTo.references)&&typeof e.referTo.callback=="function"}function ye(e){return e&&B(e.referToSelf)==="object"&&typeof e.referToSelf.callback=="function"}function ge(e,r){if(!e)return r;if(r&&r!==e){var n=new Error("Function names do not match (expected: "+e+", actual: "+r+")");throw n.data={actual:r,expected:e},n}return e}function Je(e){var r;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(G(e[n])||typeof e[n].signature=="string")&&(r=ge(r,e[n].name));return r}function Ke(e,r){var n;for(n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(n in e&&r[n]!==e[n]){var t=new Error('Signature "'+n+'" is defined twice');throw t.data={signature:n,sourceFunction:r[n],destFunction:e[n]},t}e[n]=r[n]}}var Qe=v;v=function(r){for(var n=typeof r=="string",t=n?1:0,o=n?r:"",f={},i=t;i<arguments.length;++i){var a=arguments[i],s={},c=void 0;if(typeof a=="function"?(c=a.name,typeof a.signature=="string"?s[a.signature]=a:G(a)&&(s=a.signatures)):p(a)&&(s=a,n||(c=Je(a))),Object.keys(s).length===0){var l=new TypeError("Argument to 'typed' at index "+i+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw l.data={index:i,argument:a},l}n||(o=ge(o,c)),Ke(f,s)}return qe(o||"",f)},v.create=Ee,v.createCount=Qe.createCount,v.onMismatch=ce,v.throwMismatchError=ce,v.createError=se,v.clear=_,v.clearConversions=Ce,v.addTypes=F,v._findType=T,v.referTo=Ge,v.referToSelf=pe,v.convert=Pe,v.findSignature=ae,v.find=Se,v.isTypedFunction=G,v.warnAgainstDeprecatedThis=!0,v.addType=function(e,r){var n="any";r!==!1&&P.has("Object")&&(n="Object"),v.addTypes([e],n)};function me(e){if(!e||typeof e.from!="string"||typeof e.to!="string"||typeof e.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(e.to===e.from)throw new SyntaxError('Illegal to define conversion from "'+e.from+'" to itself.')}return v.addConversion=function(e){me(e);var r=T(e.to);if(r.conversionsTo.every(function(n){return n.from!==e.from}))r.conversionsTo.push({from:e.from,convert:e.convert,index:U++});else throw new Error('There is already a conversion from "'+e.from+'" to "'+r.name+'"')},v.addConversions=function(e){e.forEach(v.addConversion)},v.removeConversion=function(e){me(e);var r=T(e.to),n=ze(r.conversionsTo,function(o){return o.from===e.from});if(!n)throw new Error("Attempt to remove nonexistent conversion from "+e.from+" to "+e.to);if(n.convert!==e.convert)throw new Error("Conversion to remove does not match existing conversion");var t=r.conversionsTo.indexOf(n);r.conversionsTo.splice(t,1)},v.resolve=function(e,r){if(!G(e))throw new TypeError(be);for(var n=e._typedFunctionData.signatures,t=0;t<n.length;++t)if(n[t].test(r))return n[t];return null},v}const br=Ee();export{br as t};
