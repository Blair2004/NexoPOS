class h{listeners=new Object;constructor(){document.addEventListener("keydown",e=>this.processEvent(e))}processEvent(e){for(let n in this.listeners){const s=this.listeners[n].getConfig();s.hidden.length>0&&s.hidden.filter(i=>!(i instanceof HTMLElement)&&document.querySelector(i)===null).length!==s.hidden.length||s.visible.length>0&&!(s.visible.filter(i=>i instanceof HTMLElement||document.querySelector(i)!==null).length===s.visible.length)||s.callbacks.forEach(t=>{typeof t.action=="string"?this.processSingleAction({action:t.action.trim(),callback:t.callback}):typeof t.action=="object"&&t.action!==null&&t.action.length>0&&t.action.forEach(i=>{this.processSingleAction({action:i.toString().trim(),callback:t.callback})})})}}processSingleAction({action:e,callback:n}){const s=e.split("+"),t={ctrlKey:!1,altKey:!1,shiftKey:!1};s.forEach(l=>{switch(l){case"ctrl":t.ctrlKey=!0;break;case"alt":t.altKey=!0;break;case"shift":t.shiftKey=!0;break}});const i=s.filter(l=>!["ctrl","alt","shift"].includes(l));this.executeCallback({event,combinableKeys:t,callback:n,key:i[0]})}executeCallback({event:e,callback:n,combinableKeys:s,key:t}){if(e.key!==void 0&&e.key.toLowerCase()===t.toLowerCase()){let i=!0;for(let l in s)e[l]!==s[l]&&(i=!1);i&&n(e,t)}}create(e){return this.listeners[e]=new c}destroy(e){delete this.listeners[e]}}class c{visible=[];hidden=[];callbacks=[];whenVisible(e){return typeof e=="object"?this.visible.push(...e):this.visible.push(e),this}clearVisible(){return this.visible=[],this}whenNotVisible(e){return e.length>0?this.hidden.push(...e):this.hidden.push(e),this}clearHidden(){return this.hidden=[],this}whenPressed(e,n){return this.callbacks.push({action:e,callback:n}),this}clearCallbacks(){return this.callbacks=[],this}getConfig(){return{callbacks:this.callbacks,hidden:this.hidden,visible:this.visible}}}export{h as N};
